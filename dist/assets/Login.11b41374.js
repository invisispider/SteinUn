import{d as h,u as _,r as c,a as f,c as g,w as u,v as d,b as t,e as I,f as w,_ as v,g as y,o as b}from"./index.be1fd971.js";import{o as A,I as U,f as R,e as k,a as i,s as S}from"./firebaseconfig.da9c72da.js";const C=["onSubmit"],V=t("img",{src:v},null,-1),x=t("h2",null,"Kenny Logins",-1),B=t("i",{class:"material-icons"},"supervisor_account",-1),N=t("i",{class:"material-icons"},"password",-1),T=t("input",{type:"submit",name:"submit"},null,-1),D=t("i",{class:"material-icons"},"grade",-1),E=t("br",null,null,-1),M=t("i",{class:"material-icons christmas-icon"},"build",-1),W=h({setup(P){const e=_(),m=y(),r=c(""),l=c(""),p=()=>{S(i,l.value,r.value).then(o=>{const a=o.user;e.setUid(a.uid),e.setIsIn(),e.setAuthIsReady(),i.currentUser.getIdTokenResult().then(s=>{s.claims.admin&&(console.info("Admin logged in"),e.setAdmin())}).catch(s=>{console.log(s)}),m.push("/Chat")}).catch(o=>{console.error(o.code,o.message)})};return A(i,async o=>{if(o){e.setIsIn(),e.setUid(await o.uid);const a=U(R,"users",o.uid),s=await k(a);s?e.setUsername(await s.data().username):console.error("No user listing in database!"),e.setAuthIsReady(),i.currentUser.getIdTokenResult().then(n=>{n.claims.admin&&(console.info("Admin on state change"),e.setAdmin())}).catch(n=>{console.error(n.code,n.message)})}else e.setAuthIsReady(),console.info("auth ready")}),(o,a)=>f(e).username?w("",!0):(b(),g("form",{key:0,class:"login",onSubmit:I(p,["prevent"]),autocomplete:"on",method:"dialog"},[V,x,u(t("input",{type:"email",name:"username",autocomplete:"username email","onUpdate:modelValue":a[0]||(a[0]=s=>l.value=s)},null,512),[[d,l.value]]),B,u(t("input",{type:"password",name:"password",autocomplete:"current-password","onUpdate:modelValue":a[1]||(a[1]=s=>r.value=s)},null,512),[[d,r.value]]),N,T,D,E,M],40,C))}});export{W as default};
