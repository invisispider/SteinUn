import{E as Uu,R as Vu,T as Hu,h as zu,i as Gu,j as Yu,k as Ku,l as Xu,m as Wu,n as Zu,p as Qu,q as Ju,s as $u,t as qu,x as ec,y as tc,z as ns,A as rc,r as Bn,B as nc,C as ac,D as oc,F as sc,G as ic,H as lc,I as uc,J as cc,K as dc,a as as,L as vc,M as fc,N as os,O as mc,P as hc,Q as Oa,S as pc,U as gc,V as yc,W as Sc,X as bc,Y as Ec,Z as Rc,_ as wa,$ as xc,a0 as Tc,a1 as Ac,a2 as _c,a3 as Mc,a4 as Ic,a5 as Oc,a6 as wc,a7 as Cc,a8 as Bc,a9 as Ca,aa as Lc,f as gn,c as Nr,b as ur,ab as Nc,ac as Pc,ad as kc,ae as Fc,af as Dc,ag as jc,ah as ss,ai as Uc,d as is,aj as Vc,ak as Hc,al as zc,am as Gc,an as Yc,ao as Kc,ap as Xc,aq as Wc,ar as Zc,as as Qc,at as Jc,au as $c,av as qc,aw as e1,ax as t1,ay as r1,az as n1,aA as a1,aB as o1,aC as s1,aD as i1,aE as l1,aF as u1,aG as c1,aH as d1,aI as v1,aJ as f1,aK as m1,aL as ls,aM as h1,aN as p1,aO as g1,aP as us,aQ as y1,o as Pr,aR as S1,aS as b1,aT as E1,aU as R1,aV as x1,aW as Ba,aX as T1,aY as A1,aZ as _1,a_ as M1,a$ as I1,b0 as O1,b1 as w1,b2 as C1,b3 as B1,b4 as L1,b5 as N1,b6 as P1,b7 as k1,b8 as F1,b9 as D1,ba as j1,bb as U1,bc as V1,bd as H1,be as z1,bf as G1,bg as cs,bh as Y1,bi as K1,bj as X1,bk as W1,bl as Z1,w as ra,bm as Q1,bn as J1,bo as $1,bp as q1,bq as ed,br as td,bs as rd,bt as nd,bu as ad,bv as od,bw as sd,bx as id,by as ld,bz as ud,bA as cd,bB as dd,bC as vd,bD as ds,v as La,bE as fd,bF as md,e as na,u as hd,g as pd}from"./index.b76d7ea5.js";import{_ as Fa,f as rn,R as Mr,F as vs,k as Pn,x as Ur,c as Na,I as gd,d as yd,a as Sd,g as sa,Q as Da,j as ja,K as bd,p as Ed,e as Rd,y as xd,q as Xo,O as Wo,h as fs,r as ms,i as hs,l as Td,m as Ad,n as Zo,t as _d,u as Md,v as Id,w as Od,z as wd,o as Cd,b as Bd}from"./firebaseconfig.e85906bf.js";/**
* vue v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Ld=()=>{};var Nd=Object.freeze(Object.defineProperty({__proto__:null,compile:Ld,EffectScope:Uu,ReactiveEffect:Vu,TrackOpTypes:Hu,TriggerOpTypes:zu,customRef:Gu,effect:Yu,effectScope:Ku,getCurrentScope:Xu,isProxy:Wu,isReactive:Zu,isReadonly:Qu,isRef:Ju,isShallow:$u,markRaw:qu,onScopeDispose:ec,proxyRefs:tc,reactive:ns,readonly:rc,ref:Bn,shallowReactive:nc,shallowReadonly:ac,shallowRef:oc,stop:sc,toRaw:ic,toRef:lc,toRefs:uc,toValue:cc,triggerRef:dc,unref:as,camelize:vc,capitalize:fc,normalizeClass:os,normalizeProps:mc,normalizeStyle:hc,toDisplayString:Oa,toHandlerKey:pc,BaseTransition:gc,BaseTransitionPropsValidators:yc,Comment:Sc,DeprecationTypes:bc,ErrorCodes:Ec,ErrorTypeStrings:Rc,Fragment:wa,KeepAlive:xc,Static:Tc,Suspense:Ac,Teleport:_c,Text:Mc,assertNumber:Ic,callWithAsyncErrorHandling:Oc,callWithErrorHandling:wc,cloneVNode:Cc,compatUtils:Bc,computed:Ca,createBlock:Lc,createCommentVNode:gn,createElementBlock:Nr,createElementVNode:ur,createHydrationRenderer:Nc,createPropsRestProxy:Pc,createRenderer:kc,createSlots:Fc,createStaticVNode:Dc,createTextVNode:jc,createVNode:ss,defineAsyncComponent:Uc,defineComponent:is,defineEmits:Vc,defineExpose:Hc,defineModel:zc,defineOptions:Gc,defineProps:Yc,defineSlots:Kc,devtools:Xc,getCurrentInstance:Wc,getTransitionRawChildren:Zc,guardReactiveProps:Qc,h:Jc,handleError:$c,hasInjectionContext:qc,initCustomFormatter:e1,inject:t1,isMemoSame:r1,isRuntimeOnly:n1,isVNode:a1,mergeDefaults:o1,mergeModels:s1,mergeProps:i1,nextTick:l1,onActivated:u1,onBeforeMount:c1,onBeforeUnmount:d1,onBeforeUpdate:v1,onDeactivated:f1,onErrorCaptured:m1,onMounted:ls,onRenderTracked:h1,onRenderTriggered:p1,onServerPrefetch:g1,onUnmounted:us,onUpdated:y1,openBlock:Pr,popScopeId:S1,provide:b1,pushScopeId:E1,queuePostFlushCb:R1,registerRuntimeCompiler:x1,renderList:Ba,renderSlot:T1,resolveComponent:A1,resolveDirective:_1,resolveDynamicComponent:M1,resolveFilter:I1,resolveTransitionHooks:O1,setBlockTracking:w1,setDevtoolsHook:C1,setTransitionHooks:B1,ssrContextKey:L1,ssrUtils:N1,toHandlers:P1,transformVNodeArgs:k1,useAttrs:F1,useModel:D1,useSSRContext:j1,useSlots:U1,useTransitionState:V1,version:H1,warn:z1,watch:G1,watchEffect:cs,watchPostEffect:Y1,watchSyncEffect:K1,withAsyncContext:X1,withCtx:W1,withDefaults:Z1,withDirectives:ra,withMemo:Q1,withScopeId:J1,Transition:$1,TransitionGroup:q1,VueElement:ed,createApp:td,createSSRApp:rd,defineCustomElement:nd,defineSSRCustomElement:ad,hydrate:od,initDirectivesForSSR:sd,render:id,useCssModule:ld,useCssVars:ud,vModelCheckbox:cd,vModelDynamic:dd,vModelRadio:vd,vModelSelect:ds,vModelText:La,vShow:fd,withKeys:md,withModifiers:na},Symbol.toStringTag,{value:"Module"}));const Ua="users",ia="chatRooms",Pd="messages",Va=We=>`${ia}/${We}/${Pd}`,tn="timestamp",Qo="lastUpdated",kd="typingUsers",Fd="reactions",aa="users",Ha=gd,Dd=bd(),Nn=We=>yd(We).then(ut=>({data:la(ut),docs:ut.docs})),ps=We=>Sd(We).then(ut=>bs(ut)),za=(We,ut)=>Ed(We,ut),Ga=(We,ut)=>Rd(We,ut),gs=(We,ut)=>xd(sa(rn,We,ut)),jd=Fa(rn,Ua),ys=We=>sa(rn,Ua,We),Ud=We=>ps(ys(We)),Jo=We=>za(jd,We),$o=(We,ut)=>Ga(ys(We),ut),oa=Fa(rn,ia),Vd=We=>sa(rn,ia,We),Hd=(We,ut,Rt)=>Rt?Mr(oa,Na(aa,"array-contains",We),Ur(Qo,"desc"),Pn(ut),vs(Rt)):Mr(oa,Na(aa,"array-contains",We),Ur(Qo,"desc"),Pn(ut)),zd=We=>Nn(We),qo=We=>za(oa,We),kn=(We,ut)=>Ga(Vd(We),ut),Gd=We=>gs(ia,We),es=(We,ut)=>Nn(Mr(oa,Na(Ua,"==",[We,ut]))),Yd=(We,ut)=>kn(We,{[aa]:Da(ut)}),Kd=(We,ut)=>kn(We,{[aa]:ja(ut)}),Xd=(We,ut,Rt)=>{const Ie=Rt==="add"?Da(ut):ja(ut);return kn(We,{[kd]:Ie})},Vr=We=>Fa(rn,Va(We)),Ss=(We,ut)=>sa(rn,Va(We),ut),ts=(We,ut,Rt)=>Nn(Rt?Mr(Vr(We),Ur(tn,"desc"),Pn(ut),vs(Rt)):ut?Mr(Vr(We),Ur(tn,"desc"),Pn(ut)):Vr(We)),Wd=(We,ut)=>ps(Ss(We,ut)),Zd=(We,ut)=>za(Vr(We),ut),Ln=(We,ut,Rt)=>Ga(Ss(We,ut),Rt),Qd=(We,ut)=>gs(Va(We),ut),Jd=(We,ut)=>Ha(We,Rt=>{ut(la(Rt))}),$d=(We,ut,Rt)=>ut&&Rt?Mr(Vr(We),Ur(tn),Wo(ut),Xo(Rt)):ut?Mr(Vr(We),Ur(tn),Wo(ut)):Rt?Mr(Vr(We),Ur(tn),Xo(Rt)):Mr(Vr(We),Ur(tn)),qd=(We,ut,Rt,Ie)=>Ha($d(We,ut,Rt),cr=>{Ie(la(cr))}),bs=We=>({...We.data(),id:We.id}),la=We=>{const ut=[];return We.forEach(Rt=>{ut.push(bs(Rt))}),ut},ev=We=>Mr(Vr(We),Ur(tn,"desc"),Pn(1)),tv=(We,ut)=>Ha(Mr(ev(We)),Rt=>{ut(la(Rt))}),rv=(We,ut,Rt,Ie,cr)=>{const h=cr==="add"?Da(Rt):ja(Rt);return Ln(We,ut,{[`${Fd}.${Ie}`]:h})},nv=fs,Pa=We=>ms(hs,"/status/"+We),av=We=>{const ut={state:"offline",lastChanged:Zo()},Rt={state:"online",lastChanged:Zo()},Ie=ms(hs,".info/connected");fs(Ie,cr=>{cr.val()===!0&&Td(Pa(We)).set(ut).then(()=>{Ad(Pa(We),Rt)})})},ov="chatFiles",Es=(We,ut,Rt)=>Md(wd,`${ov}/${We}/${ut}/${Rt}`),rs=(We,ut,Rt)=>_d(Es(We,ut,`${Rt.name}.${Rt.extension||Rt.type}`)),sv=We=>Id(We),iv=(We,ut,Rt,Ie)=>{const cr=Es(We,ut,`${Rt.name}.${Ie}`);return Od(cr,Rt.blob,{contentType:Ie})},lv=(We,ut,Rt,Ie,cr,h,T)=>{const e=iv(We,ut,Rt,Ie);e.on("state_changed",n=>{const s=Math.round(n.bytesTransferred/n.totalBytes*100);cr(s)},n=>{h(n)},async()=>{const n=await sv(e.snapshot.ref);T(n)})},ta=(We,ut)=>String(We).padStart(ut,"0"),uv=(We,ut)=>We.getFullYear()===ut.getFullYear()&&We.getMonth()===ut.getMonth()&&We.getDate()===ut.getDate(),ka=(We,ut="")=>{if(!We)return;const Rt=We.seconds?new Date(We.seconds*1e3):We;if(ut==="HH:mm")return`${ta(Rt.getHours(),2)}:${ta(Rt.getMinutes(),2)}`;if(ut==="DD MMMM YYYY"){const Ie={month:"long",year:"numeric",day:"numeric"};return`${new Intl.DateTimeFormat("en-US",Ie).format(Rt)}`}else if(ut==="DD/MM/YY"){const Ie={month:"numeric",year:"numeric",day:"numeric"};return`${new Intl.DateTimeFormat("en-US",Ie).format(Rt)}`}else if(ut==="DD MMMM, HH:mm"){const Ie={month:"long",day:"numeric"};return`${new Intl.DateTimeFormat("en-US",Ie).format(Rt)}, ${ta(Rt.getHours(),2)}:${ta(Rt.getMinutes(),2)}`}return Rt},Ia=(We,ut)=>{const Rt=uv(We,new Date)?"HH:mm":"DD/MM/YY",Ie=ka(ut,Rt);return Rt==="HH:mm"?`Today, ${Ie}`:Ie};var cv=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function dv(We){return We&&We.__esModule&&Object.prototype.hasOwnProperty.call(We,"default")?We.default:We}function vv(We){if(We.__esModule)return We;var ut=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(We).forEach(function(Rt){var Ie=Object.getOwnPropertyDescriptor(We,Rt);Object.defineProperty(ut,Rt,Ie.get?Ie:{enumerable:!0,get:function(){return We[Rt]}})}),ut}var Rs={exports:{}},fv=vv(Nd);(function(We){(()=>{var ut={8118:(h,T)=>{T.Z=(e,n)=>{const s=e.__vccOpts||e;for(const[i,o]of n)s[i]=o;return s}},9662:(h,T,e)=>{var n=e(614),s=e(6330),i=TypeError;h.exports=function(o){if(n(o))return o;throw i(s(o)+" is not a function")}},9483:(h,T,e)=>{var n=e(4411),s=e(6330),i=TypeError;h.exports=function(o){if(n(o))return o;throw i(s(o)+" is not a constructor")}},6077:(h,T,e)=>{var n=e(614),s=String,i=TypeError;h.exports=function(o){if(typeof o=="object"||n(o))return o;throw i("Can't set "+s(o)+" as a prototype")}},1223:(h,T,e)=>{var n=e(5112),s=e(30),i=e(3070).f,o=n("unscopables"),m=Array.prototype;m[o]==null&&i(m,o,{configurable:!0,value:s(null)}),h.exports=function(d){m[o][d]=!0}},1530:(h,T,e)=>{var n=e(8710).charAt;h.exports=function(s,i,o){return i+(o?n(s,i).length:1)}},5787:(h,T,e)=>{var n=e(7976),s=TypeError;h.exports=function(i,o){if(n(o,i))return i;throw s("Incorrect invocation")}},9670:(h,T,e)=>{var n=e(111),s=String,i=TypeError;h.exports=function(o){if(n(o))return o;throw i(s(o)+" is not an object")}},4019:h=>{h.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"},7556:(h,T,e)=>{var n=e(7293);h.exports=n(function(){if(typeof ArrayBuffer=="function"){var s=new ArrayBuffer(8);Object.isExtensible(s)&&Object.defineProperty(s,"a",{value:8})}})},260:(h,T,e)=>{var n=e(4019),s=e(9781),i=e(7854),o=e(614),m=e(111),d=e(2597),f=e(648),S=e(6330),g=e(8880),R=e(8052),x=e(3070).f,E=e(7976),p=e(9518),O=e(7674),M=e(5112),A=e(9711),L=e(9909),V=L.enforce,K=L.get,F=i.Int8Array,k=F&&F.prototype,l=i.Uint8ClampedArray,P=l&&l.prototype,H=F&&p(F),Z=k&&p(k),Q=Object.prototype,ee=i.TypeError,te=M("toStringTag"),fe=A("TYPED_ARRAY_TAG"),de="TypedArrayConstructor",_=n&&!!O&&f(i.opera)!=="Opera",Y=!1,b,D,X,q={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},U={BigInt64Array:8,BigUint64Array:8},v=function(re){if(!m(re))return!1;var ae=f(re);return ae==="DataView"||d(q,ae)||d(U,ae)},u=function(j){var re=p(j);if(!!m(re)){var ae=K(re);return ae&&d(ae,de)?ae[de]:u(re)}},c=function(j){if(!m(j))return!1;var re=f(j);return d(q,re)||d(U,re)},y=function(j){if(c(j))return j;throw ee("Target is not a typed array")},B=function(j){if(o(j)&&(!O||E(H,j)))return j;throw ee(S(j)+" is not a typed array constructor")},G=function(j,re,ae,be){if(!!s){if(ae)for(var Me in q){var Be=i[Me];if(Be&&d(Be.prototype,j))try{delete Be.prototype[j]}catch{try{Be.prototype[j]=re}catch{}}}(!Z[j]||ae)&&R(Z,j,ae?re:_&&k[j]||re,be)}},W=function(j,re,ae){var be,Me;if(!!s){if(O){if(ae){for(be in q)if(Me=i[be],Me&&d(Me,j))try{delete Me[j]}catch{}}if(!H[j]||ae)try{return R(H,j,ae?re:_&&H[j]||re)}catch{}else return}for(be in q)Me=i[be],Me&&(!Me[j]||ae)&&R(Me,j,re)}};for(b in q)D=i[b],X=D&&D.prototype,X?V(X)[de]=D:_=!1;for(b in U)D=i[b],X=D&&D.prototype,X&&(V(X)[de]=D);if((!_||!o(H)||H===Function.prototype)&&(H=function(){throw ee("Incorrect invocation")},_))for(b in q)i[b]&&O(i[b],H);if((!_||!Z||Z===Q)&&(Z=H.prototype,_))for(b in q)i[b]&&O(i[b].prototype,Z);if(_&&p(P)!==Z&&O(P,Z),s&&!d(Z,te)){Y=!0,x(Z,te,{get:function(){return m(this)?this[fe]:void 0}});for(b in q)i[b]&&g(i[b],fe,b)}h.exports={NATIVE_ARRAY_BUFFER_VIEWS:_,TYPED_ARRAY_TAG:Y&&fe,aTypedArray:y,aTypedArrayConstructor:B,exportTypedArrayMethod:G,exportTypedArrayStaticMethod:W,getTypedArrayConstructor:u,isView:v,isTypedArray:c,TypedArray:H,TypedArrayPrototype:Z}},3331:(h,T,e)=>{var n=e(7854),s=e(1702),i=e(9781),o=e(4019),m=e(6530),d=e(8880),f=e(9190),S=e(7293),g=e(5787),R=e(9303),x=e(7466),E=e(7067),p=e(1179),O=e(9518),M=e(7674),A=e(8006).f,L=e(3070).f,V=e(1285),K=e(1589),F=e(8003),k=e(9909),l=m.PROPER,P=m.CONFIGURABLE,H=k.get,Z=k.set,Q="ArrayBuffer",ee="DataView",te="prototype",fe="Wrong length",de="Wrong index",_=n[Q],Y=_,b=Y&&Y[te],D=n[ee],X=D&&D[te],q=Object.prototype,U=n.Array,v=n.RangeError,u=s(V),c=s([].reverse),y=p.pack,B=p.unpack,G=function(Te){return[Te&255]},W=function(Te){return[Te&255,Te>>8&255]},j=function(Te){return[Te&255,Te>>8&255,Te>>16&255,Te>>24&255]},re=function(Te){return Te[3]<<24|Te[2]<<16|Te[1]<<8|Te[0]},ae=function(Te){return y(Te,23,4)},be=function(Te){return y(Te,52,8)},Me=function(Te,Ue){L(Te[te],Ue,{get:function(){return H(this)[Ue]}})},Be=function(Te,Ue,Ee,De){var ze=E(Ee),Xe=H(Te);if(ze+Ue>Xe.byteLength)throw v(de);var Ze=H(Xe.buffer).bytes,Fe=ze+Xe.byteOffset,rt=K(Ze,Fe,Fe+Ue);return De?rt:c(rt)},Ge=function(Te,Ue,Ee,De,ze,Xe){var Ze=E(Ee),Fe=H(Te);if(Ze+Ue>Fe.byteLength)throw v(de);for(var rt=H(Fe.buffer).bytes,vt=Ze+Fe.byteOffset,at=De(+ze),He=0;He<Ue;He++)rt[vt+He]=at[Xe?He:Ue-He-1]};if(!o)Y=function(Ue){g(this,b);var Ee=E(Ue);Z(this,{bytes:u(U(Ee),0),byteLength:Ee}),i||(this.byteLength=Ee)},b=Y[te],D=function(Ue,Ee,De){g(this,X),g(Ue,b);var ze=H(Ue).byteLength,Xe=R(Ee);if(Xe<0||Xe>ze)throw v("Wrong offset");if(De=De===void 0?ze-Xe:x(De),Xe+De>ze)throw v(fe);Z(this,{buffer:Ue,byteLength:De,byteOffset:Xe}),i||(this.buffer=Ue,this.byteLength=De,this.byteOffset=Xe)},X=D[te],i&&(Me(Y,"byteLength"),Me(D,"buffer"),Me(D,"byteLength"),Me(D,"byteOffset")),f(X,{getInt8:function(Ue){return Be(this,1,Ue)[0]<<24>>24},getUint8:function(Ue){return Be(this,1,Ue)[0]},getInt16:function(Ue){var Ee=Be(this,2,Ue,arguments.length>1?arguments[1]:void 0);return(Ee[1]<<8|Ee[0])<<16>>16},getUint16:function(Ue){var Ee=Be(this,2,Ue,arguments.length>1?arguments[1]:void 0);return Ee[1]<<8|Ee[0]},getInt32:function(Ue){return re(Be(this,4,Ue,arguments.length>1?arguments[1]:void 0))},getUint32:function(Ue){return re(Be(this,4,Ue,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(Ue){return B(Be(this,4,Ue,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(Ue){return B(Be(this,8,Ue,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(Ue,Ee){Ge(this,1,Ue,G,Ee)},setUint8:function(Ue,Ee){Ge(this,1,Ue,G,Ee)},setInt16:function(Ue,Ee){Ge(this,2,Ue,W,Ee,arguments.length>2?arguments[2]:void 0)},setUint16:function(Ue,Ee){Ge(this,2,Ue,W,Ee,arguments.length>2?arguments[2]:void 0)},setInt32:function(Ue,Ee){Ge(this,4,Ue,j,Ee,arguments.length>2?arguments[2]:void 0)},setUint32:function(Ue,Ee){Ge(this,4,Ue,j,Ee,arguments.length>2?arguments[2]:void 0)},setFloat32:function(Ue,Ee){Ge(this,4,Ue,ae,Ee,arguments.length>2?arguments[2]:void 0)},setFloat64:function(Ue,Ee){Ge(this,8,Ue,be,Ee,arguments.length>2?arguments[2]:void 0)}});else{var Ye=l&&_.name!==Q;if(!S(function(){_(1)})||!S(function(){new _(-1)})||S(function(){return new _,new _(1.5),new _(NaN),Ye&&!P})){Y=function(Ue){return g(this,b),new _(E(Ue))},Y[te]=b;for(var it=A(_),_t=0,C;it.length>_t;)(C=it[_t++])in Y||d(Y,C,_[C]);b.constructor=Y}else Ye&&P&&d(_,"name",Q);M&&O(X)!==q&&M(X,q);var z=new D(new Y(2)),Ne=s(X.setInt8);z.setInt8(0,2147483648),z.setInt8(1,2147483649),(z.getInt8(0)||!z.getInt8(1))&&f(X,{setInt8:function(Ue,Ee){Ne(this,Ue,Ee<<24>>24)},setUint8:function(Ue,Ee){Ne(this,Ue,Ee<<24>>24)}},{unsafe:!0})}F(Y,Q),F(D,ee),h.exports={ArrayBuffer:Y,DataView:D}},1048:(h,T,e)=>{var n=e(7908),s=e(1400),i=e(6244),o=e(5117),m=Math.min;h.exports=[].copyWithin||function(f,S){var g=n(this),R=i(g),x=s(f,R),E=s(S,R),p=arguments.length>2?arguments[2]:void 0,O=m((p===void 0?R:s(p,R))-E,R-x),M=1;for(E<x&&x<E+O&&(M=-1,E+=O-1,x+=O-1);O-- >0;)E in g?g[x]=g[E]:o(g,x),x+=M,E+=M;return g}},1285:(h,T,e)=>{var n=e(7908),s=e(1400),i=e(6244);h.exports=function(m){for(var d=n(this),f=i(d),S=arguments.length,g=s(S>1?arguments[1]:void 0,f),R=S>2?arguments[2]:void 0,x=R===void 0?f:s(R,f);x>g;)d[g++]=m;return d}},8533:(h,T,e)=>{var n=e(2092).forEach,s=e(9341),i=s("forEach");h.exports=i?[].forEach:function(m){return n(this,m,arguments.length>1?arguments[1]:void 0)}},7745:(h,T,e)=>{var n=e(6244);h.exports=function(s,i){for(var o=0,m=n(i),d=new s(m);m>o;)d[o]=i[o++];return d}},8457:(h,T,e)=>{var n=e(9974),s=e(6916),i=e(7908),o=e(3411),m=e(7659),d=e(4411),f=e(6244),S=e(6135),g=e(8554),R=e(1246),x=Array;h.exports=function(p){var O=i(p),M=d(this),A=arguments.length,L=A>1?arguments[1]:void 0,V=L!==void 0;V&&(L=n(L,A>2?arguments[2]:void 0));var K=R(O),F=0,k,l,P,H,Z,Q;if(K&&!(this===x&&m(K)))for(H=g(O,K),Z=H.next,l=M?new this:[];!(P=s(Z,H)).done;F++)Q=V?o(H,L,[P.value,F],!0):P.value,S(l,F,Q);else for(k=f(O),l=M?new this(k):x(k);k>F;F++)Q=V?L(O[F],F):O[F],S(l,F,Q);return l.length=F,l}},1318:(h,T,e)=>{var n=e(5656),s=e(1400),i=e(6244),o=function(m){return function(d,f,S){var g=n(d),R=i(g),x=s(S,R),E;if(m&&f!=f){for(;R>x;)if(E=g[x++],E!=E)return!0}else for(;R>x;x++)if((m||x in g)&&g[x]===f)return m||x||0;return!m&&-1}};h.exports={includes:o(!0),indexOf:o(!1)}},9671:(h,T,e)=>{var n=e(9974),s=e(8361),i=e(7908),o=e(6244),m=function(d){var f=d==1;return function(S,g,R){for(var x=i(S),E=s(x),p=n(g,R),O=o(E),M,A;O-- >0;)if(M=E[O],A=p(M,O,x),A)switch(d){case 0:return M;case 1:return O}return f?-1:void 0}};h.exports={findLast:m(0),findLastIndex:m(1)}},2092:(h,T,e)=>{var n=e(9974),s=e(1702),i=e(8361),o=e(7908),m=e(6244),d=e(5417),f=s([].push),S=function(g){var R=g==1,x=g==2,E=g==3,p=g==4,O=g==6,M=g==7,A=g==5||O;return function(L,V,K,F){for(var k=o(L),l=i(k),P=n(V,K),H=m(l),Z=0,Q=F||d,ee=R?Q(L,H):x||M?Q(L,0):void 0,te,fe;H>Z;Z++)if((A||Z in l)&&(te=l[Z],fe=P(te,Z,k),g))if(R)ee[Z]=fe;else if(fe)switch(g){case 3:return!0;case 5:return te;case 6:return Z;case 2:f(ee,te)}else switch(g){case 4:return!1;case 7:f(ee,te)}return O?-1:E||p?p:ee}};h.exports={forEach:S(0),map:S(1),filter:S(2),some:S(3),every:S(4),find:S(5),findIndex:S(6),filterReject:S(7)}},6583:(h,T,e)=>{var n=e(2104),s=e(5656),i=e(9303),o=e(6244),m=e(9341),d=Math.min,f=[].lastIndexOf,S=!!f&&1/[1].lastIndexOf(1,-0)<0,g=m("lastIndexOf"),R=S||!g;h.exports=R?function(E){if(S)return n(f,this,arguments)||0;var p=s(this),O=o(p),M=O-1;for(arguments.length>1&&(M=d(M,i(arguments[1]))),M<0&&(M=O+M);M>=0;M--)if(M in p&&p[M]===E)return M||0;return-1}:f},1194:(h,T,e)=>{var n=e(7293),s=e(5112),i=e(7392),o=s("species");h.exports=function(m){return i>=51||!n(function(){var d=[],f=d.constructor={};return f[o]=function(){return{foo:1}},d[m](Boolean).foo!==1})}},9341:(h,T,e)=>{var n=e(7293);h.exports=function(s,i){var o=[][s];return!!o&&n(function(){o.call(null,i||function(){return 1},1)})}},3671:(h,T,e)=>{var n=e(9662),s=e(7908),i=e(8361),o=e(6244),m=TypeError,d=function(f){return function(S,g,R,x){n(g);var E=s(S),p=i(E),O=o(E),M=f?O-1:0,A=f?-1:1;if(R<2)for(;;){if(M in p){x=p[M],M+=A;break}if(M+=A,f?M<0:O<=M)throw m("Reduce of empty array with no initial value")}for(;f?M>=0:O>M;M+=A)M in p&&(x=g(x,p[M],M,E));return x}};h.exports={left:d(!1),right:d(!0)}},1589:(h,T,e)=>{var n=e(1400),s=e(6244),i=e(6135),o=Array,m=Math.max;h.exports=function(d,f,S){for(var g=s(d),R=n(f,g),x=n(S===void 0?g:S,g),E=o(m(x-R,0)),p=0;R<x;R++,p++)i(E,p,d[R]);return E.length=p,E}},206:(h,T,e)=>{var n=e(1702);h.exports=n([].slice)},4362:(h,T,e)=>{var n=e(1589),s=Math.floor,i=function(d,f){var S=d.length,g=s(S/2);return S<8?o(d,f):m(d,i(n(d,0,g),f),i(n(d,g),f),f)},o=function(d,f){for(var S=d.length,g=1,R,x;g<S;){for(x=g,R=d[g];x&&f(d[x-1],R)>0;)d[x]=d[--x];x!==g++&&(d[x]=R)}return d},m=function(d,f,S,g){for(var R=f.length,x=S.length,E=0,p=0;E<R||p<x;)d[E+p]=E<R&&p<x?g(f[E],S[p])<=0?f[E++]:S[p++]:E<R?f[E++]:S[p++];return d};h.exports=i},7475:(h,T,e)=>{var n=e(3157),s=e(4411),i=e(111),o=e(5112),m=o("species"),d=Array;h.exports=function(f){var S;return n(f)&&(S=f.constructor,s(S)&&(S===d||n(S.prototype))?S=void 0:i(S)&&(S=S[m],S===null&&(S=void 0))),S===void 0?d:S}},5417:(h,T,e)=>{var n=e(7475);h.exports=function(s,i){return new(n(s))(i===0?0:i)}},3411:(h,T,e)=>{var n=e(9670),s=e(9212);h.exports=function(i,o,m,d){try{return d?o(n(m)[0],m[1]):o(m)}catch(f){s(i,"throw",f)}}},7072:(h,T,e)=>{var n=e(5112),s=n("iterator"),i=!1;try{var o=0,m={next:function(){return{done:!!o++}},return:function(){i=!0}};m[s]=function(){return this},Array.from(m,function(){throw 2})}catch{}h.exports=function(d,f){if(!f&&!i)return!1;var S=!1;try{var g={};g[s]=function(){return{next:function(){return{done:S=!0}}}},d(g)}catch{}return S}},4326:(h,T,e)=>{var n=e(1702),s=n({}.toString),i=n("".slice);h.exports=function(o){return i(s(o),8,-1)}},648:(h,T,e)=>{var n=e(1694),s=e(614),i=e(4326),o=e(5112),m=o("toStringTag"),d=Object,f=i(function(){return arguments}())=="Arguments",S=function(g,R){try{return g[R]}catch{}};h.exports=n?i:function(g){var R,x,E;return g===void 0?"Undefined":g===null?"Null":typeof(x=S(R=d(g),m))=="string"?x:f?i(R):(E=i(R))=="Object"&&s(R.callee)?"Arguments":E}},7741:(h,T,e)=>{var n=e(1702),s=Error,i=n("".replace),o=function(f){return String(s(f).stack)}("zxcasd"),m=/\n\s*at [^:]*:[^\n]*/,d=m.test(o);h.exports=function(f,S){if(d&&typeof f=="string"&&!s.prepareStackTrace)for(;S--;)f=i(f,m,"");return f}},5631:(h,T,e)=>{var n=e(3070).f,s=e(30),i=e(9190),o=e(9974),m=e(5787),d=e(408),f=e(654),S=e(6340),g=e(9781),R=e(2423).fastKey,x=e(9909),E=x.set,p=x.getterFor;h.exports={getConstructor:function(O,M,A,L){var V=O(function(P,H){m(P,K),E(P,{type:M,index:s(null),first:void 0,last:void 0,size:0}),g||(P.size=0),H!=null&&d(H,P[L],{that:P,AS_ENTRIES:A})}),K=V.prototype,F=p(M),k=function(P,H,Z){var Q=F(P),ee=l(P,H),te,fe;return ee?ee.value=Z:(Q.last=ee={index:fe=R(H,!0),key:H,value:Z,previous:te=Q.last,next:void 0,removed:!1},Q.first||(Q.first=ee),te&&(te.next=ee),g?Q.size++:P.size++,fe!=="F"&&(Q.index[fe]=ee)),P},l=function(P,H){var Z=F(P),Q=R(H),ee;if(Q!=="F")return Z.index[Q];for(ee=Z.first;ee;ee=ee.next)if(ee.key==H)return ee};return i(K,{clear:function(){for(var H=this,Z=F(H),Q=Z.index,ee=Z.first;ee;)ee.removed=!0,ee.previous&&(ee.previous=ee.previous.next=void 0),delete Q[ee.index],ee=ee.next;Z.first=Z.last=void 0,g?Z.size=0:H.size=0},delete:function(P){var H=this,Z=F(H),Q=l(H,P);if(Q){var ee=Q.next,te=Q.previous;delete Z.index[Q.index],Q.removed=!0,te&&(te.next=ee),ee&&(ee.previous=te),Z.first==Q&&(Z.first=ee),Z.last==Q&&(Z.last=te),g?Z.size--:H.size--}return!!Q},forEach:function(H){for(var Z=F(this),Q=o(H,arguments.length>1?arguments[1]:void 0),ee;ee=ee?ee.next:Z.first;)for(Q(ee.value,ee.key,this);ee&&ee.removed;)ee=ee.previous},has:function(H){return!!l(this,H)}}),i(K,A?{get:function(H){var Z=l(this,H);return Z&&Z.value},set:function(H,Z){return k(this,H===0?0:H,Z)}}:{add:function(H){return k(this,H=H===0?0:H,H)}}),g&&n(K,"size",{get:function(){return F(this).size}}),V},setStrong:function(O,M,A){var L=M+" Iterator",V=p(M),K=p(L);f(O,M,function(F,k){E(this,{type:L,target:F,state:V(F),kind:k,last:void 0})},function(){for(var F=K(this),k=F.kind,l=F.last;l&&l.removed;)l=l.previous;return!F.target||!(F.last=l=l?l.next:F.state.first)?(F.target=void 0,{value:void 0,done:!0}):k=="keys"?{value:l.key,done:!1}:k=="values"?{value:l.value,done:!1}:{value:[l.key,l.value],done:!1}},A?"entries":"values",!A,!0),S(M)}}},7710:(h,T,e)=>{var n=e(2109),s=e(7854),i=e(1702),o=e(4705),m=e(8052),d=e(2423),f=e(408),S=e(5787),g=e(614),R=e(111),x=e(7293),E=e(7072),p=e(8003),O=e(9587);h.exports=function(M,A,L){var V=M.indexOf("Map")!==-1,K=M.indexOf("Weak")!==-1,F=V?"set":"add",k=s[M],l=k&&k.prototype,P=k,H={},Z=function(Y){var b=i(l[Y]);m(l,Y,Y=="add"?function(X){return b(this,X===0?0:X),this}:Y=="delete"?function(D){return K&&!R(D)?!1:b(this,D===0?0:D)}:Y=="get"?function(X){return K&&!R(X)?void 0:b(this,X===0?0:X)}:Y=="has"?function(X){return K&&!R(X)?!1:b(this,X===0?0:X)}:function(X,q){return b(this,X===0?0:X,q),this})},Q=o(M,!g(k)||!(K||l.forEach&&!x(function(){new k().entries().next()})));if(Q)P=L.getConstructor(A,M,V,F),d.enable();else if(o(M,!0)){var ee=new P,te=ee[F](K?{}:-0,1)!=ee,fe=x(function(){ee.has(1)}),de=E(function(Y){new k(Y)}),_=!K&&x(function(){for(var Y=new k,b=5;b--;)Y[F](b,b);return!Y.has(-0)});de||(P=A(function(Y,b){S(Y,l);var D=O(new k,Y,P);return b!=null&&f(b,D[F],{that:D,AS_ENTRIES:V}),D}),P.prototype=l,l.constructor=P),(fe||_)&&(Z("delete"),Z("has"),V&&Z("get")),(_||te)&&Z(F),K&&l.clear&&delete l.clear}return H[M]=P,n({global:!0,constructor:!0,forced:P!=k},H),p(P,M),K||L.setStrong(P,M,V),P}},9920:(h,T,e)=>{var n=e(2597),s=e(3887),i=e(1236),o=e(3070);h.exports=function(m,d,f){for(var S=s(d),g=o.f,R=i.f,x=0;x<S.length;x++){var E=S[x];!n(m,E)&&!(f&&n(f,E))&&g(m,E,R(d,E))}}},4964:(h,T,e)=>{var n=e(5112),s=n("match");h.exports=function(i){var o=/./;try{"/./"[i](o)}catch{try{return o[s]=!1,"/./"[i](o)}catch{}}return!1}},8544:(h,T,e)=>{var n=e(7293);h.exports=!n(function(){function s(){}return s.prototype.constructor=null,Object.getPrototypeOf(new s)!==s.prototype})},4230:(h,T,e)=>{var n=e(1702),s=e(4488),i=e(1340),o=/"/g,m=n("".replace);h.exports=function(d,f,S,g){var R=i(s(d)),x="<"+f;return S!==""&&(x+=" "+S+'="'+m(i(g),o,"&quot;")+'"'),x+">"+R+"</"+f+">"}},4994:(h,T,e)=>{var n=e(3383).IteratorPrototype,s=e(30),i=e(9114),o=e(8003),m=e(7497),d=function(){return this};h.exports=function(f,S,g,R){var x=S+" Iterator";return f.prototype=s(n,{next:i(+!R,g)}),o(f,x,!1,!0),m[x]=d,f}},8880:(h,T,e)=>{var n=e(9781),s=e(3070),i=e(9114);h.exports=n?function(o,m,d){return s.f(o,m,i(1,d))}:function(o,m,d){return o[m]=d,o}},9114:h=>{h.exports=function(T,e){return{enumerable:!(T&1),configurable:!(T&2),writable:!(T&4),value:e}}},6135:(h,T,e)=>{var n=e(4948),s=e(3070),i=e(9114);h.exports=function(o,m,d){var f=n(m);f in o?s.f(o,f,i(0,d)):o[f]=d}},5573:(h,T,e)=>{var n=e(1702),s=e(7293),i=e(6650).start,o=RangeError,m=Math.abs,d=Date.prototype,f=d.toISOString,S=n(d.getTime),g=n(d.getUTCDate),R=n(d.getUTCFullYear),x=n(d.getUTCHours),E=n(d.getUTCMilliseconds),p=n(d.getUTCMinutes),O=n(d.getUTCMonth),M=n(d.getUTCSeconds);h.exports=s(function(){return f.call(new Date(-50000000000001))!="0385-07-25T07:06:39.999Z"})||!s(function(){f.call(new Date(NaN))})?function(){if(!isFinite(S(this)))throw o("Invalid time value");var L=this,V=R(L),K=E(L),F=V<0?"-":V>9999?"+":"";return F+i(m(V),F?6:4,0)+"-"+i(O(L)+1,2,0)+"-"+i(g(L),2,0)+"T"+i(x(L),2,0)+":"+i(p(L),2,0)+":"+i(M(L),2,0)+"."+i(K,3,0)+"Z"}:f},7045:(h,T,e)=>{var n=e(6339),s=e(3070);h.exports=function(i,o,m){return m.get&&n(m.get,o,{getter:!0}),m.set&&n(m.set,o,{setter:!0}),s.f(i,o,m)}},8052:(h,T,e)=>{var n=e(614),s=e(3070),i=e(6339),o=e(3072);h.exports=function(m,d,f,S){S||(S={});var g=S.enumerable,R=S.name!==void 0?S.name:d;if(n(f)&&i(f,R,S),S.global)g?m[d]=f:o(d,f);else{try{S.unsafe?m[d]&&(g=!0):delete m[d]}catch{}g?m[d]=f:s.f(m,d,{value:f,enumerable:!1,configurable:!S.nonConfigurable,writable:!S.nonWritable})}return m}},9190:(h,T,e)=>{var n=e(8052);h.exports=function(s,i,o){for(var m in i)n(s,m,i[m],o);return s}},3072:(h,T,e)=>{var n=e(7854),s=Object.defineProperty;h.exports=function(i,o){try{s(n,i,{value:o,configurable:!0,writable:!0})}catch{n[i]=o}return o}},654:(h,T,e)=>{var n=e(2109),s=e(6916),i=e(1913),o=e(6530),m=e(614),d=e(4994),f=e(9518),S=e(7674),g=e(8003),R=e(8880),x=e(8052),E=e(5112),p=e(7497),O=e(3383),M=o.PROPER,A=o.CONFIGURABLE,L=O.IteratorPrototype,V=O.BUGGY_SAFARI_ITERATORS,K=E("iterator"),F="keys",k="values",l="entries",P=function(){return this};h.exports=function(H,Z,Q,ee,te,fe,de){d(Q,Z,ee);var _=function(y){if(y===te&&q)return q;if(!V&&y in D)return D[y];switch(y){case F:return function(){return new Q(this,y)};case k:return function(){return new Q(this,y)};case l:return function(){return new Q(this,y)}}return function(){return new Q(this)}},Y=Z+" Iterator",b=!1,D=H.prototype,X=D[K]||D["@@iterator"]||te&&D[te],q=!V&&X||_(te),U=Z=="Array"&&D.entries||X,v,u,c;if(U&&(v=f(U.call(new H)),v!==Object.prototype&&v.next&&(!i&&f(v)!==L&&(S?S(v,L):m(v[K])||x(v,K,P)),g(v,Y,!0,!0),i&&(p[Y]=P))),M&&te==k&&X&&X.name!==k&&(!i&&A?R(D,"name",k):(b=!0,q=function(){return s(X,this)})),te)if(u={values:_(k),keys:fe?q:_(F),entries:_(l)},de)for(c in u)(V||b||!(c in D))&&x(D,c,u[c]);else n({target:Z,proto:!0,forced:V||b},u);return(!i||de)&&D[K]!==q&&x(D,K,q,{name:te}),p[Z]=q,u}},7235:(h,T,e)=>{var n=e(857),s=e(2597),i=e(6061),o=e(3070).f;h.exports=function(m){var d=n.Symbol||(n.Symbol={});s(d,m)||o(d,m,{value:i.f(m)})}},5117:(h,T,e)=>{var n=e(6330),s=TypeError;h.exports=function(i,o){if(!delete i[o])throw s("Cannot delete property "+n(o)+" of "+n(i))}},9781:(h,T,e)=>{var n=e(7293);h.exports=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},317:(h,T,e)=>{var n=e(7854),s=e(111),i=n.document,o=s(i)&&s(i.createElement);h.exports=function(m){return o?i.createElement(m):{}}},7207:h=>{var T=TypeError,e=9007199254740991;h.exports=function(n){if(n>e)throw T("Maximum allowed index exceeded");return n}},8324:h=>{h.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(h,T,e)=>{var n=e(317),s=n("span").classList,i=s&&s.constructor&&s.constructor.prototype;h.exports=i===Object.prototype?void 0:i},8886:(h,T,e)=>{var n=e(8113),s=n.match(/firefox\/(\d+)/i);h.exports=!!s&&+s[1]},7871:h=>{h.exports=typeof window=="object"&&typeof Deno!="object"},256:(h,T,e)=>{var n=e(8113);h.exports=/MSIE|Trident/.test(n)},1528:(h,T,e)=>{var n=e(8113),s=e(7854);h.exports=/ipad|iphone|ipod/i.test(n)&&s.Pebble!==void 0},6833:(h,T,e)=>{var n=e(8113);h.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},5268:(h,T,e)=>{var n=e(4326),s=e(7854);h.exports=n(s.process)=="process"},1036:(h,T,e)=>{var n=e(8113);h.exports=/web0s(?!.*chrome)/i.test(n)},8113:(h,T,e)=>{var n=e(5005);h.exports=n("navigator","userAgent")||""},7392:(h,T,e)=>{var n=e(7854),s=e(8113),i=n.process,o=n.Deno,m=i&&i.versions||o&&o.version,d=m&&m.v8,f,S;d&&(f=d.split("."),S=f[0]>0&&f[0]<4?1:+(f[0]+f[1])),!S&&s&&(f=s.match(/Edge\/(\d+)/),(!f||f[1]>=74)&&(f=s.match(/Chrome\/(\d+)/),f&&(S=+f[1]))),h.exports=S},8008:(h,T,e)=>{var n=e(8113),s=n.match(/AppleWebKit\/(\d+)\./);h.exports=!!s&&+s[1]},748:h=>{h.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:(h,T,e)=>{var n=e(7293),s=e(9114);h.exports=!n(function(){var i=Error("a");return"stack"in i?(Object.defineProperty(i,"stack",s(1,7)),i.stack!==7):!0})},7762:(h,T,e)=>{var n=e(9781),s=e(7293),i=e(9670),o=e(30),m=e(6277),d=Error.prototype.toString,f=s(function(){if(n){var S=o(Object.defineProperty({},"name",{get:function(){return this===S}}));if(d.call(S)!=="true")return!0}return d.call({message:1,name:2})!=="2: 1"||d.call({})!=="Error"});h.exports=f?function(){var g=i(this),R=m(g.name,"Error"),x=m(g.message);return R?x?R+": "+x:R:x}:d},2109:(h,T,e)=>{var n=e(7854),s=e(1236).f,i=e(8880),o=e(8052),m=e(3072),d=e(9920),f=e(4705);h.exports=function(S,g){var R=S.target,x=S.global,E=S.stat,p,O,M,A,L,V;if(x?O=n:E?O=n[R]||m(R,{}):O=(n[R]||{}).prototype,O)for(M in g){if(L=g[M],S.dontCallGetSet?(V=s(O,M),A=V&&V.value):A=O[M],p=f(x?M:R+(E?".":"#")+M,S.forced),!p&&A!==void 0){if(typeof L==typeof A)continue;d(L,A)}(S.sham||A&&A.sham)&&i(L,"sham",!0),o(O,M,L,S)}}},7293:h=>{h.exports=function(T){try{return!!T()}catch{return!0}}},7007:(h,T,e)=>{e(4916);var n=e(1702),s=e(8052),i=e(2261),o=e(7293),m=e(5112),d=e(8880),f=m("species"),S=RegExp.prototype;h.exports=function(g,R,x,E){var p=m(g),O=!o(function(){var V={};return V[p]=function(){return 7},""[g](V)!=7}),M=O&&!o(function(){var V=!1,K=/a/;return g==="split"&&(K={},K.constructor={},K.constructor[f]=function(){return K},K.flags="",K[p]=/./[p]),K.exec=function(){return V=!0,null},K[p](""),!V});if(!O||!M||x){var A=n(/./[p]),L=R(p,""[g],function(V,K,F,k,l){var P=n(V),H=K.exec;return H===i||H===S.exec?O&&!l?{done:!0,value:A(K,F,k)}:{done:!0,value:P(F,K,k)}:{done:!1}});s(String.prototype,g,L[0]),s(S,p,L[1])}E&&d(S[p],"sham",!0)}},6677:(h,T,e)=>{var n=e(7293);h.exports=!n(function(){return Object.isExtensible(Object.preventExtensions({}))})},2104:(h,T,e)=>{var n=e(4374),s=Function.prototype,i=s.apply,o=s.call;h.exports=typeof Reflect=="object"&&Reflect.apply||(n?o.bind(i):function(){return o.apply(i,arguments)})},9974:(h,T,e)=>{var n=e(1702),s=e(9662),i=e(4374),o=n(n.bind);h.exports=function(m,d){return s(m),d===void 0?m:i?o(m,d):function(){return m.apply(d,arguments)}}},4374:(h,T,e)=>{var n=e(7293);h.exports=!n(function(){var s=function(){}.bind();return typeof s!="function"||s.hasOwnProperty("prototype")})},7065:(h,T,e)=>{var n=e(1702),s=e(9662),i=e(111),o=e(2597),m=e(206),d=e(4374),f=Function,S=n([].concat),g=n([].join),R={},x=function(E,p,O){if(!o(R,p)){for(var M=[],A=0;A<p;A++)M[A]="a["+A+"]";R[p]=f("C,a","return new C("+g(M,",")+")")}return R[p](E,O)};h.exports=d?f.bind:function(p){var O=s(this),M=O.prototype,A=m(arguments,1),L=function(){var K=S(A,m(arguments));return this instanceof L?x(O,K.length,K):O.apply(p,K)};return i(M)&&(L.prototype=M),L}},6916:(h,T,e)=>{var n=e(4374),s=Function.prototype.call;h.exports=n?s.bind(s):function(){return s.apply(s,arguments)}},6530:(h,T,e)=>{var n=e(9781),s=e(2597),i=Function.prototype,o=n&&Object.getOwnPropertyDescriptor,m=s(i,"name"),d=m&&function(){}.name==="something",f=m&&(!n||n&&o(i,"name").configurable);h.exports={EXISTS:m,PROPER:d,CONFIGURABLE:f}},1702:(h,T,e)=>{var n=e(4374),s=Function.prototype,i=s.bind,o=s.call,m=n&&i.bind(o,o);h.exports=n?function(d){return d&&m(d)}:function(d){return d&&function(){return o.apply(d,arguments)}}},5005:(h,T,e)=>{var n=e(7854),s=e(614),i=function(o){return s(o)?o:void 0};h.exports=function(o,m){return arguments.length<2?i(n[o]):n[o]&&n[o][m]}},1246:(h,T,e)=>{var n=e(648),s=e(8173),i=e(7497),o=e(5112),m=o("iterator");h.exports=function(d){if(d!=null)return s(d,m)||s(d,"@@iterator")||i[n(d)]}},8554:(h,T,e)=>{var n=e(6916),s=e(9662),i=e(9670),o=e(6330),m=e(1246),d=TypeError;h.exports=function(f,S){var g=arguments.length<2?m(f):S;if(s(g))return i(n(g,f));throw d(o(f)+" is not iterable")}},8173:(h,T,e)=>{var n=e(9662);h.exports=function(s,i){var o=s[i];return o==null?void 0:n(o)}},647:(h,T,e)=>{var n=e(1702),s=e(7908),i=Math.floor,o=n("".charAt),m=n("".replace),d=n("".slice),f=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,S=/\$([$&'`]|\d{1,2})/g;h.exports=function(g,R,x,E,p,O){var M=x+g.length,A=E.length,L=S;return p!==void 0&&(p=s(p),L=f),m(O,L,function(V,K){var F;switch(o(K,0)){case"$":return"$";case"&":return g;case"`":return d(R,0,x);case"'":return d(R,M);case"<":F=p[d(K,1,-1)];break;default:var k=+K;if(k===0)return V;if(k>A){var l=i(k/10);return l===0?V:l<=A?E[l-1]===void 0?o(K,1):E[l-1]+o(K,1):V}F=E[k-1]}return F===void 0?"":F})}},7854:(h,T,e)=>{var n=function(s){return s&&s.Math==Math&&s};h.exports=n(typeof globalThis=="object"&&globalThis)||n(typeof window=="object"&&window)||n(typeof self=="object"&&self)||n(typeof e.g=="object"&&e.g)||function(){return this}()||Function("return this")()},2597:(h,T,e)=>{var n=e(1702),s=e(7908),i=n({}.hasOwnProperty);h.exports=Object.hasOwn||function(m,d){return i(s(m),d)}},3501:h=>{h.exports={}},842:(h,T,e)=>{var n=e(7854);h.exports=function(s,i){var o=n.console;o&&o.error&&(arguments.length==1?o.error(s):o.error(s,i))}},490:(h,T,e)=>{var n=e(5005);h.exports=n("document","documentElement")},4664:(h,T,e)=>{var n=e(9781),s=e(7293),i=e(317);h.exports=!n&&!s(function(){return Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a!=7})},1179:h=>{var T=Array,e=Math.abs,n=Math.pow,s=Math.floor,i=Math.log,o=Math.LN2,m=function(f,S,g){var R=T(g),x=g*8-S-1,E=(1<<x)-1,p=E>>1,O=S===23?n(2,-24)-n(2,-77):0,M=f<0||f===0&&1/f<0?1:0,A=0,L,V,K;for(f=e(f),f!=f||f===1/0?(V=f!=f?1:0,L=E):(L=s(i(f)/o),K=n(2,-L),f*K<1&&(L--,K*=2),L+p>=1?f+=O/K:f+=O*n(2,1-p),f*K>=2&&(L++,K/=2),L+p>=E?(V=0,L=E):L+p>=1?(V=(f*K-1)*n(2,S),L=L+p):(V=f*n(2,p-1)*n(2,S),L=0));S>=8;)R[A++]=V&255,V/=256,S-=8;for(L=L<<S|V,x+=S;x>0;)R[A++]=L&255,L/=256,x-=8;return R[--A]|=M*128,R},d=function(f,S){var g=f.length,R=g*8-S-1,x=(1<<R)-1,E=x>>1,p=R-7,O=g-1,M=f[O--],A=M&127,L;for(M>>=7;p>0;)A=A*256+f[O--],p-=8;for(L=A&(1<<-p)-1,A>>=-p,p+=S;p>0;)L=L*256+f[O--],p-=8;if(A===0)A=1-E;else{if(A===x)return L?NaN:M?-1/0:1/0;L=L+n(2,S),A=A-E}return(M?-1:1)*L*n(2,A-S)};h.exports={pack:m,unpack:d}},8361:(h,T,e)=>{var n=e(1702),s=e(7293),i=e(4326),o=Object,m=n("".split);h.exports=s(function(){return!o("z").propertyIsEnumerable(0)})?function(d){return i(d)=="String"?m(d,""):o(d)}:o},9587:(h,T,e)=>{var n=e(614),s=e(111),i=e(7674);h.exports=function(o,m,d){var f,S;return i&&n(f=m.constructor)&&f!==d&&s(S=f.prototype)&&S!==d.prototype&&i(o,S),o}},2788:(h,T,e)=>{var n=e(1702),s=e(614),i=e(5465),o=n(Function.toString);s(i.inspectSource)||(i.inspectSource=function(m){return o(m)}),h.exports=i.inspectSource},8340:(h,T,e)=>{var n=e(111),s=e(8880);h.exports=function(i,o){n(o)&&"cause"in o&&s(i,"cause",o.cause)}},2423:(h,T,e)=>{var n=e(2109),s=e(1702),i=e(3501),o=e(111),m=e(2597),d=e(3070).f,f=e(8006),S=e(1156),g=e(2050),R=e(9711),x=e(6677),E=!1,p=R("meta"),O=0,M=function(k){d(k,p,{value:{objectID:"O"+O++,weakData:{}}})},A=function(k,l){if(!o(k))return typeof k=="symbol"?k:(typeof k=="string"?"S":"P")+k;if(!m(k,p)){if(!g(k))return"F";if(!l)return"E";M(k)}return k[p].objectID},L=function(k,l){if(!m(k,p)){if(!g(k))return!0;if(!l)return!1;M(k)}return k[p].weakData},V=function(k){return x&&E&&g(k)&&!m(k,p)&&M(k),k},K=function(){F.enable=function(){},E=!0;var k=f.f,l=s([].splice),P={};P[p]=1,k(P).length&&(f.f=function(H){for(var Z=k(H),Q=0,ee=Z.length;Q<ee;Q++)if(Z[Q]===p){l(Z,Q,1);break}return Z},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:S.f}))},F=h.exports={enable:K,fastKey:A,getWeakData:L,onFreeze:V};i[p]=!0},9909:(h,T,e)=>{var n=e(8536),s=e(7854),i=e(1702),o=e(111),m=e(8880),d=e(2597),f=e(5465),S=e(6200),g=e(3501),R="Object already initialized",x=s.TypeError,E=s.WeakMap,p,O,M,A=function(P){return M(P)?O(P):p(P,{})},L=function(P){return function(H){var Z;if(!o(H)||(Z=O(H)).type!==P)throw x("Incompatible receiver, "+P+" required");return Z}};if(n||f.state){var V=f.state||(f.state=new E),K=i(V.get),F=i(V.has),k=i(V.set);p=function(P,H){if(F(V,P))throw new x(R);return H.facade=P,k(V,P,H),H},O=function(P){return K(V,P)||{}},M=function(P){return F(V,P)}}else{var l=S("state");g[l]=!0,p=function(P,H){if(d(P,l))throw new x(R);return H.facade=P,m(P,l,H),H},O=function(P){return d(P,l)?P[l]:{}},M=function(P){return d(P,l)}}h.exports={set:p,get:O,has:M,enforce:A,getterFor:L}},7659:(h,T,e)=>{var n=e(5112),s=e(7497),i=n("iterator"),o=Array.prototype;h.exports=function(m){return m!==void 0&&(s.Array===m||o[i]===m)}},3157:(h,T,e)=>{var n=e(4326);h.exports=Array.isArray||function(i){return n(i)=="Array"}},614:h=>{h.exports=function(T){return typeof T=="function"}},4411:(h,T,e)=>{var n=e(1702),s=e(7293),i=e(614),o=e(648),m=e(5005),d=e(2788),f=function(){},S=[],g=m("Reflect","construct"),R=/^\s*(?:class|function)\b/,x=n(R.exec),E=!R.exec(f),p=function(A){if(!i(A))return!1;try{return g(f,S,A),!0}catch{return!1}},O=function(A){if(!i(A))return!1;switch(o(A)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return E||!!x(R,d(A))}catch{return!0}};O.sham=!0,h.exports=!g||s(function(){var M;return p(p.call)||!p(Object)||!p(function(){M=!0})||M})?O:p},4705:(h,T,e)=>{var n=e(7293),s=e(614),i=/#|\.prototype\./,o=function(g,R){var x=d[m(g)];return x==S?!0:x==f?!1:s(R)?n(R):!!R},m=o.normalize=function(g){return String(g).replace(i,".").toLowerCase()},d=o.data={},f=o.NATIVE="N",S=o.POLYFILL="P";h.exports=o},5988:(h,T,e)=>{var n=e(111),s=Math.floor;h.exports=Number.isInteger||function(o){return!n(o)&&isFinite(o)&&s(o)===o}},111:(h,T,e)=>{var n=e(614);h.exports=function(s){return typeof s=="object"?s!==null:n(s)}},1913:h=>{h.exports=!1},7850:(h,T,e)=>{var n=e(111),s=e(4326),i=e(5112),o=i("match");h.exports=function(m){var d;return n(m)&&((d=m[o])!==void 0?!!d:s(m)=="RegExp")}},2190:(h,T,e)=>{var n=e(5005),s=e(614),i=e(7976),o=e(3307),m=Object;h.exports=o?function(d){return typeof d=="symbol"}:function(d){var f=n("Symbol");return s(f)&&i(f.prototype,m(d))}},408:(h,T,e)=>{var n=e(9974),s=e(6916),i=e(9670),o=e(6330),m=e(7659),d=e(6244),f=e(7976),S=e(8554),g=e(1246),R=e(9212),x=TypeError,E=function(O,M){this.stopped=O,this.result=M},p=E.prototype;h.exports=function(O,M,A){var L=A&&A.that,V=!!(A&&A.AS_ENTRIES),K=!!(A&&A.IS_RECORD),F=!!(A&&A.IS_ITERATOR),k=!!(A&&A.INTERRUPTED),l=n(M,L),P,H,Z,Q,ee,te,fe,de=function(Y){return P&&R(P,"normal",Y),new E(!0,Y)},_=function(Y){return V?(i(Y),k?l(Y[0],Y[1],de):l(Y[0],Y[1])):k?l(Y,de):l(Y)};if(K)P=O.iterator;else if(F)P=O;else{if(H=g(O),!H)throw x(o(O)+" is not iterable");if(m(H)){for(Z=0,Q=d(O);Q>Z;Z++)if(ee=_(O[Z]),ee&&f(p,ee))return ee;return new E(!1)}P=S(O,H)}for(te=K?O.next:P.next;!(fe=s(te,P)).done;){try{ee=_(fe.value)}catch(Y){R(P,"throw",Y)}if(typeof ee=="object"&&ee&&f(p,ee))return ee}return new E(!1)}},9212:(h,T,e)=>{var n=e(6916),s=e(9670),i=e(8173);h.exports=function(o,m,d){var f,S;s(o);try{if(f=i(o,"return"),!f){if(m==="throw")throw d;return d}f=n(f,o)}catch(g){S=!0,f=g}if(m==="throw")throw d;if(S)throw f;return s(f),d}},3383:(h,T,e)=>{var n=e(7293),s=e(614),i=e(30),o=e(9518),m=e(8052),d=e(5112),f=e(1913),S=d("iterator"),g=!1,R,x,E;[].keys&&(E=[].keys(),"next"in E?(x=o(o(E)),x!==Object.prototype&&(R=x)):g=!0);var p=R==null||n(function(){var O={};return R[S].call(O)!==O});p?R={}:f&&(R=i(R)),s(R[S])||m(R,S,function(){return this}),h.exports={IteratorPrototype:R,BUGGY_SAFARI_ITERATORS:g}},7497:h=>{h.exports={}},6244:(h,T,e)=>{var n=e(7466);h.exports=function(s){return n(s.length)}},6339:(h,T,e)=>{var n=e(7293),s=e(614),i=e(2597),o=e(9781),m=e(6530).CONFIGURABLE,d=e(2788),f=e(9909),S=f.enforce,g=f.get,R=Object.defineProperty,x=o&&!n(function(){return R(function(){},"length",{value:8}).length!==8}),E=String(String).split("String"),p=h.exports=function(O,M,A){String(M).slice(0,7)==="Symbol("&&(M="["+String(M).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),A&&A.getter&&(M="get "+M),A&&A.setter&&(M="set "+M),(!i(O,"name")||m&&O.name!==M)&&(o?R(O,"name",{value:M,configurable:!0}):O.name=M),x&&A&&i(A,"arity")&&O.length!==A.arity&&R(O,"length",{value:A.arity});try{A&&i(A,"constructor")&&A.constructor?o&&R(O,"prototype",{writable:!1}):O.prototype&&(O.prototype=void 0)}catch{}var L=S(O);return i(L,"source")||(L.source=E.join(typeof M=="string"?M:"")),O};Function.prototype.toString=p(function(){return s(this)&&g(this).source||d(this)},"toString")},4758:h=>{var T=Math.ceil,e=Math.floor;h.exports=Math.trunc||function(s){var i=+s;return(i>0?e:T)(i)}},5948:(h,T,e)=>{var n=e(7854),s=e(9974),i=e(1236).f,o=e(261).set,m=e(6833),d=e(1528),f=e(1036),S=e(5268),g=n.MutationObserver||n.WebKitMutationObserver,R=n.document,x=n.process,E=n.Promise,p=i(n,"queueMicrotask"),O=p&&p.value,M,A,L,V,K,F,k,l;O||(M=function(){var P,H;for(S&&(P=x.domain)&&P.exit();A;){H=A.fn,A=A.next;try{H()}catch(Z){throw A?V():L=void 0,Z}}L=void 0,P&&P.enter()},!m&&!S&&!f&&g&&R?(K=!0,F=R.createTextNode(""),new g(M).observe(F,{characterData:!0}),V=function(){F.data=K=!K}):!d&&E&&E.resolve?(k=E.resolve(void 0),k.constructor=E,l=s(k.then,k),V=function(){l(M)}):S?V=function(){x.nextTick(M)}:(o=s(o,n),V=function(){o(M)})),h.exports=O||function(P){var H={fn:P,next:void 0};L&&(L.next=H),A||(A=H,V()),L=H}},735:(h,T,e)=>{var n=e(133);h.exports=n&&!!Symbol.for&&!!Symbol.keyFor},133:(h,T,e)=>{var n=e(7392),s=e(7293);h.exports=!!Object.getOwnPropertySymbols&&!s(function(){var i=Symbol();return!String(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&n&&n<41})},590:(h,T,e)=>{var n=e(7293),s=e(5112),i=e(1913),o=s("iterator");h.exports=!n(function(){var m=new URL("b?a=1&b=2&c=3","http://a"),d=m.searchParams,f="";return m.pathname="c%20d",d.forEach(function(S,g){d.delete("b"),f+=g+S}),i&&!m.toJSON||!d.sort||m.href!=="http://a/c%20d?a=1&c=3"||d.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!d[o]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||f!=="a1c3"||new URL("http://x",void 0).host!=="x"})},8536:(h,T,e)=>{var n=e(7854),s=e(614),i=e(2788),o=n.WeakMap;h.exports=s(o)&&/native code/.test(i(o))},8523:(h,T,e)=>{var n=e(9662),s=function(i){var o,m;this.promise=new i(function(d,f){if(o!==void 0||m!==void 0)throw TypeError("Bad Promise constructor");o=d,m=f}),this.resolve=n(o),this.reject=n(m)};h.exports.f=function(i){return new s(i)}},6277:(h,T,e)=>{var n=e(1340);h.exports=function(s,i){return s===void 0?arguments.length<2?"":i:n(s)}},3929:(h,T,e)=>{var n=e(7850),s=TypeError;h.exports=function(i){if(n(i))throw s("The method doesn't accept regular expressions");return i}},2814:(h,T,e)=>{var n=e(7854),s=e(7293),i=e(1702),o=e(1340),m=e(3111).trim,d=e(1361),f=i("".charAt),S=n.parseFloat,g=n.Symbol,R=g&&g.iterator,x=1/S(d+"-0")!==-1/0||R&&!s(function(){S(Object(R))});h.exports=x?function(p){var O=m(o(p)),M=S(O);return M===0&&f(O,0)=="-"?-0:M}:S},1574:(h,T,e)=>{var n=e(9781),s=e(1702),i=e(6916),o=e(7293),m=e(1956),d=e(5181),f=e(5296),S=e(7908),g=e(8361),R=Object.assign,x=Object.defineProperty,E=s([].concat);h.exports=!R||o(function(){if(n&&R({b:1},R(x({},"a",{enumerable:!0,get:function(){x(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var p={},O={},M=Symbol(),A="abcdefghijklmnopqrst";return p[M]=7,A.split("").forEach(function(L){O[L]=L}),R({},p)[M]!=7||m(R({},O)).join("")!=A})?function(O,M){for(var A=S(O),L=arguments.length,V=1,K=d.f,F=f.f;L>V;)for(var k=g(arguments[V++]),l=K?E(m(k),K(k)):m(k),P=l.length,H=0,Z;P>H;)Z=l[H++],(!n||i(F,k,Z))&&(A[Z]=k[Z]);return A}:R},30:(h,T,e)=>{var n=e(9670),s=e(6048),i=e(748),o=e(3501),m=e(490),d=e(317),f=e(6200),S=">",g="<",R="prototype",x="script",E=f("IE_PROTO"),p=function(){},O=function(K){return g+x+S+K+g+"/"+x+S},M=function(K){K.write(O("")),K.close();var F=K.parentWindow.Object;return K=null,F},A=function(){var K=d("iframe"),F="java"+x+":",k;return K.style.display="none",m.appendChild(K),K.src=String(F),k=K.contentWindow.document,k.open(),k.write(O("document.F=Object")),k.close(),k.F},L,V=function(){try{L=new ActiveXObject("htmlfile")}catch{}V=typeof document!="undefined"?document.domain&&L?M(L):A():M(L);for(var K=i.length;K--;)delete V[R][i[K]];return V()};o[E]=!0,h.exports=Object.create||function(F,k){var l;return F!==null?(p[R]=n(F),l=new p,p[R]=null,l[E]=F):l=V(),k===void 0?l:s.f(l,k)}},6048:(h,T,e)=>{var n=e(9781),s=e(3353),i=e(3070),o=e(9670),m=e(5656),d=e(1956);T.f=n&&!s?Object.defineProperties:function(S,g){o(S);for(var R=m(g),x=d(g),E=x.length,p=0,O;E>p;)i.f(S,O=x[p++],R[O]);return S}},3070:(h,T,e)=>{var n=e(9781),s=e(4664),i=e(3353),o=e(9670),m=e(4948),d=TypeError,f=Object.defineProperty,S=Object.getOwnPropertyDescriptor,g="enumerable",R="configurable",x="writable";T.f=n?i?function(p,O,M){if(o(p),O=m(O),o(M),typeof p=="function"&&O==="prototype"&&"value"in M&&x in M&&!M[x]){var A=S(p,O);A&&A[x]&&(p[O]=M.value,M={configurable:R in M?M[R]:A[R],enumerable:g in M?M[g]:A[g],writable:!1})}return f(p,O,M)}:f:function(p,O,M){if(o(p),O=m(O),o(M),s)try{return f(p,O,M)}catch{}if("get"in M||"set"in M)throw d("Accessors not supported");return"value"in M&&(p[O]=M.value),p}},1236:(h,T,e)=>{var n=e(9781),s=e(6916),i=e(5296),o=e(9114),m=e(5656),d=e(4948),f=e(2597),S=e(4664),g=Object.getOwnPropertyDescriptor;T.f=n?g:function(x,E){if(x=m(x),E=d(E),S)try{return g(x,E)}catch{}if(f(x,E))return o(!s(i.f,x,E),x[E])}},1156:(h,T,e)=>{var n=e(4326),s=e(5656),i=e(8006).f,o=e(1589),m=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],d=function(f){try{return i(f)}catch{return o(m)}};h.exports.f=function(S){return m&&n(S)=="Window"?d(S):i(s(S))}},8006:(h,T,e)=>{var n=e(6324),s=e(748),i=s.concat("length","prototype");T.f=Object.getOwnPropertyNames||function(m){return n(m,i)}},5181:(h,T)=>{T.f=Object.getOwnPropertySymbols},9518:(h,T,e)=>{var n=e(2597),s=e(614),i=e(7908),o=e(6200),m=e(8544),d=o("IE_PROTO"),f=Object,S=f.prototype;h.exports=m?f.getPrototypeOf:function(g){var R=i(g);if(n(R,d))return R[d];var x=R.constructor;return s(x)&&R instanceof x?x.prototype:R instanceof f?S:null}},2050:(h,T,e)=>{var n=e(7293),s=e(111),i=e(4326),o=e(7556),m=Object.isExtensible,d=n(function(){});h.exports=d||o?function(S){return!s(S)||o&&i(S)=="ArrayBuffer"?!1:m?m(S):!0}:m},7976:(h,T,e)=>{var n=e(1702);h.exports=n({}.isPrototypeOf)},6324:(h,T,e)=>{var n=e(1702),s=e(2597),i=e(5656),o=e(1318).indexOf,m=e(3501),d=n([].push);h.exports=function(f,S){var g=i(f),R=0,x=[],E;for(E in g)!s(m,E)&&s(g,E)&&d(x,E);for(;S.length>R;)s(g,E=S[R++])&&(~o(x,E)||d(x,E));return x}},1956:(h,T,e)=>{var n=e(6324),s=e(748);h.exports=Object.keys||function(o){return n(o,s)}},5296:(h,T)=>{var e={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,s=n&&!e.call({1:2},1);T.f=s?function(o){var m=n(this,o);return!!m&&m.enumerable}:e},7674:(h,T,e)=>{var n=e(1702),s=e(9670),i=e(6077);h.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var o=!1,m={},d;try{d=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),d(m,[]),o=m instanceof Array}catch{}return function(S,g){return s(S),i(g),o?d(S,g):S.__proto__=g,S}}():void 0)},4699:(h,T,e)=>{var n=e(9781),s=e(1702),i=e(1956),o=e(5656),m=e(5296).f,d=s(m),f=s([].push),S=function(g){return function(R){for(var x=o(R),E=i(x),p=E.length,O=0,M=[],A;p>O;)A=E[O++],(!n||d(x,A))&&f(M,g?[A,x[A]]:x[A]);return M}};h.exports={entries:S(!0),values:S(!1)}},288:(h,T,e)=>{var n=e(1694),s=e(648);h.exports=n?{}.toString:function(){return"[object "+s(this)+"]"}},2140:(h,T,e)=>{var n=e(6916),s=e(614),i=e(111),o=TypeError;h.exports=function(m,d){var f,S;if(d==="string"&&s(f=m.toString)&&!i(S=n(f,m))||s(f=m.valueOf)&&!i(S=n(f,m))||d!=="string"&&s(f=m.toString)&&!i(S=n(f,m)))return S;throw o("Can't convert object to primitive value")}},3887:(h,T,e)=>{var n=e(5005),s=e(1702),i=e(8006),o=e(5181),m=e(9670),d=s([].concat);h.exports=n("Reflect","ownKeys")||function(S){var g=i.f(m(S)),R=o.f;return R?d(g,R(S)):g}},857:(h,T,e)=>{var n=e(7854);h.exports=n},2534:h=>{h.exports=function(T){try{return{error:!1,value:T()}}catch(e){return{error:!0,value:e}}}},3702:(h,T,e)=>{var n=e(7854),s=e(2492),i=e(614),o=e(4705),m=e(2788),d=e(5112),f=e(7871),S=e(1913),g=e(7392),R=s&&s.prototype,x=d("species"),E=!1,p=i(n.PromiseRejectionEvent),O=o("Promise",function(){var M=m(s),A=M!==String(s);if(!A&&g===66||S&&!(R.catch&&R.finally))return!0;if(g>=51&&/native code/.test(M))return!1;var L=new s(function(F){F(1)}),V=function(F){F(function(){},function(){})},K=L.constructor={};return K[x]=V,E=L.then(function(){})instanceof V,E?!A&&f&&!p:!0});h.exports={CONSTRUCTOR:O,REJECTION_EVENT:p,SUBCLASSING:E}},2492:(h,T,e)=>{var n=e(7854);h.exports=n.Promise},9478:(h,T,e)=>{var n=e(9670),s=e(111),i=e(8523);h.exports=function(o,m){if(n(o),s(m)&&m.constructor===o)return m;var d=i.f(o),f=d.resolve;return f(m),d.promise}},612:(h,T,e)=>{var n=e(2492),s=e(7072),i=e(3702).CONSTRUCTOR;h.exports=i||!s(function(o){n.all(o).then(void 0,function(){})})},2626:(h,T,e)=>{var n=e(3070).f;h.exports=function(s,i,o){o in s||n(s,o,{configurable:!0,get:function(){return i[o]},set:function(m){i[o]=m}})}},8572:h=>{var T=function(){this.head=null,this.tail=null};T.prototype={add:function(e){var n={item:e,next:null};this.head?this.tail.next=n:this.head=n,this.tail=n},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},h.exports=T},7651:(h,T,e)=>{var n=e(6916),s=e(9670),i=e(614),o=e(4326),m=e(2261),d=TypeError;h.exports=function(f,S){var g=f.exec;if(i(g)){var R=n(g,f,S);return R!==null&&s(R),R}if(o(f)==="RegExp")return n(m,f,S);throw d("RegExp#exec called on incompatible receiver")}},2261:(h,T,e)=>{var n=e(6916),s=e(1702),i=e(1340),o=e(7066),m=e(2999),d=e(2309),f=e(30),S=e(9909).get,g=e(9441),R=e(7168),x=d("native-string-replace",String.prototype.replace),E=RegExp.prototype.exec,p=E,O=s("".charAt),M=s("".indexOf),A=s("".replace),L=s("".slice),V=function(){var l=/a/,P=/b*/g;return n(E,l,"a"),n(E,P,"a"),l.lastIndex!==0||P.lastIndex!==0}(),K=m.BROKEN_CARET,F=/()??/.exec("")[1]!==void 0,k=V||F||K||g||R;k&&(p=function(P){var H=this,Z=S(H),Q=i(P),ee=Z.raw,te,fe,de,_,Y,b,D;if(ee)return ee.lastIndex=H.lastIndex,te=n(p,ee,Q),H.lastIndex=ee.lastIndex,te;var X=Z.groups,q=K&&H.sticky,U=n(o,H),v=H.source,u=0,c=Q;if(q&&(U=A(U,"y",""),M(U,"g")===-1&&(U+="g"),c=L(Q,H.lastIndex),H.lastIndex>0&&(!H.multiline||H.multiline&&O(Q,H.lastIndex-1)!==`
`)&&(v="(?: "+v+")",c=" "+c,u++),fe=new RegExp("^(?:"+v+")",U)),F&&(fe=new RegExp("^"+v+"$(?!\\s)",U)),V&&(de=H.lastIndex),_=n(E,q?fe:H,c),q?_?(_.input=L(_.input,u),_[0]=L(_[0],u),_.index=H.lastIndex,H.lastIndex+=_[0].length):H.lastIndex=0:V&&_&&(H.lastIndex=H.global?_.index+_[0].length:de),F&&_&&_.length>1&&n(x,_[0],fe,function(){for(Y=1;Y<arguments.length-2;Y++)arguments[Y]===void 0&&(_[Y]=void 0)}),_&&X)for(_.groups=b=f(null),Y=0;Y<X.length;Y++)D=X[Y],b[D[0]]=_[D[1]];return _}),h.exports=p},7066:(h,T,e)=>{var n=e(9670);h.exports=function(){var s=n(this),i="";return s.hasIndices&&(i+="d"),s.global&&(i+="g"),s.ignoreCase&&(i+="i"),s.multiline&&(i+="m"),s.dotAll&&(i+="s"),s.unicode&&(i+="u"),s.unicodeSets&&(i+="v"),s.sticky&&(i+="y"),i}},4706:(h,T,e)=>{var n=e(6916),s=e(2597),i=e(7976),o=e(7066),m=RegExp.prototype;h.exports=function(d){var f=d.flags;return f===void 0&&!("flags"in m)&&!s(d,"flags")&&i(m,d)?n(o,d):f}},2999:(h,T,e)=>{var n=e(7293),s=e(7854),i=s.RegExp,o=n(function(){var f=i("a","y");return f.lastIndex=2,f.exec("abcd")!=null}),m=o||n(function(){return!i("a","y").sticky}),d=o||n(function(){var f=i("^r","gy");return f.lastIndex=2,f.exec("str")!=null});h.exports={BROKEN_CARET:d,MISSED_STICKY:m,UNSUPPORTED_Y:o}},9441:(h,T,e)=>{var n=e(7293),s=e(7854),i=s.RegExp;h.exports=n(function(){var o=i(".","s");return!(o.dotAll&&o.exec(`
`)&&o.flags==="s")})},7168:(h,T,e)=>{var n=e(7293),s=e(7854),i=s.RegExp;h.exports=n(function(){var o=i("(?<a>b)","g");return o.exec("b").groups.a!=="b"||"b".replace(o,"$<a>c")!=="bc"})},4488:h=>{var T=TypeError;h.exports=function(e){if(e==null)throw T("Can't call method on "+e);return e}},1150:h=>{h.exports=Object.is||function(e,n){return e===n?e!==0||1/e===1/n:e!=e&&n!=n}},7152:(h,T,e)=>{var n=e(7854),s=e(2104),i=e(614),o=e(8113),m=e(206),d=e(8053),f=/MSIE .\./.test(o),S=n.Function,g=function(R){return f?function(x,E){var p=d(arguments.length,1)>2,O=i(x)?x:S(x),M=p?m(arguments,2):void 0;return R(p?function(){s(O,this,M)}:O,E)}:R};h.exports={setTimeout:g(n.setTimeout),setInterval:g(n.setInterval)}},6340:(h,T,e)=>{var n=e(5005),s=e(3070),i=e(5112),o=e(9781),m=i("species");h.exports=function(d){var f=n(d),S=s.f;o&&f&&!f[m]&&S(f,m,{configurable:!0,get:function(){return this}})}},8003:(h,T,e)=>{var n=e(3070).f,s=e(2597),i=e(5112),o=i("toStringTag");h.exports=function(m,d,f){m&&!f&&(m=m.prototype),m&&!s(m,o)&&n(m,o,{configurable:!0,value:d})}},6200:(h,T,e)=>{var n=e(2309),s=e(9711),i=n("keys");h.exports=function(o){return i[o]||(i[o]=s(o))}},5465:(h,T,e)=>{var n=e(7854),s=e(3072),i="__core-js_shared__",o=n[i]||s(i,{});h.exports=o},2309:(h,T,e)=>{var n=e(1913),s=e(5465);(h.exports=function(i,o){return s[i]||(s[i]=o!==void 0?o:{})})("versions",[]).push({version:"3.23.5",mode:n?"pure":"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.5/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:(h,T,e)=>{var n=e(9670),s=e(9483),i=e(5112),o=i("species");h.exports=function(m,d){var f=n(m).constructor,S;return f===void 0||(S=n(f)[o])==null?d:s(S)}},3429:(h,T,e)=>{var n=e(7293);h.exports=function(s){return n(function(){var i=""[s]('"');return i!==i.toLowerCase()||i.split('"').length>3})}},8710:(h,T,e)=>{var n=e(1702),s=e(9303),i=e(1340),o=e(4488),m=n("".charAt),d=n("".charCodeAt),f=n("".slice),S=function(g){return function(R,x){var E=i(o(R)),p=s(x),O=E.length,M,A;return p<0||p>=O?g?"":void 0:(M=d(E,p),M<55296||M>56319||p+1===O||(A=d(E,p+1))<56320||A>57343?g?m(E,p):M:g?f(E,p,p+2):(M-55296<<10)+(A-56320)+65536)}};h.exports={codeAt:S(!1),charAt:S(!0)}},6650:(h,T,e)=>{var n=e(1702),s=e(7466),i=e(1340),o=e(8415),m=e(4488),d=n(o),f=n("".slice),S=Math.ceil,g=function(R){return function(x,E,p){var O=i(m(x)),M=s(E),A=O.length,L=p===void 0?" ":i(p),V,K;return M<=A||L==""?O:(V=M-A,K=d(L,S(V/L.length)),K.length>V&&(K=f(K,0,V)),R?O+K:K+O)}};h.exports={start:g(!1),end:g(!0)}},3197:(h,T,e)=>{var n=e(1702),s=2147483647,i=36,o=1,m=26,d=38,f=700,S=72,g=128,R="-",x=/[^\0-\u007E]/,E=/[.\u3002\uFF0E\uFF61]/g,p="Overflow: input needs wider integers to process",O=i-o,M=RangeError,A=n(E.exec),L=Math.floor,V=String.fromCharCode,K=n("".charCodeAt),F=n([].join),k=n([].push),l=n("".replace),P=n("".split),H=n("".toLowerCase),Z=function(fe){for(var de=[],_=0,Y=fe.length;_<Y;){var b=K(fe,_++);if(b>=55296&&b<=56319&&_<Y){var D=K(fe,_++);(D&64512)==56320?k(de,((b&1023)<<10)+(D&1023)+65536):(k(de,b),_--)}else k(de,b)}return de},Q=function(fe){return fe+22+75*(fe<26)},ee=function(fe,de,_){var Y=0;for(fe=_?L(fe/f):fe>>1,fe+=L(fe/de);fe>O*m>>1;)fe=L(fe/O),Y+=i;return L(Y+(O+1)*fe/(fe+d))},te=function(fe){var de=[];fe=Z(fe);var _=fe.length,Y=g,b=0,D=S,X,q;for(X=0;X<fe.length;X++)q=fe[X],q<128&&k(de,V(q));var U=de.length,v=U;for(U&&k(de,R);v<_;){var u=s;for(X=0;X<fe.length;X++)q=fe[X],q>=Y&&q<u&&(u=q);var c=v+1;if(u-Y>L((s-b)/c))throw M(p);for(b+=(u-Y)*c,Y=u,X=0;X<fe.length;X++){if(q=fe[X],q<Y&&++b>s)throw M(p);if(q==Y){for(var y=b,B=i;;){var G=B<=D?o:B>=D+m?m:B-D;if(y<G)break;var W=y-G,j=i-G;k(de,V(Q(G+W%j))),y=L(W/j),B+=i}k(de,V(Q(y))),D=ee(b,c,v==U),b=0,v++}}b++,Y++}return F(de,"")};h.exports=function(fe){var de=[],_=P(l(H(fe),E,"."),"."),Y,b;for(Y=0;Y<_.length;Y++)b=_[Y],k(de,A(x,b)?"xn--"+te(b):b);return F(de,".")}},8415:(h,T,e)=>{var n=e(9303),s=e(1340),i=e(4488),o=RangeError;h.exports=function(d){var f=s(i(this)),S="",g=n(d);if(g<0||g==1/0)throw o("Wrong number of repetitions");for(;g>0;(g>>>=1)&&(f+=f))g&1&&(S+=f);return S}},6091:(h,T,e)=>{var n=e(6530).PROPER,s=e(7293),i=e(1361),o="\u200B\x85\u180E";h.exports=function(m){return s(function(){return!!i[m]()||o[m]()!==o||n&&i[m].name!==m})}},3111:(h,T,e)=>{var n=e(1702),s=e(4488),i=e(1340),o=e(1361),m=n("".replace),d="["+o+"]",f=RegExp("^"+d+d+"*"),S=RegExp(d+d+"*$"),g=function(R){return function(x){var E=i(s(x));return R&1&&(E=m(E,f,"")),R&2&&(E=m(E,S,"")),E}};h.exports={start:g(1),end:g(2),trim:g(3)}},6532:(h,T,e)=>{var n=e(6916),s=e(5005),i=e(5112),o=e(8052);h.exports=function(){var m=s("Symbol"),d=m&&m.prototype,f=d&&d.valueOf,S=i("toPrimitive");d&&!d[S]&&o(d,S,function(g){return n(f,this)},{arity:1})}},261:(h,T,e)=>{var n=e(7854),s=e(2104),i=e(9974),o=e(614),m=e(2597),d=e(7293),f=e(490),S=e(206),g=e(317),R=e(8053),x=e(6833),E=e(5268),p=n.setImmediate,O=n.clearImmediate,M=n.process,A=n.Dispatch,L=n.Function,V=n.MessageChannel,K=n.String,F=0,k={},l="onreadystatechange",P,H,Z,Q;try{P=n.location}catch{}var ee=function(_){if(m(k,_)){var Y=k[_];delete k[_],Y()}},te=function(_){return function(){ee(_)}},fe=function(_){ee(_.data)},de=function(_){n.postMessage(K(_),P.protocol+"//"+P.host)};(!p||!O)&&(p=function(Y){R(arguments.length,1);var b=o(Y)?Y:L(Y),D=S(arguments,1);return k[++F]=function(){s(b,void 0,D)},H(F),F},O=function(Y){delete k[Y]},E?H=function(_){M.nextTick(te(_))}:A&&A.now?H=function(_){A.now(te(_))}:V&&!x?(Z=new V,Q=Z.port2,Z.port1.onmessage=fe,H=i(Q.postMessage,Q)):n.addEventListener&&o(n.postMessage)&&!n.importScripts&&P&&P.protocol!=="file:"&&!d(de)?(H=de,n.addEventListener("message",fe,!1)):l in g("script")?H=function(_){f.appendChild(g("script"))[l]=function(){f.removeChild(this),ee(_)}}:H=function(_){setTimeout(te(_),0)}),h.exports={set:p,clear:O}},863:(h,T,e)=>{var n=e(1702);h.exports=n(1 .valueOf)},1400:(h,T,e)=>{var n=e(9303),s=Math.max,i=Math.min;h.exports=function(o,m){var d=n(o);return d<0?s(d+m,0):i(d,m)}},4599:(h,T,e)=>{var n=e(7593),s=TypeError;h.exports=function(i){var o=n(i,"number");if(typeof o=="number")throw s("Can't convert number to bigint");return BigInt(o)}},7067:(h,T,e)=>{var n=e(9303),s=e(7466),i=RangeError;h.exports=function(o){if(o===void 0)return 0;var m=n(o),d=s(m);if(m!==d)throw i("Wrong length or index");return d}},5656:(h,T,e)=>{var n=e(8361),s=e(4488);h.exports=function(i){return n(s(i))}},9303:(h,T,e)=>{var n=e(4758);h.exports=function(s){var i=+s;return i!==i||i===0?0:n(i)}},7466:(h,T,e)=>{var n=e(9303),s=Math.min;h.exports=function(i){return i>0?s(n(i),9007199254740991):0}},7908:(h,T,e)=>{var n=e(4488),s=Object;h.exports=function(i){return s(n(i))}},4590:(h,T,e)=>{var n=e(3002),s=RangeError;h.exports=function(i,o){var m=n(i);if(m%o)throw s("Wrong offset");return m}},3002:(h,T,e)=>{var n=e(9303),s=RangeError;h.exports=function(i){var o=n(i);if(o<0)throw s("The argument can't be less than 0");return o}},7593:(h,T,e)=>{var n=e(6916),s=e(111),i=e(2190),o=e(8173),m=e(2140),d=e(5112),f=TypeError,S=d("toPrimitive");h.exports=function(g,R){if(!s(g)||i(g))return g;var x=o(g,S),E;if(x){if(R===void 0&&(R="default"),E=n(x,g,R),!s(E)||i(E))return E;throw f("Can't convert object to primitive value")}return R===void 0&&(R="number"),m(g,R)}},4948:(h,T,e)=>{var n=e(7593),s=e(2190);h.exports=function(i){var o=n(i,"string");return s(o)?o:o+""}},1694:(h,T,e)=>{var n=e(5112),s=n("toStringTag"),i={};i[s]="z",h.exports=String(i)==="[object z]"},1340:(h,T,e)=>{var n=e(648),s=String;h.exports=function(i){if(n(i)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return s(i)}},6330:h=>{var T=String;h.exports=function(e){try{return T(e)}catch{return"Object"}}},9843:(h,T,e)=>{var n=e(2109),s=e(7854),i=e(6916),o=e(9781),m=e(3832),d=e(260),f=e(3331),S=e(5787),g=e(9114),R=e(8880),x=e(5988),E=e(7466),p=e(7067),O=e(4590),M=e(4948),A=e(2597),L=e(648),V=e(111),K=e(2190),F=e(30),k=e(7976),l=e(7674),P=e(8006).f,H=e(7321),Z=e(2092).forEach,Q=e(6340),ee=e(3070),te=e(1236),fe=e(9909),de=e(9587),_=fe.get,Y=fe.set,b=fe.enforce,D=ee.f,X=te.f,q=Math.round,U=s.RangeError,v=f.ArrayBuffer,u=v.prototype,c=f.DataView,y=d.NATIVE_ARRAY_BUFFER_VIEWS,B=d.TYPED_ARRAY_TAG,G=d.TypedArray,W=d.TypedArrayPrototype,j=d.aTypedArrayConstructor,re=d.isTypedArray,ae="BYTES_PER_ELEMENT",be="Wrong length",Me=function(C,z){j(C);for(var Ne=0,Te=z.length,Ue=new C(Te);Te>Ne;)Ue[Ne]=z[Ne++];return Ue},Be=function(C,z){D(C,z,{get:function(){return _(this)[z]}})},Ge=function(C){var z;return k(u,C)||(z=L(C))=="ArrayBuffer"||z=="SharedArrayBuffer"},Ye=function(C,z){return re(C)&&!K(z)&&z in C&&x(+z)&&z>=0},it=function(z,Ne){return Ne=M(Ne),Ye(z,Ne)?g(2,z[Ne]):X(z,Ne)},_t=function(z,Ne,Te){return Ne=M(Ne),Ye(z,Ne)&&V(Te)&&A(Te,"value")&&!A(Te,"get")&&!A(Te,"set")&&!Te.configurable&&(!A(Te,"writable")||Te.writable)&&(!A(Te,"enumerable")||Te.enumerable)?(z[Ne]=Te.value,z):D(z,Ne,Te)};o?(y||(te.f=it,ee.f=_t,Be(W,"buffer"),Be(W,"byteOffset"),Be(W,"byteLength"),Be(W,"length")),n({target:"Object",stat:!0,forced:!y},{getOwnPropertyDescriptor:it,defineProperty:_t}),h.exports=function(C,z,Ne){var Te=C.match(/\d+$/)[0]/8,Ue=C+(Ne?"Clamped":"")+"Array",Ee="get"+C,De="set"+C,ze=s[Ue],Xe=ze,Ze=Xe&&Xe.prototype,Fe={},rt=function(et,$e){var ct=_(et);return ct.view[Ee]($e*Te+ct.byteOffset,!0)},vt=function(et,$e,ct){var St=_(et);Ne&&(ct=(ct=q(ct))<0?0:ct>255?255:ct&255),St.view[De]($e*Te+St.byteOffset,ct,!0)},at=function(et,$e){D(et,$e,{get:function(){return rt(this,$e)},set:function(ct){return vt(this,$e,ct)},enumerable:!0})};y?m&&(Xe=z(function(et,$e,ct,St){return S(et,Ze),de(function(){return V($e)?Ge($e)?St!==void 0?new ze($e,O(ct,Te),St):ct!==void 0?new ze($e,O(ct,Te)):new ze($e):re($e)?Me(Xe,$e):i(H,Xe,$e):new ze(p($e))}(),et,Xe)}),l&&l(Xe,G),Z(P(ze),function(et){et in Xe||R(Xe,et,ze[et])}),Xe.prototype=Ze):(Xe=z(function(et,$e,ct,St){S(et,Ze);var It=0,jt=0,Xt,Pt,Kt;if(!V($e))Kt=p($e),Pt=Kt*Te,Xt=new v(Pt);else if(Ge($e)){Xt=$e,jt=O(ct,Te);var ar=$e.byteLength;if(St===void 0){if(ar%Te||(Pt=ar-jt,Pt<0))throw U(be)}else if(Pt=E(St)*Te,Pt+jt>ar)throw U(be);Kt=Pt/Te}else return re($e)?Me(Xe,$e):i(H,Xe,$e);for(Y(et,{buffer:Xt,byteOffset:jt,byteLength:Pt,length:Kt,view:new c(Xt)});It<Kt;)at(et,It++)}),l&&l(Xe,G),Ze=Xe.prototype=F(W)),Ze.constructor!==Xe&&R(Ze,"constructor",Xe),b(Ze).TypedArrayConstructor=Xe,B&&R(Ze,B,Ue);var He=Xe!=ze;Fe[Ue]=Xe,n({global:!0,constructor:!0,forced:He,sham:!y},Fe),ae in Xe||R(Xe,ae,Te),ae in Ze||R(Ze,ae,Te),Q(Ue)}):h.exports=function(){}},3832:(h,T,e)=>{var n=e(7854),s=e(7293),i=e(7072),o=e(260).NATIVE_ARRAY_BUFFER_VIEWS,m=n.ArrayBuffer,d=n.Int8Array;h.exports=!o||!s(function(){d(1)})||!s(function(){new d(-1)})||!i(function(f){new d,new d(null),new d(1.5),new d(f)},!0)||s(function(){return new d(new m(2),1,void 0).length!==1})},3074:(h,T,e)=>{var n=e(7745),s=e(6304);h.exports=function(i,o){return n(s(i),o)}},7321:(h,T,e)=>{var n=e(9974),s=e(6916),i=e(9483),o=e(7908),m=e(6244),d=e(8554),f=e(1246),S=e(7659),g=e(260).aTypedArrayConstructor;h.exports=function(x){var E=i(this),p=o(x),O=arguments.length,M=O>1?arguments[1]:void 0,A=M!==void 0,L=f(p),V,K,F,k,l,P;if(L&&!S(L))for(l=d(p,L),P=l.next,p=[];!(k=s(P,l)).done;)p.push(k.value);for(A&&O>2&&(M=n(M,arguments[2])),K=m(p),F=new(g(E))(K),V=0;K>V;V++)F[V]=A?M(p[V],V):p[V];return F}},6304:(h,T,e)=>{var n=e(260),s=e(6707),i=n.aTypedArrayConstructor,o=n.getTypedArrayConstructor;h.exports=function(m){return i(s(m,o(m)))}},9711:(h,T,e)=>{var n=e(1702),s=0,i=Math.random(),o=n(1 .toString);h.exports=function(m){return"Symbol("+(m===void 0?"":m)+")_"+o(++s+i,36)}},3307:(h,T,e)=>{var n=e(133);h.exports=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},3353:(h,T,e)=>{var n=e(9781),s=e(7293);h.exports=n&&s(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},8053:h=>{var T=TypeError;h.exports=function(e,n){if(e<n)throw T("Not enough arguments");return e}},6061:(h,T,e)=>{var n=e(5112);T.f=n},5112:(h,T,e)=>{var n=e(7854),s=e(2309),i=e(2597),o=e(9711),m=e(133),d=e(3307),f=s("wks"),S=n.Symbol,g=S&&S.for,R=d?S:S&&S.withoutSetter||o;h.exports=function(x){if(!i(f,x)||!(m||typeof f[x]=="string")){var E="Symbol."+x;m&&i(S,x)?f[x]=S[x]:d&&g?f[x]=g(E):f[x]=R(E)}return f[x]}},1361:h=>{h.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},9191:(h,T,e)=>{var n=e(5005),s=e(2597),i=e(8880),o=e(7976),m=e(7674),d=e(9920),f=e(2626),S=e(9587),g=e(6277),R=e(8340),x=e(7741),E=e(2914),p=e(9781),O=e(1913);h.exports=function(M,A,L,V){var K="stackTraceLimit",F=V?2:1,k=M.split("."),l=k[k.length-1],P=n.apply(null,k);if(!!P){var H=P.prototype;if(!O&&s(H,"cause")&&delete H.cause,!L)return P;var Z=n("Error"),Q=A(function(ee,te){var fe=g(V?te:ee,void 0),de=V?new P(ee):new P;return fe!==void 0&&i(de,"message",fe),E&&i(de,"stack",x(de.stack,2)),this&&o(H,this)&&S(de,this,Q),arguments.length>F&&R(de,arguments[F]),de});if(Q.prototype=H,l!=="Error"?m?m(Q,Z):d(Q,Z,{name:!0}):p&&K in P&&(f(Q,P,K),f(Q,P,"prepareStackTrace")),d(Q,P),!O)try{H.name!==l&&i(H,"name",l),H.constructor=Q}catch{}return Q}}},9575:(h,T,e)=>{var n=e(2109),s=e(1702),i=e(7293),o=e(3331),m=e(9670),d=e(1400),f=e(7466),S=e(6707),g=o.ArrayBuffer,R=o.DataView,x=R.prototype,E=s(g.prototype.slice),p=s(x.getUint8),O=s(x.setUint8),M=i(function(){return!new g(2).slice(1,void 0).byteLength});n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:M},{slice:function(L,V){if(E&&V===void 0)return E(m(this),L);for(var K=m(this).byteLength,F=d(L,K),k=d(V===void 0?K:V,K),l=new(S(this,g))(f(k-F)),P=new R(this),H=new R(l),Z=0;F<k;)O(H,Z++,p(P,F++));return l}})},2222:(h,T,e)=>{var n=e(2109),s=e(7293),i=e(3157),o=e(111),m=e(7908),d=e(6244),f=e(7207),S=e(6135),g=e(5417),R=e(1194),x=e(5112),E=e(7392),p=x("isConcatSpreadable"),O=E>=51||!s(function(){var V=[];return V[p]=!1,V.concat()[0]!==V}),M=R("concat"),A=function(V){if(!o(V))return!1;var K=V[p];return K!==void 0?!!K:i(V)},L=!O||!M;n({target:"Array",proto:!0,arity:1,forced:L},{concat:function(K){var F=m(this),k=g(F,0),l=0,P,H,Z,Q,ee;for(P=-1,Z=arguments.length;P<Z;P++)if(ee=P===-1?F:arguments[P],A(ee))for(Q=d(ee),f(l+Q),H=0;H<Q;H++,l++)H in ee&&S(k,l,ee[H]);else f(l+1),S(k,l++,ee);return k.length=l,k}})},6541:(h,T,e)=>{var n=e(2109),s=e(2092).every,i=e(9341),o=i("every");n({target:"Array",proto:!0,forced:!o},{every:function(d){return s(this,d,arguments.length>1?arguments[1]:void 0)}})},7327:(h,T,e)=>{var n=e(2109),s=e(2092).filter,i=e(1194),o=i("filter");n({target:"Array",proto:!0,forced:!o},{filter:function(d){return s(this,d,arguments.length>1?arguments[1]:void 0)}})},9826:(h,T,e)=>{var n=e(2109),s=e(2092).find,i=e(1223),o="find",m=!0;o in[]&&Array(1)[o](function(){m=!1}),n({target:"Array",proto:!0,forced:m},{find:function(f){return s(this,f,arguments.length>1?arguments[1]:void 0)}}),i(o)},9554:(h,T,e)=>{var n=e(2109),s=e(8533);n({target:"Array",proto:!0,forced:[].forEach!=s},{forEach:s})},1038:(h,T,e)=>{var n=e(2109),s=e(8457),i=e(7072),o=!i(function(m){Array.from(m)});n({target:"Array",stat:!0,forced:o},{from:s})},6699:(h,T,e)=>{var n=e(2109),s=e(1318).includes,i=e(7293),o=e(1223),m=i(function(){return!Array(1).includes()});n({target:"Array",proto:!0,forced:m},{includes:function(f){return s(this,f,arguments.length>1?arguments[1]:void 0)}}),o("includes")},2772:(h,T,e)=>{var n=e(2109),s=e(1702),i=e(1318).indexOf,o=e(9341),m=s([].indexOf),d=!!m&&1/m([1],1,-0)<0,f=o("indexOf");n({target:"Array",proto:!0,forced:d||!f},{indexOf:function(g){var R=arguments.length>1?arguments[1]:void 0;return d?m(this,g,R)||0:i(this,g,R)}})},9753:(h,T,e)=>{var n=e(2109),s=e(3157);n({target:"Array",stat:!0},{isArray:s})},6992:(h,T,e)=>{var n=e(5656),s=e(1223),i=e(7497),o=e(9909),m=e(3070).f,d=e(654),f=e(1913),S=e(9781),g="Array Iterator",R=o.set,x=o.getterFor(g);h.exports=d(Array,"Array",function(p,O){R(this,{type:g,target:n(p),index:0,kind:O})},function(){var p=x(this),O=p.target,M=p.kind,A=p.index++;return!O||A>=O.length?(p.target=void 0,{value:void 0,done:!0}):M=="keys"?{value:A,done:!1}:M=="values"?{value:O[A],done:!1}:{value:[A,O[A]],done:!1}},"values");var E=i.Arguments=i.Array;if(s("keys"),s("values"),s("entries"),!f&&S&&E.name!=="values")try{m(E,"name",{value:"values"})}catch{}},9600:(h,T,e)=>{var n=e(2109),s=e(1702),i=e(8361),o=e(5656),m=e(9341),d=s([].join),f=i!=Object,S=m("join",",");n({target:"Array",proto:!0,forced:f||!S},{join:function(R){return d(o(this),R===void 0?",":R)}})},4986:(h,T,e)=>{var n=e(2109),s=e(6583);n({target:"Array",proto:!0,forced:s!==[].lastIndexOf},{lastIndexOf:s})},1249:(h,T,e)=>{var n=e(2109),s=e(2092).map,i=e(1194),o=i("map");n({target:"Array",proto:!0,forced:!o},{map:function(d){return s(this,d,arguments.length>1?arguments[1]:void 0)}})},5827:(h,T,e)=>{var n=e(2109),s=e(3671).left,i=e(9341),o=e(7392),m=e(5268),d=i("reduce"),f=!m&&o>79&&o<83;n({target:"Array",proto:!0,forced:!d||f},{reduce:function(g){var R=arguments.length;return s(this,g,R,R>1?arguments[1]:void 0)}})},5069:(h,T,e)=>{var n=e(2109),s=e(1702),i=e(3157),o=s([].reverse),m=[1,2];n({target:"Array",proto:!0,forced:String(m)===String(m.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),o(this)}})},7042:(h,T,e)=>{var n=e(2109),s=e(3157),i=e(4411),o=e(111),m=e(1400),d=e(6244),f=e(5656),S=e(6135),g=e(5112),R=e(1194),x=e(206),E=R("slice"),p=g("species"),O=Array,M=Math.max;n({target:"Array",proto:!0,forced:!E},{slice:function(L,V){var K=f(this),F=d(K),k=m(L,F),l=m(V===void 0?F:V,F),P,H,Z;if(s(K)&&(P=K.constructor,i(P)&&(P===O||s(P.prototype))?P=void 0:o(P)&&(P=P[p],P===null&&(P=void 0)),P===O||P===void 0))return x(K,k,l);for(H=new(P===void 0?O:P)(M(l-k,0)),Z=0;k<l;k++,Z++)k in K&&S(H,Z,K[k]);return H.length=Z,H}})},5212:(h,T,e)=>{var n=e(2109),s=e(2092).some,i=e(9341),o=i("some");n({target:"Array",proto:!0,forced:!o},{some:function(d){return s(this,d,arguments.length>1?arguments[1]:void 0)}})},2707:(h,T,e)=>{var n=e(2109),s=e(1702),i=e(9662),o=e(7908),m=e(6244),d=e(5117),f=e(1340),S=e(7293),g=e(4362),R=e(9341),x=e(8886),E=e(256),p=e(7392),O=e(8008),M=[],A=s(M.sort),L=s(M.push),V=S(function(){M.sort(void 0)}),K=S(function(){M.sort(null)}),F=R("sort"),k=!S(function(){if(p)return p<70;if(!(x&&x>3)){if(E)return!0;if(O)return O<603;var H="",Z,Q,ee,te;for(Z=65;Z<76;Z++){switch(Q=String.fromCharCode(Z),Z){case 66:case 69:case 70:case 72:ee=3;break;case 68:case 71:ee=4;break;default:ee=2}for(te=0;te<47;te++)M.push({k:Q+te,v:ee})}for(M.sort(function(fe,de){return de.v-fe.v}),te=0;te<M.length;te++)Q=M[te].k.charAt(0),H.charAt(H.length-1)!==Q&&(H+=Q);return H!=="DGBEFHACIJK"}}),l=V||!K||!F||!k,P=function(H){return function(Z,Q){return Q===void 0?-1:Z===void 0?1:H!==void 0?+H(Z,Q)||0:f(Z)>f(Q)?1:-1}};n({target:"Array",proto:!0,forced:l},{sort:function(Z){Z!==void 0&&i(Z);var Q=o(this);if(k)return Z===void 0?A(Q):A(Q,Z);var ee=[],te=m(Q),fe,de;for(de=0;de<te;de++)de in Q&&L(ee,Q[de]);for(g(ee,P(Z)),fe=ee.length,de=0;de<fe;)Q[de]=ee[de++];for(;de<te;)d(Q,de++);return Q}})},561:(h,T,e)=>{var n=e(2109),s=e(7908),i=e(1400),o=e(9303),m=e(6244),d=e(7207),f=e(5417),S=e(6135),g=e(5117),R=e(1194),x=R("splice"),E=Math.max,p=Math.min;n({target:"Array",proto:!0,forced:!x},{splice:function(M,A){var L=s(this),V=m(L),K=i(M,V),F=arguments.length,k,l,P,H,Z,Q;for(F===0?k=l=0:F===1?(k=0,l=V-K):(k=F-2,l=p(E(o(A),0),V-K)),d(V+k-l),P=f(L,l),H=0;H<l;H++)Z=K+H,Z in L&&S(P,H,L[Z]);if(P.length=l,k<l){for(H=K;H<V-l;H++)Z=H+l,Q=H+k,Z in L?L[Q]=L[Z]:g(L,Q);for(H=V;H>V-l+k;H--)g(L,H-1)}else if(k>l)for(H=V-l;H>K;H--)Z=H+l-1,Q=H+k-1,Z in L?L[Q]=L[Z]:g(L,Q);for(H=0;H<k;H++)L[H+K]=arguments[H+2];return L.length=V-l+k,P}})},3843:(h,T,e)=>{var n=e(2109),s=e(1702),i=Date,o=s(i.prototype.getTime);n({target:"Date",stat:!0},{now:function(){return o(new i)}})},8733:(h,T,e)=>{var n=e(2109),s=e(5573);n({target:"Date",proto:!0,forced:Date.prototype.toISOString!==s},{toISOString:s})},3710:(h,T,e)=>{var n=e(1702),s=e(8052),i=Date.prototype,o="Invalid Date",m="toString",d=n(i[m]),f=n(i.getTime);String(new Date(NaN))!=o&&s(i,m,function(){var g=f(this);return g===g?d(this):o})},1703:(h,T,e)=>{var n=e(2109),s=e(7854),i=e(2104),o=e(9191),m="WebAssembly",d=s[m],f=Error("e",{cause:7}).cause!==7,S=function(R,x){var E={};E[R]=o(R,x,f),n({global:!0,constructor:!0,arity:1,forced:f},E)},g=function(R,x){if(d&&d[R]){var E={};E[R]=o(m+"."+R,x,f),n({target:m,stat:!0,constructor:!0,arity:1,forced:f},E)}};S("Error",function(R){return function(E){return i(R,this,arguments)}}),S("EvalError",function(R){return function(E){return i(R,this,arguments)}}),S("RangeError",function(R){return function(E){return i(R,this,arguments)}}),S("ReferenceError",function(R){return function(E){return i(R,this,arguments)}}),S("SyntaxError",function(R){return function(E){return i(R,this,arguments)}}),S("TypeError",function(R){return function(E){return i(R,this,arguments)}}),S("URIError",function(R){return function(E){return i(R,this,arguments)}}),g("CompileError",function(R){return function(E){return i(R,this,arguments)}}),g("LinkError",function(R){return function(E){return i(R,this,arguments)}}),g("RuntimeError",function(R){return function(E){return i(R,this,arguments)}})},6647:(h,T,e)=>{var n=e(8052),s=e(7762),i=Error.prototype;i.toString!==s&&n(i,"toString",s)},4812:(h,T,e)=>{var n=e(2109),s=e(7065);n({target:"Function",proto:!0,forced:Function.bind!==s},{bind:s})},8309:(h,T,e)=>{var n=e(9781),s=e(6530).EXISTS,i=e(1702),o=e(3070).f,m=Function.prototype,d=i(m.toString),f=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,S=i(f.exec),g="name";n&&!s&&o(m,g,{configurable:!0,get:function(){try{return S(f,d(this))[1]}catch{return""}}})},8862:(h,T,e)=>{var n=e(2109),s=e(5005),i=e(2104),o=e(6916),m=e(1702),d=e(7293),f=e(3157),S=e(614),g=e(111),R=e(2190),x=e(206),E=e(133),p=s("JSON","stringify"),O=m(/./.exec),M=m("".charAt),A=m("".charCodeAt),L=m("".replace),V=m(1 .toString),K=/[\uD800-\uDFFF]/g,F=/^[\uD800-\uDBFF]$/,k=/^[\uDC00-\uDFFF]$/,l=!E||d(function(){var Q=s("Symbol")();return p([Q])!="[null]"||p({a:Q})!="{}"||p(Object(Q))!="{}"}),P=d(function(){return p("\uDF06\uD834")!=='"\\udf06\\ud834"'||p("\uDEAD")!=='"\\udead"'}),H=function(Q,ee){var te=x(arguments),fe=ee;if(!(!g(ee)&&Q===void 0||R(Q)))return f(ee)||(ee=function(de,_){if(S(fe)&&(_=o(fe,this,de,_)),!R(_))return _}),te[1]=ee,i(p,null,te)},Z=function(Q,ee,te){var fe=M(te,ee-1),de=M(te,ee+1);return O(F,Q)&&!O(k,de)||O(k,Q)&&!O(F,fe)?"\\u"+V(A(Q,0),16):Q};p&&n({target:"JSON",stat:!0,arity:3,forced:l||P},{stringify:function(ee,te,fe){var de=x(arguments),_=i(l?H:p,null,de);return P&&typeof _=="string"?L(_,K,Z):_}})},3706:(h,T,e)=>{var n=e(7854),s=e(8003);s(n.JSON,"JSON",!0)},2703:(h,T,e)=>{var n=e(8003);n(Math,"Math",!0)},9653:(h,T,e)=>{var n=e(9781),s=e(7854),i=e(1702),o=e(4705),m=e(8052),d=e(2597),f=e(9587),S=e(7976),g=e(2190),R=e(7593),x=e(7293),E=e(8006).f,p=e(1236).f,O=e(3070).f,M=e(863),A=e(3111).trim,L="Number",V=s[L],K=V.prototype,F=s.TypeError,k=i("".slice),l=i("".charCodeAt),P=function(fe){var de=R(fe,"number");return typeof de=="bigint"?de:H(de)},H=function(fe){var de=R(fe,"number"),_,Y,b,D,X,q,U,v;if(g(de))throw F("Cannot convert a Symbol value to a number");if(typeof de=="string"&&de.length>2){if(de=A(de),_=l(de,0),_===43||_===45){if(Y=l(de,2),Y===88||Y===120)return NaN}else if(_===48){switch(l(de,1)){case 66:case 98:b=2,D=49;break;case 79:case 111:b=8,D=55;break;default:return+de}for(X=k(de,2),q=X.length,U=0;U<q;U++)if(v=l(X,U),v<48||v>D)return NaN;return parseInt(X,b)}}return+de};if(o(L,!V(" 0o1")||!V("0b1")||V("+0x1"))){for(var Z=function(de){var _=arguments.length<1?0:V(P(de)),Y=this;return S(K,Y)&&x(function(){M(Y)})?f(Object(_),Y,Z):_},Q=n?E(V):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),ee=0,te;Q.length>ee;ee++)d(V,te=Q[ee])&&!d(Z,te)&&O(Z,te,p(V,te));Z.prototype=K,K.constructor=Z,m(s,L,Z,{constructor:!0})}},6977:(h,T,e)=>{var n=e(2109),s=e(1702),i=e(9303),o=e(863),m=e(8415),d=e(7293),f=RangeError,S=String,g=Math.floor,R=s(m),x=s("".slice),E=s(1 .toFixed),p=function(K,F,k){return F===0?k:F%2===1?p(K,F-1,k*K):p(K*K,F/2,k)},O=function(K){for(var F=0,k=K;k>=4096;)F+=12,k/=4096;for(;k>=2;)F+=1,k/=2;return F},M=function(K,F,k){for(var l=-1,P=k;++l<6;)P+=F*K[l],K[l]=P%1e7,P=g(P/1e7)},A=function(K,F){for(var k=6,l=0;--k>=0;)l+=K[k],K[k]=g(l/F),l=l%F*1e7},L=function(K){for(var F=6,k="";--F>=0;)if(k!==""||F===0||K[F]!==0){var l=S(K[F]);k=k===""?l:k+R("0",7-l.length)+l}return k},V=d(function(){return E(8e-5,3)!=="0.000"||E(.9,0)!=="1"||E(1.255,2)!=="1.25"||E(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!d(function(){E({})});n({target:"Number",proto:!0,forced:V},{toFixed:function(F){var k=o(this),l=i(F),P=[0,0,0,0,0,0],H="",Z="0",Q,ee,te,fe;if(l<0||l>20)throw f("Incorrect fraction digits");if(k!=k)return"NaN";if(k<=-1e21||k>=1e21)return S(k);if(k<0&&(H="-",k=-k),k>1e-21)if(Q=O(k*p(2,69,1))-69,ee=Q<0?k*p(2,-Q,1):k/p(2,Q,1),ee*=4503599627370496,Q=52-Q,Q>0){for(M(P,0,ee),te=l;te>=7;)M(P,1e7,0),te-=7;for(M(P,p(10,te,1),0),te=Q-1;te>=23;)A(P,8388608),te-=23;A(P,1<<te),M(P,1,1),A(P,2),Z=L(P)}else M(P,0,ee),M(P,1<<-Q,0),Z=L(P)+R("0",l);return l>0?(fe=Z.length,Z=H+(fe<=l?"0."+R("0",l-fe)+Z:x(Z,0,fe-l)+"."+x(Z,fe-l))):Z=H+Z,Z}})},8011:(h,T,e)=>{var n=e(2109),s=e(9781),i=e(30);n({target:"Object",stat:!0,sham:!s},{create:i})},3321:(h,T,e)=>{var n=e(2109),s=e(9781),i=e(6048).f;n({target:"Object",stat:!0,forced:Object.defineProperties!==i,sham:!s},{defineProperties:i})},9070:(h,T,e)=>{var n=e(2109),s=e(9781),i=e(3070).f;n({target:"Object",stat:!0,forced:Object.defineProperty!==i,sham:!s},{defineProperty:i})},9720:(h,T,e)=>{var n=e(2109),s=e(4699).entries;n({target:"Object",stat:!0},{entries:function(o){return s(o)}})},5003:(h,T,e)=>{var n=e(2109),s=e(7293),i=e(5656),o=e(1236).f,m=e(9781),d=s(function(){o(1)}),f=!m||d;n({target:"Object",stat:!0,forced:f,sham:!m},{getOwnPropertyDescriptor:function(g,R){return o(i(g),R)}})},9337:(h,T,e)=>{var n=e(2109),s=e(9781),i=e(3887),o=e(5656),m=e(1236),d=e(6135);n({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(S){for(var g=o(S),R=m.f,x=i(g),E={},p=0,O,M;x.length>p;)M=R(g,O=x[p++]),M!==void 0&&d(E,O,M);return E}})},9660:(h,T,e)=>{var n=e(2109),s=e(133),i=e(7293),o=e(5181),m=e(7908),d=!s||i(function(){o.f(1)});n({target:"Object",stat:!0,forced:d},{getOwnPropertySymbols:function(S){var g=o.f;return g?g(m(S)):[]}})},489:(h,T,e)=>{var n=e(2109),s=e(7293),i=e(7908),o=e(9518),m=e(8544),d=s(function(){o(1)});n({target:"Object",stat:!0,forced:d,sham:!m},{getPrototypeOf:function(S){return o(i(S))}})},7941:(h,T,e)=>{var n=e(2109),s=e(7908),i=e(1956),o=e(7293),m=o(function(){i(1)});n({target:"Object",stat:!0,forced:m},{keys:function(f){return i(s(f))}})},8304:(h,T,e)=>{var n=e(2109),s=e(7674);n({target:"Object",stat:!0},{setPrototypeOf:s})},1539:(h,T,e)=>{var n=e(1694),s=e(8052),i=e(288);n||s(Object.prototype,"toString",i,{unsafe:!0})},4678:(h,T,e)=>{var n=e(2109),s=e(2814);n({global:!0,forced:parseFloat!=s},{parseFloat:s})},821:(h,T,e)=>{var n=e(2109),s=e(6916),i=e(9662),o=e(8523),m=e(2534),d=e(408),f=e(612);n({target:"Promise",stat:!0,forced:f},{all:function(g){var R=this,x=o.f(R),E=x.resolve,p=x.reject,O=m(function(){var M=i(R.resolve),A=[],L=0,V=1;d(g,function(K){var F=L++,k=!1;V++,s(M,R,K).then(function(l){k||(k=!0,A[F]=l,--V||E(A))},p)}),--V||E(A)});return O.error&&p(O.value),x.promise}})},4164:(h,T,e)=>{var n=e(2109),s=e(1913),i=e(3702).CONSTRUCTOR,o=e(2492),m=e(5005),d=e(614),f=e(8052),S=o&&o.prototype;if(n({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(R){return this.then(void 0,R)}}),!s&&d(o)){var g=m("Promise").prototype.catch;S.catch!==g&&f(S,"catch",g,{unsafe:!0})}},3401:(h,T,e)=>{var n=e(2109),s=e(1913),i=e(5268),o=e(7854),m=e(6916),d=e(8052),f=e(7674),S=e(8003),g=e(6340),R=e(9662),x=e(614),E=e(111),p=e(5787),O=e(6707),M=e(261).set,A=e(5948),L=e(842),V=e(2534),K=e(8572),F=e(9909),k=e(2492),l=e(3702),P=e(8523),H="Promise",Z=l.CONSTRUCTOR,Q=l.REJECTION_EVENT,ee=l.SUBCLASSING,te=F.getterFor(H),fe=F.set,de=k&&k.prototype,_=k,Y=de,b=o.TypeError,D=o.document,X=o.process,q=P.f,U=q,v=!!(D&&D.createEvent&&o.dispatchEvent),u="unhandledrejection",c="rejectionhandled",y=0,B=1,G=2,W=1,j=2,re,ae,be,Me,Be=function(Ee){var De;return E(Ee)&&x(De=Ee.then)?De:!1},Ge=function(Ee,De){var ze=De.value,Xe=De.state==B,Ze=Xe?Ee.ok:Ee.fail,Fe=Ee.resolve,rt=Ee.reject,vt=Ee.domain,at,He,et;try{Ze?(Xe||(De.rejection===j&&z(De),De.rejection=W),Ze===!0?at=ze:(vt&&vt.enter(),at=Ze(ze),vt&&(vt.exit(),et=!0)),at===Ee.promise?rt(b("Promise-chain cycle")):(He=Be(at))?m(He,at,Fe,rt):Fe(at)):rt(ze)}catch($e){vt&&!et&&vt.exit(),rt($e)}},Ye=function(Ee,De){Ee.notified||(Ee.notified=!0,A(function(){for(var ze=Ee.reactions,Xe;Xe=ze.get();)Ge(Xe,Ee);Ee.notified=!1,De&&!Ee.rejection&&_t(Ee)}))},it=function(Ee,De,ze){var Xe,Ze;v?(Xe=D.createEvent("Event"),Xe.promise=De,Xe.reason=ze,Xe.initEvent(Ee,!1,!0),o.dispatchEvent(Xe)):Xe={promise:De,reason:ze},!Q&&(Ze=o["on"+Ee])?Ze(Xe):Ee===u&&L("Unhandled promise rejection",ze)},_t=function(Ee){m(M,o,function(){var De=Ee.facade,ze=Ee.value,Xe=C(Ee),Ze;if(Xe&&(Ze=V(function(){i?X.emit("unhandledRejection",ze,De):it(u,De,ze)}),Ee.rejection=i||C(Ee)?j:W,Ze.error))throw Ze.value})},C=function(Ee){return Ee.rejection!==W&&!Ee.parent},z=function(Ee){m(M,o,function(){var De=Ee.facade;i?X.emit("rejectionHandled",De):it(c,De,Ee.value)})},Ne=function(Ee,De,ze){return function(Xe){Ee(De,Xe,ze)}},Te=function(Ee,De,ze){Ee.done||(Ee.done=!0,ze&&(Ee=ze),Ee.value=De,Ee.state=G,Ye(Ee,!0))},Ue=function(Ee,De,ze){if(!Ee.done){Ee.done=!0,ze&&(Ee=ze);try{if(Ee.facade===De)throw b("Promise can't be resolved itself");var Xe=Be(De);Xe?A(function(){var Ze={done:!1};try{m(Xe,De,Ne(Ue,Ze,Ee),Ne(Te,Ze,Ee))}catch(Fe){Te(Ze,Fe,Ee)}}):(Ee.value=De,Ee.state=B,Ye(Ee,!1))}catch(Ze){Te({done:!1},Ze,Ee)}}};if(Z&&(_=function(De){p(this,Y),R(De),m(re,this);var ze=te(this);try{De(Ne(Ue,ze),Ne(Te,ze))}catch(Xe){Te(ze,Xe)}},Y=_.prototype,re=function(De){fe(this,{type:H,done:!1,notified:!1,parent:!1,reactions:new K,rejection:!1,state:y,value:void 0})},re.prototype=d(Y,"then",function(De,ze){var Xe=te(this),Ze=q(O(this,_));return Xe.parent=!0,Ze.ok=x(De)?De:!0,Ze.fail=x(ze)&&ze,Ze.domain=i?X.domain:void 0,Xe.state==y?Xe.reactions.add(Ze):A(function(){Ge(Ze,Xe)}),Ze.promise}),ae=function(){var Ee=new re,De=te(Ee);this.promise=Ee,this.resolve=Ne(Ue,De),this.reject=Ne(Te,De)},P.f=q=function(Ee){return Ee===_||Ee===be?new ae(Ee):U(Ee)},!s&&x(k)&&de!==Object.prototype)){Me=de.then,ee||d(de,"then",function(De,ze){var Xe=this;return new _(function(Ze,Fe){m(Me,Xe,Ze,Fe)}).then(De,ze)},{unsafe:!0});try{delete de.constructor}catch{}f&&f(de,Y)}n({global:!0,constructor:!0,wrap:!0,forced:Z},{Promise:_}),S(_,H,!1,!0),g(H)},8674:(h,T,e)=>{e(3401),e(821),e(4164),e(6027),e(683),e(6294)},6027:(h,T,e)=>{var n=e(2109),s=e(6916),i=e(9662),o=e(8523),m=e(2534),d=e(408),f=e(612);n({target:"Promise",stat:!0,forced:f},{race:function(g){var R=this,x=o.f(R),E=x.reject,p=m(function(){var O=i(R.resolve);d(g,function(M){s(O,R,M).then(x.resolve,E)})});return p.error&&E(p.value),x.promise}})},683:(h,T,e)=>{var n=e(2109),s=e(6916),i=e(8523),o=e(3702).CONSTRUCTOR;n({target:"Promise",stat:!0,forced:o},{reject:function(d){var f=i.f(this);return s(f.reject,void 0,d),f.promise}})},6294:(h,T,e)=>{var n=e(2109),s=e(5005),i=e(1913),o=e(2492),m=e(3702).CONSTRUCTOR,d=e(9478),f=s("Promise"),S=i&&!m;n({target:"Promise",stat:!0,forced:i||m},{resolve:function(R){return d(S&&this===f?o:this,R)}})},4603:(h,T,e)=>{var n=e(9781),s=e(7854),i=e(1702),o=e(4705),m=e(9587),d=e(8880),f=e(8006).f,S=e(7976),g=e(7850),R=e(1340),x=e(4706),E=e(2999),p=e(2626),O=e(8052),M=e(7293),A=e(2597),L=e(9909).enforce,V=e(6340),K=e(5112),F=e(9441),k=e(7168),l=K("match"),P=s.RegExp,H=P.prototype,Z=s.SyntaxError,Q=i(H.exec),ee=i("".charAt),te=i("".replace),fe=i("".indexOf),de=i("".slice),_=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Y=/a/g,b=/a/g,D=new P(Y)!==Y,X=E.MISSED_STICKY,q=E.UNSUPPORTED_Y,U=n&&(!D||X||F||k||M(function(){return b[l]=!1,P(Y)!=Y||P(b)==b||P(Y,"i")!="/a/i"})),v=function(G){for(var W=G.length,j=0,re="",ae=!1,be;j<=W;j++){if(be=ee(G,j),be==="\\"){re+=be+ee(G,++j);continue}!ae&&be==="."?re+="[\\s\\S]":(be==="["?ae=!0:be==="]"&&(ae=!1),re+=be)}return re},u=function(G){for(var W=G.length,j=0,re="",ae=[],be={},Me=!1,Be=!1,Ge=0,Ye="",it;j<=W;j++){if(it=ee(G,j),it==="\\")it=it+ee(G,++j);else if(it==="]")Me=!1;else if(!Me)switch(!0){case it==="[":Me=!0;break;case it==="(":Q(_,de(G,j+1))&&(j+=2,Be=!0),re+=it,Ge++;continue;case(it===">"&&Be):if(Ye===""||A(be,Ye))throw new Z("Invalid capture group name");be[Ye]=!0,ae[ae.length]=[Ye,Ge],Be=!1,Ye="";continue}Be?Ye+=it:re+=it}return[re,ae]};if(o("RegExp",U)){for(var c=function(W,j){var re=S(H,this),ae=g(W),be=j===void 0,Me=[],Be=W,Ge,Ye,it,_t,C,z;if(!re&&ae&&be&&W.constructor===c)return W;if((ae||S(H,W))&&(W=W.source,be&&(j=x(Be))),W=W===void 0?"":R(W),j=j===void 0?"":R(j),Be=W,F&&"dotAll"in Y&&(Ye=!!j&&fe(j,"s")>-1,Ye&&(j=te(j,/s/g,""))),Ge=j,X&&"sticky"in Y&&(it=!!j&&fe(j,"y")>-1,it&&q&&(j=te(j,/y/g,""))),k&&(_t=u(W),W=_t[0],Me=_t[1]),C=m(P(W,j),re?this:H,c),(Ye||it||Me.length)&&(z=L(C),Ye&&(z.dotAll=!0,z.raw=c(v(W),Ge)),it&&(z.sticky=!0),Me.length&&(z.groups=Me)),W!==Be)try{d(C,"source",Be===""?"(?:)":Be)}catch{}return C},y=f(P),B=0;y.length>B;)p(c,P,y[B++]);H.constructor=c,c.prototype=H,O(s,"RegExp",c,{constructor:!0})}V("RegExp")},8450:(h,T,e)=>{var n=e(9781),s=e(9441),i=e(4326),o=e(7045),m=e(9909).get,d=RegExp.prototype,f=TypeError;n&&s&&o(d,"dotAll",{configurable:!0,get:function(){if(this!==d){if(i(this)==="RegExp")return!!m(this).dotAll;throw f("Incompatible receiver, RegExp required")}}})},4916:(h,T,e)=>{var n=e(2109),s=e(2261);n({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},8386:(h,T,e)=>{var n=e(9781),s=e(2999).MISSED_STICKY,i=e(4326),o=e(7045),m=e(9909).get,d=RegExp.prototype,f=TypeError;n&&s&&o(d,"sticky",{configurable:!0,get:function(){if(this!==d){if(i(this)==="RegExp")return!!m(this).sticky;throw f("Incompatible receiver, RegExp required")}}})},7601:(h,T,e)=>{e(4916);var n=e(2109),s=e(6916),i=e(1702),o=e(614),m=e(111),d=function(){var g=!1,R=/[ac]/;return R.exec=function(){return g=!0,/./.exec.apply(this,arguments)},R.test("abc")===!0&&g}(),f=TypeError,S=i(/./.test);n({target:"RegExp",proto:!0,forced:!d},{test:function(g){var R=this.exec;if(!o(R))return S(this,g);var x=s(R,this,g);if(x!==null&&!m(x))throw new f("RegExp exec method returned something other than an Object or null");return!!x}})},9714:(h,T,e)=>{var n=e(6530).PROPER,s=e(8052),i=e(9670),o=e(1340),m=e(7293),d=e(4706),f="toString",S=RegExp.prototype,g=S[f],R=m(function(){return g.call({source:"a",flags:"b"})!="/a/b"}),x=n&&g.name!=f;(R||x)&&s(RegExp.prototype,f,function(){var p=i(this),O=o(p.source),M=o(d(p));return"/"+O+"/"+M},{unsafe:!0})},7227:(h,T,e)=>{var n=e(7710),s=e(5631);n("Set",function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},s)},189:(h,T,e)=>{e(7227)},915:(h,T,e)=>{var n=e(2109),s=e(4230),i=e(3429);n({target:"String",proto:!0,forced:i("bold")},{bold:function(){return s(this,"b","","")}})},2023:(h,T,e)=>{var n=e(2109),s=e(1702),i=e(3929),o=e(4488),m=e(1340),d=e(4964),f=s("".indexOf);n({target:"String",proto:!0,forced:!d("includes")},{includes:function(g){return!!~f(m(o(this)),m(i(g)),arguments.length>1?arguments[1]:void 0)}})},8734:(h,T,e)=>{var n=e(2109),s=e(4230),i=e(3429);n({target:"String",proto:!0,forced:i("italics")},{italics:function(){return s(this,"i","","")}})},8783:(h,T,e)=>{var n=e(8710).charAt,s=e(1340),i=e(9909),o=e(654),m="String Iterator",d=i.set,f=i.getterFor(m);o(String,"String",function(S){d(this,{type:m,string:s(S),index:0})},function(){var g=f(this),R=g.string,x=g.index,E;return x>=R.length?{value:void 0,done:!0}:(E=n(R,x),g.index+=E.length,{value:E,done:!1})})},6373:(h,T,e)=>{var n=e(2109),s=e(6916),i=e(1702),o=e(4994),m=e(4488),d=e(7466),f=e(1340),S=e(9670),g=e(4326),R=e(7850),x=e(4706),E=e(8173),p=e(8052),O=e(7293),M=e(5112),A=e(6707),L=e(1530),V=e(7651),K=e(9909),F=e(1913),k=M("matchAll"),l="RegExp String",P=l+" Iterator",H=K.set,Z=K.getterFor(P),Q=RegExp.prototype,ee=TypeError,te=i("".indexOf),fe=i("".matchAll),de=!!fe&&!O(function(){fe("a",/./)}),_=o(function(D,X,q,U){H(this,{type:P,regexp:D,string:X,global:q,unicode:U,done:!1})},l,function(){var D=Z(this);if(D.done)return{value:void 0,done:!0};var X=D.regexp,q=D.string,U=V(X,q);return U===null?{value:void 0,done:D.done=!0}:D.global?(f(U[0])===""&&(X.lastIndex=L(q,d(X.lastIndex),D.unicode)),{value:U,done:!1}):(D.done=!0,{value:U,done:!1})}),Y=function(b){var D=S(this),X=f(b),q=A(D,RegExp),U=f(x(D)),v,u,c;return v=new q(q===RegExp?D.source:D,U),u=!!~te(U,"g"),c=!!~te(U,"u"),v.lastIndex=d(D.lastIndex),new _(v,X,u,c)};n({target:"String",proto:!0,forced:de},{matchAll:function(D){var X=m(this),q,U,v,u;if(D!=null){if(R(D)&&(q=f(m(x(D))),!~te(q,"g")))throw ee("`.matchAll` does not allow non-global regexes");if(de)return fe(X,D);if(v=E(D,k),v===void 0&&F&&g(D)=="RegExp"&&(v=Y),v)return s(v,D,X)}else if(de)return fe(X,D);return U=f(X),u=new RegExp(D,"g"),F?s(Y,u,U):u[k](U)}}),F||k in Q||p(Q,k,Y)},4723:(h,T,e)=>{var n=e(6916),s=e(7007),i=e(9670),o=e(7466),m=e(1340),d=e(4488),f=e(8173),S=e(1530),g=e(7651);s("match",function(R,x,E){return[function(O){var M=d(this),A=O==null?void 0:f(O,R);return A?n(A,O,M):new RegExp(O)[R](m(M))},function(p){var O=i(this),M=m(p),A=E(x,O,M);if(A.done)return A.value;if(!O.global)return g(O,M);var L=O.unicode;O.lastIndex=0;for(var V=[],K=0,F;(F=g(O,M))!==null;){var k=m(F[0]);V[K]=k,k===""&&(O.lastIndex=S(M,o(O.lastIndex),L)),K++}return K===0?null:V}]})},8757:(h,T,e)=>{var n=e(2109),s=e(6916),i=e(1702),o=e(4488),m=e(614),d=e(7850),f=e(1340),S=e(8173),g=e(4706),R=e(647),x=e(5112),E=e(1913),p=x("replace"),O=TypeError,M=i("".indexOf),A=i("".replace),L=i("".slice),V=Math.max,K=function(F,k,l){return l>F.length?-1:k===""?l:M(F,k,l)};n({target:"String",proto:!0},{replaceAll:function(k,l){var P=o(this),H,Z,Q,ee,te,fe,de,_,Y,b=0,D=0,X="";if(k!=null){if(H=d(k),H&&(Z=f(o(g(k))),!~M(Z,"g")))throw O("`.replaceAll` does not allow non-global regexes");if(Q=S(k,p),Q)return s(Q,k,P,l);if(E&&H)return A(f(P),k,l)}for(ee=f(P),te=f(k),fe=m(l),fe||(l=f(l)),de=te.length,_=V(1,de),b=K(ee,te,0);b!==-1;)Y=fe?f(l(te,b,ee)):R(te,ee,b,[],void 0,l),X+=L(ee,D,b)+Y,D=b+de,b=K(ee,te,b+_);return D<ee.length&&(X+=L(ee,D)),X}})},5306:(h,T,e)=>{var n=e(2104),s=e(6916),i=e(1702),o=e(7007),m=e(7293),d=e(9670),f=e(614),S=e(9303),g=e(7466),R=e(1340),x=e(4488),E=e(1530),p=e(8173),O=e(647),M=e(7651),A=e(5112),L=A("replace"),V=Math.max,K=Math.min,F=i([].concat),k=i([].push),l=i("".indexOf),P=i("".slice),H=function(te){return te===void 0?te:String(te)},Z=function(){return"a".replace(/./,"$0")==="$0"}(),Q=function(){return/./[L]?/./[L]("a","$0")==="":!1}(),ee=!m(function(){var te=/./;return te.exec=function(){var fe=[];return fe.groups={a:"7"},fe},"".replace(te,"$<a>")!=="7"});o("replace",function(te,fe,de){var _=Q?"$":"$0";return[function(b,D){var X=x(this),q=b==null?void 0:p(b,L);return q?s(q,b,X,D):s(fe,R(X),b,D)},function(Y,b){var D=d(this),X=R(Y);if(typeof b=="string"&&l(b,_)===-1&&l(b,"$<")===-1){var q=de(fe,D,X,b);if(q.done)return q.value}var U=f(b);U||(b=R(b));var v=D.global;if(v){var u=D.unicode;D.lastIndex=0}for(var c=[];;){var y=M(D,X);if(y===null||(k(c,y),!v))break;var B=R(y[0]);B===""&&(D.lastIndex=E(X,g(D.lastIndex),u))}for(var G="",W=0,j=0;j<c.length;j++){y=c[j];for(var re=R(y[0]),ae=V(K(S(y.index),X.length),0),be=[],Me=1;Me<y.length;Me++)k(be,H(y[Me]));var Be=y.groups;if(U){var Ge=F([re],be,ae,X);Be!==void 0&&k(Ge,Be);var Ye=R(n(b,void 0,Ge))}else Ye=O(re,X,ae,be,Be,b);ae>=W&&(G+=P(X,W,ae)+Ye,W=ae+re.length)}return G+P(X,W)}]},!ee||!Z||Q)},4765:(h,T,e)=>{var n=e(6916),s=e(7007),i=e(9670),o=e(4488),m=e(1150),d=e(1340),f=e(8173),S=e(7651);s("search",function(g,R,x){return[function(p){var O=o(this),M=p==null?void 0:f(p,g);return M?n(M,p,O):new RegExp(p)[g](d(O))},function(E){var p=i(this),O=d(E),M=x(R,p,O);if(M.done)return M.value;var A=p.lastIndex;m(A,0)||(p.lastIndex=0);var L=S(p,O);return m(p.lastIndex,A)||(p.lastIndex=A),L===null?-1:L.index}]})},6755:(h,T,e)=>{var n=e(2109),s=e(1702),i=e(1236).f,o=e(7466),m=e(1340),d=e(3929),f=e(4488),S=e(4964),g=e(1913),R=s("".startsWith),x=s("".slice),E=Math.min,p=S("startsWith"),O=!g&&!p&&!!function(){var M=i(String.prototype,"startsWith");return M&&!M.writable}();n({target:"String",proto:!0,forced:!O&&!p},{startsWith:function(A){var L=m(f(this));d(A);var V=o(E(arguments.length>1?arguments[1]:void 0,L.length)),K=m(A);return R?R(L,K,V):x(L,V,V+K.length)===K}})},7397:(h,T,e)=>{var n=e(2109),s=e(4230),i=e(3429);n({target:"String",proto:!0,forced:i("strike")},{strike:function(){return s(this,"strike","","")}})},3650:(h,T,e)=>{var n=e(2109),s=e(1702),i=e(4488),o=e(9303),m=e(1340),d=s("".slice),f=Math.max,S=Math.min,g=!"".substr||"ab".substr(-1)!=="b";n({target:"String",proto:!0,forced:g},{substr:function(x,E){var p=m(i(this)),O=p.length,M=o(x),A,L;return M===1/0&&(M=0),M<0&&(M=f(O+M,0)),A=E===void 0?O:o(E),A<=0||A===1/0?"":(L=S(M+A,O),M>=L?"":d(p,M,L))}})},3210:(h,T,e)=>{var n=e(2109),s=e(3111).trim,i=e(6091);n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return s(this)}})},2443:(h,T,e)=>{var n=e(7235);n("asyncIterator")},4032:(h,T,e)=>{var n=e(2109),s=e(7854),i=e(6916),o=e(1702),m=e(1913),d=e(9781),f=e(133),S=e(7293),g=e(2597),R=e(7976),x=e(9670),E=e(5656),p=e(4948),O=e(1340),M=e(9114),A=e(30),L=e(1956),V=e(8006),K=e(1156),F=e(5181),k=e(1236),l=e(3070),P=e(6048),H=e(5296),Z=e(8052),Q=e(2309),ee=e(6200),te=e(3501),fe=e(9711),de=e(5112),_=e(6061),Y=e(7235),b=e(6532),D=e(8003),X=e(9909),q=e(2092).forEach,U=ee("hidden"),v="Symbol",u="prototype",c=X.set,y=X.getterFor(v),B=Object[u],G=s.Symbol,W=G&&G[u],j=s.TypeError,re=s.QObject,ae=k.f,be=l.f,Me=K.f,Be=H.f,Ge=o([].push),Ye=Q("symbols"),it=Q("op-symbols"),_t=Q("wks"),C=!re||!re[u]||!re[u].findChild,z=d&&S(function(){return A(be({},"a",{get:function(){return be(this,"a",{value:7}).a}})).a!=7})?function(Fe,rt,vt){var at=ae(B,rt);at&&delete B[rt],be(Fe,rt,vt),at&&Fe!==B&&be(B,rt,at)}:be,Ne=function(Fe,rt){var vt=Ye[Fe]=A(W);return c(vt,{type:v,tag:Fe,description:rt}),d||(vt.description=rt),vt},Te=function(rt,vt,at){rt===B&&Te(it,vt,at),x(rt);var He=p(vt);return x(at),g(Ye,He)?(at.enumerable?(g(rt,U)&&rt[U][He]&&(rt[U][He]=!1),at=A(at,{enumerable:M(0,!1)})):(g(rt,U)||be(rt,U,M(1,{})),rt[U][He]=!0),z(rt,He,at)):be(rt,He,at)},Ue=function(rt,vt){x(rt);var at=E(vt),He=L(at).concat(Ze(at));return q(He,function(et){(!d||i(De,at,et))&&Te(rt,et,at[et])}),rt},Ee=function(rt,vt){return vt===void 0?A(rt):Ue(A(rt),vt)},De=function(rt){var vt=p(rt),at=i(Be,this,vt);return this===B&&g(Ye,vt)&&!g(it,vt)?!1:at||!g(this,vt)||!g(Ye,vt)||g(this,U)&&this[U][vt]?at:!0},ze=function(rt,vt){var at=E(rt),He=p(vt);if(!(at===B&&g(Ye,He)&&!g(it,He))){var et=ae(at,He);return et&&g(Ye,He)&&!(g(at,U)&&at[U][He])&&(et.enumerable=!0),et}},Xe=function(rt){var vt=Me(E(rt)),at=[];return q(vt,function(He){!g(Ye,He)&&!g(te,He)&&Ge(at,He)}),at},Ze=function(Fe){var rt=Fe===B,vt=Me(rt?it:E(Fe)),at=[];return q(vt,function(He){g(Ye,He)&&(!rt||g(B,He))&&Ge(at,Ye[He])}),at};f||(G=function(){if(R(W,this))throw j("Symbol is not a constructor");var rt=!arguments.length||arguments[0]===void 0?void 0:O(arguments[0]),vt=fe(rt),at=function(He){this===B&&i(at,it,He),g(this,U)&&g(this[U],vt)&&(this[U][vt]=!1),z(this,vt,M(1,He))};return d&&C&&z(B,vt,{configurable:!0,set:at}),Ne(vt,rt)},W=G[u],Z(W,"toString",function(){return y(this).tag}),Z(G,"withoutSetter",function(Fe){return Ne(fe(Fe),Fe)}),H.f=De,l.f=Te,P.f=Ue,k.f=ze,V.f=K.f=Xe,F.f=Ze,_.f=function(Fe){return Ne(de(Fe),Fe)},d&&(be(W,"description",{configurable:!0,get:function(){return y(this).description}}),m||Z(B,"propertyIsEnumerable",De,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!f,sham:!f},{Symbol:G}),q(L(_t),function(Fe){Y(Fe)}),n({target:v,stat:!0,forced:!f},{useSetter:function(){C=!0},useSimple:function(){C=!1}}),n({target:"Object",stat:!0,forced:!f,sham:!d},{create:Ee,defineProperty:Te,defineProperties:Ue,getOwnPropertyDescriptor:ze}),n({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:Xe}),b(),D(G,v),te[U]=!0},1817:(h,T,e)=>{var n=e(2109),s=e(9781),i=e(7854),o=e(1702),m=e(2597),d=e(614),f=e(7976),S=e(1340),g=e(3070).f,R=e(9920),x=i.Symbol,E=x&&x.prototype;if(s&&d(x)&&(!("description"in E)||x().description!==void 0)){var p={},O=function(){var l=arguments.length<1||arguments[0]===void 0?void 0:S(arguments[0]),P=f(E,this)?new x(l):l===void 0?x():x(l);return l===""&&(p[P]=!0),P};R(O,x),O.prototype=E,E.constructor=O;var M=String(x("test"))=="Symbol(test)",A=o(E.toString),L=o(E.valueOf),V=/^Symbol\((.*)\)[^)]+$/,K=o("".replace),F=o("".slice);g(E,"description",{configurable:!0,get:function(){var l=L(this),P=A(l);if(m(p,l))return"";var H=M?F(P,7,-1):K(P,V,"$1");return H===""?void 0:H}}),n({global:!0,constructor:!0,forced:!0},{Symbol:O})}},763:(h,T,e)=>{var n=e(2109),s=e(5005),i=e(2597),o=e(1340),m=e(2309),d=e(735),f=m("string-to-symbol-registry"),S=m("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!d},{for:function(g){var R=o(g);if(i(f,R))return f[R];var x=s("Symbol")(R);return f[R]=x,S[x]=R,x}})},2165:(h,T,e)=>{var n=e(7235);n("iterator")},2526:(h,T,e)=>{e(4032),e(763),e(6620),e(8862),e(9660)},6620:(h,T,e)=>{var n=e(2109),s=e(2597),i=e(2190),o=e(6330),m=e(2309),d=e(735),f=m("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!d},{keyFor:function(g){if(!i(g))throw TypeError(o(g)+" is not a symbol");if(s(f,g))return f[g]}})},3680:(h,T,e)=>{var n=e(5005),s=e(7235),i=e(8003);s("toStringTag"),i(n("Symbol"),"Symbol")},8675:(h,T,e)=>{var n=e(260),s=e(6244),i=e(9303),o=n.aTypedArray,m=n.exportTypedArrayMethod;m("at",function(f){var S=o(this),g=s(S),R=i(f),x=R>=0?R:g+R;return x<0||x>=g?void 0:S[x]})},2990:(h,T,e)=>{var n=e(1702),s=e(260),i=e(1048),o=n(i),m=s.aTypedArray,d=s.exportTypedArrayMethod;d("copyWithin",function(S,g){return o(m(this),S,g,arguments.length>2?arguments[2]:void 0)})},8927:(h,T,e)=>{var n=e(260),s=e(2092).every,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("every",function(d){return s(i(this),d,arguments.length>1?arguments[1]:void 0)})},3105:(h,T,e)=>{var n=e(260),s=e(1285),i=e(4599),o=e(648),m=e(6916),d=e(1702),f=e(7293),S=n.aTypedArray,g=n.exportTypedArrayMethod,R=d("".slice),x=f(function(){var E=0;return new Int8Array(2).fill({valueOf:function(){return E++}}),E!==1});g("fill",function(p){var O=arguments.length;S(this);var M=R(o(this),0,3)==="Big"?i(p):+p;return m(s,this,M,O>1?arguments[1]:void 0,O>2?arguments[2]:void 0)},x)},5035:(h,T,e)=>{var n=e(260),s=e(2092).filter,i=e(3074),o=n.aTypedArray,m=n.exportTypedArrayMethod;m("filter",function(f){var S=s(o(this),f,arguments.length>1?arguments[1]:void 0);return i(this,S)})},7174:(h,T,e)=>{var n=e(260),s=e(2092).findIndex,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("findIndex",function(d){return s(i(this),d,arguments.length>1?arguments[1]:void 0)})},2958:(h,T,e)=>{var n=e(260),s=e(9671).findLastIndex,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("findLastIndex",function(d){return s(i(this),d,arguments.length>1?arguments[1]:void 0)})},3408:(h,T,e)=>{var n=e(260),s=e(9671).findLast,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("findLast",function(d){return s(i(this),d,arguments.length>1?arguments[1]:void 0)})},4345:(h,T,e)=>{var n=e(260),s=e(2092).find,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("find",function(d){return s(i(this),d,arguments.length>1?arguments[1]:void 0)})},4197:(h,T,e)=>{var n=e(9843);n("Float32",function(s){return function(o,m,d){return s(this,o,m,d)}})},2846:(h,T,e)=>{var n=e(260),s=e(2092).forEach,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("forEach",function(d){s(i(this),d,arguments.length>1?arguments[1]:void 0)})},4731:(h,T,e)=>{var n=e(260),s=e(1318).includes,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("includes",function(d){return s(i(this),d,arguments.length>1?arguments[1]:void 0)})},7209:(h,T,e)=>{var n=e(260),s=e(1318).indexOf,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("indexOf",function(d){return s(i(this),d,arguments.length>1?arguments[1]:void 0)})},5109:(h,T,e)=>{var n=e(9843);n("Int16",function(s){return function(o,m,d){return s(this,o,m,d)}})},7145:(h,T,e)=>{var n=e(9843);n("Int8",function(s){return function(o,m,d){return s(this,o,m,d)}})},6319:(h,T,e)=>{var n=e(7854),s=e(7293),i=e(1702),o=e(260),m=e(6992),d=e(5112),f=d("iterator"),S=n.Uint8Array,g=i(m.values),R=i(m.keys),x=i(m.entries),E=o.aTypedArray,p=o.exportTypedArrayMethod,O=S&&S.prototype,M=!s(function(){O[f].call([1])}),A=!!O&&O.values&&O[f]===O.values&&O.values.name==="values",L=function(){return g(E(this))};p("entries",function(){return x(E(this))},M),p("keys",function(){return R(E(this))},M),p("values",L,M||!A,{name:"values"}),p(f,L,M||!A,{name:"values"})},8867:(h,T,e)=>{var n=e(260),s=e(1702),i=n.aTypedArray,o=n.exportTypedArrayMethod,m=s([].join);o("join",function(f){return m(i(this),f)})},7789:(h,T,e)=>{var n=e(260),s=e(2104),i=e(6583),o=n.aTypedArray,m=n.exportTypedArrayMethod;m("lastIndexOf",function(f){var S=arguments.length;return s(i,o(this),S>1?[f,arguments[1]]:[f])})},3739:(h,T,e)=>{var n=e(260),s=e(2092).map,i=e(6304),o=n.aTypedArray,m=n.exportTypedArrayMethod;m("map",function(f){return s(o(this),f,arguments.length>1?arguments[1]:void 0,function(S,g){return new(i(S))(g)})})},4483:(h,T,e)=>{var n=e(260),s=e(3671).right,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("reduceRight",function(d){var f=arguments.length;return s(i(this),d,f,f>1?arguments[1]:void 0)})},9368:(h,T,e)=>{var n=e(260),s=e(3671).left,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("reduce",function(d){var f=arguments.length;return s(i(this),d,f,f>1?arguments[1]:void 0)})},2056:(h,T,e)=>{var n=e(260),s=n.aTypedArray,i=n.exportTypedArrayMethod,o=Math.floor;i("reverse",function(){for(var d=this,f=s(d).length,S=o(f/2),g=0,R;g<S;)R=d[g],d[g++]=d[--f],d[f]=R;return d})},3462:(h,T,e)=>{var n=e(7854),s=e(6916),i=e(260),o=e(6244),m=e(4590),d=e(7908),f=e(7293),S=n.RangeError,g=n.Int8Array,R=g&&g.prototype,x=R&&R.set,E=i.aTypedArray,p=i.exportTypedArrayMethod,O=!f(function(){var A=new Uint8ClampedArray(2);return s(x,A,{length:1,0:3},1),A[1]!==3}),M=O&&i.NATIVE_ARRAY_BUFFER_VIEWS&&f(function(){var A=new g(2);return A.set(1),A.set("2",1),A[0]!==0||A[1]!==2});p("set",function(L){E(this);var V=m(arguments.length>1?arguments[1]:void 0,1),K=d(L);if(O)return s(x,this,K,V);var F=this.length,k=o(K),l=0;if(k+V>F)throw S("Wrong length");for(;l<k;)this[V+l]=K[l++]},!O||M)},678:(h,T,e)=>{var n=e(260),s=e(6304),i=e(7293),o=e(206),m=n.aTypedArray,d=n.exportTypedArrayMethod,f=i(function(){new Int8Array(1).slice()});d("slice",function(g,R){for(var x=o(m(this),g,R),E=s(this),p=0,O=x.length,M=new E(O);O>p;)M[p]=x[p++];return M},f)},7462:(h,T,e)=>{var n=e(260),s=e(2092).some,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("some",function(d){return s(i(this),d,arguments.length>1?arguments[1]:void 0)})},3824:(h,T,e)=>{var n=e(7854),s=e(1702),i=e(7293),o=e(9662),m=e(4362),d=e(260),f=e(8886),S=e(256),g=e(7392),R=e(8008),x=d.aTypedArray,E=d.exportTypedArrayMethod,p=n.Uint16Array,O=p&&s(p.prototype.sort),M=!!O&&!(i(function(){O(new p(2),null)})&&i(function(){O(new p(2),{})})),A=!!O&&!i(function(){if(g)return g<74;if(f)return f<67;if(S)return!0;if(R)return R<602;var V=new p(516),K=Array(516),F,k;for(F=0;F<516;F++)k=F%4,V[F]=515-F,K[F]=F-2*k+3;for(O(V,function(l,P){return(l/4|0)-(P/4|0)}),F=0;F<516;F++)if(V[F]!==K[F])return!0}),L=function(V){return function(K,F){return V!==void 0?+V(K,F)||0:F!==F?-1:K!==K?1:K===0&&F===0?1/K>0&&1/F<0?1:-1:K>F}};E("sort",function(K){return K!==void 0&&o(K),A?O(this,K):m(x(this),L(K))},!A||M)},5021:(h,T,e)=>{var n=e(260),s=e(7466),i=e(1400),o=e(6304),m=n.aTypedArray,d=n.exportTypedArrayMethod;d("subarray",function(S,g){var R=m(this),x=R.length,E=i(S,x),p=o(R);return new p(R.buffer,R.byteOffset+E*R.BYTES_PER_ELEMENT,s((g===void 0?x:i(g,x))-E))})},2974:(h,T,e)=>{var n=e(7854),s=e(2104),i=e(260),o=e(7293),m=e(206),d=n.Int8Array,f=i.aTypedArray,S=i.exportTypedArrayMethod,g=[].toLocaleString,R=!!d&&o(function(){g.call(new d(1))}),x=o(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!o(function(){d.prototype.toLocaleString.call([1,2])});S("toLocaleString",function(){return s(g,R?m(f(this)):f(this),m(arguments))},x)},5016:(h,T,e)=>{var n=e(260).exportTypedArrayMethod,s=e(7293),i=e(7854),o=e(1702),m=i.Uint8Array,d=m&&m.prototype||{},f=[].toString,S=o([].join);s(function(){f.call({})})&&(f=function(){return S(this)});var g=d.toString!=f;n("toString",f,g)},1118:(h,T,e)=>{e(2958)},7380:(h,T,e)=>{e(3408)},4747:(h,T,e)=>{var n=e(7854),s=e(8324),i=e(8509),o=e(8533),m=e(8880),d=function(S){if(S&&S.forEach!==o)try{m(S,"forEach",o)}catch{S.forEach=o}};for(var f in s)s[f]&&d(n[f]&&n[f].prototype);d(i)},3948:(h,T,e)=>{var n=e(7854),s=e(8324),i=e(8509),o=e(6992),m=e(8880),d=e(5112),f=d("iterator"),S=d("toStringTag"),g=o.values,R=function(E,p){if(E){if(E[f]!==g)try{m(E,f,g)}catch{E[f]=g}if(E[S]||m(E,S,p),s[p]){for(var O in o)if(E[O]!==o[O])try{m(E,O,o[O])}catch{E[O]=o[O]}}}};for(var x in s)R(n[x]&&n[x].prototype,x);R(i,"DOMTokenList")},6815:(h,T,e)=>{var n=e(2109),s=e(7854),i=e(7152).setInterval;n({global:!0,bind:!0,forced:s.setInterval!==i},{setInterval:i})},8417:(h,T,e)=>{var n=e(2109),s=e(7854),i=e(7152).setTimeout;n({global:!0,bind:!0,forced:s.setTimeout!==i},{setTimeout:i})},2564:(h,T,e)=>{e(6815),e(8417)},5556:(h,T,e)=>{e(6992);var n=e(2109),s=e(7854),i=e(6916),o=e(1702),m=e(9781),d=e(590),f=e(8052),S=e(9190),g=e(8003),R=e(4994),x=e(9909),E=e(5787),p=e(614),O=e(2597),M=e(9974),A=e(648),L=e(9670),V=e(111),K=e(1340),F=e(30),k=e(9114),l=e(8554),P=e(1246),H=e(8053),Z=e(5112),Q=e(4362),ee=Z("iterator"),te="URLSearchParams",fe=te+"Iterator",de=x.set,_=x.getterFor(te),Y=x.getterFor(fe),b=Object.getOwnPropertyDescriptor,D=function(He){if(!m)return s[He];var et=b(s,He);return et&&et.value},X=D("fetch"),q=D("Request"),U=D("Headers"),v=q&&q.prototype,u=U&&U.prototype,c=s.RegExp,y=s.TypeError,B=s.decodeURIComponent,G=s.encodeURIComponent,W=o("".charAt),j=o([].join),re=o([].push),ae=o("".replace),be=o([].shift),Me=o([].splice),Be=o("".split),Ge=o("".slice),Ye=/\+/g,it=Array(4),_t=function(He){return it[He-1]||(it[He-1]=c("((?:%[\\da-f]{2}){"+He+"})","gi"))},C=function(He){try{return B(He)}catch{return He}},z=function(He){var et=ae(He,Ye," "),$e=4;try{return B(et)}catch{for(;$e;)et=ae(et,_t($e--),C);return et}},Ne=/[!'()~]|%20/g,Te={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Ue=function(He){return Te[He]},Ee=function(He){return ae(G(He),Ne,Ue)},De=R(function(et,$e){de(this,{type:fe,iterator:l(_(et).entries),kind:$e})},"Iterator",function(){var et=Y(this),$e=et.kind,ct=et.iterator.next(),St=ct.value;return ct.done||(ct.value=$e==="keys"?St.key:$e==="values"?St.value:[St.key,St.value]),ct},!0),ze=function(He){this.entries=[],this.url=null,He!==void 0&&(V(He)?this.parseObject(He):this.parseQuery(typeof He=="string"?W(He,0)==="?"?Ge(He,1):He:K(He)))};ze.prototype={type:te,bindURL:function(He){this.url=He,this.update()},parseObject:function(He){var et=P(He),$e,ct,St,It,jt,Xt,Pt;if(et)for($e=l(He,et),ct=$e.next;!(St=i(ct,$e)).done;){if(It=l(L(St.value)),jt=It.next,(Xt=i(jt,It)).done||(Pt=i(jt,It)).done||!i(jt,It).done)throw y("Expected sequence with length 2");re(this.entries,{key:K(Xt.value),value:K(Pt.value)})}else for(var Kt in He)O(He,Kt)&&re(this.entries,{key:Kt,value:K(He[Kt])})},parseQuery:function(He){if(He)for(var et=Be(He,"&"),$e=0,ct,St;$e<et.length;)ct=et[$e++],ct.length&&(St=Be(ct,"="),re(this.entries,{key:z(be(St)),value:z(j(St,"="))}))},serialize:function(){for(var He=this.entries,et=[],$e=0,ct;$e<He.length;)ct=He[$e++],re(et,Ee(ct.key)+"="+Ee(ct.value));return j(et,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Xe=function(){E(this,Ze);var et=arguments.length>0?arguments[0]:void 0;de(this,new ze(et))},Ze=Xe.prototype;if(S(Ze,{append:function(et,$e){H(arguments.length,2);var ct=_(this);re(ct.entries,{key:K(et),value:K($e)}),ct.updateURL()},delete:function(He){H(arguments.length,1);for(var et=_(this),$e=et.entries,ct=K(He),St=0;St<$e.length;)$e[St].key===ct?Me($e,St,1):St++;et.updateURL()},get:function(et){H(arguments.length,1);for(var $e=_(this).entries,ct=K(et),St=0;St<$e.length;St++)if($e[St].key===ct)return $e[St].value;return null},getAll:function(et){H(arguments.length,1);for(var $e=_(this).entries,ct=K(et),St=[],It=0;It<$e.length;It++)$e[It].key===ct&&re(St,$e[It].value);return St},has:function(et){H(arguments.length,1);for(var $e=_(this).entries,ct=K(et),St=0;St<$e.length;)if($e[St++].key===ct)return!0;return!1},set:function(et,$e){H(arguments.length,1);for(var ct=_(this),St=ct.entries,It=!1,jt=K(et),Xt=K($e),Pt=0,Kt;Pt<St.length;Pt++)Kt=St[Pt],Kt.key===jt&&(It?Me(St,Pt--,1):(It=!0,Kt.value=Xt));It||re(St,{key:jt,value:Xt}),ct.updateURL()},sort:function(){var et=_(this);Q(et.entries,function($e,ct){return $e.key>ct.key?1:-1}),et.updateURL()},forEach:function(et){for(var $e=_(this).entries,ct=M(et,arguments.length>1?arguments[1]:void 0),St=0,It;St<$e.length;)It=$e[St++],ct(It.value,It.key,this)},keys:function(){return new De(this,"keys")},values:function(){return new De(this,"values")},entries:function(){return new De(this,"entries")}},{enumerable:!0}),f(Ze,ee,Ze.entries,{name:"entries"}),f(Ze,"toString",function(){return _(this).serialize()},{enumerable:!0}),g(Xe,te),n({global:!0,constructor:!0,forced:!d},{URLSearchParams:Xe}),!d&&p(U)){var Fe=o(u.has),rt=o(u.set),vt=function(He){if(V(He)){var et=He.body,$e;if(A(et)===te)return $e=He.headers?new U(He.headers):new U,Fe($e,"content-type")||rt($e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),F(He,{body:k(0,K(et)),headers:k(0,$e)})}return He};if(p(X)&&n({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(et){return X(et,arguments.length>1?vt(arguments[1]):{})}}),p(q)){var at=function(et){return E(this,v),new q(et,arguments.length>1?vt(arguments[1]):{})};v.constructor=at,at.prototype=v,n({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:at})}}h.exports={URLSearchParams:Xe,getState:_}},1637:(h,T,e)=>{e(5556)},8789:(h,T,e)=>{e(8783);var n=e(2109),s=e(9781),i=e(590),o=e(7854),m=e(9974),d=e(1702),f=e(8052),S=e(7045),g=e(5787),R=e(2597),x=e(1574),E=e(8457),p=e(1589),O=e(8710).codeAt,M=e(3197),A=e(1340),L=e(8003),V=e(8053),K=e(5556),F=e(9909),k=F.set,l=F.getterFor("URL"),P=K.URLSearchParams,H=K.getState,Z=o.URL,Q=o.TypeError,ee=o.parseInt,te=Math.floor,fe=Math.pow,de=d("".charAt),_=d(/./.exec),Y=d([].join),b=d(1 .toString),D=d([].pop),X=d([].push),q=d("".replace),U=d([].shift),v=d("".split),u=d("".slice),c=d("".toLowerCase),y=d([].unshift),B="Invalid authority",G="Invalid scheme",W="Invalid host",j="Invalid port",re=/[a-z]/i,ae=/[\d+-.a-z]/i,be=/\d/,Me=/^0x/i,Be=/^[0-7]+$/,Ge=/^\d+$/,Ye=/^[\da-f]+$/i,it=/[\0\t\n\r #%/:<>?@[\\\]^|]/,_t=/[\0\t\n\r #/:<>?@[\\\]^|]/,C=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,z=/[\t\n\r]/g,Ne,Te=function(ve){var ke=v(ve,"."),se,ie,me,qe,lt,Je,pt;if(ke.length&&ke[ke.length-1]==""&&ke.length--,se=ke.length,se>4)return ve;for(ie=[],me=0;me<se;me++){if(qe=ke[me],qe=="")return ve;if(lt=10,qe.length>1&&de(qe,0)=="0"&&(lt=_(Me,qe)?16:8,qe=u(qe,lt==8?1:2)),qe==="")Je=0;else{if(!_(lt==10?Ge:lt==8?Be:Ye,qe))return ve;Je=ee(qe,lt)}X(ie,Je)}for(me=0;me<se;me++)if(Je=ie[me],me==se-1){if(Je>=fe(256,5-se))return null}else if(Je>255)return null;for(pt=D(ie),me=0;me<ie.length;me++)pt+=ie[me]*fe(256,3-me);return pt},Ue=function(ve){var ke=[0,0,0,0,0,0,0,0],se=0,ie=null,me=0,qe,lt,Je,pt,Et,Ct,Qe,wt=function(){return de(ve,me)};if(wt()==":"){if(de(ve,1)!=":")return;me+=2,se++,ie=se}for(;wt();){if(se==8)return;if(wt()==":"){if(ie!==null)return;me++,se++,ie=se;continue}for(qe=lt=0;lt<4&&_(Ye,wt());)qe=qe*16+ee(wt(),16),me++,lt++;if(wt()=="."){if(lt==0||(me-=lt,se>6))return;for(Je=0;wt();){if(pt=null,Je>0)if(wt()=="."&&Je<4)me++;else return;if(!_(be,wt()))return;for(;_(be,wt());){if(Et=ee(wt(),10),pt===null)pt=Et;else{if(pt==0)return;pt=pt*10+Et}if(pt>255)return;me++}ke[se]=ke[se]*256+pt,Je++,(Je==2||Je==4)&&se++}if(Je!=4)return;break}else if(wt()==":"){if(me++,!wt())return}else if(wt())return;ke[se++]=qe}if(ie!==null)for(Ct=se-ie,se=7;se!=0&&Ct>0;)Qe=ke[se],ke[se--]=ke[ie+Ct-1],ke[ie+--Ct]=Qe;else if(se!=8)return;return ke},Ee=function(ve){for(var ke=null,se=1,ie=null,me=0,qe=0;qe<8;qe++)ve[qe]!==0?(me>se&&(ke=ie,se=me),ie=null,me=0):(ie===null&&(ie=qe),++me);return me>se&&(ke=ie,se=me),ke},De=function(ve){var ke,se,ie,me;if(typeof ve=="number"){for(ke=[],se=0;se<4;se++)y(ke,ve%256),ve=te(ve/256);return Y(ke,".")}else if(typeof ve=="object"){for(ke="",ie=Ee(ve),se=0;se<8;se++)me&&ve[se]===0||(me&&(me=!1),ie===se?(ke+=se?":":"::",me=!0):(ke+=b(ve[se],16),se<7&&(ke+=":")));return"["+ke+"]"}return ve},ze={},Xe=x({},ze,{" ":1,'"':1,"<":1,">":1,"`":1}),Ze=x({},Xe,{"#":1,"?":1,"{":1,"}":1}),Fe=x({},Ze,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),rt=function(ve,ke){var se=O(ve,0);return se>32&&se<127&&!R(ke,ve)?ve:encodeURIComponent(ve)},vt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},at=function(ve,ke){var se;return ve.length==2&&_(re,de(ve,0))&&((se=de(ve,1))==":"||!ke&&se=="|")},He=function(ve){var ke;return ve.length>1&&at(u(ve,0,2))&&(ve.length==2||(ke=de(ve,2))==="/"||ke==="\\"||ke==="?"||ke==="#")},et=function(ve){return ve==="."||c(ve)==="%2e"},$e=function(ve){return ve=c(ve),ve===".."||ve==="%2e."||ve===".%2e"||ve==="%2e%2e"},ct={},St={},It={},jt={},Xt={},Pt={},Kt={},ar={},yr={},er={},J={},$={},oe={},ue={},ye={},ne={},pe={},Se={},ge={},Le={},xe={},Pe=function(ve,ke,se){var ie=A(ve),me,qe,lt;if(ke){if(qe=this.parse(ie),qe)throw Q(qe);this.searchParams=null}else{if(se!==void 0&&(me=new Pe(se,!0)),qe=this.parse(ie,null,me),qe)throw Q(qe);lt=H(new P),lt.bindURL(this),this.searchParams=lt}};Pe.prototype={type:"URL",parse:function(ve,ke,se){var ie=this,me=ke||ct,qe=0,lt="",Je=!1,pt=!1,Et=!1,Ct,Qe,wt,Nt;for(ve=A(ve),ke||(ie.scheme="",ie.username="",ie.password="",ie.host=null,ie.port=null,ie.path=[],ie.query=null,ie.fragment=null,ie.cannotBeABaseURL=!1,ve=q(ve,C,"")),ve=q(ve,z,""),Ct=E(ve);qe<=Ct.length;){switch(Qe=Ct[qe],me){case ct:if(Qe&&_(re,Qe))lt+=c(Qe),me=St;else{if(ke)return G;me=It;continue}break;case St:if(Qe&&(_(ae,Qe)||Qe=="+"||Qe=="-"||Qe=="."))lt+=c(Qe);else if(Qe==":"){if(ke&&(ie.isSpecial()!=R(vt,lt)||lt=="file"&&(ie.includesCredentials()||ie.port!==null)||ie.scheme=="file"&&!ie.host))return;if(ie.scheme=lt,ke){ie.isSpecial()&&vt[ie.scheme]==ie.port&&(ie.port=null);return}lt="",ie.scheme=="file"?me=ue:ie.isSpecial()&&se&&se.scheme==ie.scheme?me=jt:ie.isSpecial()?me=ar:Ct[qe+1]=="/"?(me=Xt,qe++):(ie.cannotBeABaseURL=!0,X(ie.path,""),me=ge)}else{if(ke)return G;lt="",me=It,qe=0;continue}break;case It:if(!se||se.cannotBeABaseURL&&Qe!="#")return G;if(se.cannotBeABaseURL&&Qe=="#"){ie.scheme=se.scheme,ie.path=p(se.path),ie.query=se.query,ie.fragment="",ie.cannotBeABaseURL=!0,me=xe;break}me=se.scheme=="file"?ue:Pt;continue;case jt:if(Qe=="/"&&Ct[qe+1]=="/")me=yr,qe++;else{me=Pt;continue}break;case Xt:if(Qe=="/"){me=er;break}else{me=Se;continue}case Pt:if(ie.scheme=se.scheme,Qe==Ne)ie.username=se.username,ie.password=se.password,ie.host=se.host,ie.port=se.port,ie.path=p(se.path),ie.query=se.query;else if(Qe=="/"||Qe=="\\"&&ie.isSpecial())me=Kt;else if(Qe=="?")ie.username=se.username,ie.password=se.password,ie.host=se.host,ie.port=se.port,ie.path=p(se.path),ie.query="",me=Le;else if(Qe=="#")ie.username=se.username,ie.password=se.password,ie.host=se.host,ie.port=se.port,ie.path=p(se.path),ie.query=se.query,ie.fragment="",me=xe;else{ie.username=se.username,ie.password=se.password,ie.host=se.host,ie.port=se.port,ie.path=p(se.path),ie.path.length--,me=Se;continue}break;case Kt:if(ie.isSpecial()&&(Qe=="/"||Qe=="\\"))me=yr;else if(Qe=="/")me=er;else{ie.username=se.username,ie.password=se.password,ie.host=se.host,ie.port=se.port,me=Se;continue}break;case ar:if(me=yr,Qe!="/"||de(lt,qe+1)!="/")continue;qe++;break;case yr:if(Qe!="/"&&Qe!="\\"){me=er;continue}break;case er:if(Qe=="@"){Je&&(lt="%40"+lt),Je=!0,wt=E(lt);for(var $t=0;$t<wt.length;$t++){var tr=wt[$t];if(tr==":"&&!Et){Et=!0;continue}var rr=rt(tr,Fe);Et?ie.password+=rr:ie.username+=rr}lt=""}else if(Qe==Ne||Qe=="/"||Qe=="?"||Qe=="#"||Qe=="\\"&&ie.isSpecial()){if(Je&&lt=="")return B;qe-=E(lt).length+1,lt="",me=J}else lt+=Qe;break;case J:case $:if(ke&&ie.scheme=="file"){me=ne;continue}else if(Qe==":"&&!pt){if(lt=="")return W;if(Nt=ie.parseHost(lt),Nt)return Nt;if(lt="",me=oe,ke==$)return}else if(Qe==Ne||Qe=="/"||Qe=="?"||Qe=="#"||Qe=="\\"&&ie.isSpecial()){if(ie.isSpecial()&&lt=="")return W;if(ke&&lt==""&&(ie.includesCredentials()||ie.port!==null))return;if(Nt=ie.parseHost(lt),Nt)return Nt;if(lt="",me=pe,ke)return;continue}else Qe=="["?pt=!0:Qe=="]"&&(pt=!1),lt+=Qe;break;case oe:if(_(be,Qe))lt+=Qe;else if(Qe==Ne||Qe=="/"||Qe=="?"||Qe=="#"||Qe=="\\"&&ie.isSpecial()||ke){if(lt!=""){var dr=ee(lt,10);if(dr>65535)return j;ie.port=ie.isSpecial()&&dr===vt[ie.scheme]?null:dr,lt=""}if(ke)return;me=pe;continue}else return j;break;case ue:if(ie.scheme="file",Qe=="/"||Qe=="\\")me=ye;else if(se&&se.scheme=="file")if(Qe==Ne)ie.host=se.host,ie.path=p(se.path),ie.query=se.query;else if(Qe=="?")ie.host=se.host,ie.path=p(se.path),ie.query="",me=Le;else if(Qe=="#")ie.host=se.host,ie.path=p(se.path),ie.query=se.query,ie.fragment="",me=xe;else{He(Y(p(Ct,qe),""))||(ie.host=se.host,ie.path=p(se.path),ie.shortenPath()),me=Se;continue}else{me=Se;continue}break;case ye:if(Qe=="/"||Qe=="\\"){me=ne;break}se&&se.scheme=="file"&&!He(Y(p(Ct,qe),""))&&(at(se.path[0],!0)?X(ie.path,se.path[0]):ie.host=se.host),me=Se;continue;case ne:if(Qe==Ne||Qe=="/"||Qe=="\\"||Qe=="?"||Qe=="#"){if(!ke&&at(lt))me=Se;else if(lt==""){if(ie.host="",ke)return;me=pe}else{if(Nt=ie.parseHost(lt),Nt)return Nt;if(ie.host=="localhost"&&(ie.host=""),ke)return;lt="",me=pe}continue}else lt+=Qe;break;case pe:if(ie.isSpecial()){if(me=Se,Qe!="/"&&Qe!="\\")continue}else if(!ke&&Qe=="?")ie.query="",me=Le;else if(!ke&&Qe=="#")ie.fragment="",me=xe;else if(Qe!=Ne&&(me=Se,Qe!="/"))continue;break;case Se:if(Qe==Ne||Qe=="/"||Qe=="\\"&&ie.isSpecial()||!ke&&(Qe=="?"||Qe=="#")){if($e(lt)?(ie.shortenPath(),Qe!="/"&&!(Qe=="\\"&&ie.isSpecial())&&X(ie.path,"")):et(lt)?Qe!="/"&&!(Qe=="\\"&&ie.isSpecial())&&X(ie.path,""):(ie.scheme=="file"&&!ie.path.length&&at(lt)&&(ie.host&&(ie.host=""),lt=de(lt,0)+":"),X(ie.path,lt)),lt="",ie.scheme=="file"&&(Qe==Ne||Qe=="?"||Qe=="#"))for(;ie.path.length>1&&ie.path[0]==="";)U(ie.path);Qe=="?"?(ie.query="",me=Le):Qe=="#"&&(ie.fragment="",me=xe)}else lt+=rt(Qe,Ze);break;case ge:Qe=="?"?(ie.query="",me=Le):Qe=="#"?(ie.fragment="",me=xe):Qe!=Ne&&(ie.path[0]+=rt(Qe,ze));break;case Le:!ke&&Qe=="#"?(ie.fragment="",me=xe):Qe!=Ne&&(Qe=="'"&&ie.isSpecial()?ie.query+="%27":Qe=="#"?ie.query+="%23":ie.query+=rt(Qe,ze));break;case xe:Qe!=Ne&&(ie.fragment+=rt(Qe,Xe));break}qe++}},parseHost:function(ve){var ke,se,ie;if(de(ve,0)=="["){if(de(ve,ve.length-1)!="]"||(ke=Ue(u(ve,1,-1)),!ke))return W;this.host=ke}else if(this.isSpecial()){if(ve=M(ve),_(it,ve)||(ke=Te(ve),ke===null))return W;this.host=ke}else{if(_(_t,ve))return W;for(ke="",se=E(ve),ie=0;ie<se.length;ie++)ke+=rt(se[ie],ze);this.host=ke}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme=="file"},includesCredentials:function(){return this.username!=""||this.password!=""},isSpecial:function(){return R(vt,this.scheme)},shortenPath:function(){var ve=this.path,ke=ve.length;ke&&(this.scheme!="file"||ke!=1||!at(ve[0],!0))&&ve.length--},serialize:function(){var ve=this,ke=ve.scheme,se=ve.username,ie=ve.password,me=ve.host,qe=ve.port,lt=ve.path,Je=ve.query,pt=ve.fragment,Et=ke+":";return me!==null?(Et+="//",ve.includesCredentials()&&(Et+=se+(ie?":"+ie:"")+"@"),Et+=De(me),qe!==null&&(Et+=":"+qe)):ke=="file"&&(Et+="//"),Et+=ve.cannotBeABaseURL?lt[0]:lt.length?"/"+Y(lt,"/"):"",Je!==null&&(Et+="?"+Je),pt!==null&&(Et+="#"+pt),Et},setHref:function(ve){var ke=this.parse(ve);if(ke)throw Q(ke);this.searchParams.update()},getOrigin:function(){var ve=this.scheme,ke=this.port;if(ve=="blob")try{return new ot(ve.path[0]).origin}catch{return"null"}return ve=="file"||!this.isSpecial()?"null":ve+"://"+De(this.host)+(ke!==null?":"+ke:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(ve){this.parse(A(ve)+":",ct)},getUsername:function(){return this.username},setUsername:function(ve){var ke=E(A(ve));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var se=0;se<ke.length;se++)this.username+=rt(ke[se],Fe)}},getPassword:function(){return this.password},setPassword:function(ve){var ke=E(A(ve));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var se=0;se<ke.length;se++)this.password+=rt(ke[se],Fe)}},getHost:function(){var ve=this.host,ke=this.port;return ve===null?"":ke===null?De(ve):De(ve)+":"+ke},setHost:function(ve){this.cannotBeABaseURL||this.parse(ve,J)},getHostname:function(){var ve=this.host;return ve===null?"":De(ve)},setHostname:function(ve){this.cannotBeABaseURL||this.parse(ve,$)},getPort:function(){var ve=this.port;return ve===null?"":A(ve)},setPort:function(ve){this.cannotHaveUsernamePasswordPort()||(ve=A(ve),ve==""?this.port=null:this.parse(ve,oe))},getPathname:function(){var ve=this.path;return this.cannotBeABaseURL?ve[0]:ve.length?"/"+Y(ve,"/"):""},setPathname:function(ve){this.cannotBeABaseURL||(this.path=[],this.parse(ve,pe))},getSearch:function(){var ve=this.query;return ve?"?"+ve:""},setSearch:function(ve){ve=A(ve),ve==""?this.query=null:(de(ve,0)=="?"&&(ve=u(ve,1)),this.query="",this.parse(ve,Le)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var ve=this.fragment;return ve?"#"+ve:""},setHash:function(ve){if(ve=A(ve),ve==""){this.fragment=null;return}de(ve,0)=="#"&&(ve=u(ve,1)),this.fragment="",this.parse(ve,xe)},update:function(){this.query=this.searchParams.serialize()||null}};var ot=function(ke){var se=g(this,dt),ie=V(arguments.length,1)>1?arguments[1]:void 0,me=k(se,new Pe(ke,!1,ie));s||(se.href=me.serialize(),se.origin=me.getOrigin(),se.protocol=me.getProtocol(),se.username=me.getUsername(),se.password=me.getPassword(),se.host=me.getHost(),se.hostname=me.getHostname(),se.port=me.getPort(),se.pathname=me.getPathname(),se.search=me.getSearch(),se.searchParams=me.getSearchParams(),se.hash=me.getHash())},dt=ot.prototype,Ke=function(ve,ke){return{get:function(){return l(this)[ve]()},set:ke&&function(se){return l(this)[ke](se)},configurable:!0,enumerable:!0}};if(s&&(S(dt,"href",Ke("serialize","setHref")),S(dt,"origin",Ke("getOrigin")),S(dt,"protocol",Ke("getProtocol","setProtocol")),S(dt,"username",Ke("getUsername","setUsername")),S(dt,"password",Ke("getPassword","setPassword")),S(dt,"host",Ke("getHost","setHost")),S(dt,"hostname",Ke("getHostname","setHostname")),S(dt,"port",Ke("getPort","setPort")),S(dt,"pathname",Ke("getPathname","setPathname")),S(dt,"search",Ke("getSearch","setSearch")),S(dt,"searchParams",Ke("getSearchParams")),S(dt,"hash",Ke("getHash","setHash"))),f(dt,"toJSON",function(){return l(this).serialize()},{enumerable:!0}),f(dt,"toString",function(){return l(this).serialize()},{enumerable:!0}),Z){var gt=Z.createObjectURL,Oe=Z.revokeObjectURL;gt&&f(ot,"createObjectURL",m(gt,Z)),Oe&&f(ot,"revokeObjectURL",m(Oe,Z))}L(ot,"URL"),n({global:!0,constructor:!0,forced:!i,sham:!s},{URL:ot})},285:(h,T,e)=>{e(8789)},7514:(h,T,e)=>{var n=e(935);n.System,n.VbrMode,n.Float,n.ShortBlock,n.Util,n.Arrays,n.new_array_n,n.new_byte,n.new_double;var s=n.new_float;n.new_float_n,n.new_int,n.new_int_n,n.assert;var i=e(687);function o(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=s(i.SBMAX_l),this.s=s(i.SBMAX_s),this.psfb21=s(i.PSFB21),this.psfb12=s(i.PSFB12),this.cb_l=s(i.CBANDS),this.cb_s=s(i.CBANDS),this.eql_w=s(i.BLKSIZE/2)}h.exports=o},3724:(h,T,e)=>{var n=e(935),s=n.System;n.VbrMode,n.Float,n.ShortBlock,n.Util;var i=n.Arrays;n.new_array_n;var o=n.new_byte;n.new_double,n.new_float;var m=n.new_float_n,d=n.new_int;n.new_int_n;var f=n.assert,S=e(5638),g=e(7721),R=e(687),x=e(1998);E.EQ=function(p,O){return Math.abs(p)>Math.abs(O)?Math.abs(p-O)<=Math.abs(p)*1e-6:Math.abs(p-O)<=Math.abs(O)*1e-6},E.NEQ=function(p,O){return!E.EQ(p,O)};function E(){var p=this,O=32773,M=32,A=null,L=null,V=null,K=null;this.setModules=function(v,u,c,y){A=v,L=u,V=c,K=y};var F=null,k=0,l=0,P=0;this.getframebits=function(v){var u=v.internal_flags,c;u.bitrate_index!=0?c=g.bitrate_table[v.version][u.bitrate_index]:c=v.brate,f(8<=c&&c<=640);var y=0|(v.version+1)*72e3*c/v.out_samplerate+u.padding;return 8*y};function H(v){s.arraycopy(v.header[v.w_ptr].buf,0,F,l,v.sideinfo_len),l+=v.sideinfo_len,k+=v.sideinfo_len*8,v.w_ptr=v.w_ptr+1&x.MAX_HEADER_BUF-1}function Z(v,u,c){for(f(c<M-2);c>0;){var y;P==0&&(P=8,l++,f(l<Lame.LAME_MAXMP3BUFFER),f(v.header[v.w_ptr].write_timing>=k),v.header[v.w_ptr].write_timing==k&&H(v),F[l]=0),y=Math.min(c,P),c-=y,P-=y,f(c<M),f(P<M),F[l]|=u>>c<<P,k+=y}}function Q(v,u,c){for(f(c<M-2);c>0;){var y;P==0&&(P=8,l++,f(l<Lame.LAME_MAXMP3BUFFER),F[l]=0),y=Math.min(c,P),c-=y,P-=y,f(c<M),f(P<M),F[l]|=u>>c<<P,k+=y}}function ee(v,u){var c=v.internal_flags,y;if(f(u>=0),u>=8&&(Z(c,76,8),u-=8),u>=8&&(Z(c,65,8),u-=8),u>=8&&(Z(c,77,8),u-=8),u>=8&&(Z(c,69,8),u-=8),u>=32){var B=V.getLameShortVersion();if(u>=32)for(y=0;y<B.length&&u>=8;++y)u-=8,Z(c,B.charAt(y),8)}for(;u>=1;u-=1)Z(c,c.ancillary_flag,1),c.ancillary_flag^=v.disable_reservoir?0:1;f(u==0)}function te(v,u,c){for(var y=v.header[v.h_ptr].ptr;c>0;){var B=Math.min(c,8-(y&7));c-=B,f(c<M),v.header[v.h_ptr].buf[y>>3]|=u>>c<<8-(y&7)-B,y+=B}v.header[v.h_ptr].ptr=y}function fe(v,u){v<<=8;for(var c=0;c<8;c++)v<<=1,u<<=1,((u^v)&65536)!=0&&(u^=O);return u}this.CRC_writeheader=function(v,u){var c=65535;c=fe(u[2]&255,c),c=fe(u[3]&255,c);for(var y=6;y<v.sideinfo_len;y++)c=fe(u[y]&255,c);u[4]=byte(c>>8),u[5]=byte(c&255)};function de(v,u){var c=v.internal_flags,y,B,G;if(y=c.l3_side,c.header[c.h_ptr].ptr=0,i.fill(c.header[c.h_ptr].buf,0,c.sideinfo_len,0),v.out_samplerate<16e3?te(c,4094,12):te(c,4095,12),te(c,v.version,1),te(c,1,2),te(c,v.error_protection?0:1,1),te(c,c.bitrate_index,4),te(c,c.samplerate_index,2),te(c,c.padding,1),te(c,v.extension,1),te(c,v.mode.ordinal(),2),te(c,c.mode_ext,2),te(c,v.copyright,1),te(c,v.original,1),te(c,v.emphasis,2),v.error_protection&&te(c,0,16),v.version==1){for(f(y.main_data_begin>=0),te(c,y.main_data_begin,9),c.channels_out==2?te(c,y.private_bits,3):te(c,y.private_bits,5),G=0;G<c.channels_out;G++){var W;for(W=0;W<4;W++)te(c,y.scfsi[G][W],1)}for(B=0;B<2;B++)for(G=0;G<c.channels_out;G++){var j=y.tt[B][G];te(c,j.part2_3_length+j.part2_length,12),te(c,j.big_values/2,9),te(c,j.global_gain,8),te(c,j.scalefac_compress,4),j.block_type!=R.NORM_TYPE?(te(c,1,1),te(c,j.block_type,2),te(c,j.mixed_block_flag,1),j.table_select[0]==14&&(j.table_select[0]=16),te(c,j.table_select[0],5),j.table_select[1]==14&&(j.table_select[1]=16),te(c,j.table_select[1],5),te(c,j.subblock_gain[0],3),te(c,j.subblock_gain[1],3),te(c,j.subblock_gain[2],3)):(te(c,0,1),j.table_select[0]==14&&(j.table_select[0]=16),te(c,j.table_select[0],5),j.table_select[1]==14&&(j.table_select[1]=16),te(c,j.table_select[1],5),j.table_select[2]==14&&(j.table_select[2]=16),te(c,j.table_select[2],5),f(0<=j.region0_count&&j.region0_count<16),f(0<=j.region1_count&&j.region1_count<8),te(c,j.region0_count,4),te(c,j.region1_count,3)),te(c,j.preflag,1),te(c,j.scalefac_scale,1),te(c,j.count1table_select,1)}}else for(f(y.main_data_begin>=0),te(c,y.main_data_begin,8),te(c,y.private_bits,c.channels_out),B=0,G=0;G<c.channels_out;G++){var j=y.tt[B][G];te(c,j.part2_3_length+j.part2_length,12),te(c,j.big_values/2,9),te(c,j.global_gain,8),te(c,j.scalefac_compress,9),j.block_type!=R.NORM_TYPE?(te(c,1,1),te(c,j.block_type,2),te(c,j.mixed_block_flag,1),j.table_select[0]==14&&(j.table_select[0]=16),te(c,j.table_select[0],5),j.table_select[1]==14&&(j.table_select[1]=16),te(c,j.table_select[1],5),te(c,j.subblock_gain[0],3),te(c,j.subblock_gain[1],3),te(c,j.subblock_gain[2],3)):(te(c,0,1),j.table_select[0]==14&&(j.table_select[0]=16),te(c,j.table_select[0],5),j.table_select[1]==14&&(j.table_select[1]=16),te(c,j.table_select[1],5),j.table_select[2]==14&&(j.table_select[2]=16),te(c,j.table_select[2],5),f(0<=j.region0_count&&j.region0_count<16),f(0<=j.region1_count&&j.region1_count<8),te(c,j.region0_count,4),te(c,j.region1_count,3)),te(c,j.scalefac_scale,1),te(c,j.count1table_select,1)}v.error_protection&&CRC_writeheader(c,c.header[c.h_ptr].buf);{var re=c.h_ptr;f(c.header[re].ptr==c.sideinfo_len*8),c.h_ptr=re+1&x.MAX_HEADER_BUF-1,c.header[c.h_ptr].write_timing=c.header[re].write_timing+u,c.h_ptr==c.w_ptr&&s.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function _(v,u){var c=g.ht[u.count1table_select+32],y,B=0,G=u.big_values,W=u.big_values;for(f(u.count1table_select<2),y=(u.count1-u.big_values)/4;y>0;--y){var j=0,re=0,ae;ae=u.l3_enc[G+0],ae!=0&&(re+=8,u.xr[W+0]<0&&j++,f(ae<=1)),ae=u.l3_enc[G+1],ae!=0&&(re+=4,j*=2,u.xr[W+1]<0&&j++,f(ae<=1)),ae=u.l3_enc[G+2],ae!=0&&(re+=2,j*=2,u.xr[W+2]<0&&j++,f(ae<=1)),ae=u.l3_enc[G+3],ae!=0&&(re++,j*=2,u.xr[W+3]<0&&j++,f(ae<=1)),G+=4,W+=4,Z(v,j+c.table[re],c.hlen[re]),B+=c.hlen[re]}return B}function Y(v,u,c,y,B){var G=g.ht[u],W=0;if(f(u<32),u==0)return W;for(var j=c;j<y;j+=2){var re=0,ae=0,be=G.xlen,Me=G.xlen,Be=0,Ge=B.l3_enc[j],Ye=B.l3_enc[j+1];if(Ge!=0&&(B.xr[j]<0&&Be++,re--),u>15){if(Ge>14){var it=Ge-15;f(it<=G.linmax),Be|=it<<1,ae=be,Ge=15}if(Ye>14){var _t=Ye-15;f(_t<=G.linmax),Be<<=be,Be|=_t,ae+=be,Ye=15}Me=16}Ye!=0&&(Be<<=1,B.xr[j+1]<0&&Be++,re--),f((Ge|Ye)<16),Ge=Ge*Me+Ye,ae-=re,re+=G.hlen[Ge],f(re<=M),f(ae<=M),Z(v,G.table[Ge],re),Z(v,Be,ae),W+=re+ae}return W}function b(v,u){var c=3*v.scalefac_band.s[3];c>u.big_values&&(c=u.big_values);var y=Y(v,u.table_select[0],0,c,u);return y+=Y(v,u.table_select[1],c,u.big_values,u),y}function D(v,u){var c,y,B,G;c=u.big_values,f(0<=c&&c<=576);var W=u.region0_count+1;return f(0<=W),f(W<v.scalefac_band.l.length),B=v.scalefac_band.l[W],W+=u.region1_count+1,f(0<=W),f(W<v.scalefac_band.l.length),G=v.scalefac_band.l[W],B>c&&(B=c),G>c&&(G=c),y=Y(v,u.table_select[0],0,B,u),y+=Y(v,u.table_select[1],B,G,u),y+=Y(v,u.table_select[2],G,c,u),y}function X(v){var u,c,y,B,G=0,W=v.internal_flags,j=W.l3_side;if(v.version==1)for(u=0;u<2;u++)for(c=0;c<W.channels_out;c++){var re=j.tt[u][c],ae=S.slen1_tab[re.scalefac_compress],be=S.slen2_tab[re.scalefac_compress];for(B=0,y=0;y<re.sfbdivide;y++)re.scalefac[y]!=-1&&(Z(W,re.scalefac[y],ae),B+=ae);for(;y<re.sfbmax;y++)re.scalefac[y]!=-1&&(Z(W,re.scalefac[y],be),B+=be);f(B==re.part2_length),re.block_type==R.SHORT_TYPE?B+=b(W,re):B+=D(W,re),B+=_(W,re),f(B==re.part2_3_length+re.part2_length),G+=B}else for(u=0,c=0;c<W.channels_out;c++){var re=j.tt[u][c],Me,Be,Ge=0;if(f(re.sfb_partition_table!=null),B=0,y=0,Be=0,re.block_type==R.SHORT_TYPE){for(;Be<4;Be++){var Ye=re.sfb_partition_table[Be]/3,it=re.slen[Be];for(Me=0;Me<Ye;Me++,y++)Z(W,Math.max(re.scalefac[y*3+0],0),it),Z(W,Math.max(re.scalefac[y*3+1],0),it),Z(W,Math.max(re.scalefac[y*3+2],0),it),Ge+=3*it}B+=b(W,re)}else{for(;Be<4;Be++){var Ye=re.sfb_partition_table[Be],it=re.slen[Be];for(Me=0;Me<Ye;Me++,y++)Z(W,Math.max(re.scalefac[y],0),it),Ge+=it}B+=D(W,re)}B+=_(W,re),f(B==re.part2_3_length),f(Ge==re.part2_length),G+=Ge+B}return G}function q(){this.total=0}function U(v,u){var c=v.internal_flags,y,B,G,W,j;return j=c.w_ptr,W=c.h_ptr-1,W==-1&&(W=x.MAX_HEADER_BUF-1),y=c.header[W].write_timing-k,u.total=y,y>=0&&(B=1+W-j,W<j&&(B=1+W-j+x.MAX_HEADER_BUF),y-=B*8*c.sideinfo_len),G=p.getframebits(v),y+=G,u.total+=G,u.total%8!=0?u.total=1+u.total/8:u.total=u.total/8,u.total+=l+1,y<0&&s.err.println(`strange error flushing buffer ... 
`),y}this.flush_bitstream=function(v){var u=v.internal_flags,c,y,B=u.h_ptr-1;if(B==-1&&(B=x.MAX_HEADER_BUF-1),c=u.l3_side,!((y=U(v,new q))<0)){if(ee(v,y),f(u.header[B].write_timing+this.getframebits(v)==k),u.ResvSize=0,c.main_data_begin=0,u.findReplayGain){var G=A.GetTitleGain(u.rgdata);f(NEQ(G,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),u.RadioGain=Math.floor(G*10+.5)|0}u.findPeakSample&&(u.noclipGainChange=Math.ceil(Math.log10(u.PeakSample/32767)*20*10)|0,u.noclipGainChange>0&&(EQ(v.scale,1)||EQ(v.scale,0))?u.noclipScale=Math.floor(32767/u.PeakSample*100)/100:u.noclipScale=-1)}},this.add_dummy_byte=function(v,u,c){for(var y=v.internal_flags,B;c-- >0;)for(Q(y,u,8),B=0;B<x.MAX_HEADER_BUF;++B)y.header[B].write_timing+=8},this.format_bitstream=function(v){var u=v.internal_flags,c;c=u.l3_side;var y=this.getframebits(v);ee(v,c.resvDrain_pre),de(v,y);var B=8*u.sideinfo_len;if(B+=X(v),ee(v,c.resvDrain_post),B+=c.resvDrain_post,c.main_data_begin+=(y-B)/8,U(v,new q)!=u.ResvSize&&s.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),c.main_data_begin*8!=u.ResvSize&&(s.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*c.main_data_begin,u.ResvSize,c.resvDrain_post,c.resvDrain_pre,8*u.sideinfo_len,B-c.resvDrain_post-8*u.sideinfo_len,B,B%8,y),s.err.println("This is a fatal error.  It has several possible causes:"),s.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),s.err.println(" 9%%  Your system is overclocked"),s.err.println(" 1%%  bug in LAME encoding library"),u.ResvSize=c.main_data_begin*8),f(k%8==0),k>1e9){var G;for(G=0;G<x.MAX_HEADER_BUF;++G)u.header[G].write_timing-=k;k=0}return 0},this.copy_buffer=function(v,u,c,y,B){var G=l+1;if(G<=0)return 0;if(y!=0&&G>y)return-1;if(s.arraycopy(F,0,u,c,G),l=-1,P=0,B!=0){var W=d(1);if(W[0]=v.nMusicCRC,K.updateMusicCRC(W,u,c,G),v.nMusicCRC=W[0],G>0&&(v.VBR_seek_table.nBytesWritten+=G),v.decode_on_the_fly){for(var j=m([2,1152]),re=G,ae=-1,be;ae!=0;)if(ae=L.hip_decode1_unclipped(v.hip,u,c,re,j[0],j[1]),re=0,ae==-1&&(ae=0),ae>0){if(f(ae<=1152),v.findPeakSample){for(be=0;be<ae;be++)j[0][be]>v.PeakSample?v.PeakSample=j[0][be]:-j[0][be]>v.PeakSample&&(v.PeakSample=-j[0][be]);if(v.channels_out>1)for(be=0;be<ae;be++)j[1][be]>v.PeakSample?v.PeakSample=j[1][be]:-j[1][be]>v.PeakSample&&(v.PeakSample=-j[1][be])}if(v.findReplayGain&&A.AnalyzeSamples(v.rgdata,j[0],0,j[1],0,ae,v.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return G},this.init_bit_stream_w=function(v){F=o(Lame.LAME_MAXMP3BUFFER),v.h_ptr=v.w_ptr=0,v.header[v.h_ptr].write_timing=0,l=-1,P=0,k=0}}h.exports=E},9120:(h,T,e)=>{var n=e(935);n.System,n.VbrMode,n.Float,n.ShortBlock,n.Util,n.Arrays,n.new_array_n,n.new_byte,n.new_double;var s=n.new_float;n.new_float_n;var i=n.new_int;n.new_int_n;var o=n.assert,m=e(3134),d=e(687),f=e(354),S=e(1998);function g(R){var x=R;this.quantize=x,this.iteration_loop=function(E,p,O,M){var A=E.internal_flags,L=s(f.SFBMAX),V=s(576),K=i(2),F=0,k,l=A.l3_side,P=new m(F);this.quantize.rv.ResvFrameBegin(E,P),F=P.bits;for(var H=0;H<A.mode_gr;H++){k=this.quantize.qupvt.on_pe(E,p,K,F,H,H),A.mode_ext==d.MPG_MD_MS_LR&&(this.quantize.ms_convert(A.l3_side,H),this.quantize.qupvt.reduce_side(K,O[H],F,k));for(var Z=0;Z<A.channels_out;Z++){var Q,ee,te=l.tt[H][Z];te.block_type!=d.SHORT_TYPE?(Q=0,ee=A.PSY.mask_adjust-Q):(Q=0,ee=A.PSY.mask_adjust_short-Q),A.masking_lower=Math.pow(10,ee*.1),this.quantize.init_outer_loop(A,te),this.quantize.init_xrpow(A,te,V)&&(this.quantize.qupvt.calc_xmin(E,M[H][Z],te,L),this.quantize.outer_loop(E,te,L,V,Z,K[Z])),this.quantize.iteration_finish_one(A,H,Z),o(te.part2_3_length<=S.MAX_BITS_PER_CHANNEL),o(te.part2_3_length<=K[Z])}}this.quantize.rv.ResvFrameEnd(A,F)}}h.exports=g},3449:(h,T,e)=>{var n=e(935),s=n.new_float,i=n.new_int;n.assert;function o(){this.global_gain=0,this.sfb_count1=0,this.step=i(39),this.noise=s(39),this.noise_log=s(39)}h.exports=o},2711:h=>{function T(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}h.exports=T},687:(h,T,e)=>{var n=e(935),s=n.System,i=n.VbrMode;n.Float,n.ShortBlock,n.Util,n.Arrays;var o=n.new_array_n;n.new_byte,n.new_double;var m=n.new_float,d=n.new_float_n,f=n.new_int;n.new_int_n;var S=n.assert;g.ENCDELAY=576,g.POSTDELAY=1152,g.MDCTDELAY=48,g.FFTOFFSET=224+g.MDCTDELAY,g.DECDELAY=528,g.SBLIMIT=32,g.CBANDS=64,g.SBPSY_l=21,g.SBPSY_s=12,g.SBMAX_l=22,g.SBMAX_s=13,g.PSFB21=6,g.PSFB12=6,g.BLKSIZE=1024,g.HBLKSIZE=g.BLKSIZE/2+1,g.BLKSIZE_s=256,g.HBLKSIZE_s=g.BLKSIZE_s/2+1,g.NORM_TYPE=0,g.START_TYPE=1,g.SHORT_TYPE=2,g.STOP_TYPE=3,g.MPG_MD_LR_LR=0,g.MPG_MD_LR_I=1,g.MPG_MD_MS_LR=2,g.MPG_MD_MS_I=3,g.fircoef=[-.1039435,-.1892065,-.21623599999999998,-.155915,3898045e-23,.23387249999999998,.50455,.756825,.9354899999999999];function g(){var R=e(2143),x=e(9584),E=g.FFTOFFSET,p=g.MPG_MD_MS_LR,O=null;this.psy=null;var M=null,A=null,L=null;this.setModules=function(l,P,H,Z){O=l,this.psy=P,M=P,A=Z,L=H};var V=new R;function K(l){var P,H;if(l.ATH.useAdjust==0){l.ATH.adjust=1;return}if(H=l.loudness_sq[0][0],P=l.loudness_sq[1][0],l.channels_out==2?(H+=l.loudness_sq[0][1],P+=l.loudness_sq[1][1]):(H+=H,P+=P),l.mode_gr==2&&(H=Math.max(H,P)),H*=.5,H*=l.ATH.aaSensitivityP,H>.03125)l.ATH.adjust>=1?l.ATH.adjust=1:l.ATH.adjust<l.ATH.adjustLimit&&(l.ATH.adjust=l.ATH.adjustLimit),l.ATH.adjustLimit=1;else{var Z=31.98*H+625e-6;l.ATH.adjust>=Z?(l.ATH.adjust*=Z*.075+.925,l.ATH.adjust<Z&&(l.ATH.adjust=Z)):l.ATH.adjustLimit>=Z?l.ATH.adjust=Z:l.ATH.adjust<l.ATH.adjustLimit&&(l.ATH.adjust=l.ATH.adjustLimit),l.ATH.adjustLimit=Z}}function F(l){var P,H;for(S(0<=l.bitrate_index&&l.bitrate_index<16),S(0<=l.mode_ext&&l.mode_ext<4),l.bitrate_stereoMode_Hist[l.bitrate_index][4]++,l.bitrate_stereoMode_Hist[15][4]++,l.channels_out==2&&(l.bitrate_stereoMode_Hist[l.bitrate_index][l.mode_ext]++,l.bitrate_stereoMode_Hist[15][l.mode_ext]++),P=0;P<l.mode_gr;++P)for(H=0;H<l.channels_out;++H){var Z=l.l3_side.tt[P][H].block_type|0;l.l3_side.tt[P][H].mixed_block_flag!=0&&(Z=4),l.bitrate_blockType_Hist[l.bitrate_index][Z]++,l.bitrate_blockType_Hist[l.bitrate_index][5]++,l.bitrate_blockType_Hist[15][Z]++,l.bitrate_blockType_Hist[15][5]++}}function k(l,P){var H=l.internal_flags,Z,Q;if(H.lame_encode_frame_init==0){var ee,te,fe=m(2014),de=m(286+1152+576);for(H.lame_encode_frame_init=1,ee=0,te=0;ee<286+576*(1+H.mode_gr);++ee)ee<576*H.mode_gr?(fe[ee]=0,H.channels_out==2&&(de[ee]=0)):(fe[ee]=P[0][te],H.channels_out==2&&(de[ee]=P[1][te]),++te);for(Q=0;Q<H.mode_gr;Q++)for(Z=0;Z<H.channels_out;Z++)H.l3_side.tt[Q][Z].block_type=g.SHORT_TYPE;V.mdct_sub48(H,fe,de),S(576>=g.FFTOFFSET),S(H.mf_size>=g.BLKSIZE+l.framesize-g.FFTOFFSET),S(H.mf_size>=512+l.framesize-32)}}this.lame_encode_mp3_frame=function(l,P,H,Z,Q,ee){var te,fe=o([2,2]);fe[0][0]=new x,fe[0][1]=new x,fe[1][0]=new x,fe[1][1]=new x;var de=o([2,2]);de[0][0]=new x,de[0][1]=new x,de[1][0]=new x,de[1][1]=new x;var _,Y=[null,null],b=l.internal_flags,D=d([2,4]),X=[.5,.5],q=[[0,0],[0,0]],U=[[0,0],[0,0]],v,u,c;if(Y[0]=P,Y[1]=H,b.lame_encode_frame_init==0&&k(l,Y),b.padding=0,(b.slot_lag-=b.frac_SpF)<0&&(b.slot_lag+=l.out_samplerate,b.padding=1),b.psymodel!=0){var y,B=[null,null],G=0,W=f(2);for(c=0;c<b.mode_gr;c++){for(u=0;u<b.channels_out;u++)B[u]=Y[u],G=576+c*576-g.FFTOFFSET;if(l.VBR==i.vbr_mtrh||l.VBR==i.vbr_mt?y=M.L3psycho_anal_vbr(l,B,G,c,fe,de,q[c],U[c],D[c],W):y=M.L3psycho_anal_ns(l,B,G,c,fe,de,q[c],U[c],D[c],W),y!=0)return-4;for(l.mode==MPEGMode.JOINT_STEREO&&(X[c]=D[c][2]+D[c][3],X[c]>0&&(X[c]=D[c][3]/X[c])),u=0;u<b.channels_out;u++){var j=b.l3_side.tt[c][u];j.block_type=W[u],j.mixed_block_flag=0}}}else for(c=0;c<b.mode_gr;c++)for(u=0;u<b.channels_out;u++)b.l3_side.tt[c][u].block_type=g.NORM_TYPE,b.l3_side.tt[c][u].mixed_block_flag=0,U[c][u]=q[c][u]=700;if(K(b),V.mdct_sub48(b,Y[0],Y[1]),b.mode_ext=g.MPG_MD_LR_LR,l.force_ms)b.mode_ext=g.MPG_MD_MS_LR;else if(l.mode==MPEGMode.JOINT_STEREO){var re=0,ae=0;for(c=0;c<b.mode_gr;c++)for(u=0;u<b.channels_out;u++)re+=U[c][u],ae+=q[c][u];if(re<=1*ae){var be=b.l3_side.tt[0],Me=b.l3_side.tt[b.mode_gr-1];be[0].block_type==be[1].block_type&&Me[0].block_type==Me[1].block_type&&(b.mode_ext=g.MPG_MD_MS_LR)}}if(b.mode_ext==p?(_=de,v=U):(_=fe,v=q),l.analysis&&b.pinfo!=null)for(c=0;c<b.mode_gr;c++)for(u=0;u<b.channels_out;u++)b.pinfo.ms_ratio[c]=b.ms_ratio[c],b.pinfo.ms_ener_ratio[c]=X[c],b.pinfo.blocktype[c][u]=b.l3_side.tt[c][u].block_type,b.pinfo.pe[c][u]=v[c][u],s.arraycopy(b.l3_side.tt[c][u].xr,0,b.pinfo.xr[c][u],0,576),b.mode_ext==p&&(b.pinfo.ers[c][u]=b.pinfo.ers[c][u+2],s.arraycopy(b.pinfo.energy[c][u+2],0,b.pinfo.energy[c][u],0,b.pinfo.energy[c][u].length));if(l.VBR==i.vbr_off||l.VBR==i.vbr_abr){var Be,Ge;for(Be=0;Be<18;Be++)b.nsPsy.pefirbuf[Be]=b.nsPsy.pefirbuf[Be+1];for(Ge=0,c=0;c<b.mode_gr;c++)for(u=0;u<b.channels_out;u++)Ge+=v[c][u];for(b.nsPsy.pefirbuf[18]=Ge,Ge=b.nsPsy.pefirbuf[9],Be=0;Be<9;Be++)Ge+=(b.nsPsy.pefirbuf[Be]+b.nsPsy.pefirbuf[18-Be])*g.fircoef[Be];for(Ge=3350*b.mode_gr*b.channels_out/Ge,c=0;c<b.mode_gr;c++)for(u=0;u<b.channels_out;u++)v[c][u]*=Ge}if(b.iteration_loop.iteration_loop(l,v,X,_),O.format_bitstream(l),te=O.copy_buffer(b,Z,Q,ee,1),l.bWriteVbrTag&&A.addVbrFrame(l),l.analysis&&b.pinfo!=null){for(u=0;u<b.channels_out;u++){var Ye;for(Ye=0;Ye<E;Ye++)b.pinfo.pcmdata[u][Ye]=b.pinfo.pcmdata[u][Ye+l.framesize];for(Ye=E;Ye<1600;Ye++)b.pinfo.pcmdata[u][Ye]=Y[u][Ye-E]}L.set_frame_pinfo(l,_)}return F(b),te}}h.exports=g},9347:(h,T,e)=>{var n=e(935);n.System,n.VbrMode,n.Float,n.ShortBlock;var s=n.Util;n.Arrays,n.new_array_n,n.new_byte,n.new_double;var i=n.new_float;n.new_float_n,n.new_int,n.new_int_n,n.assert;var o=e(687);function m(){var d=i(o.BLKSIZE),f=i(o.BLKSIZE_s/2),S=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function g(x,E,p){var O=0,M,A,L;p<<=1;var V=E+p;M=4;do{var K,F,k,l,P,H,Z;Z=M>>1,l=M,P=M<<1,H=P+l,M=P<<1,A=E,L=A+Z;do{var Q,ee,te,fe;ee=x[A+0]-x[A+l],Q=x[A+0]+x[A+l],fe=x[A+P]-x[A+H],te=x[A+P]+x[A+H],x[A+P]=Q-te,x[A+0]=Q+te,x[A+H]=ee-fe,x[A+l]=ee+fe,ee=x[L+0]-x[L+l],Q=x[L+0]+x[L+l],fe=s.SQRT2*x[L+H],te=s.SQRT2*x[L+P],x[L+P]=Q-te,x[L+0]=Q+te,x[L+H]=ee-fe,x[L+l]=ee+fe,L+=M,A+=M}while(A<V);for(F=S[O+0],K=S[O+1],k=1;k<Z;k++){var de,_;de=1-2*K*K,_=2*K*F,A=E+k,L=E+l-k;do{var Y,b,D,Q,ee,X,te,q,fe,U;b=_*x[A+l]-de*x[L+l],Y=de*x[A+l]+_*x[L+l],ee=x[A+0]-Y,Q=x[A+0]+Y,X=x[L+0]-b,D=x[L+0]+b,b=_*x[A+H]-de*x[L+H],Y=de*x[A+H]+_*x[L+H],fe=x[A+P]-Y,te=x[A+P]+Y,U=x[L+P]-b,q=x[L+P]+b,b=K*te-F*U,Y=F*te+K*U,x[A+P]=Q-Y,x[A+0]=Q+Y,x[L+H]=X-b,x[L+l]=X+b,b=F*q-K*fe,Y=K*q+F*fe,x[L+P]=D-Y,x[L+0]=D+Y,x[A+H]=ee-b,x[A+l]=ee+b,L+=M,A+=M}while(A<V);de=F,F=de*S[O+0]-K*S[O+1],K=de*S[O+1]+K*S[O+0]}O+=2}while(M<p)}var R=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(x,E,p,O,M){for(var A=0;A<3;A++){var L=o.BLKSIZE_s/2,V=65535&576/3*(A+1),K=o.BLKSIZE_s/8-1;do{var F,k,l,P,H,Z=R[K<<2]&255;F=f[Z]*O[p][M+Z+V],H=f[127-Z]*O[p][M+Z+V+128],k=F-H,F=F+H,l=f[Z+64]*O[p][M+Z+V+64],H=f[63-Z]*O[p][M+Z+V+192],P=l-H,l=l+H,L-=4,E[A][L+0]=F+l,E[A][L+2]=F-l,E[A][L+1]=k+P,E[A][L+3]=k-P,F=f[Z+1]*O[p][M+Z+V+1],H=f[126-Z]*O[p][M+Z+V+129],k=F-H,F=F+H,l=f[Z+65]*O[p][M+Z+V+65],H=f[62-Z]*O[p][M+Z+V+193],P=l-H,l=l+H,E[A][L+o.BLKSIZE_s/2+0]=F+l,E[A][L+o.BLKSIZE_s/2+2]=F-l,E[A][L+o.BLKSIZE_s/2+1]=k+P,E[A][L+o.BLKSIZE_s/2+3]=k-P}while(--K>=0);g(E[A],L,o.BLKSIZE_s/2)}},this.fft_long=function(x,E,p,O,M){var A=o.BLKSIZE/8-1,L=o.BLKSIZE/2;do{var V,K,F,k,l,P=R[A]&255;V=d[P]*O[p][M+P],l=d[P+512]*O[p][M+P+512],K=V-l,V=V+l,F=d[P+256]*O[p][M+P+256],l=d[P+768]*O[p][M+P+768],k=F-l,F=F+l,L-=4,E[L+0]=V+F,E[L+2]=V-F,E[L+1]=K+k,E[L+3]=K-k,V=d[P+1]*O[p][M+P+1],l=d[P+513]*O[p][M+P+513],K=V-l,V=V+l,F=d[P+257]*O[p][M+P+257],l=d[P+769]*O[p][M+P+769],k=F-l,F=F+l,E[L+o.BLKSIZE/2+0]=V+F,E[L+o.BLKSIZE/2+2]=V-F,E[L+o.BLKSIZE/2+1]=K+k,E[L+o.BLKSIZE/2+3]=K-k}while(--A>=0);g(E,L,o.BLKSIZE/2)},this.init_fft=function(x){for(var E=0;E<o.BLKSIZE;E++)d[E]=.42-.5*Math.cos(2*Math.PI*(E+.5)/o.BLKSIZE)+.08*Math.cos(4*Math.PI*(E+.5)/o.BLKSIZE);for(var E=0;E<o.BLKSIZE_s/2;E++)f[E]=.5*(1-Math.cos(2*Math.PI*(E+.5)/o.BLKSIZE_s))}}h.exports=m},1287:(h,T,e)=>{var n=e(935),s=n.System;n.VbrMode,n.Float,n.ShortBlock,n.Util;var i=n.Arrays;n.new_array_n,n.new_byte,n.new_double,n.new_float,n.new_float_n,n.new_int,n.new_int_n,n.assert,o.STEPS_per_dB=100,o.MAX_dB=120,o.GAIN_NOT_ENOUGH_SAMPLES=-24601,o.GAIN_ANALYSIS_ERROR=0,o.GAIN_ANALYSIS_OK=1,o.INIT_GAIN_ANALYSIS_ERROR=0,o.INIT_GAIN_ANALYSIS_OK=1,o.YULE_ORDER=10,o.MAX_ORDER=o.YULE_ORDER,o.MAX_SAMP_FREQ=48e3,o.RMS_WINDOW_TIME_NUMERATOR=1,o.RMS_WINDOW_TIME_DENOMINATOR=20,o.MAX_SAMPLES_PER_WINDOW=o.MAX_SAMP_FREQ*o.RMS_WINDOW_TIME_NUMERATOR/o.RMS_WINDOW_TIME_DENOMINATOR+1;function o(){var m=64.82;o.YULE_ORDER;var d=.95;o.MAX_SAMP_FREQ;var f=o.RMS_WINDOW_TIME_NUMERATOR,S=o.RMS_WINDOW_TIME_DENOMINATOR;o.MAX_SAMPLES_PER_WINDOW;var g=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],R=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function x(A,L,V,K,F,k){for(;F--!=0;)V[K]=1e-10+A[L+0]*k[0]-V[K-1]*k[1]+A[L-1]*k[2]-V[K-2]*k[3]+A[L-2]*k[4]-V[K-3]*k[5]+A[L-3]*k[6]-V[K-4]*k[7]+A[L-4]*k[8]-V[K-5]*k[9]+A[L-5]*k[10]-V[K-6]*k[11]+A[L-6]*k[12]-V[K-7]*k[13]+A[L-7]*k[14]-V[K-8]*k[15]+A[L-8]*k[16]-V[K-9]*k[17]+A[L-9]*k[18]-V[K-10]*k[19]+A[L-10]*k[20],++K,++L}function E(A,L,V,K,F,k){for(;F--!=0;)V[K]=A[L+0]*k[0]-V[K-1]*k[1]+A[L-1]*k[2]-V[K-2]*k[3]+A[L-2]*k[4],++K,++L}function p(A,L){for(var V=0;V<MAX_ORDER;V++)A.linprebuf[V]=A.lstepbuf[V]=A.loutbuf[V]=A.rinprebuf[V]=A.rstepbuf[V]=A.routbuf[V]=0;switch(0|L){case 48e3:A.reqindex=0;break;case 44100:A.reqindex=1;break;case 32e3:A.reqindex=2;break;case 24e3:A.reqindex=3;break;case 22050:A.reqindex=4;break;case 16e3:A.reqindex=5;break;case 12e3:A.reqindex=6;break;case 11025:A.reqindex=7;break;case 8e3:A.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return A.sampleWindow=0|(L*f+S-1)/S,A.lsum=0,A.rsum=0,A.totsamp=0,i.ill(A.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(A,L){return p(A,L)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(A.linpre=MAX_ORDER,A.rinpre=MAX_ORDER,A.lstep=MAX_ORDER,A.rstep=MAX_ORDER,A.lout=MAX_ORDER,A.rout=MAX_ORDER,i.fill(A.B,0),INIT_GAIN_ANALYSIS_OK)};function O(A){return A*A}this.AnalyzeSamples=function(A,L,V,K,F,k,l){var P,H,Z,Q,ee,te,fe;if(k==0)return GAIN_ANALYSIS_OK;switch(fe=0,ee=k,l){case 1:K=L,F=V;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(k<MAX_ORDER?(s.arraycopy(L,V,A.linprebuf,MAX_ORDER,k),s.arraycopy(K,F,A.rinprebuf,MAX_ORDER,k)):(s.arraycopy(L,V,A.linprebuf,MAX_ORDER,MAX_ORDER),s.arraycopy(K,F,A.rinprebuf,MAX_ORDER,MAX_ORDER));ee>0;){te=ee>A.sampleWindow-A.totsamp?A.sampleWindow-A.totsamp:ee,fe<MAX_ORDER?(P=A.linpre+fe,H=A.linprebuf,Z=A.rinpre+fe,Q=A.rinprebuf,te>MAX_ORDER-fe&&(te=MAX_ORDER-fe)):(P=V+fe,H=L,Z=F+fe,Q=K),x(H,P,A.lstepbuf,A.lstep+A.totsamp,te,g[A.reqindex]),x(Q,Z,A.rstepbuf,A.rstep+A.totsamp,te,g[A.reqindex]),E(A.lstepbuf,A.lstep+A.totsamp,A.loutbuf,A.lout+A.totsamp,te,R[A.reqindex]),E(A.rstepbuf,A.rstep+A.totsamp,A.routbuf,A.rout+A.totsamp,te,R[A.reqindex]),P=A.lout+A.totsamp,H=A.loutbuf,Z=A.rout+A.totsamp,Q=A.routbuf;for(var de=te%8;de--!=0;)A.lsum+=O(H[P++]),A.rsum+=O(Q[Z++]);for(de=te/8;de--!=0;)A.lsum+=O(H[P+0])+O(H[P+1])+O(H[P+2])+O(H[P+3])+O(H[P+4])+O(H[P+5])+O(H[P+6])+O(H[P+7]),P+=8,A.rsum+=O(Q[Z+0])+O(Q[Z+1])+O(Q[Z+2])+O(Q[Z+3])+O(Q[Z+4])+O(Q[Z+5])+O(Q[Z+6])+O(Q[Z+7]),Z+=8;if(ee-=te,fe+=te,A.totsamp+=te,A.totsamp==A.sampleWindow){var _=o.STEPS_per_dB*10*Math.log10((A.lsum+A.rsum)/A.totsamp*.5+1e-37),Y=_<=0?0:0|_;Y>=A.A.length&&(Y=A.A.length-1),A.A[Y]++,A.lsum=A.rsum=0,s.arraycopy(A.loutbuf,A.totsamp,A.loutbuf,0,MAX_ORDER),s.arraycopy(A.routbuf,A.totsamp,A.routbuf,0,MAX_ORDER),s.arraycopy(A.lstepbuf,A.totsamp,A.lstepbuf,0,MAX_ORDER),s.arraycopy(A.rstepbuf,A.totsamp,A.rstepbuf,0,MAX_ORDER),A.totsamp=0}if(A.totsamp>A.sampleWindow)return GAIN_ANALYSIS_ERROR}return k<MAX_ORDER?(s.arraycopy(A.linprebuf,k,A.linprebuf,0,MAX_ORDER-k),s.arraycopy(A.rinprebuf,k,A.rinprebuf,0,MAX_ORDER-k),s.arraycopy(L,V,A.linprebuf,MAX_ORDER-k,k),s.arraycopy(K,F,A.rinprebuf,MAX_ORDER-k,k)):(s.arraycopy(L,V+k-MAX_ORDER,A.linprebuf,0,MAX_ORDER),s.arraycopy(K,F+k-MAX_ORDER,A.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function M(A,L){var V,K=0;for(V=0;V<L;V++)K+=A[V];if(K==0)return GAIN_NOT_ENOUGH_SAMPLES;var F=0|Math.ceil(K*(1-d));for(V=L;V-- >0&&!((F-=A[V])<=0););return m-V/o.STEPS_per_dB}this.GetTitleGain=function(A){for(var L=M(A.A,A.A.length),V=0;V<A.A.length;V++)A.B[V]+=A.A[V],A.A[V]=0;for(var V=0;V<MAX_ORDER;V++)A.linprebuf[V]=A.lstepbuf[V]=A.loutbuf[V]=A.rinprebuf[V]=A.rstepbuf[V]=A.routbuf[V]=0;return A.totsamp=0,A.lsum=A.rsum=0,L}}h.exports=o},9438:(h,T,e)=>{var n=e(935);n.System,n.VbrMode,n.Float,n.ShortBlock,n.Util,n.Arrays,n.new_array_n,n.new_byte,n.new_double;var s=n.new_float;n.new_float_n;var i=n.new_int;n.new_int_n,n.assert;var o=e(354);function m(){this.xr=s(576),this.l3_enc=i(576),this.scalefac=i(o.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=i(3),this.subblock_gain=i(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=i(o.SFBMAX),this.window=i(o.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=i(4),this.max_nonzero_coeff=0;var d=this;function f(g){return new Int32Array(g)}function S(g){return new Float32Array(g)}this.assign=function(g){d.xr=S(g.xr),d.l3_enc=f(g.l3_enc),d.scalefac=f(g.scalefac),d.xrpow_max=g.xrpow_max,d.part2_3_length=g.part2_3_length,d.big_values=g.big_values,d.count1=g.count1,d.global_gain=g.global_gain,d.scalefac_compress=g.scalefac_compress,d.block_type=g.block_type,d.mixed_block_flag=g.mixed_block_flag,d.table_select=f(g.table_select),d.subblock_gain=f(g.subblock_gain),d.region0_count=g.region0_count,d.region1_count=g.region1_count,d.preflag=g.preflag,d.scalefac_scale=g.scalefac_scale,d.count1table_select=g.count1table_select,d.part2_length=g.part2_length,d.sfb_lmax=g.sfb_lmax,d.sfb_smin=g.sfb_smin,d.psy_lmax=g.psy_lmax,d.sfbmax=g.sfbmax,d.psymax=g.psymax,d.sfbdivide=g.sfbdivide,d.width=f(g.width),d.window=f(g.window),d.count1bits=g.count1bits,d.sfb_partition_table=g.sfb_partition_table.slice(0),d.slen=f(g.slen),d.max_nonzero_coeff=g.max_nonzero_coeff}}h.exports=m},9524:(h,T,e)=>{var n=e(935);n.System,n.VbrMode,n.Float,n.ShortBlock,n.Util,n.Arrays,n.new_array_n,n.new_byte,n.new_double,n.new_float,n.new_float_n;var s=n.new_int;n.new_int_n,n.assert;var i=e(9438);function o(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[s(4),s(4)];for(var m=0;m<2;m++)for(var d=0;d<2;d++)this.tt[m][d]=new i}h.exports=o},9584:(h,T,e)=>{var n=e(8200);function s(){this.thm=new n,this.en=new n}h.exports=s},8200:(h,T,e)=>{var n=e(687),s=e(935),i=s.System;s.VbrMode,s.Float,s.ShortBlock,s.Util,s.Arrays,s.new_array_n,s.new_byte,s.new_double;var o=s.new_float,m=s.new_float_n;s.new_int,s.new_int_n,s.assert;function d(){this.l=o(n.SBMAX_l),this.s=m([n.SBMAX_s,3]);var f=this;this.assign=function(S){i.arraycopy(S.l,0,f.l,0,n.SBMAX_l);for(var g=0;g<n.SBMAX_s;g++)for(var R=0;R<3;R++)f.s[g][R]=S.s[g][R]}}h.exports=d},354:(h,T,e)=>{var n=e(687),s={};s.SFBMAX=n.SBMAX_s*3,h.exports=s},4566:(h,T,e)=>{var n=e(935),s=n.System,i=n.VbrMode;n.Float;var o=n.ShortBlock;n.Util,n.Arrays,n.new_array_n,n.new_byte,n.new_double;var m=n.new_float;n.new_float_n,n.new_int;var d=n.new_int_n,f=n.new_short_n,S=n.assert,g=e(9319),R=e(3893),x=e(1998),E=e(7514),p=e(1062),O=e(9120),M=e(3724),A=e(7721),L=e(687);function V(){var K=this,F=128*1024;V.V9=410,V.V8=420,V.V7=430,V.V6=440,V.V5=450,V.V4=460,V.V3=470,V.V2=480,V.V1=490,V.V0=500,V.R3MIX=1e3,V.STANDARD=1001,V.EXTREME=1002,V.INSANE=1003,V.STANDARD_FAST=1004,V.EXTREME_FAST=1005,V.MEDIUM=1006,V.MEDIUM_FAST=1007;var k=16384+F;V.LAME_MAXMP3BUFFER=k;var l,P,H,Z,Q,ee=new g,te,fe,de;this.enc=new L,this.setModules=function(C,z,Ne,Te,Ue,Ee,De,ze,Xe){l=C,P=z,H=Ne,Z=Te,Q=Ue,te=Ee,fe=ze,de=Xe,this.enc.setModules(P,ee,Z,te)};function _(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=m(L.SBMAX_l),this.bo_s_weight=m(L.SBMAX_s)}function Y(){this.lowerlimit=0}function b(C,z){this.lowpass=z}var D=4294479419;function X(C){var z;return C.class_id=D,z=C.internal_flags=new x,C.mode=MPEGMode.NOT_SET,C.original=1,C.in_samplerate=44100,C.num_channels=2,C.num_samples=-1,C.bWriteVbrTag=!0,C.quality=-1,C.short_blocks=null,z.subblock_gain=-1,C.lowpassfreq=0,C.highpassfreq=0,C.lowpasswidth=-1,C.highpasswidth=-1,C.VBR=i.vbr_off,C.VBR_q=4,C.ATHcurve=-1,C.VBR_mean_bitrate_kbps=128,C.VBR_min_bitrate_kbps=0,C.VBR_max_bitrate_kbps=0,C.VBR_hard_min=0,z.VBR_min_bitrate=1,z.VBR_max_bitrate=13,C.quant_comp=-1,C.quant_comp_short=-1,C.msfix=-1,z.resample_ratio=1,z.OldValue[0]=180,z.OldValue[1]=180,z.CurrentStep[0]=4,z.CurrentStep[1]=4,z.masking_lower=1,z.nsPsy.attackthre=-1,z.nsPsy.attackthre_s=-1,C.scale=-1,C.athaa_type=-1,C.ATHtype=-1,C.athaa_loudapprox=-1,C.athaa_sensitivity=0,C.useTemporal=null,C.interChRatio=-1,z.mf_samples_to_encode=L.ENCDELAY+L.POSTDELAY,C.encoder_padding=0,z.mf_size=L.ENCDELAY-L.MDCTDELAY,C.findReplayGain=!1,C.decode_on_the_fly=!1,z.decode_on_the_fly=!1,z.findReplayGain=!1,z.findPeakSample=!1,z.RadioGain=0,z.AudiophileGain=0,z.noclipGainChange=0,z.noclipScale=-1,C.preset=0,C.write_id3tag_automatic=!0,0}this.lame_init=function(){var C=new R;return X(C),C.lame_allocated_gfp=1,C};function q(C){return C>1?0:C<=0?1:Math.cos(Math.PI/2*C)}this.nearestBitrateFullIndex=function(C){var z=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],Ne=0,Te=0,Ue=0,Ee=0;Ee=z[16],Ue=16,Te=z[16],Ne=16;for(var De=0;De<16;De++)if(Math.max(C,z[De+1])!=C){Ee=z[De+1],Ue=De+1,Te=z[De],Ne=De;break}return Ee-C>C-Te?Ne:Ue};function U(C,z){var Ne=44100;return z>=48e3?Ne=48e3:z>=44100?Ne=44100:z>=32e3?Ne=32e3:z>=24e3?Ne=24e3:z>=22050?Ne=22050:z>=16e3?Ne=16e3:z>=12e3?Ne=12e3:z>=11025?Ne=11025:z>=8e3&&(Ne=8e3),C==-1?Ne:(C<=15960&&(Ne=44100),C<=15250&&(Ne=32e3),C<=11220&&(Ne=24e3),C<=9970&&(Ne=22050),C<=7230&&(Ne=16e3),C<=5420&&(Ne=12e3),C<=4510&&(Ne=11025),C<=3970&&(Ne=8e3),z<Ne?z>44100?48e3:z>32e3?44100:z>24e3?32e3:z>22050?24e3:z>16e3?22050:z>12e3?16e3:z>11025?12e3:z>8e3?11025:8e3:Ne)}function v(C,z){switch(C){case 44100:return z.version=1,0;case 48e3:return z.version=1,1;case 32e3:return z.version=1,2;case 22050:return z.version=0,0;case 24e3:return z.version=0,1;case 16e3:return z.version=0,2;case 11025:return z.version=0,0;case 12e3:return z.version=0,1;case 8e3:return z.version=0,2;default:return z.version=0,-1}}function u(C,z,Ne){Ne<16e3&&(z=2);for(var Te=A.bitrate_table[z][1],Ue=2;Ue<=14;Ue++)A.bitrate_table[z][Ue]>0&&Math.abs(A.bitrate_table[z][Ue]-C)<Math.abs(Te-C)&&(Te=A.bitrate_table[z][Ue]);return Te}function c(C,z,Ne){Ne<16e3&&(z=2);for(var Te=0;Te<=14;Te++)if(A.bitrate_table[z][Te]>0&&A.bitrate_table[z][Te]==C)return Te;return-1}function y(C,z){var Ne=[new b(8,2e3),new b(16,3700),new b(24,3900),new b(32,5500),new b(40,7e3),new b(48,7500),new b(56,1e4),new b(64,11e3),new b(80,13500),new b(96,15100),new b(112,15600),new b(128,17e3),new b(160,17500),new b(192,18600),new b(224,19400),new b(256,19700),new b(320,20500)],Te=K.nearestBitrateFullIndex(z);C.lowerlimit=Ne[Te].lowpass}function B(C){var z=C.internal_flags,Ne=32,Te=-1;if(z.lowpass1>0){for(var Ue=999,Ee=0;Ee<=31;Ee++){var De=Ee/31;De>=z.lowpass2&&(Ne=Math.min(Ne,Ee)),z.lowpass1<De&&De<z.lowpass2&&(Ue=Math.min(Ue,Ee))}Ue==999?z.lowpass1=(Ne-.75)/31:z.lowpass1=(Ue-.75)/31,z.lowpass2=Ne/31}if(z.highpass2>0&&z.highpass2<.021774193548387097&&(z.highpass1=0,z.highpass2=0,s.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),z.highpass2>0){for(var ze=-1,Ee=0;Ee<=31;Ee++){var De=Ee/31;De<=z.highpass1&&(Te=Math.max(Te,Ee)),z.highpass1<De&&De<z.highpass2&&(ze=Math.max(ze,Ee))}z.highpass1=Te/31,ze==-1?z.highpass2=(Te+.75)/31:z.highpass2=(ze+.75)/31}for(var Ee=0;Ee<32;Ee++){var Xe,Ze,De=Ee/31;z.highpass2>z.highpass1?Xe=q((z.highpass2-De)/(z.highpass2-z.highpass1+1e-20)):Xe=1,z.lowpass2>z.lowpass1?Ze=q((De-z.lowpass1)/(z.lowpass2-z.lowpass1+1e-20)):Ze=1,z.amp_filter[Ee]=Xe*Ze}}function G(C){var z=C.internal_flags;switch(C.quality){default:case 9:z.psymodel=0,z.noise_shaping=0,z.noise_shaping_amp=0,z.noise_shaping_stop=0,z.use_best_huffman=0,z.full_outer_loop=0;break;case 8:C.quality=7;case 7:z.psymodel=1,z.noise_shaping=0,z.noise_shaping_amp=0,z.noise_shaping_stop=0,z.use_best_huffman=0,z.full_outer_loop=0;break;case 6:z.psymodel=1,z.noise_shaping==0&&(z.noise_shaping=1),z.noise_shaping_amp=0,z.noise_shaping_stop=0,z.subblock_gain==-1&&(z.subblock_gain=1),z.use_best_huffman=0,z.full_outer_loop=0;break;case 5:z.psymodel=1,z.noise_shaping==0&&(z.noise_shaping=1),z.noise_shaping_amp=0,z.noise_shaping_stop=0,z.subblock_gain==-1&&(z.subblock_gain=1),z.use_best_huffman=0,z.full_outer_loop=0;break;case 4:z.psymodel=1,z.noise_shaping==0&&(z.noise_shaping=1),z.noise_shaping_amp=0,z.noise_shaping_stop=0,z.subblock_gain==-1&&(z.subblock_gain=1),z.use_best_huffman=1,z.full_outer_loop=0;break;case 3:z.psymodel=1,z.noise_shaping==0&&(z.noise_shaping=1),z.noise_shaping_amp=1,z.noise_shaping_stop=1,z.subblock_gain==-1&&(z.subblock_gain=1),z.use_best_huffman=1,z.full_outer_loop=0;break;case 2:z.psymodel=1,z.noise_shaping==0&&(z.noise_shaping=1),z.substep_shaping==0&&(z.substep_shaping=2),z.noise_shaping_amp=1,z.noise_shaping_stop=1,z.subblock_gain==-1&&(z.subblock_gain=1),z.use_best_huffman=1,z.full_outer_loop=0;break;case 1:z.psymodel=1,z.noise_shaping==0&&(z.noise_shaping=1),z.substep_shaping==0&&(z.substep_shaping=2),z.noise_shaping_amp=2,z.noise_shaping_stop=1,z.subblock_gain==-1&&(z.subblock_gain=1),z.use_best_huffman=1,z.full_outer_loop=0;break;case 0:z.psymodel=1,z.noise_shaping==0&&(z.noise_shaping=1),z.substep_shaping==0&&(z.substep_shaping=2),z.noise_shaping_amp=2,z.noise_shaping_stop=1,z.subblock_gain==-1&&(z.subblock_gain=1),z.use_best_huffman=1,z.full_outer_loop=0;break}}function W(C){var z=C.internal_flags;C.frameNum=0,C.write_id3tag_automatic&&fe.id3tag_write_v2(C),z.bitrate_stereoMode_Hist=d([16,5]),z.bitrate_blockType_Hist=d([16,6]),z.PeakSample=0,C.bWriteVbrTag&&te.InitVbrTag(C)}this.lame_init_params=function(C){var z=C.internal_flags;if(z.Class_ID=0,z.ATH==null&&(z.ATH=new E),z.PSY==null&&(z.PSY=new _),z.rgdata==null&&(z.rgdata=new p),z.channels_in=C.num_channels,z.channels_in==1&&(C.mode=MPEGMode.MONO),z.channels_out=C.mode==MPEGMode.MONO?1:2,z.mode_ext=L.MPG_MD_MS_LR,C.mode==MPEGMode.MONO&&(C.force_ms=!1),C.VBR==i.vbr_off&&C.VBR_mean_bitrate_kbps!=128&&C.brate==0&&(C.brate=C.VBR_mean_bitrate_kbps),C.VBR==i.vbr_off||C.VBR==i.vbr_mtrh||C.VBR==i.vbr_mt||(C.free_format=!1),C.VBR==i.vbr_off&&C.brate==0&&M.EQ(C.compression_ratio,0)&&(C.compression_ratio=11.025),C.VBR==i.vbr_off&&C.compression_ratio>0&&(C.out_samplerate==0&&(C.out_samplerate=map2MP3Frequency(int(.97*C.in_samplerate))),C.brate=0|C.out_samplerate*16*z.channels_out/(1e3*C.compression_ratio),z.samplerate_index=v(C.out_samplerate,C),C.free_format||(C.brate=u(C.brate,C.version,C.out_samplerate))),C.out_samplerate!=0&&(C.out_samplerate<16e3?(C.VBR_mean_bitrate_kbps=Math.max(C.VBR_mean_bitrate_kbps,8),C.VBR_mean_bitrate_kbps=Math.min(C.VBR_mean_bitrate_kbps,64)):C.out_samplerate<32e3?(C.VBR_mean_bitrate_kbps=Math.max(C.VBR_mean_bitrate_kbps,8),C.VBR_mean_bitrate_kbps=Math.min(C.VBR_mean_bitrate_kbps,160)):(C.VBR_mean_bitrate_kbps=Math.max(C.VBR_mean_bitrate_kbps,32),C.VBR_mean_bitrate_kbps=Math.min(C.VBR_mean_bitrate_kbps,320))),C.lowpassfreq==0){var Ne=16e3;switch(C.VBR){case i.vbr_off:{var Te=new Y;y(Te,C.brate),Ne=Te.lowerlimit;break}case i.vbr_abr:{var Te=new Y;y(Te,C.VBR_mean_bitrate_kbps),Ne=Te.lowerlimit;break}case i.vbr_rh:{var Ue=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=C.VBR_q&&C.VBR_q<=9){var Ee=Ue[C.VBR_q],De=Ue[C.VBR_q+1],ze=C.VBR_q_frac;Ne=linear_int(Ee,De,ze)}else Ne=19500;break}default:{var Ue=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=C.VBR_q&&C.VBR_q<=9){var Ee=Ue[C.VBR_q],De=Ue[C.VBR_q+1],ze=C.VBR_q_frac;Ne=linear_int(Ee,De,ze)}else Ne=19500}}C.mode==MPEGMode.MONO&&(C.VBR==i.vbr_off||C.VBR==i.vbr_abr)&&(Ne*=1.5),C.lowpassfreq=Ne|0}if(C.out_samplerate==0&&(2*C.lowpassfreq>C.in_samplerate&&(C.lowpassfreq=C.in_samplerate/2),C.out_samplerate=U(C.lowpassfreq|0,C.in_samplerate)),C.lowpassfreq=Math.min(20500,C.lowpassfreq),C.lowpassfreq=Math.min(C.out_samplerate/2,C.lowpassfreq),C.VBR==i.vbr_off&&(C.compression_ratio=C.out_samplerate*16*z.channels_out/(1e3*C.brate)),C.VBR==i.vbr_abr&&(C.compression_ratio=C.out_samplerate*16*z.channels_out/(1e3*C.VBR_mean_bitrate_kbps)),C.bWriteVbrTag||(C.findReplayGain=!1,C.decode_on_the_fly=!1,z.findPeakSample=!1),z.findReplayGain=C.findReplayGain,z.decode_on_the_fly=C.decode_on_the_fly,z.decode_on_the_fly&&(z.findPeakSample=!0),z.findReplayGain&&l.InitGainAnalysis(z.rgdata,C.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return C.internal_flags=null,-6;switch(z.decode_on_the_fly&&!C.decode_only&&(z.hip!=null&&de.hip_decode_exit(z.hip),z.hip=de.hip_decode_init()),z.mode_gr=C.out_samplerate<=24e3?1:2,C.framesize=576*z.mode_gr,C.encoder_delay=L.ENCDELAY,z.resample_ratio=C.in_samplerate/C.out_samplerate,C.VBR){case i.vbr_mt:case i.vbr_rh:case i.vbr_mtrh:{var Xe=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];C.compression_ratio=Xe[C.VBR_q]}break;case i.vbr_abr:C.compression_ratio=C.out_samplerate*16*z.channels_out/(1e3*C.VBR_mean_bitrate_kbps);break;default:C.compression_ratio=C.out_samplerate*16*z.channels_out/(1e3*C.brate);break}if(C.mode==MPEGMode.NOT_SET&&(C.mode=MPEGMode.JOINT_STEREO),C.highpassfreq>0?(z.highpass1=2*C.highpassfreq,C.highpasswidth>=0?z.highpass2=2*(C.highpassfreq+C.highpasswidth):z.highpass2=2*C.highpassfreq,z.highpass1/=C.out_samplerate,z.highpass2/=C.out_samplerate):(z.highpass1=0,z.highpass2=0),C.lowpassfreq>0?(z.lowpass2=2*C.lowpassfreq,C.lowpasswidth>=0?(z.lowpass1=2*(C.lowpassfreq-C.lowpasswidth),z.lowpass1<0&&(z.lowpass1=0)):z.lowpass1=2*C.lowpassfreq,z.lowpass1/=C.out_samplerate,z.lowpass2/=C.out_samplerate):(z.lowpass1=0,z.lowpass2=0),B(C),z.samplerate_index=v(C.out_samplerate,C),z.samplerate_index<0)return C.internal_flags=null,-1;if(C.VBR==i.vbr_off){if(C.free_format)z.bitrate_index=0;else if(C.brate=u(C.brate,C.version,C.out_samplerate),z.bitrate_index=c(C.brate,C.version,C.out_samplerate),z.bitrate_index<=0)return C.internal_flags=null,-1}else z.bitrate_index=1;C.analysis&&(C.bWriteVbrTag=!1),z.pinfo!=null&&(C.bWriteVbrTag=!1),P.init_bit_stream_w(z);for(var Ze=z.samplerate_index+3*C.version+6*(C.out_samplerate<16e3?1:0),Fe=0;Fe<L.SBMAX_l+1;Fe++)z.scalefac_band.l[Fe]=Z.sfBandIndex[Ze].l[Fe];for(var Fe=0;Fe<L.PSFB21+1;Fe++){var rt=(z.scalefac_band.l[22]-z.scalefac_band.l[21])/L.PSFB21,vt=z.scalefac_band.l[21]+Fe*rt;z.scalefac_band.psfb21[Fe]=vt}z.scalefac_band.psfb21[L.PSFB21]=576;for(var Fe=0;Fe<L.SBMAX_s+1;Fe++)z.scalefac_band.s[Fe]=Z.sfBandIndex[Ze].s[Fe];for(var Fe=0;Fe<L.PSFB12+1;Fe++){var rt=(z.scalefac_band.s[13]-z.scalefac_band.s[12])/L.PSFB12,vt=z.scalefac_band.s[12]+Fe*rt;z.scalefac_band.psfb12[Fe]=vt}z.scalefac_band.psfb12[L.PSFB12]=192,C.version==1?z.sideinfo_len=z.channels_out==1?21:36:z.sideinfo_len=z.channels_out==1?13:21,C.error_protection&&(z.sideinfo_len+=2),W(C),z.Class_ID=D;{var at;for(at=0;at<19;at++)z.nsPsy.pefirbuf[at]=700*z.mode_gr*z.channels_out;C.ATHtype==-1&&(C.ATHtype=4)}switch(S(C.VBR_q<=9),S(C.VBR_q>=0),C.VBR){case i.vbr_mt:C.VBR=i.vbr_mtrh;case i.vbr_mtrh:{C.useTemporal==null&&(C.useTemporal=!1),H.apply_preset(C,500-C.VBR_q*10,0),C.quality<0&&(C.quality=LAME_DEFAULT_QUALITY),C.quality<5&&(C.quality=0),C.quality>5&&(C.quality=5),z.PSY.mask_adjust=C.maskingadjust,z.PSY.mask_adjust_short=C.maskingadjust_short,C.experimentalY?z.sfb21_extra=!1:z.sfb21_extra=C.out_samplerate>44e3,z.iteration_loop=new VBRNewIterationLoop(Q);break}case i.vbr_rh:{H.apply_preset(C,500-C.VBR_q*10,0),z.PSY.mask_adjust=C.maskingadjust,z.PSY.mask_adjust_short=C.maskingadjust_short,C.experimentalY?z.sfb21_extra=!1:z.sfb21_extra=C.out_samplerate>44e3,C.quality>6&&(C.quality=6),C.quality<0&&(C.quality=LAME_DEFAULT_QUALITY),z.iteration_loop=new VBROldIterationLoop(Q);break}default:{var He;z.sfb21_extra=!1,C.quality<0&&(C.quality=LAME_DEFAULT_QUALITY),He=C.VBR,He==i.vbr_off&&(C.VBR_mean_bitrate_kbps=C.brate),H.apply_preset(C,C.VBR_mean_bitrate_kbps,0),C.VBR=He,z.PSY.mask_adjust=C.maskingadjust,z.PSY.mask_adjust_short=C.maskingadjust_short,He==i.vbr_off?z.iteration_loop=new O(Q):z.iteration_loop=new ABRIterationLoop(Q);break}}if(S(C.scale>=0),C.VBR!=i.vbr_off){if(z.VBR_min_bitrate=1,z.VBR_max_bitrate=14,C.out_samplerate<16e3&&(z.VBR_max_bitrate=8),C.VBR_min_bitrate_kbps!=0&&(C.VBR_min_bitrate_kbps=u(C.VBR_min_bitrate_kbps,C.version,C.out_samplerate),z.VBR_min_bitrate=c(C.VBR_min_bitrate_kbps,C.version,C.out_samplerate),z.VBR_min_bitrate<0)||C.VBR_max_bitrate_kbps!=0&&(C.VBR_max_bitrate_kbps=u(C.VBR_max_bitrate_kbps,C.version,C.out_samplerate),z.VBR_max_bitrate=c(C.VBR_max_bitrate_kbps,C.version,C.out_samplerate),z.VBR_max_bitrate<0))return-1;C.VBR_min_bitrate_kbps=A.bitrate_table[C.version][z.VBR_min_bitrate],C.VBR_max_bitrate_kbps=A.bitrate_table[C.version][z.VBR_max_bitrate],C.VBR_mean_bitrate_kbps=Math.min(A.bitrate_table[C.version][z.VBR_max_bitrate],C.VBR_mean_bitrate_kbps),C.VBR_mean_bitrate_kbps=Math.max(A.bitrate_table[C.version][z.VBR_min_bitrate],C.VBR_mean_bitrate_kbps)}return C.tune&&(z.PSY.mask_adjust+=C.tune_value_a,z.PSY.mask_adjust_short+=C.tune_value_a),G(C),S(C.scale>=0),C.athaa_type<0?z.ATH.useAdjust=3:z.ATH.useAdjust=C.athaa_type,z.ATH.aaSensitivityP=Math.pow(10,C.athaa_sensitivity/-10),C.short_blocks==null&&(C.short_blocks=o.short_block_allowed),C.short_blocks==o.short_block_allowed&&(C.mode==MPEGMode.JOINT_STEREO||C.mode==MPEGMode.STEREO)&&(C.short_blocks=o.short_block_coupled),C.quant_comp<0&&(C.quant_comp=1),C.quant_comp_short<0&&(C.quant_comp_short=0),C.msfix<0&&(C.msfix=0),C.exp_nspsytune=C.exp_nspsytune|1,C.internal_flags.nsPsy.attackthre<0&&(C.internal_flags.nsPsy.attackthre=g.NSATTACKTHRE),C.internal_flags.nsPsy.attackthre_s<0&&(C.internal_flags.nsPsy.attackthre_s=g.NSATTACKTHRE_S),S(C.scale>=0),C.scale<0&&(C.scale=1),C.ATHtype<0&&(C.ATHtype=4),C.ATHcurve<0&&(C.ATHcurve=4),C.athaa_loudapprox<0&&(C.athaa_loudapprox=2),C.interChRatio<0&&(C.interChRatio=0),C.useTemporal==null&&(C.useTemporal=!0),z.slot_lag=z.frac_SpF=0,C.VBR==i.vbr_off&&(z.slot_lag=z.frac_SpF=(C.version+1)*72e3*C.brate%C.out_samplerate|0),Z.iteration_init(C),ee.psymodel_init(C),S(C.scale>=0),0};function j(C,z){(C.in_buffer_0==null||C.in_buffer_nsamples<z)&&(C.in_buffer_0=m(z),C.in_buffer_1=m(z),C.in_buffer_nsamples=z)}this.lame_encode_flush=function(C,z,Ne,Te){var Ue=C.internal_flags,Ee=f([2,1152]),De=0,ze,Xe,Ze,Fe,rt=Ue.mf_samples_to_encode-L.POSTDELAY,vt=re(C);if(Ue.mf_samples_to_encode<1)return 0;for(ze=0,C.in_samplerate!=C.out_samplerate&&(rt+=16*C.out_samplerate/C.in_samplerate),Ze=C.framesize-rt%C.framesize,Ze<576&&(Ze+=C.framesize),C.encoder_padding=Ze,Fe=(rt+Ze)/C.framesize;Fe>0&&De>=0;){var at=vt-Ue.mf_size,He=C.frameNum;at*=C.in_samplerate,at/=C.out_samplerate,at>1152&&(at=1152),at<1&&(at=1),Xe=Te-ze,Te==0&&(Xe=0),De=this.lame_encode_buffer(C,Ee[0],Ee[1],at,z,Ne,Xe),Ne+=De,ze+=De,Fe-=He!=C.frameNum?1:0}if(Ue.mf_samples_to_encode=0,De<0||(Xe=Te-ze,Te==0&&(Xe=0),P.flush_bitstream(C),De=P.copy_buffer(Ue,z,Ne,Xe,1),De<0))return De;if(Ne+=De,ze+=De,Xe=Te-ze,Te==0&&(Xe=0),C.write_id3tag_automatic){if(fe.id3tag_write_v1(C),De=P.copy_buffer(Ue,z,Ne,Xe,0),De<0)return De;ze+=De}return ze},this.lame_encode_buffer=function(C,z,Ne,Te,Ue,Ee,De){var ze=C.internal_flags,Xe=[null,null];if(ze.Class_ID!=D)return-3;if(Te==0)return 0;j(ze,Te),Xe[0]=ze.in_buffer_0,Xe[1]=ze.in_buffer_1;for(var Ze=0;Ze<Te;Ze++)Xe[0][Ze]=z[Ze],ze.channels_in>1&&(Xe[1][Ze]=Ne[Ze]);return ae(C,Xe[0],Xe[1],Te,Ue,Ee,De)};function re(C){var z=L.BLKSIZE+C.framesize-L.FFTOFFSET;return z=Math.max(z,512+C.framesize-32),S(x.MFSIZE>=z),z}function ae(C,z,Ne,Te,Ue,Ee,De){var ze=C.internal_flags,Xe=0,Ze,Fe,rt,vt,at,He=[null,null],et=[null,null];if(ze.Class_ID!=D)return-3;if(Te==0)return 0;if(at=P.copy_buffer(ze,Ue,Ee,De,0),at<0)return at;if(Ee+=at,Xe+=at,et[0]=z,et[1]=Ne,M.NEQ(C.scale,0)&&M.NEQ(C.scale,1))for(Fe=0;Fe<Te;++Fe)et[0][Fe]*=C.scale,ze.channels_out==2&&(et[1][Fe]*=C.scale);if(M.NEQ(C.scale_left,0)&&M.NEQ(C.scale_left,1))for(Fe=0;Fe<Te;++Fe)et[0][Fe]*=C.scale_left;if(M.NEQ(C.scale_right,0)&&M.NEQ(C.scale_right,1))for(Fe=0;Fe<Te;++Fe)et[1][Fe]*=C.scale_right;if(C.num_channels==2&&ze.channels_out==1)for(Fe=0;Fe<Te;++Fe)et[0][Fe]=.5*(et[0][Fe]+et[1][Fe]),et[1][Fe]=0;vt=re(C),He[0]=ze.mfbuf[0],He[1]=ze.mfbuf[1];for(var $e=0;Te>0;){var ct=[null,null],St=0,It=0;ct[0]=et[0],ct[1]=et[1];var jt=new Me;if(_t(C,He,ct,$e,Te,jt),St=jt.n_in,It=jt.n_out,ze.findReplayGain&&!ze.decode_on_the_fly&&l.AnalyzeSamples(ze.rgdata,He[0],ze.mf_size,He[1],ze.mf_size,It,ze.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(Te-=St,$e+=St,ze.channels_out==2,ze.mf_size+=It,S(ze.mf_size<=x.MFSIZE),ze.mf_samples_to_encode<1&&(ze.mf_samples_to_encode=L.ENCDELAY+L.POSTDELAY),ze.mf_samples_to_encode+=It,ze.mf_size>=vt){var Xt=De-Xe;if(De==0&&(Xt=0),Ze=be(C,He[0],He[1],Ue,Ee,Xt),Ze<0)return Ze;for(Ee+=Ze,Xe+=Ze,ze.mf_size-=C.framesize,ze.mf_samples_to_encode-=C.framesize,rt=0;rt<ze.channels_out;rt++)for(Fe=0;Fe<ze.mf_size;Fe++)He[rt][Fe]=He[rt][Fe+C.framesize]}}return S(Te==0),Xe}function be(C,z,Ne,Te,Ue,Ee){var De=K.enc.lame_encode_mp3_frame(C,z,Ne,Te,Ue,Ee);return C.frameNum++,De}function Me(){this.n_in=0,this.n_out=0}function Be(){this.num_used=0}function Ge(C,z){return z!=0?Ge(z,C%z):C}function Ye(C,z,Ne){var Te=Math.PI*z;C/=Ne,C<0&&(C=0),C>1&&(C=1);var Ue=C-.5,Ee=.42-.5*Math.cos(2*C*Math.PI)+.08*Math.cos(4*C*Math.PI);return Math.abs(Ue)<1e-9?Te/Math.PI:Ee*Math.sin(Ne*Te*Ue)/(Math.PI*Ne*Ue)}function it(C,z,Ne,Te,Ue,Ee,De,ze,Xe){var Ze=C.internal_flags,Fe,rt=0,vt,at=C.out_samplerate/Ge(C.out_samplerate,C.in_samplerate);at>x.BPC&&(at=x.BPC);var He=Math.abs(Ze.resample_ratio-Math.floor(.5+Ze.resample_ratio))<1e-4?1:0,et=1/Ze.resample_ratio;et>1&&(et=1);var $e=31;$e%2==0&&--$e,$e+=He;var ct=$e+1;if(Ze.fill_buffer_resample_init==0){for(Ze.inbuf_old[0]=m(ct),Ze.inbuf_old[1]=m(ct),Fe=0;Fe<=2*at;++Fe)Ze.blackfilt[Fe]=m(ct);for(Ze.itime[0]=0,Ze.itime[1]=0,rt=0;rt<=2*at;rt++){var St=0,It=(rt-at)/(2*at);for(Fe=0;Fe<=$e;Fe++)St+=Ze.blackfilt[rt][Fe]=Ye(Fe-It,et,$e);for(Fe=0;Fe<=$e;Fe++)Ze.blackfilt[rt][Fe]/=St}Ze.fill_buffer_resample_init=1}var jt=Ze.inbuf_old[Xe];for(vt=0;vt<Te;vt++){var Xt,Pt;if(Xt=vt*Ze.resample_ratio,rt=0|Math.floor(Xt-Ze.itime[Xe]),$e+rt-$e/2>=De)break;var It=Xt-Ze.itime[Xe]-(rt+.5*($e%2));S(Math.abs(It)<=.501),Pt=0|Math.floor(It*2*at+at+.5);var Kt=0;for(Fe=0;Fe<=$e;++Fe){var ar=Fe+rt-$e/2,yr;S(ar<De),S(ar+ct>=0),yr=ar<0?jt[ct+ar]:Ue[Ee+ar],Kt+=yr*Ze.blackfilt[Pt][Fe]}z[Ne+vt]=Kt}if(ze.num_used=Math.min(De,$e+rt-$e/2),Ze.itime[Xe]+=ze.num_used-vt*Ze.resample_ratio,ze.num_used>=ct)for(Fe=0;Fe<ct;Fe++)jt[Fe]=Ue[Ee+ze.num_used+Fe-ct];else{var er=ct-ze.num_used;for(Fe=0;Fe<er;++Fe)jt[Fe]=jt[Fe+ze.num_used];for(rt=0;Fe<ct;++Fe,++rt)jt[Fe]=Ue[Ee+rt];S(rt==ze.num_used)}return vt}function _t(C,z,Ne,Te,Ue,Ee){var De=C.internal_flags;if(De.resample_ratio<.9999||De.resample_ratio>1.0001)for(var ze=0;ze<De.channels_out;ze++){var Xe=new Be;Ee.n_out=it(C,z[ze],De.mf_size,C.framesize,Ne[ze],Te,Ue,Xe,ze),Ee.n_in=Xe.num_used}else{Ee.n_out=Math.min(C.framesize,Ue),Ee.n_in=Ee.n_out;for(var Ze=0;Ze<Ee.n_out;++Ze)z[0][De.mf_size+Ze]=Ne[0][Te+Ze],De.channels_out==2&&(z[1][De.mf_size+Ze]=Ne[1][Te+Ze])}}}h.exports=V},3893:(h,T,e)=>{var n=e(8231);function s(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=n.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}h.exports=s},1998:(h,T,e)=>{var n=e(935);n.System,n.VbrMode,n.Float,n.ShortBlock,n.Util,n.Arrays,n.new_array_n;var s=n.new_byte,i=n.new_double,o=n.new_float,m=n.new_float_n,d=n.new_int,f=n.new_int_n;n.assert;var S=e(9524),g=e(302),R=e(7885),x=e(3362),E=e(8200),p=e(687),O=e(354);M.MFSIZE=3456+p.ENCDELAY-p.MDCTDELAY,M.MAX_HEADER_BUF=256,M.MAX_BITS_PER_CHANNEL=4095,M.MAX_BITS_PER_GRANULE=7680,M.BPC=320;function M(){var A=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=m([2,M.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new S,this.ms_ratio=o(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=d(2),this.CurrentStep=d(2),this.masking_lower=0,this.bv_scf=d(576),this.pseudohalf=d(O.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*M.BPC+1),this.itime=i(2),this.sideinfo_len=0,this.sb_sample=m([2,2,18,p.SBLIMIT]),this.amp_filter=o(32);function L(){this.write_timing=0,this.ptr=0,this.buf=s(A)}this.header=new Array(M.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new g,this.minval_l=o(p.CBANDS),this.minval_s=o(p.CBANDS),this.nb_1=m([4,p.CBANDS]),this.nb_2=m([4,p.CBANDS]),this.nb_s1=m([4,p.CBANDS]),this.nb_s2=m([4,p.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=o(4),this.loudness_sq=m([2,2]),this.loudness_sq_save=o(2),this.mld_l=o(p.SBMAX_l),this.mld_s=o(p.SBMAX_s),this.bm_l=d(p.SBMAX_l),this.bo_l=d(p.SBMAX_l),this.bm_s=d(p.SBMAX_s),this.bo_s=d(p.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=f([p.CBANDS,2]),this.s3ind_s=f([p.CBANDS,2]),this.numlines_s=d(p.CBANDS),this.numlines_l=d(p.CBANDS),this.rnumlines_l=o(p.CBANDS),this.mld_cb_l=o(p.CBANDS),this.mld_cb_s=o(p.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=o(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=d(2),this.nsPsy=new R,this.VBR_seek_table=new x,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=f([16,5]),this.bitrate_blockType_Hist=f([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var V=0;V<this.en.length;V++)this.en[V]=new E;for(var V=0;V<this.thm.length;V++)this.thm[V]=new E;for(var V=0;V<this.header.length;V++)this.header[V]=new L}h.exports=M},8231:h=>{function T(e){var n=e;this.ordinal=function(){return n}}T.STEREO=new T(0),T.JOINT_STEREO=new T(1),T.DUAL_CHANNEL=new T(2),T.MONO=new T(3),T.NOT_SET=new T(4),h.exports=T},3134:h=>{function T(e){this.bits=e}h.exports=T},2143:(h,T,e)=>{var n=e(935),s=n.System;n.VbrMode,n.Float,n.ShortBlock;var i=n.Util,o=n.Arrays;n.new_array_n,n.new_byte,n.new_double;var m=n.new_float;n.new_float_n,n.new_int,n.new_int_n,n.assert;var d=e(687);function f(){var S=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*i.SQRT2*.5/2384e-9,.017876148*i.SQRT2*.5/2384e-9,.003134727*i.SQRT2*.5/2384e-9,.002457142*i.SQRT2*.5/2384e-9,971317e-9*i.SQRT2*.5/2384e-9,218868e-9*i.SQRT2*.5/2384e-9,101566e-9*i.SQRT2*.5/2384e-9,13828e-9*i.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],g=12,R=36,x=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],E=x[d.SHORT_TYPE],p=x[d.SHORT_TYPE],O=x[d.SHORT_TYPE],M=x[d.SHORT_TYPE],A=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function L(F,k,l){for(var P=10,H=k+238-14-286,Z=-15;Z<0;Z++){var Q,ee,te;Q=S[P+-10],ee=F[H+-224]*Q,te=F[k+224]*Q,Q=S[P+-9],ee+=F[H+-160]*Q,te+=F[k+160]*Q,Q=S[P+-8],ee+=F[H+-96]*Q,te+=F[k+96]*Q,Q=S[P+-7],ee+=F[H+-32]*Q,te+=F[k+32]*Q,Q=S[P+-6],ee+=F[H+32]*Q,te+=F[k+-32]*Q,Q=S[P+-5],ee+=F[H+96]*Q,te+=F[k+-96]*Q,Q=S[P+-4],ee+=F[H+160]*Q,te+=F[k+-160]*Q,Q=S[P+-3],ee+=F[H+224]*Q,te+=F[k+-224]*Q,Q=S[P+-2],ee+=F[k+-256]*Q,te-=F[H+256]*Q,Q=S[P+-1],ee+=F[k+-192]*Q,te-=F[H+192]*Q,Q=S[P+0],ee+=F[k+-128]*Q,te-=F[H+128]*Q,Q=S[P+1],ee+=F[k+-64]*Q,te-=F[H+64]*Q,Q=S[P+2],ee+=F[k+0]*Q,te-=F[H+0]*Q,Q=S[P+3],ee+=F[k+64]*Q,te-=F[H+-64]*Q,Q=S[P+4],ee+=F[k+128]*Q,te-=F[H+-128]*Q,Q=S[P+5],ee+=F[k+192]*Q,te-=F[H+-192]*Q,ee*=S[P+6],Q=te-ee,l[30+Z*2]=te+ee,l[31+Z*2]=S[P+7]*Q,P+=18,k--,H++}{var ee,te,fe,de;te=F[k+-16]*S[P+-10],ee=F[k+-32]*S[P+-2],te+=(F[k+-48]-F[k+16])*S[P+-9],ee+=F[k+-96]*S[P+-1],te+=(F[k+-80]+F[k+48])*S[P+-8],ee+=F[k+-160]*S[P+0],te+=(F[k+-112]-F[k+80])*S[P+-7],ee+=F[k+-224]*S[P+1],te+=(F[k+-144]+F[k+112])*S[P+-6],ee-=F[k+32]*S[P+2],te+=(F[k+-176]-F[k+144])*S[P+-5],ee-=F[k+96]*S[P+3],te+=(F[k+-208]+F[k+176])*S[P+-4],ee-=F[k+160]*S[P+4],te+=(F[k+-240]-F[k+208])*S[P+-3],ee-=F[k+224],fe=ee-te,de=ee+te,te=l[14],ee=l[15]-te,l[31]=de+te,l[30]=fe+ee,l[15]=fe-ee,l[14]=de-te}{var _;_=l[28]-l[0],l[0]+=l[28],l[28]=_*S[P+-36+7],_=l[29]-l[1],l[1]+=l[29],l[29]=_*S[P+-36+7],_=l[26]-l[2],l[2]+=l[26],l[26]=_*S[P+-72+7],_=l[27]-l[3],l[3]+=l[27],l[27]=_*S[P+-72+7],_=l[24]-l[4],l[4]+=l[24],l[24]=_*S[P+-108+7],_=l[25]-l[5],l[5]+=l[25],l[25]=_*S[P+-108+7],_=l[22]-l[6],l[6]+=l[22],l[22]=_*i.SQRT2,_=l[23]-l[7],l[7]+=l[23],l[23]=_*i.SQRT2-l[7],l[7]-=l[6],l[22]-=l[7],l[23]-=l[22],_=l[6],l[6]=l[31]-_,l[31]=l[31]+_,_=l[7],l[7]=l[30]-_,l[30]=l[30]+_,_=l[22],l[22]=l[15]-_,l[15]=l[15]+_,_=l[23],l[23]=l[14]-_,l[14]=l[14]+_,_=l[20]-l[8],l[8]+=l[20],l[20]=_*S[P+-180+7],_=l[21]-l[9],l[9]+=l[21],l[21]=_*S[P+-180+7],_=l[18]-l[10],l[10]+=l[18],l[18]=_*S[P+-216+7],_=l[19]-l[11],l[11]+=l[19],l[19]=_*S[P+-216+7],_=l[16]-l[12],l[12]+=l[16],l[16]=_*S[P+-252+7],_=l[17]-l[13],l[13]+=l[17],l[17]=_*S[P+-252+7],_=-l[20]+l[24],l[20]+=l[24],l[24]=_*S[P+-216+7],_=-l[21]+l[25],l[21]+=l[25],l[25]=_*S[P+-216+7],_=l[4]-l[8],l[4]+=l[8],l[8]=_*S[P+-216+7],_=l[5]-l[9],l[5]+=l[9],l[9]=_*S[P+-216+7],_=l[0]-l[12],l[0]+=l[12],l[12]=_*S[P+-72+7],_=l[1]-l[13],l[1]+=l[13],l[13]=_*S[P+-72+7],_=l[16]-l[28],l[16]+=l[28],l[28]=_*S[P+-72+7],_=-l[17]+l[29],l[17]+=l[29],l[29]=_*S[P+-72+7],_=i.SQRT2*(l[2]-l[10]),l[2]+=l[10],l[10]=_,_=i.SQRT2*(l[3]-l[11]),l[3]+=l[11],l[11]=_,_=i.SQRT2*(-l[18]+l[26]),l[18]+=l[26],l[26]=_-l[18],_=i.SQRT2*(-l[19]+l[27]),l[19]+=l[27],l[27]=_-l[19],_=l[2],l[19]-=l[3],l[3]-=_,l[2]=l[31]-_,l[31]+=_,_=l[3],l[11]-=l[19],l[18]-=_,l[3]=l[30]-_,l[30]+=_,_=l[18],l[27]-=l[11],l[19]-=_,l[18]=l[15]-_,l[15]+=_,_=l[19],l[10]-=_,l[19]=l[14]-_,l[14]+=_,_=l[10],l[11]-=_,l[10]=l[23]-_,l[23]+=_,_=l[11],l[26]-=_,l[11]=l[22]-_,l[22]+=_,_=l[26],l[27]-=_,l[26]=l[7]-_,l[7]+=_,_=l[27],l[27]=l[6]-_,l[6]+=_,_=i.SQRT2*(l[0]-l[4]),l[0]+=l[4],l[4]=_,_=i.SQRT2*(l[1]-l[5]),l[1]+=l[5],l[5]=_,_=i.SQRT2*(l[16]-l[20]),l[16]+=l[20],l[20]=_,_=i.SQRT2*(l[17]-l[21]),l[17]+=l[21],l[21]=_,_=-i.SQRT2*(l[8]-l[12]),l[8]+=l[12],l[12]=_-l[8],_=-i.SQRT2*(l[9]-l[13]),l[9]+=l[13],l[13]=_-l[9],_=-i.SQRT2*(l[25]-l[29]),l[25]+=l[29],l[29]=_-l[25],_=-i.SQRT2*(l[24]+l[28]),l[24]-=l[28],l[28]=_-l[24],_=l[24]-l[16],l[24]=_,_=l[20]-_,l[20]=_,_=l[28]-_,l[28]=_,_=l[25]-l[17],l[25]=_,_=l[21]-_,l[21]=_,_=l[29]-_,l[29]=_,_=l[17]-l[1],l[17]=_,_=l[9]-_,l[9]=_,_=l[25]-_,l[25]=_,_=l[5]-_,l[5]=_,_=l[21]-_,l[21]=_,_=l[13]-_,l[13]=_,_=l[29]-_,l[29]=_,_=l[1]-l[0],l[1]=_,_=l[16]-_,l[16]=_,_=l[17]-_,l[17]=_,_=l[8]-_,l[8]=_,_=l[9]-_,l[9]=_,_=l[24]-_,l[24]=_,_=l[25]-_,l[25]=_,_=l[4]-_,l[4]=_,_=l[5]-_,l[5]=_,_=l[20]-_,l[20]=_,_=l[21]-_,l[21]=_,_=l[12]-_,l[12]=_,_=l[13]-_,l[13]=_,_=l[28]-_,l[28]=_,_=l[29]-_,l[29]=_,_=l[0],l[0]+=l[31],l[31]-=_,_=l[1],l[1]+=l[30],l[30]-=_,_=l[16],l[16]+=l[15],l[15]-=_,_=l[17],l[17]+=l[14],l[14]-=_,_=l[8],l[8]+=l[23],l[23]-=_,_=l[9],l[9]+=l[22],l[22]-=_,_=l[24],l[24]+=l[7],l[7]-=_,_=l[25],l[25]+=l[6],l[6]-=_,_=l[4],l[4]+=l[27],l[27]-=_,_=l[5],l[5]+=l[26],l[26]-=_,_=l[20],l[20]+=l[11],l[11]-=_,_=l[21],l[21]+=l[10],l[10]-=_,_=l[12],l[12]+=l[19],l[19]-=_,_=l[13],l[13]+=l[18],l[18]-=_,_=l[28],l[28]+=l[3],l[3]-=_,_=l[29],l[29]+=l[2],l[2]-=_}}function V(F,k){for(var l=0;l<3;l++){var P,H,Z,Q,ee,te;Q=F[k+6]*x[d.SHORT_TYPE][0]-F[k+15],P=F[k+0]*x[d.SHORT_TYPE][2]-F[k+9],H=Q+P,Z=Q-P,Q=F[k+15]*x[d.SHORT_TYPE][0]+F[k+6],P=F[k+9]*x[d.SHORT_TYPE][2]+F[k+0],ee=Q+P,te=-Q+P,P=(F[k+3]*x[d.SHORT_TYPE][1]-F[k+12])*2069978111953089e-26,Q=(F[k+12]*x[d.SHORT_TYPE][1]+F[k+3])*2069978111953089e-26,F[k+0]=H*190752519173728e-25+P,F[k+15]=-ee*190752519173728e-25+Q,Z=Z*.8660254037844387*1907525191737281e-26,ee=ee*.5*1907525191737281e-26+Q,F[k+3]=Z-ee,F[k+6]=Z+ee,H=H*.5*1907525191737281e-26-P,te=te*.8660254037844387*1907525191737281e-26,F[k+9]=H+te,F[k+12]=H-te,k++}}function K(F,k,l){var P,H;{var Z,Q,ee,te,fe,de,_,Y;Z=l[17]-l[9],ee=l[15]-l[11],te=l[14]-l[12],fe=l[0]+l[8],de=l[1]+l[7],_=l[2]+l[6],Y=l[3]+l[5],F[k+17]=fe+_-Y-(de-l[4]),H=(fe+_-Y)*p[19]+(de-l[4]),P=(Z-ee-te)*p[18],F[k+5]=P+H,F[k+6]=P-H,Q=(l[16]-l[10])*p[18],de=de*p[19]+l[4],P=Z*p[12]+Q+ee*p[13]+te*p[14],H=-fe*p[16]+de-_*p[17]+Y*p[15],F[k+1]=P+H,F[k+2]=P-H,P=Z*p[13]-Q-ee*p[14]+te*p[12],H=-fe*p[17]+de-_*p[15]+Y*p[16],F[k+9]=P+H,F[k+10]=P-H,P=Z*p[14]-Q+ee*p[12]-te*p[13],H=fe*p[15]-de+_*p[16]-Y*p[17],F[k+13]=P+H,F[k+14]=P-H}{var b,D,X,q,U,v,u,c;b=l[8]-l[0],X=l[6]-l[2],q=l[5]-l[3],U=l[17]+l[9],v=l[16]+l[10],u=l[15]+l[11],c=l[14]+l[12],F[k+0]=U+u+c+(v+l[13]),P=(U+u+c)*p[19]-(v+l[13]),H=(b-X+q)*p[18],F[k+11]=P+H,F[k+12]=P-H,D=(l[7]-l[1])*p[18],v=l[13]-v*p[19],P=U*p[15]-v+u*p[16]+c*p[17],H=b*p[14]+D+X*p[12]+q*p[13],F[k+3]=P+H,F[k+4]=P-H,P=-U*p[17]+v-u*p[15]-c*p[16],H=b*p[13]+D-X*p[14]-q*p[12],F[k+7]=P+H,F[k+8]=P-H,P=-U*p[16]+v-u*p[17]-c*p[15],H=b*p[12]-D+X*p[13]-q*p[14],F[k+15]=P+H,F[k+16]=P-H}}this.mdct_sub48=function(F,k,l){for(var P=k,H=286,Z=0;Z<F.channels_out;Z++){for(var Q=0;Q<F.mode_gr;Q++){for(var ee,te=F.l3_side.tt[Q][Z],fe=te.xr,de=0,_=F.sb_sample[Z][1-Q],Y=0,b=0;b<9;b++)for(L(P,H,_[Y]),L(P,H+32,_[Y+1]),Y+=2,H+=64,ee=1;ee<32;ee+=2)_[Y-1][ee]*=-1;for(ee=0;ee<32;ee++,de+=18){var D=te.block_type,X=F.sb_sample[Z][Q],q=F.sb_sample[Z][1-Q];if(te.mixed_block_flag!=0&&ee<2&&(D=0),F.amp_filter[ee]<1e-12)o.fill(fe,de+0,de+18,0);else{if(F.amp_filter[ee]<1)for(var b=0;b<18;b++)q[b][A[ee]]*=F.amp_filter[ee];if(D==d.SHORT_TYPE){for(var b=-g/4;b<0;b++){var U=x[d.SHORT_TYPE][b+3];fe[de+b*3+9]=X[9+b][A[ee]]*U-X[8-b][A[ee]],fe[de+b*3+18]=X[14-b][A[ee]]*U+X[15+b][A[ee]],fe[de+b*3+10]=X[15+b][A[ee]]*U-X[14-b][A[ee]],fe[de+b*3+19]=q[2-b][A[ee]]*U+q[3+b][A[ee]],fe[de+b*3+11]=q[3+b][A[ee]]*U-q[2-b][A[ee]],fe[de+b*3+20]=q[8-b][A[ee]]*U+q[9+b][A[ee]]}V(fe,de)}else{for(var v=m(18),b=-R/4;b<0;b++){var u,c;u=x[D][b+27]*q[b+9][A[ee]]+x[D][b+36]*q[8-b][A[ee]],c=x[D][b+9]*X[b+9][A[ee]]-x[D][b+18]*X[8-b][A[ee]],v[b+9]=u-c*E[3+b+9],v[b+18]=u*E[3+b+9]+c}K(fe,de,v)}}if(D!=d.SHORT_TYPE&&ee!=0)for(var b=7;b>=0;--b){var y,B;y=fe[de+b]*O[20+b]+fe[de+-1-b]*M[28+b],B=fe[de+b]*M[28+b]-fe[de+-1-b]*O[20+b],fe[de+-1-b]=y,fe[de+b]=B}}}if(P=l,H=286,F.mode_gr==1)for(var G=0;G<18;G++)s.arraycopy(F.sb_sample[Z][1][G],0,F.sb_sample[Z][0][G],0,32)}}}h.exports=f},7885:(h,T,e)=>{var n=e(935);n.System,n.VbrMode,n.Float,n.ShortBlock,n.Util,n.Arrays,n.new_array_n,n.new_byte,n.new_double;var s=n.new_float,i=n.new_float_n,o=n.new_int;n.new_int_n,n.assert;var m=e(687);function d(){this.last_en_subshort=i([4,9]),this.lastAttacks=o(4),this.pefirbuf=s(19),this.longfact=s(m.SBMAX_l),this.shortfact=s(m.SBMAX_s),this.attackthre=0,this.attackthre_s=0}h.exports=d},9457:(h,T,e)=>{var n=e(935);n.System;var s=n.VbrMode;n.Float,n.ShortBlock,n.Util,n.Arrays,n.new_array_n,n.new_byte,n.new_double,n.new_float,n.new_float_n,n.new_int,n.new_int_n,n.assert;function i(){function o(p,O,M,A,L,V,K,F,k,l,P,H,Z,Q,ee){this.vbr_q=p,this.quant_comp=O,this.quant_comp_s=M,this.expY=A,this.st_lrm=L,this.st_s=V,this.masking_adj=K,this.masking_adj_short=F,this.ath_lower=k,this.ath_curve=l,this.ath_sensitivity=P,this.interch=H,this.safejoint=Z,this.sfb21mod=Q,this.msfix=ee}function m(p,O,M,A,L,V,K,F,k,l,P,H,Z,Q){this.quant_comp=O,this.quant_comp_s=M,this.safejoint=A,this.nsmsfix=L,this.st_lrm=V,this.st_s=K,this.nsbass=F,this.scale=k,this.masking_adj=l,this.ath_lower=P,this.ath_curve=H,this.interch=Z,this.sfscale=Q}var d;this.setModules=function(p){d=p};var f=[new o(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new o(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new o(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new o(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new o(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new o(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new o(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new o(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new o(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new o(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new o(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],S=[new o(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new o(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new o(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new o(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new o(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new o(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new o(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new o(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new o(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new o(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new o(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function g(p,O,M){var A=p.VBR==s.vbr_rh?f:S,L=p.VBR_q_frac,V=A[O],K=A[O+1],F=V;V.st_lrm=V.st_lrm+L*(K.st_lrm-V.st_lrm),V.st_s=V.st_s+L*(K.st_s-V.st_s),V.masking_adj=V.masking_adj+L*(K.masking_adj-V.masking_adj),V.masking_adj_short=V.masking_adj_short+L*(K.masking_adj_short-V.masking_adj_short),V.ath_lower=V.ath_lower+L*(K.ath_lower-V.ath_lower),V.ath_curve=V.ath_curve+L*(K.ath_curve-V.ath_curve),V.ath_sensitivity=V.ath_sensitivity+L*(K.ath_sensitivity-V.ath_sensitivity),V.interch=V.interch+L*(K.interch-V.interch),V.msfix=V.msfix+L*(K.msfix-V.msfix),E(p,F.vbr_q),M!=0?p.quant_comp=F.quant_comp:Math.abs(p.quant_comp- -1)>0||(p.quant_comp=F.quant_comp),M!=0?p.quant_comp_short=F.quant_comp_s:Math.abs(p.quant_comp_short- -1)>0||(p.quant_comp_short=F.quant_comp_s),F.expY!=0&&(p.experimentalY=F.expY!=0),M!=0?p.internal_flags.nsPsy.attackthre=F.st_lrm:Math.abs(p.internal_flags.nsPsy.attackthre- -1)>0||(p.internal_flags.nsPsy.attackthre=F.st_lrm),M!=0?p.internal_flags.nsPsy.attackthre_s=F.st_s:Math.abs(p.internal_flags.nsPsy.attackthre_s- -1)>0||(p.internal_flags.nsPsy.attackthre_s=F.st_s),M!=0?p.maskingadjust=F.masking_adj:Math.abs(p.maskingadjust-0)>0||(p.maskingadjust=F.masking_adj),M!=0?p.maskingadjust_short=F.masking_adj_short:Math.abs(p.maskingadjust_short-0)>0||(p.maskingadjust_short=F.masking_adj_short),M!=0?p.ATHlower=-F.ath_lower/10:Math.abs(-p.ATHlower*10-0)>0||(p.ATHlower=-F.ath_lower/10),M!=0?p.ATHcurve=F.ath_curve:Math.abs(p.ATHcurve- -1)>0||(p.ATHcurve=F.ath_curve),M!=0?p.athaa_sensitivity=F.ath_sensitivity:Math.abs(p.athaa_sensitivity- -1)>0||(p.athaa_sensitivity=F.ath_sensitivity),F.interch>0&&(M!=0?p.interChRatio=F.interch:Math.abs(p.interChRatio- -1)>0||(p.interChRatio=F.interch)),F.safejoint>0&&(p.exp_nspsytune=p.exp_nspsytune|F.safejoint),F.sfb21mod>0&&(p.exp_nspsytune=p.exp_nspsytune|F.sfb21mod<<20),M!=0?p.msfix=F.msfix:Math.abs(p.msfix- -1)>0||(p.msfix=F.msfix),M==0&&(p.VBR_q=O,p.VBR_q_frac=L)}var R=[new m(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new m(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new m(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new m(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new m(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new m(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new m(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new m(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new m(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new m(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new m(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new m(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new m(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new m(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new m(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new m(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new m(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function x(p,O,M){var A=O,L=d.nearestBitrateFullIndex(O);if(p.VBR=s.vbr_abr,p.VBR_mean_bitrate_kbps=A,p.VBR_mean_bitrate_kbps=Math.min(p.VBR_mean_bitrate_kbps,320),p.VBR_mean_bitrate_kbps=Math.max(p.VBR_mean_bitrate_kbps,8),p.brate=p.VBR_mean_bitrate_kbps,p.VBR_mean_bitrate_kbps>320&&(p.disable_reservoir=!0),R[L].safejoint>0&&(p.exp_nspsytune=p.exp_nspsytune|2),R[L].sfscale>0&&(p.internal_flags.noise_shaping=2),Math.abs(R[L].nsbass)>0){var V=int(R[L].nsbass*4);V<0&&(V+=64),p.exp_nspsytune=p.exp_nspsytune|V<<2}return M!=0?p.quant_comp=R[L].quant_comp:Math.abs(p.quant_comp- -1)>0||(p.quant_comp=R[L].quant_comp),M!=0?p.quant_comp_short=R[L].quant_comp_s:Math.abs(p.quant_comp_short- -1)>0||(p.quant_comp_short=R[L].quant_comp_s),M!=0?p.msfix=R[L].nsmsfix:Math.abs(p.msfix- -1)>0||(p.msfix=R[L].nsmsfix),M!=0?p.internal_flags.nsPsy.attackthre=R[L].st_lrm:Math.abs(p.internal_flags.nsPsy.attackthre- -1)>0||(p.internal_flags.nsPsy.attackthre=R[L].st_lrm),M!=0?p.internal_flags.nsPsy.attackthre_s=R[L].st_s:Math.abs(p.internal_flags.nsPsy.attackthre_s- -1)>0||(p.internal_flags.nsPsy.attackthre_s=R[L].st_s),M!=0?p.scale=R[L].scale:Math.abs(p.scale- -1)>0||(p.scale=R[L].scale),M!=0?p.maskingadjust=R[L].masking_adj:Math.abs(p.maskingadjust-0)>0||(p.maskingadjust=R[L].masking_adj),R[L].masking_adj>0?M!=0?p.maskingadjust_short=R[L].masking_adj*.9:Math.abs(p.maskingadjust_short-0)>0||(p.maskingadjust_short=R[L].masking_adj*.9):M!=0?p.maskingadjust_short=R[L].masking_adj*1.1:Math.abs(p.maskingadjust_short-0)>0||(p.maskingadjust_short=R[L].masking_adj*1.1),M!=0?p.ATHlower=-R[L].ath_lower/10:Math.abs(-p.ATHlower*10-0)>0||(p.ATHlower=-R[L].ath_lower/10),M!=0?p.ATHcurve=R[L].ath_curve:Math.abs(p.ATHcurve- -1)>0||(p.ATHcurve=R[L].ath_curve),M!=0?p.interChRatio=R[L].interch:Math.abs(p.interChRatio- -1)>0||(p.interChRatio=R[L].interch),O}this.apply_preset=function(p,O,M){switch(O){case Lame.R3MIX:{O=Lame.V3,p.VBR=s.vbr_mtrh;break}case Lame.MEDIUM:{O=Lame.V4,p.VBR=s.vbr_rh;break}case Lame.MEDIUM_FAST:{O=Lame.V4,p.VBR=s.vbr_mtrh;break}case Lame.STANDARD:{O=Lame.V2,p.VBR=s.vbr_rh;break}case Lame.STANDARD_FAST:{O=Lame.V2,p.VBR=s.vbr_mtrh;break}case Lame.EXTREME:{O=Lame.V0,p.VBR=s.vbr_rh;break}case Lame.EXTREME_FAST:{O=Lame.V0,p.VBR=s.vbr_mtrh;break}case Lame.INSANE:return O=320,p.preset=O,x(p,O,M),p.VBR=s.vbr_off,O}switch(p.preset=O,O){case Lame.V9:return g(p,9,M),O;case Lame.V8:return g(p,8,M),O;case Lame.V7:return g(p,7,M),O;case Lame.V6:return g(p,6,M),O;case Lame.V5:return g(p,5,M),O;case Lame.V4:return g(p,4,M),O;case Lame.V3:return g(p,3,M),O;case Lame.V2:return g(p,2,M),O;case Lame.V1:return g(p,1,M),O;case Lame.V0:return g(p,0,M),O}return 8<=O&&O<=320?x(p,O,M):(p.preset=0,O)};function E(p,O){var M=0;return 0>O&&(M=-1,O=0),9<O&&(M=-1,O=9),p.VBR_q=O,p.VBR_q_frac=0,M}}h.exports=i},9319:(h,T,e)=>{var n=e(935);n.System;var s=n.VbrMode,i=n.Float,o=n.ShortBlock,m=n.Util,d=n.Arrays;n.new_array_n,n.new_byte,n.new_double;var f=n.new_float,S=n.new_float_n,g=n.new_int;n.new_int_n;var R=n.assert,x=e(9347),E=e(687);function p(){var O=new x,M=2.302585092994046,A=2,L=16,V=2,K=16,F=.34,k=1/(14752*14752)/(E.BLKSIZE/2),l=.01,P=.8,H=.6,Z=.3,Q=3.5,ee=21,te=.2302585093;function fe(J){return J}function de(J,$){for(var oe=0,ue=0;ue<E.BLKSIZE/2;++ue)oe+=J[ue]*$.ATH.eql_w[ue];return oe*=k,oe}function _(J,$,oe,ue,ye,ne,pe,Se,ge,Le,xe){var Pe=J.internal_flags;if(ge<2)O.fft_long(Pe,ue[ye],ge,Le,xe),O.fft_short(Pe,ne[pe],ge,Le,xe);else if(ge==2){for(var ot=E.BLKSIZE-1;ot>=0;--ot){var dt=ue[ye+0][ot],Ke=ue[ye+1][ot];ue[ye+0][ot]=(dt+Ke)*m.SQRT2*.5,ue[ye+1][ot]=(dt-Ke)*m.SQRT2*.5}for(var gt=2;gt>=0;--gt)for(var ot=E.BLKSIZE_s-1;ot>=0;--ot){var dt=ne[pe+0][gt][ot],Ke=ne[pe+1][gt][ot];ne[pe+0][gt][ot]=(dt+Ke)*m.SQRT2*.5,ne[pe+1][gt][ot]=(dt-Ke)*m.SQRT2*.5}}$[0]=ue[ye+0][0],$[0]*=$[0];for(var ot=E.BLKSIZE/2-1;ot>=0;--ot){var Oe=ue[ye+0][E.BLKSIZE/2-ot],ve=ue[ye+0][E.BLKSIZE/2+ot];$[E.BLKSIZE/2-ot]=(Oe*Oe+ve*ve)*.5}for(var gt=2;gt>=0;--gt){oe[gt][0]=ne[pe+0][gt][0],oe[gt][0]*=oe[gt][0];for(var ot=E.BLKSIZE_s/2-1;ot>=0;--ot){var Oe=ne[pe+0][gt][E.BLKSIZE_s/2-ot],ve=ne[pe+0][gt][E.BLKSIZE_s/2+ot];oe[gt][E.BLKSIZE_s/2-ot]=(Oe*Oe+ve*ve)*.5}}{for(var ke=0,ot=11;ot<E.HBLKSIZE;ot++)ke+=$[ot];Pe.tot_ener[ge]=ke}if(J.analysis){for(var ot=0;ot<E.HBLKSIZE;ot++)Pe.pinfo.energy[Se][ge][ot]=Pe.pinfo.energy_save[ge][ot],Pe.pinfo.energy_save[ge][ot]=$[ot];Pe.pinfo.pe[Se][ge]=Pe.pe[ge]}J.athaa_loudapprox==2&&ge<2&&(Pe.loudness_sq[Se][ge]=Pe.loudness_sq_save[ge],Pe.loudness_sq_save[ge]=de($,Pe))}var Y=8,b=23,D=15,X,q,U,v=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function u(){X=Math.pow(10,(Y+1)/16),q=Math.pow(10,(b+1)/16),U=Math.pow(10,D/10)}var c=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],y=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],B=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function G(J,$,oe,ue,ye,ne){var pe;if($>J)if($<J*q)pe=$/J;else return J+$;else{if(J>=$*q)return J+$;pe=J/$}if(R(J>=0),R($>=0),J+=$,ue+3<=6){if(pe>=X)return J;var Se=0|m.FAST_LOG10_X(pe,16);return J*y[Se]}var Se=0|m.FAST_LOG10_X(pe,16);if(ne!=0?$=ye.ATH.cb_s[oe]*ye.ATH.adjust:$=ye.ATH.cb_l[oe]*ye.ATH.adjust,R($>=0),J<U*$){if(J>$){var ge,Le;return ge=1,Se<=13&&(ge=B[Se]),Le=m.FAST_LOG10_X(J/$,.6666666666666666),J*((c[Se]-ge)*Le+ge)}return Se>13?J:J*B[Se]}return J*c[Se]}var W=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function j(J,$,oe){var ue;if(J<0&&(J=0),$<0&&($=0),J<=0)return $;if($<=0)return J;if($>J?ue=$/J:ue=J/$,-2<=oe&&oe<=2){if(ue>=X)return J+$;var ye=0|m.FAST_LOG10_X(ue,16);return(J+$)*W[ye]}return ue<q?J+$:(J<$&&(J=$),J)}function re(J,$){var oe=J.internal_flags;if(oe.channels_out>1){for(var ue=0;ue<E.SBMAX_l;ue++){var ye=oe.thm[0].l[ue],ne=oe.thm[1].l[ue];oe.thm[0].l[ue]+=ne*$,oe.thm[1].l[ue]+=ye*$}for(var ue=0;ue<E.SBMAX_s;ue++)for(var pe=0;pe<3;pe++){var ye=oe.thm[0].s[ue][pe],ne=oe.thm[1].s[ue][pe];oe.thm[0].s[ue][pe]+=ne*$,oe.thm[1].s[ue][pe]+=ye*$}}}function ae(J){for(var $=0;$<E.SBMAX_l;$++)if(!(J.thm[0].l[$]>1.58*J.thm[1].l[$]||J.thm[1].l[$]>1.58*J.thm[0].l[$])){var oe=J.mld_l[$]*J.en[3].l[$],ue=Math.max(J.thm[2].l[$],Math.min(J.thm[3].l[$],oe));oe=J.mld_l[$]*J.en[2].l[$];var ye=Math.max(J.thm[3].l[$],Math.min(J.thm[2].l[$],oe));J.thm[2].l[$]=ue,J.thm[3].l[$]=ye}for(var $=0;$<E.SBMAX_s;$++)for(var ne=0;ne<3;ne++)if(!(J.thm[0].s[$][ne]>1.58*J.thm[1].s[$][ne]||J.thm[1].s[$][ne]>1.58*J.thm[0].s[$][ne])){var oe=J.mld_s[$]*J.en[3].s[$][ne],ue=Math.max(J.thm[2].s[$][ne],Math.min(J.thm[3].s[$][ne],oe));oe=J.mld_s[$]*J.en[2].s[$][ne];var ye=Math.max(J.thm[3].s[$][ne],Math.min(J.thm[2].s[$][ne],oe));J.thm[2].s[$][ne]=ue,J.thm[3].s[$][ne]=ye}}function be(J,$,oe){var ue=$,ye=Math.pow(10,oe);$*=2,ue*=2;for(var ne=0;ne<E.SBMAX_l;ne++){var pe,Se,ge,Le;if(Le=J.ATH.cb_l[J.bm_l[ne]]*ye,pe=Math.min(Math.max(J.thm[0].l[ne],Le),Math.max(J.thm[1].l[ne],Le)),Se=Math.max(J.thm[2].l[ne],Le),ge=Math.max(J.thm[3].l[ne],Le),pe*$<Se+ge){var xe=pe*ue/(Se+ge);Se*=xe,ge*=xe,R(Se+ge>0)}J.thm[2].l[ne]=Math.min(Se,J.thm[2].l[ne]),J.thm[3].l[ne]=Math.min(ge,J.thm[3].l[ne])}ye*=E.BLKSIZE_s/E.BLKSIZE;for(var ne=0;ne<E.SBMAX_s;ne++)for(var Pe=0;Pe<3;Pe++){var pe,Se,ge,Le;if(Le=J.ATH.cb_s[J.bm_s[ne]]*ye,pe=Math.min(Math.max(J.thm[0].s[ne][Pe],Le),Math.max(J.thm[1].s[ne][Pe],Le)),Se=Math.max(J.thm[2].s[ne][Pe],Le),ge=Math.max(J.thm[3].s[ne][Pe],Le),pe*$<Se+ge){var xe=pe*$/(Se+ge);Se*=xe,ge*=xe,R(Se+ge>0)}J.thm[2].s[ne][Pe]=Math.min(J.thm[2].s[ne][Pe],Se),J.thm[3].s[ne][Pe]=Math.min(J.thm[3].s[ne][Pe],ge)}}function Me(J,$,oe,ue,ye){var ne,pe,Se=0,ge=0;for(ne=pe=0;ne<E.SBMAX_s;++pe,++ne){for(var Le=J.bo_s[ne],xe=J.npart_s,Pe=Le<xe?Le:xe;pe<Pe;)R($[pe]>=0),R(oe[pe]>=0),Se+=$[pe],ge+=oe[pe],pe++;if(J.en[ue].s[ne][ye]=Se,J.thm[ue].s[ne][ye]=ge,pe>=xe){++ne;break}R($[pe]>=0),R(oe[pe]>=0);{var ot=J.PSY.bo_s_weight[ne],dt=1-ot;Se=ot*$[pe],ge=ot*oe[pe],J.en[ue].s[ne][ye]+=Se,J.thm[ue].s[ne][ye]+=ge,Se=dt*$[pe],ge=dt*oe[pe]}}for(;ne<E.SBMAX_s;++ne)J.en[ue].s[ne][ye]=0,J.thm[ue].s[ne][ye]=0}function Be(J,$,oe,ue){var ye,ne,pe=0,Se=0;for(ye=ne=0;ye<E.SBMAX_l;++ne,++ye){for(var ge=J.bo_l[ye],Le=J.npart_l,xe=ge<Le?ge:Le;ne<xe;)R($[ne]>=0),R(oe[ne]>=0),pe+=$[ne],Se+=oe[ne],ne++;if(J.en[ue].l[ye]=pe,J.thm[ue].l[ye]=Se,ne>=Le){++ye;break}R($[ne]>=0),R(oe[ne]>=0);{var Pe=J.PSY.bo_l_weight[ye],ot=1-Pe;pe=Pe*$[ne],Se=Pe*oe[ne],J.en[ue].l[ye]+=pe,J.thm[ue].l[ye]+=Se,pe=ot*$[ne],Se=ot*oe[ne]}}for(;ye<E.SBMAX_l;++ye)J.en[ue].l[ye]=0,J.thm[ue].l[ye]=0}function Ge(J,$,oe,ue,ye,ne){var pe=J.internal_flags,Se,ge;for(ge=Se=0;ge<pe.npart_s;++ge){for(var Le=0,xe=pe.numlines_s[ge],Pe=0;Pe<xe;++Pe,++Se){var ot=$[ne][Se];Le+=ot}oe[ge]=Le}for(R(ge==pe.npart_s),R(Se==129),Se=ge=0;ge<pe.npart_s;ge++){var dt=pe.s3ind_s[ge][0],Ke=pe.s3_ss[Se++]*oe[dt];for(++dt;dt<=pe.s3ind_s[ge][1];)Ke+=pe.s3_ss[Se]*oe[dt],++Se,++dt;{var gt=V*pe.nb_s1[ye][ge];ue[ge]=Math.min(Ke,gt)}if(pe.blocktype_old[ye&1]==E.SHORT_TYPE){var gt=K*pe.nb_s2[ye][ge],Oe=ue[ge];ue[ge]=Math.min(gt,Oe)}pe.nb_s2[ye][ge]=pe.nb_s1[ye][ge],pe.nb_s1[ye][ge]=Ke,R(ue[ge]>=0)}for(;ge<=E.CBANDS;++ge)oe[ge]=0,ue[ge]=0}function Ye(J,$,oe,ue){var ye=J.internal_flags;J.short_blocks==o.short_block_coupled&&!($[0]!=0&&$[1]!=0)&&($[0]=$[1]=0);for(var ne=0;ne<ye.channels_out;ne++)ue[ne]=E.NORM_TYPE,J.short_blocks==o.short_block_dispensed&&($[ne]=1),J.short_blocks==o.short_block_forced&&($[ne]=0),$[ne]!=0?(R(ye.blocktype_old[ne]!=E.START_TYPE),ye.blocktype_old[ne]==E.SHORT_TYPE&&(ue[ne]=E.STOP_TYPE)):(ue[ne]=E.SHORT_TYPE,ye.blocktype_old[ne]==E.NORM_TYPE&&(ye.blocktype_old[ne]=E.START_TYPE),ye.blocktype_old[ne]==E.STOP_TYPE&&(ye.blocktype_old[ne]=E.SHORT_TYPE)),oe[ne]=ye.blocktype_old[ne],ye.blocktype_old[ne]=ue[ne]}function it(J,$,oe){return oe>=1?J:oe<=0?$:$>0?Math.pow(J/$,oe)*$:0}var _t=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function C(J,$){for(var oe=309.07,ue=0;ue<E.SBMAX_s-1;ue++)for(var ye=0;ye<3;ye++){var ne=J.thm.s[ue][ye];if(R(ue<_t.length),ne>0){var pe=ne*$,Se=J.en.s[ue][ye];Se>pe&&(Se>pe*1e10?oe+=_t[ue]*(10*M):(R(pe>0),oe+=_t[ue]*m.FAST_LOG10(Se/pe)))}}return oe}var z=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function Ne(J,$){for(var oe=281.0575,ue=0;ue<E.SBMAX_l-1;ue++){var ye=J.thm.l[ue];if(R(ue<z.length),ye>0){var ne=ye*$,pe=J.en.l[ue];pe>ne&&(pe>ne*1e10?oe+=z[ue]*(10*M):(R(ne>0),oe+=z[ue]*m.FAST_LOG10(pe/ne)))}}return oe}function Te(J,$,oe,ue,ye){var ne,pe;for(ne=pe=0;ne<J.npart_l;++ne){var Se=0,ge=0,Le;for(Le=0;Le<J.numlines_l[ne];++Le,++pe){var xe=$[pe];R(xe>=0),Se+=xe,ge<xe&&(ge=xe)}oe[ne]=Se,ue[ne]=ge,ye[ne]=Se*J.rnumlines_l[ne],R(J.rnumlines_l[ne]>=0),R(Se>=0),R(oe[ne]>=0),R(ue[ne]>=0),R(ye[ne]>=0)}}function Ue(J,$,oe,ue){var ye=v.length-1,ne=0,pe=oe[ne]+oe[ne+1];if(R(pe>=0),pe>0){var Se=$[ne];Se<$[ne+1]&&(Se=$[ne+1]),R(J.numlines_l[ne]+J.numlines_l[ne+1]-1>0),pe=20*(Se*2-pe)/(pe*(J.numlines_l[ne]+J.numlines_l[ne+1]-1));var ge=0|pe;ge>ye&&(ge=ye),ue[ne]=ge}else ue[ne]=0;for(ne=1;ne<J.npart_l-1;ne++)if(pe=oe[ne-1]+oe[ne]+oe[ne+1],R(pe>=0),pe>0){var Se=$[ne-1];Se<$[ne]&&(Se=$[ne]),Se<$[ne+1]&&(Se=$[ne+1]),R(J.numlines_l[ne-1]+J.numlines_l[ne]+J.numlines_l[ne+1]-1>0),pe=20*(Se*3-pe)/(pe*(J.numlines_l[ne-1]+J.numlines_l[ne]+J.numlines_l[ne+1]-1));var ge=0|pe;ge>ye&&(ge=ye),ue[ne]=ge}else ue[ne]=0;if(R(ne>0),R(ne==J.npart_l-1),pe=oe[ne-1]+oe[ne],R(pe>=0),pe>0){var Se=$[ne-1];Se<$[ne]&&(Se=$[ne]),R(J.numlines_l[ne-1]+J.numlines_l[ne]-1>0),pe=20*(Se*2-pe)/(pe*(J.numlines_l[ne-1]+J.numlines_l[ne]-1));var ge=0|pe;ge>ye&&(ge=ye),ue[ne]=ge}else ue[ne]=0;R(ne==J.npart_l-1)}var Ee=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(J,$,oe,ue,ye,ne,pe,Se,ge,Le){var xe=J.internal_flags,Pe=S([2,E.BLKSIZE]),ot=S([2,3,E.BLKSIZE_s]),dt=f(E.CBANDS+1),Ke=f(E.CBANDS+1),gt=f(E.CBANDS+2),Oe=g(2),ve=g(2),ke,se,ie,me,qe,lt,Je,pt,Et=S([2,576]),Ct,Qe=g(E.CBANDS+2),wt=g(E.CBANDS+2);for(d.fill(wt,0),ke=xe.channels_out,J.mode==MPEGMode.JOINT_STEREO&&(ke=4),J.VBR==s.vbr_off?Ct=xe.ResvMax==0?0:xe.ResvSize/xe.ResvMax*.5:J.VBR==s.vbr_rh||J.VBR==s.vbr_mtrh||J.VBR==s.vbr_mt?Ct=.6:Ct=1,se=0;se<xe.channels_out;se++){var Nt=$[se],$t=oe+576-350-ee+192;for(R(Ee.length==(ee-1)/2),me=0;me<576;me++){var tr,rr;for(tr=Nt[$t+me+10],rr=0,qe=0;qe<(ee-1)/2-1;qe+=2)tr+=Ee[qe]*(Nt[$t+me+qe]+Nt[$t+me+ee-qe]),rr+=Ee[qe+1]*(Nt[$t+me+qe+1]+Nt[$t+me+ee-qe-1]);Et[se][me]=tr+rr}ye[ue][se].en.assign(xe.en[se]),ye[ue][se].thm.assign(xe.thm[se]),ke>2&&(ne[ue][se].en.assign(xe.en[se+2]),ne[ue][se].thm.assign(xe.thm[se+2]))}for(se=0;se<ke;se++){var dr,hr,nr=f(12),Sr=[0,0,0,0],Hr=f(12),yn=1,Fn,Dn=f(E.CBANDS),jn=f(E.CBANDS),Gt=[0,0,0,0],Ir=f(E.HBLKSIZE),Sn=S([3,E.HBLKSIZE_s]);for(R(xe.npart_s<=E.CBANDS),R(xe.npart_l<=E.CBANDS),me=0;me<3;me++)nr[me]=xe.nsPsy.last_en_subshort[se][me+6],R(xe.nsPsy.last_en_subshort[se][me+4]>0),Hr[me]=nr[me]/xe.nsPsy.last_en_subshort[se][me+4],Sr[0]+=nr[me];if(se==2)for(me=0;me<576;me++){var Kr,zr;Kr=Et[0][me],zr=Et[1][me],Et[0][me]=Kr+zr,Et[1][me]=Kr-zr}{var nn=Et[se&1],Xr=0;for(me=0;me<9;me++){for(var ua=Xr+64,Vt=1;Xr<ua;Xr++)Vt<Math.abs(nn[Xr])&&(Vt=Math.abs(nn[Xr]));xe.nsPsy.last_en_subshort[se][me]=nr[me+3]=Vt,Sr[1+me/3]+=Vt,Vt>nr[me+3-2]?(R(nr[me+3-2]>0),Vt=Vt/nr[me+3-2]):nr[me+3-2]>Vt*10?(R(Vt>0),Vt=nr[me+3-2]/(Vt*10)):Vt=0,Hr[me+3]=Vt}}if(J.analysis){var Or=Hr[0];for(me=1;me<12;me++)Or<Hr[me]&&(Or=Hr[me]);xe.pinfo.ers[ue][se]=xe.pinfo.ers_save[se],xe.pinfo.ers_save[se]=Or}for(Fn=se==3?xe.nsPsy.attackthre_s:xe.nsPsy.attackthre,me=0;me<12;me++)Gt[me/3]==0&&Hr[me]>Fn&&(Gt[me/3]=me%3+1);for(me=1;me<4;me++){var Wr;Sr[me-1]>Sr[me]?(R(Sr[me]>0),Wr=Sr[me-1]/Sr[me]):(R(Sr[me-1]>0),Wr=Sr[me]/Sr[me-1]),Wr<1.7&&(Gt[me]=0,me==1&&(Gt[0]=0))}for(Gt[0]!=0&&xe.nsPsy.lastAttacks[se]!=0&&(Gt[0]=0),(xe.nsPsy.lastAttacks[se]==3||Gt[0]+Gt[1]+Gt[2]+Gt[3]!=0)&&(yn=0,Gt[1]!=0&&Gt[0]!=0&&(Gt[1]=0),Gt[2]!=0&&Gt[1]!=0&&(Gt[2]=0),Gt[3]!=0&&Gt[2]!=0&&(Gt[3]=0)),se<2?ve[se]=yn:yn==0&&(ve[0]=ve[1]=0),ge[se]=xe.tot_ener[se],hr=ot,dr=Pe,_(J,Ir,Sn,dr,se&1,hr,se&1,ue,se,$,oe),Te(xe,Ir,dt,Dn,jn),Ue(xe,Dn,jn,Qe),pt=0;pt<3;pt++){var bn,or;for(Ge(J,Sn,Ke,gt,se,pt),Me(xe,Ke,gt,se,pt),Je=0;Je<E.SBMAX_s;Je++){if(or=xe.thm[se].s[Je][pt],or*=P,Gt[pt]>=2||Gt[pt+1]==1){var Zr=pt!=0?pt-1:2,Vt=it(xe.thm[se].s[Je][Zr],or,H*Ct);or=Math.min(or,Vt)}if(Gt[pt]==1){var Zr=pt!=0?pt-1:2,Vt=it(xe.thm[se].s[Je][Zr],or,Z*Ct);or=Math.min(or,Vt)}else if(pt!=0&&Gt[pt-1]==3||pt==0&&xe.nsPsy.lastAttacks[se]==3){var Zr=pt!=2?pt+1:0,Vt=it(xe.thm[se].s[Je][Zr],or,Z*Ct);or=Math.min(or,Vt)}bn=nr[pt*3+3]+nr[pt*3+4]+nr[pt*3+5],nr[pt*3+5]*6<bn&&(or*=.5,nr[pt*3+4]*6<bn&&(or*=.5)),xe.thm[se].s[Je][pt]=or}}for(xe.nsPsy.lastAttacks[se]=Gt[2],lt=0,ie=0;ie<xe.npart_l;ie++){for(var wr=xe.s3ind[ie][0],En=dt[wr]*v[Qe[wr]],kr=xe.s3_ll[lt++]*En;++wr<=xe.s3ind[ie][1];)En=dt[wr]*v[Qe[wr]],kr=G(kr,xe.s3_ll[lt++]*En,wr,wr-ie,xe,0);kr*=.158489319246111,xe.blocktype_old[se&1]==E.SHORT_TYPE?gt[ie]=kr:gt[ie]=it(Math.min(kr,Math.min(A*xe.nb_1[se][ie],L*xe.nb_2[se][ie])),kr,Ct),xe.nb_2[se][ie]=xe.nb_1[se][ie],xe.nb_1[se][ie]=kr}for(;ie<=E.CBANDS;++ie)dt[ie]=0,gt[ie]=0;Be(xe,dt,gt,se)}if((J.mode==MPEGMode.STEREO||J.mode==MPEGMode.JOINT_STEREO)&&J.interChRatio>0&&re(J,J.interChRatio),J.mode==MPEGMode.JOINT_STEREO){var an;ae(xe),an=J.msfix,Math.abs(an)>0&&be(xe,an,J.ATHlower*xe.ATH.adjust)}for(Ye(J,ve,Le,Oe),se=0;se<ke;se++){var Fr,Cr=0,Qr,Er;se>1?(Fr=Se,Cr=-2,Qr=E.NORM_TYPE,(Le[0]==E.SHORT_TYPE||Le[1]==E.SHORT_TYPE)&&(Qr=E.SHORT_TYPE),Er=ne[ue][se-2]):(Fr=pe,Cr=0,Qr=Le[se],Er=ye[ue][se]),Qr==E.SHORT_TYPE?Fr[Cr+se]=C(Er,xe.masking_lower):Fr[Cr+se]=Ne(Er,xe.masking_lower),J.analysis&&(xe.pinfo.pe[ue][se]=Fr[Cr+se])}return 0};function De(J,$,oe,ue,ye,ne,pe,Se){var ge=J.internal_flags;if(ue<2)O.fft_long(ge,pe[Se],ue,$,oe);else if(ue==2)for(var Le=E.BLKSIZE-1;Le>=0;--Le){var xe=pe[Se+0][Le],Pe=pe[Se+1][Le];pe[Se+0][Le]=(xe+Pe)*m.SQRT2*.5,pe[Se+1][Le]=(xe-Pe)*m.SQRT2*.5}ne[0]=pe[Se+0][0],ne[0]*=ne[0];for(var Le=E.BLKSIZE/2-1;Le>=0;--Le){var ot=pe[Se+0][E.BLKSIZE/2-Le],dt=pe[Se+0][E.BLKSIZE/2+Le];ne[E.BLKSIZE/2-Le]=(ot*ot+dt*dt)*.5}{for(var Ke=0,Le=11;Le<E.HBLKSIZE;Le++)Ke+=ne[Le];ge.tot_ener[ue]=Ke}if(J.analysis){for(var Le=0;Le<E.HBLKSIZE;Le++)ge.pinfo.energy[ye][ue][Le]=ge.pinfo.energy_save[ue][Le],ge.pinfo.energy_save[ue][Le]=ne[Le];ge.pinfo.pe[ye][ue]=ge.pe[ue]}}function ze(J,$,oe,ue,ye,ne,pe,Se){var ge=J.internal_flags;if(ye==0&&ue<2&&O.fft_short(ge,pe[Se],ue,$,oe),ue==2)for(var Le=E.BLKSIZE_s-1;Le>=0;--Le){var xe=pe[Se+0][ye][Le],Pe=pe[Se+1][ye][Le];pe[Se+0][ye][Le]=(xe+Pe)*m.SQRT2*.5,pe[Se+1][ye][Le]=(xe-Pe)*m.SQRT2*.5}ne[ye][0]=pe[Se+0][ye][0],ne[ye][0]*=ne[ye][0];for(var Le=E.BLKSIZE_s/2-1;Le>=0;--Le){var ot=pe[Se+0][ye][E.BLKSIZE_s/2-Le],dt=pe[Se+0][ye][E.BLKSIZE_s/2+Le];ne[ye][E.BLKSIZE_s/2-Le]=(ot*ot+dt*dt)*.5}}function Xe(J,$,oe,ue){var ye=J.internal_flags;J.athaa_loudapprox==2&&oe<2&&(ye.loudness_sq[$][oe]=ye.loudness_sq_save[oe],ye.loudness_sq_save[oe]=de(ue,ye))}var Ze=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function Fe(J,$,oe,ue,ye,ne,pe,Se,ge,Le){for(var xe=S([2,576]),Pe=J.internal_flags,ot=Pe.channels_out,dt=J.mode==MPEGMode.JOINT_STEREO?4:ot,Ke=0;Ke<ot;Ke++){firbuf=$[Ke];var gt=oe+576-350-ee+192;R(Ze.length==(ee-1)/2);for(var Oe=0;Oe<576;Oe++){var ve,ke;ve=firbuf[gt+Oe+10],ke=0;for(var se=0;se<(ee-1)/2-1;se+=2)ve+=Ze[se]*(firbuf[gt+Oe+se]+firbuf[gt+Oe+ee-se]),ke+=Ze[se+1]*(firbuf[gt+Oe+se+1]+firbuf[gt+Oe+ee-se-1]);xe[Ke][Oe]=ve+ke}ye[ue][Ke].en.assign(Pe.en[Ke]),ye[ue][Ke].thm.assign(Pe.thm[Ke]),dt>2&&(ne[ue][Ke].en.assign(Pe.en[Ke+2]),ne[ue][Ke].thm.assign(Pe.thm[Ke+2]))}for(var Ke=0;Ke<dt;Ke++){var ie=f(12),me=f(12),qe=[0,0,0,0],lt=xe[Ke&1],Je=0,pt=Ke==3?Pe.nsPsy.attackthre_s:Pe.nsPsy.attackthre,Et=1;if(Ke==2)for(var Oe=0,se=576;se>0;++Oe,--se){var Ct=xe[0][Oe],Qe=xe[1][Oe];xe[0][Oe]=Ct+Qe,xe[1][Oe]=Ct-Qe}for(var Oe=0;Oe<3;Oe++)me[Oe]=Pe.nsPsy.last_en_subshort[Ke][Oe+6],R(Pe.nsPsy.last_en_subshort[Ke][Oe+4]>0),ie[Oe]=me[Oe]/Pe.nsPsy.last_en_subshort[Ke][Oe+4],qe[0]+=me[Oe];for(var Oe=0;Oe<9;Oe++){for(var wt=Je+64,Nt=1;Je<wt;Je++)Nt<Math.abs(lt[Je])&&(Nt=Math.abs(lt[Je]));Pe.nsPsy.last_en_subshort[Ke][Oe]=me[Oe+3]=Nt,qe[1+Oe/3]+=Nt,Nt>me[Oe+3-2]?(R(me[Oe+3-2]>0),Nt=Nt/me[Oe+3-2]):me[Oe+3-2]>Nt*10?(R(Nt>0),Nt=me[Oe+3-2]/(Nt*10)):Nt=0,ie[Oe+3]=Nt}for(var Oe=0;Oe<3;++Oe){var $t=me[Oe*3+3]+me[Oe*3+4]+me[Oe*3+5],tr=1;me[Oe*3+5]*6<$t&&(tr*=.5,me[Oe*3+4]*6<$t&&(tr*=.5)),Se[Ke][Oe]=tr}if(J.analysis){for(var rr=ie[0],Oe=1;Oe<12;Oe++)rr<ie[Oe]&&(rr=ie[Oe]);Pe.pinfo.ers[ue][Ke]=Pe.pinfo.ers_save[Ke],Pe.pinfo.ers_save[Ke]=rr}for(var Oe=0;Oe<12;Oe++)ge[Ke][Oe/3]==0&&ie[Oe]>pt&&(ge[Ke][Oe/3]=Oe%3+1);for(var Oe=1;Oe<4;Oe++){var dr=qe[Oe-1],hr=qe[Oe],nr=Math.max(dr,hr);nr<4e4&&dr<1.7*hr&&hr<1.7*dr&&(Oe==1&&ge[Ke][0]<=ge[Ke][Oe]&&(ge[Ke][0]=0),ge[Ke][Oe]=0)}ge[Ke][0]<=Pe.nsPsy.lastAttacks[Ke]&&(ge[Ke][0]=0),(Pe.nsPsy.lastAttacks[Ke]==3||ge[Ke][0]+ge[Ke][1]+ge[Ke][2]+ge[Ke][3]!=0)&&(Et=0,ge[Ke][1]!=0&&ge[Ke][0]!=0&&(ge[Ke][1]=0),ge[Ke][2]!=0&&ge[Ke][1]!=0&&(ge[Ke][2]=0),ge[Ke][3]!=0&&ge[Ke][2]!=0&&(ge[Ke][3]=0)),Ke<2?Le[Ke]=Et:Et==0&&(Le[0]=Le[1]=0),pe[Ke]=Pe.tot_ener[Ke]}}function rt(J,$,oe){if(oe==0)for(var ue=0;ue<J.npart_s;ue++)J.nb_s2[$][ue]=J.nb_s1[$][ue],J.nb_s1[$][ue]=0}function vt(J,$){for(var oe=0;oe<J.npart_l;oe++)J.nb_2[$][oe]=J.nb_1[$][oe],J.nb_1[$][oe]=0}function at(J,$,oe,ue){var ye=v.length-1,ne=0,pe=oe[ne]+oe[ne+1];if(R(pe>=0),pe>0){var Se=$[ne];Se<$[ne+1]&&(Se=$[ne+1]),R(J.numlines_s[ne]+J.numlines_s[ne+1]-1>0),pe=20*(Se*2-pe)/(pe*(J.numlines_s[ne]+J.numlines_s[ne+1]-1));var ge=0|pe;ge>ye&&(ge=ye),ue[ne]=ge}else ue[ne]=0;for(ne=1;ne<J.npart_s-1;ne++)if(pe=oe[ne-1]+oe[ne]+oe[ne+1],R(ne+1<J.npart_s),R(pe>=0),pe>0){var Se=$[ne-1];Se<$[ne]&&(Se=$[ne]),Se<$[ne+1]&&(Se=$[ne+1]),R(J.numlines_s[ne-1]+J.numlines_s[ne]+J.numlines_s[ne+1]-1>0),pe=20*(Se*3-pe)/(pe*(J.numlines_s[ne-1]+J.numlines_s[ne]+J.numlines_s[ne+1]-1));var ge=0|pe;ge>ye&&(ge=ye),ue[ne]=ge}else ue[ne]=0;if(R(ne>0),R(ne==J.npart_s-1),pe=oe[ne-1]+oe[ne],R(pe>=0),pe>0){var Se=$[ne-1];Se<$[ne]&&(Se=$[ne]),R(J.numlines_s[ne-1]+J.numlines_s[ne]-1>0),pe=20*(Se*2-pe)/(pe*(J.numlines_s[ne-1]+J.numlines_s[ne]-1));var ge=0|pe;ge>ye&&(ge=ye),ue[ne]=ge}else ue[ne]=0;R(ne==J.npart_s-1)}function He(J,$,oe,ue,ye,ne){var pe=J.internal_flags,Se=new float[E.CBANDS],ge=f(E.CBANDS),Le,xe,Pe,ot=new int[E.CBANDS];for(Pe=xe=0;Pe<pe.npart_s;++Pe){var dt=0,Ke=0,gt=pe.numlines_s[Pe];for(Le=0;Le<gt;++Le,++xe){var Oe=$[ne][xe];dt+=Oe,Ke<Oe&&(Ke=Oe)}oe[Pe]=dt,R(dt>=0),Se[Pe]=Ke,R(gt>0),ge[Pe]=dt/gt,R(ge[Pe]>=0)}for(R(Pe==pe.npart_s),R(xe==129);Pe<E.CBANDS;++Pe)Se[Pe]=0,ge[Pe]=0;for(at(pe,Se,ge,ot),xe=Pe=0;Pe<pe.npart_s;Pe++){var ve=pe.s3ind_s[Pe][0],ke=pe.s3ind_s[Pe][1],se,ie,me,qe,lt;for(se=ot[ve],ie=1,qe=pe.s3_ss[xe]*oe[ve]*v[ot[ve]],++xe,++ve;ve<=ke;)se+=ot[ve],ie+=1,me=pe.s3_ss[xe]*oe[ve]*v[ot[ve]],qe=j(qe,me,ve-Pe),++xe,++ve;se=(1+2*se)/(2*ie),lt=v[se]*.5,qe*=lt,ue[Pe]=qe,pe.nb_s2[ye][Pe]=pe.nb_s1[ye][Pe],pe.nb_s1[ye][Pe]=qe,me=Se[Pe],me*=pe.minval_s[Pe],me*=lt,ue[Pe]>me&&(ue[Pe]=me),pe.masking_lower>1&&(ue[Pe]*=pe.masking_lower),ue[Pe]>oe[Pe]&&(ue[Pe]=oe[Pe]),pe.masking_lower<1&&(ue[Pe]*=pe.masking_lower),R(ue[Pe]>=0)}for(;Pe<E.CBANDS;++Pe)oe[Pe]=0,ue[Pe]=0}function et(J,$,oe,ue,ye){var ne=f(E.CBANDS),pe=f(E.CBANDS),Se=g(E.CBANDS+2),ge;Te(J,$,oe,ne,pe),Ue(J,ne,pe,Se);var Le=0;for(ge=0;ge<J.npart_l;ge++){var xe,Pe,ot,dt,Ke=J.s3ind[ge][0],gt=J.s3ind[ge][1],Oe=0,ve=0;for(Oe=Se[Ke],ve+=1,Pe=J.s3_ll[Le]*oe[Ke]*v[Se[Ke]],++Le,++Ke;Ke<=gt;)Oe+=Se[Ke],ve+=1,xe=J.s3_ll[Le]*oe[Ke]*v[Se[Ke]],dt=j(Pe,xe,Ke-ge),Pe=dt,++Le,++Ke;if(Oe=(1+2*Oe)/(2*ve),ot=v[Oe]*.5,Pe*=ot,J.blocktype_old[ye&1]==E.SHORT_TYPE){var ke=A*J.nb_1[ye][ge];ke>0?ue[ge]=Math.min(Pe,ke):ue[ge]=Math.min(Pe,oe[ge]*Z)}else{var se=L*J.nb_2[ye][ge],ie=A*J.nb_1[ye][ge],ke;se<=0&&(se=Pe),ie<=0&&(ie=Pe),J.blocktype_old[ye&1]==E.NORM_TYPE?ke=Math.min(ie,se):ke=ie,ue[ge]=Math.min(Pe,ke)}J.nb_2[ye][ge]=J.nb_1[ye][ge],J.nb_1[ye][ge]=Pe,xe=ne[ge],xe*=J.minval_l[ge],xe*=ot,ue[ge]>xe&&(ue[ge]=xe),J.masking_lower>1&&(ue[ge]*=J.masking_lower),ue[ge]>oe[ge]&&(ue[ge]=oe[ge]),J.masking_lower<1&&(ue[ge]*=J.masking_lower),R(ue[ge]>=0)}for(;ge<E.CBANDS;++ge)oe[ge]=0,ue[ge]=0}function $e(J,$){var oe=J.internal_flags;J.short_blocks==o.short_block_coupled&&!($[0]!=0&&$[1]!=0)&&($[0]=$[1]=0);for(var ue=0;ue<oe.channels_out;ue++)J.short_blocks==o.short_block_dispensed&&($[ue]=1),J.short_blocks==o.short_block_forced&&($[ue]=0)}function ct(J,$,oe){for(var ue=J.internal_flags,ye=0;ye<ue.channels_out;ye++){var ne=E.NORM_TYPE;$[ye]!=0?(R(ue.blocktype_old[ye]!=E.START_TYPE),ue.blocktype_old[ye]==E.SHORT_TYPE&&(ne=E.STOP_TYPE)):(ne=E.SHORT_TYPE,ue.blocktype_old[ye]==E.NORM_TYPE&&(ue.blocktype_old[ye]=E.START_TYPE),ue.blocktype_old[ye]==E.STOP_TYPE&&(ue.blocktype_old[ye]=E.SHORT_TYPE)),oe[ye]=ue.blocktype_old[ye],ue.blocktype_old[ye]=ne}}function St(J,$,oe,ue,ye,ne,pe){for(var Se=ne*2,ge=ne>0?Math.pow(10,ye):1,Le,xe,Pe=0;Pe<pe;++Pe){var ot=J[2][Pe],dt=J[3][Pe],Ke=$[0][Pe],gt=$[1][Pe],Oe=$[2][Pe],ve=$[3][Pe];if(Ke<=1.58*gt&&gt<=1.58*Ke){var ke=oe[Pe]*dt,se=oe[Pe]*ot;xe=Math.max(Oe,Math.min(ve,ke)),Le=Math.max(ve,Math.min(Oe,se))}else xe=Oe,Le=ve;if(ne>0){var ie,me,qe=ue[Pe]*ge;if(ie=Math.min(Math.max(Ke,qe),Math.max(gt,qe)),Oe=Math.max(xe,qe),ve=Math.max(Le,qe),me=Oe+ve,me>0&&ie*Se<me){var lt=ie*Se/me;Oe*=lt,ve*=lt,R(me>0)}xe=Math.min(Oe,xe),Le=Math.min(ve,Le)}xe>ot&&(xe=ot),Le>dt&&(Le=dt),$[2][Pe]=xe,$[3][Pe]=Le}}this.L3psycho_anal_vbr=function(J,$,oe,ue,ye,ne,pe,Se,ge,Le){var xe=J.internal_flags,Pe,ot,dt=f(E.HBLKSIZE),Ke=S([3,E.HBLKSIZE_s]),gt=S([2,E.BLKSIZE]),Oe=S([2,3,E.BLKSIZE_s]),ve=S([4,E.CBANDS]),ke=S([4,E.CBANDS]),se=S([4,3]),ie=.6,me=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],qe=g(2),lt=J.mode==MPEGMode.JOINT_STEREO?4:xe.channels_out;Fe(J,$,oe,ue,ye,ne,ge,se,me,qe),$e(J,qe);{for(var Je=0;Je<lt;Je++){var pt=Je&1;Pe=gt,De(J,$,oe,Je,ue,dt,Pe,pt),Xe(J,ue,Je,dt),qe[pt]!=0?et(xe,dt,ve[Je],ke[Je],Je):vt(xe,Je)}qe[0]+qe[1]==2&&J.mode==MPEGMode.JOINT_STEREO&&St(ve,ke,xe.mld_cb_l,xe.ATH.cb_l,J.ATHlower*xe.ATH.adjust,J.msfix,xe.npart_l);for(var Je=0;Je<lt;Je++){var pt=Je&1;qe[pt]!=0&&Be(xe,ve[Je],ke[Je],Je)}}{for(var Et=0;Et<3;Et++){for(var Je=0;Je<lt;++Je){var pt=Je&1;qe[pt]!=0?rt(xe,Je,Et):(ot=Oe,ze(J,$,oe,Je,Et,Ke,ot,pt),He(J,Ke,ve[Je],ke[Je],Je,Et))}qe[0]+qe[1]==0&&J.mode==MPEGMode.JOINT_STEREO&&St(ve,ke,xe.mld_cb_s,xe.ATH.cb_s,J.ATHlower*xe.ATH.adjust,J.msfix,xe.npart_s);for(var Je=0;Je<lt;++Je){var pt=Je&1;qe[pt]==0&&Me(xe,ve[Je],ke[Je],Je,Et)}}for(var Je=0;Je<lt;Je++){var pt=Je&1;if(qe[pt]==0)for(var Ct=0;Ct<E.SBMAX_s;Ct++){for(var Qe=f(3),Et=0;Et<3;Et++){var wt=xe.thm[Je].s[Ct][Et];if(wt*=P,me[Je][Et]>=2||me[Je][Et+1]==1){var Nt=Et!=0?Et-1:2,$t=it(xe.thm[Je].s[Ct][Nt],wt,H*ie);wt=Math.min(wt,$t)}else if(me[Je][Et]==1){var Nt=Et!=0?Et-1:2,$t=it(xe.thm[Je].s[Ct][Nt],wt,Z*ie);wt=Math.min(wt,$t)}else if(Et!=0&&me[Je][Et-1]==3||Et==0&&xe.nsPsy.lastAttacks[Je]==3){var Nt=Et!=2?Et+1:0,$t=it(xe.thm[Je].s[Ct][Nt],wt,Z*ie);wt=Math.min(wt,$t)}wt*=se[Je][Et],Qe[Et]=wt}for(var Et=0;Et<3;Et++)xe.thm[Je].s[Ct][Et]=Qe[Et]}}}for(var Je=0;Je<lt;Je++)xe.nsPsy.lastAttacks[Je]=me[Je][2];ct(J,qe,Le);for(var Je=0;Je<lt;Je++){var tr,rr,dr,hr;Je>1?(tr=Se,rr=-2,dr=E.NORM_TYPE,(Le[0]==E.SHORT_TYPE||Le[1]==E.SHORT_TYPE)&&(dr=E.SHORT_TYPE),hr=ne[ue][Je-2]):(tr=pe,rr=0,dr=Le[Je],hr=ye[ue][Je]),dr==E.SHORT_TYPE?tr[rr+Je]=C(hr,xe.masking_lower):tr[rr+Je]=Ne(hr,xe.masking_lower),J.analysis&&(xe.pinfo.pe[ue][Je]=tr[rr+Je])}return 0};function It(J,$){var oe=J,ue;return oe>=0?ue=-oe*27:ue=oe*$,ue<=-72?0:Math.exp(ue*te)}function jt(J){var $=0,oe=0;{var ue=0,ye,ne;for(ue=0;It(ue,J)>1e-20;ue-=1);for(ye=ue,ne=0;Math.abs(ne-ye)>1e-12;)ue=(ne+ye)/2,It(ue,J)>0?ne=ue:ye=ue;$=ye}{var ue=0,ye,ne;for(ue=0;It(ue,J)>1e-20;ue+=1);for(ye=0,ne=ue;Math.abs(ne-ye)>1e-12;)ue=(ne+ye)/2,It(ue,J)>0?ye=ue:ne=ue;oe=ne}{var pe=0,Se=1e3,ge;for(ge=0;ge<=Se;++ge){var ue=$+ge*(oe-$)/Se,Le=It(ue,J);pe+=Le}{var xe=(Se+1)/(pe*(oe-$));return xe}}}function Xt(J){var $,oe,ue,ye;return $=J,$>=0?$*=3:$*=1.5,$>=.5&&$<=2.5?(ye=$-.5,oe=8*(ye*ye-2*ye)):oe=0,$+=.474,ue=15.811389+7.5*$-17.5*Math.sqrt(1+$*$),ue<=-60?0:($=Math.exp((oe+ue)*te),$/=.6609193,$)}function Pt(J){return J<0&&(J=0),J=J*.001,13*Math.atan(.76*J)+3.5*Math.atan(J*J/56.25)}function Kt(J,$,oe,ue,ye,ne,pe,Se,ge,Le,xe,Pe){var ot=f(E.CBANDS+1),dt=Se/(Pe>15?2*576:2*192),Ke=g(E.HBLKSIZE),gt;Se/=ge;var Oe=0,ve=0;for(gt=0;gt<E.CBANDS;gt++){var ke,se;for(ke=Pt(Se*Oe),ot[gt]=Se*Oe,se=Oe;Pt(Se*se)-ke<F&&se<=ge/2;se++);for(J[gt]=se-Oe,ve=gt+1;Oe<se;)R(Oe<E.HBLKSIZE),Ke[Oe++]=gt;if(Oe>ge/2){Oe=ge/2,++gt;break}}R(gt<E.CBANDS),ot[gt]=Se*Oe;for(var ie=0;ie<Pe;ie++){var me,qe,lt,Je,pt;lt=Le[ie],Je=Le[ie+1],me=0|Math.floor(.5+xe*(lt-.5)),me<0&&(me=0),qe=0|Math.floor(.5+xe*(Je-.5)),qe>ge/2&&(qe=ge/2),oe[ie]=(Ke[me]+Ke[qe])/2,$[ie]=Ke[qe];var Et=dt*Je;pe[ie]=(Et-ot[$[ie]])/(ot[$[ie]+1]-ot[$[ie]]),pe[ie]<0?pe[ie]=0:pe[ie]>1&&(pe[ie]=1),pt=Pt(Se*Le[ie]*xe),pt=Math.min(pt,15.5)/15.5,ne[ie]=Math.pow(10,1.25*(1-Math.cos(Math.PI*pt))-2.5)}Oe=0;for(var Ct=0;Ct<ve;Ct++){var Qe=J[Ct],ke,wt;ke=Pt(Se*Oe),wt=Pt(Se*(Oe+Qe-1)),ue[Ct]=.5*(ke+wt),ke=Pt(Se*(Oe-.5)),wt=Pt(Se*(Oe+Qe-.5)),ye[Ct]=wt-ke,Oe+=Qe}return ve}function ar(J,$,oe,ue,ye,ne){var pe=S([E.CBANDS,E.CBANDS]),Se,ge=0;if(ne)for(var Le=0;Le<$;Le++)for(Se=0;Se<$;Se++){var xe=Xt(oe[Le]-oe[Se])*ue[Se];pe[Le][Se]=xe*ye[Le]}else for(Se=0;Se<$;Se++)for(var Pe=15+Math.min(21/oe[Se],12),ot=jt(Pe),Le=0;Le<$;Le++){var xe=ot*It(oe[Le]-oe[Se],Pe)*ue[Se];pe[Le][Se]=xe*ye[Le]}for(var Le=0;Le<$;Le++){for(Se=0;Se<$&&!(pe[Le][Se]>0);Se++);for(J[Le][0]=Se,Se=$-1;Se>0&&!(pe[Le][Se]>0);Se--);J[Le][1]=Se,ge+=J[Le][1]-J[Le][0]+1}for(var dt=f(ge),Ke=0,Le=0;Le<$;Le++)for(Se=J[Le][0];Se<=J[Le][1];Se++)dt[Ke++]=pe[Le][Se];return dt}function yr(J){var $=Pt(J);return $=Math.min($,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*$))-2.5)}this.psymodel_init=function(J){var $=J.internal_flags,oe,ue=!0,ye=13,ne=24,pe=0,Se=0,ge=-8.25,Le=-4.5,xe=f(E.CBANDS),Pe=f(E.CBANDS),ot=f(E.CBANDS),dt=J.out_samplerate;switch(J.experimentalZ){default:case 0:ue=!0;break;case 1:ue=!(J.VBR==s.vbr_mtrh||J.VBR==s.vbr_mt);break;case 2:ue=!1;break;case 3:ye=8,pe=-1.75,Se=-.0125,ge=-8.25,Le=-2.25;break}for($.ms_ener_ratio_old=.25,$.blocktype_old[0]=$.blocktype_old[1]=E.NORM_TYPE,oe=0;oe<4;++oe){for(var Oe=0;Oe<E.CBANDS;++Oe)$.nb_1[oe][Oe]=1e20,$.nb_2[oe][Oe]=1e20,$.nb_s1[oe][Oe]=$.nb_s2[oe][Oe]=1;for(var Ke=0;Ke<E.SBMAX_l;Ke++)$.en[oe].l[Ke]=1e20,$.thm[oe].l[Ke]=1e20;for(var Oe=0;Oe<3;++Oe){for(var Ke=0;Ke<E.SBMAX_s;Ke++)$.en[oe].s[Ke][Oe]=1e20,$.thm[oe].s[Ke][Oe]=1e20;$.nsPsy.lastAttacks[oe]=0}for(var Oe=0;Oe<9;Oe++)$.nsPsy.last_en_subshort[oe][Oe]=10}for($.loudness_sq_save[0]=$.loudness_sq_save[1]=0,$.npart_l=Kt($.numlines_l,$.bo_l,$.bm_l,xe,Pe,$.mld_l,$.PSY.bo_l_weight,dt,E.BLKSIZE,$.scalefac_band.l,E.BLKSIZE/1152,E.SBMAX_l),R($.npart_l<E.CBANDS),oe=0;oe<$.npart_l;oe++){var gt=pe;xe[oe]>=ye&&(gt=Se*(xe[oe]-ye)/(ne-ye)+pe*(ne-xe[oe])/(ne-ye)),ot[oe]=Math.pow(10,gt/10),$.numlines_l[oe]>0?$.rnumlines_l[oe]=1/$.numlines_l[oe]:$.rnumlines_l[oe]=0}$.s3_ll=ar($.s3ind,$.npart_l,xe,Pe,ot,ue);var Oe=0;for(oe=0;oe<$.npart_l;oe++){var ve;ve=i.MAX_VALUE;for(var ke=0;ke<$.numlines_l[oe];ke++,Oe++){var se=dt*Oe/(1e3*E.BLKSIZE),ie;ie=this.ATHformula(se*1e3,J)-20,ie=Math.pow(10,.1*ie),ie*=$.numlines_l[oe],ve>ie&&(ve=ie)}$.ATH.cb_l[oe]=ve,ve=-20+xe[oe]*20/10,ve>6&&(ve=100),ve<-15&&(ve=-15),ve-=8,$.minval_l[oe]=Math.pow(10,ve/10)*$.numlines_l[oe]}for($.npart_s=Kt($.numlines_s,$.bo_s,$.bm_s,xe,Pe,$.mld_s,$.PSY.bo_s_weight,dt,E.BLKSIZE_s,$.scalefac_band.s,E.BLKSIZE_s/384,E.SBMAX_s),R($.npart_s<E.CBANDS),Oe=0,oe=0;oe<$.npart_s;oe++){var ve,gt=ge;xe[oe]>=ye&&(gt=Le*(xe[oe]-ye)/(ne-ye)+ge*(ne-xe[oe])/(ne-ye)),ot[oe]=Math.pow(10,gt/10),ve=i.MAX_VALUE;for(var ke=0;ke<$.numlines_s[oe];ke++,Oe++){var se=dt*Oe/(1e3*E.BLKSIZE_s),ie;ie=this.ATHformula(se*1e3,J)-20,ie=Math.pow(10,.1*ie),ie*=$.numlines_s[oe],ve>ie&&(ve=ie)}$.ATH.cb_s[oe]=ve,ve=-7+xe[oe]*7/12,xe[oe]>12&&(ve*=1+Math.log(1+ve)*3.1),xe[oe]<12&&(ve*=1+Math.log(1-ve)*2.3),ve<-15&&(ve=-15),ve-=8,$.minval_s[oe]=Math.pow(10,ve/10)*$.numlines_s[oe]}$.s3_ss=ar($.s3ind_s,$.npart_s,xe,Pe,ot,ue),u(),O.init_fft($),$.decay=Math.exp(-1*M/(l*dt/192));{var me;me=Q,(J.exp_nspsytune&2)!=0&&(me=1),Math.abs(J.msfix)>0&&(me=J.msfix),J.msfix=me;for(var qe=0;qe<$.npart_l;qe++)$.s3ind[qe][1]>$.npart_l-1&&($.s3ind[qe][1]=$.npart_l-1)}var lt=576*$.mode_gr/dt;if($.ATH.decay=Math.pow(10,-1.2*lt),$.ATH.adjust=.01,$.ATH.adjustLimit=1,R($.bo_l[E.SBMAX_l-1]<=$.npart_l),R($.bo_s[E.SBMAX_s-1]<=$.npart_s),J.ATHtype!=-1){var se,Je=J.out_samplerate/E.BLKSIZE,pt=0;for(se=0,oe=0;oe<E.BLKSIZE/2;++oe)se+=Je,$.ATH.eql_w[oe]=1/Math.pow(10,this.ATHformula(se,J)/10),pt+=$.ATH.eql_w[oe];for(pt=1/pt,oe=E.BLKSIZE/2;--oe>=0;)$.ATH.eql_w[oe]*=pt}{for(var qe=Oe=0;qe<$.npart_s;++qe)for(oe=0;oe<$.numlines_s[qe];++oe)++Oe;R(Oe==129);for(var qe=Oe=0;qe<$.npart_l;++qe)for(oe=0;oe<$.numlines_l[qe];++oe)++Oe;R(Oe==513)}for(Oe=0,oe=0;oe<$.npart_l;oe++){var se=dt*(Oe+$.numlines_l[oe]/2)/(1*E.BLKSIZE);$.mld_cb_l[oe]=yr(se),Oe+=$.numlines_l[oe]}for(;oe<E.CBANDS;++oe)$.mld_cb_l[oe]=1;for(Oe=0,oe=0;oe<$.npart_s;oe++){var se=dt*(Oe+$.numlines_s[oe]/2)/(1*E.BLKSIZE_s);$.mld_cb_s[oe]=yr(se),Oe+=$.numlines_s[oe]}for(;oe<E.CBANDS;++oe)$.mld_cb_s[oe]=1;return 0};function er(J,$){J<-.3&&(J=3410),J/=1e3,J=Math.max(.1,J);var oe=3.64*Math.pow(J,-.8)-6.8*Math.exp(-.6*Math.pow(J-3.4,2))+6*Math.exp(-.15*Math.pow(J-8.7,2))+(.6+.04*$)*.001*Math.pow(J,4);return oe}this.ATHformula=function(J,$){var oe;switch($.ATHtype){case 0:oe=er(J,9);break;case 1:oe=er(J,-1);break;case 2:oe=er(J,0);break;case 3:oe=er(J,1)+6;break;case 4:oe=er(J,$.ATHcurve);break;default:oe=er(J,0);break}return oe}}h.exports=p},9833:(h,T,e)=>{var n=e(935),s=n.System,i=n.VbrMode;n.Float,n.ShortBlock;var o=n.Util,m=n.Arrays;n.new_array_n,n.new_byte,n.new_double;var d=n.new_float;n.new_float_n,n.new_int,n.new_int_n;var f=n.assert,S=e(7095),g=e(2711),R=e(3449),x=e(687),E=e(9438),p=e(354);function O(){var M;this.rv=null;var A;this.qupvt=null;var L,V=new S,K;this.setModules=function(Y,b,D,X){M=Y,A=b,this.rv=b,L=D,this.qupvt=D,K=X,V.setModules(L,K)},this.ms_convert=function(Y,b){for(var D=0;D<576;++D){var X=Y.tt[b][0].xr[D],q=Y.tt[b][1].xr[D];Y.tt[b][0].xr[D]=(X+q)*(o.SQRT2*.5),Y.tt[b][1].xr[D]=(X-q)*(o.SQRT2*.5)}};function F(Y,b,D,X){X=0;for(var q=0;q<=D;++q){var U=Math.abs(Y.xr[q]);X+=U,b[q]=Math.sqrt(U*Math.sqrt(U)),b[q]>Y.xrpow_max&&(Y.xrpow_max=b[q])}return X}this.init_xrpow=function(Y,b,D){var X=0,q=0|b.max_nonzero_coeff;if(f(D!=null),b.xrpow_max=0,f(0<=q&&q<=575),m.fill(D,q,576,0),X=F(b,D,q,X),X>1e-20){var U=0;(Y.substep_shaping&2)!=0&&(U=1);for(var v=0;v<b.psymax;v++)Y.pseudohalf[v]=U;return!0}return m.fill(b.l3_enc,0,576,0),!1};function k(Y,b){var D=Y.ATH,X=b.xr;if(b.block_type!=x.SHORT_TYPE)for(var q=!1,U=x.PSFB21-1;U>=0&&!q;U--){var v=Y.scalefac_band.psfb21[U],u=Y.scalefac_band.psfb21[U+1],c=L.athAdjust(D.adjust,D.psfb21[U],D.floor);Y.nsPsy.longfact[21]>1e-12&&(c*=Y.nsPsy.longfact[21]);for(var y=u-1;y>=v;y--)if(Math.abs(X[y])<c)X[y]=0;else{q=!0;break}}else for(var B=0;B<3;B++)for(var q=!1,U=x.PSFB12-1;U>=0&&!q;U--){var v=Y.scalefac_band.s[12]*3+(Y.scalefac_band.s[13]-Y.scalefac_band.s[12])*B+(Y.scalefac_band.psfb12[U]-Y.scalefac_band.psfb12[0]),u=v+(Y.scalefac_band.psfb12[U+1]-Y.scalefac_band.psfb12[U]),G=L.athAdjust(D.adjust,D.psfb12[U],D.floor);Y.nsPsy.shortfact[12]>1e-12&&(G*=Y.nsPsy.shortfact[12]);for(var y=u-1;y>=v;y--)if(Math.abs(X[y])<G)X[y]=0;else{q=!0;break}}}this.init_outer_loop=function(Y,b){b.part2_3_length=0,b.big_values=0,b.count1=0,b.global_gain=210,b.scalefac_compress=0,b.table_select[0]=0,b.table_select[1]=0,b.table_select[2]=0,b.subblock_gain[0]=0,b.subblock_gain[1]=0,b.subblock_gain[2]=0,b.subblock_gain[3]=0,b.region0_count=0,b.region1_count=0,b.preflag=0,b.scalefac_scale=0,b.count1table_select=0,b.part2_length=0,b.sfb_lmax=x.SBPSY_l,b.sfb_smin=x.SBPSY_s,b.psy_lmax=Y.sfb21_extra?x.SBMAX_l:x.SBPSY_l,b.psymax=b.psy_lmax,b.sfbmax=b.sfb_lmax,b.sfbdivide=11;for(var D=0;D<x.SBMAX_l;D++)b.width[D]=Y.scalefac_band.l[D+1]-Y.scalefac_band.l[D],b.window[D]=3;if(b.block_type==x.SHORT_TYPE){var X=d(576);b.sfb_smin=0,b.sfb_lmax=0,b.mixed_block_flag!=0&&(b.sfb_smin=3,b.sfb_lmax=Y.mode_gr*2+4),b.psymax=b.sfb_lmax+3*((Y.sfb21_extra?x.SBMAX_s:x.SBPSY_s)-b.sfb_smin),b.sfbmax=b.sfb_lmax+3*(x.SBPSY_s-b.sfb_smin),b.sfbdivide=b.sfbmax-18,b.psy_lmax=b.sfb_lmax;var q=Y.scalefac_band.l[b.sfb_lmax];s.arraycopy(b.xr,0,X,0,576);for(var D=b.sfb_smin;D<x.SBMAX_s;D++)for(var U=Y.scalefac_band.s[D],v=Y.scalefac_band.s[D+1],u=0;u<3;u++)for(var c=U;c<v;c++)b.xr[q++]=X[3*c+u];for(var y=b.sfb_lmax,D=b.sfb_smin;D<x.SBMAX_s;D++)b.width[y]=b.width[y+1]=b.width[y+2]=Y.scalefac_band.s[D+1]-Y.scalefac_band.s[D],b.window[y]=0,b.window[y+1]=1,b.window[y+2]=2,y+=3}b.count1bits=0,b.sfb_partition_table=L.nr_of_sfb_block[0][0],b.slen[0]=0,b.slen[1]=0,b.slen[2]=0,b.slen[3]=0,b.max_nonzero_coeff=575,m.fill(b.scalefac,0),k(Y,b)};function l(Y){this.ordinal=Y}l.BINSEARCH_NONE=new l(0),l.BINSEARCH_UP=new l(1),l.BINSEARCH_DOWN=new l(2);function P(Y,b,D,X,q){var U,v=Y.CurrentStep[X],u=!1,c=Y.OldValue[X],y=l.BINSEARCH_NONE;for(b.global_gain=c,D-=b.part2_length,f(v!=0);;){var B;if(U=K.count_bits(Y,q,b,null),v==1||U==D)break;U>D?(y==l.BINSEARCH_DOWN&&(u=!0),u&&(v/=2),y=l.BINSEARCH_UP,B=v):(y==l.BINSEARCH_UP&&(u=!0),u&&(v/=2),y=l.BINSEARCH_DOWN,B=-v),b.global_gain+=B,b.global_gain<0&&(b.global_gain=0,u=!0),b.global_gain>255&&(b.global_gain=255,u=!0)}for(f(b.global_gain>=0),f(b.global_gain<256);U>D&&b.global_gain<255;)b.global_gain++,U=K.count_bits(Y,q,b,null);return Y.CurrentStep[X]=c-b.global_gain>=4?4:2,Y.OldValue[X]=b.global_gain,b.part2_3_length=U,U}this.trancate_smallspectrums=function(Y,b,D,X){var q=d(p.SFBMAX);if(!((Y.substep_shaping&4)==0&&b.block_type==x.SHORT_TYPE||(Y.substep_shaping&128)!=0)){L.calc_noise(b,D,q,new g,null);for(var v=0;v<576;v++){var U=0;b.l3_enc[v]!=0&&(U=Math.abs(b.xr[v])),X[v]=U}var v=0,u=8;b.block_type==x.SHORT_TYPE&&(u=6);do{var c,y,B,G,W=b.width[u];if(v+=W,!(q[u]>=1)&&(m.sort(X,v-W,W),!BitStream.EQ(X[v-1],0))){c=(1-q[u])*D[u],y=0,G=0;do{var j;for(B=1;G+B<W&&!BitStream.NEQ(X[G+v-W],X[G+v+B-W]);B++);if(j=X[G+v-W]*X[G+v-W]*B,c<j){G!=0&&(y=X[G+v-W-1]);break}c-=j,G+=B}while(G<W);if(!BitStream.EQ(y,0))do Math.abs(b.xr[v-W])<=y&&(b.l3_enc[v-W]=0);while(--W>0)}}while(++u<b.psymax);b.part2_3_length=K.noquant_count_bits(Y,b,null)}};function H(Y){for(var b=0;b<Y.sfbmax;b++)if(Y.scalefac[b]+Y.subblock_gain[Y.window[b]]==0)return!1;return!0}function Z(Y){return o.FAST_LOG10(.368+.632*Y*Y*Y)}function Q(Y,b){for(var D=1e-37,X=0;X<b.psymax;X++)D+=Z(Y[X]);return Math.max(1e-20,D)}function ee(Y,b,D,X,q){var U;switch(Y){default:case 9:{b.over_count>0?(U=D.over_SSD<=b.over_SSD,D.over_SSD==b.over_SSD&&(U=D.bits<b.bits)):U=D.max_noise<0&&D.max_noise*10+D.bits<=b.max_noise*10+b.bits;break}case 0:U=D.over_count<b.over_count||D.over_count==b.over_count&&D.over_noise<b.over_noise||D.over_count==b.over_count&&BitStream.EQ(D.over_noise,b.over_noise)&&D.tot_noise<b.tot_noise;break;case 8:D.max_noise=Q(q,X);case 1:U=D.max_noise<b.max_noise;break;case 2:U=D.tot_noise<b.tot_noise;break;case 3:U=D.tot_noise<b.tot_noise&&D.max_noise<b.max_noise;break;case 4:U=D.max_noise<=0&&b.max_noise>.2||D.max_noise<=0&&b.max_noise<0&&b.max_noise>D.max_noise-.2&&D.tot_noise<b.tot_noise||D.max_noise<=0&&b.max_noise>0&&b.max_noise>D.max_noise-.2&&D.tot_noise<b.tot_noise+b.over_noise||D.max_noise>0&&b.max_noise>-.05&&b.max_noise>D.max_noise-.1&&D.tot_noise+D.over_noise<b.tot_noise+b.over_noise||D.max_noise>0&&b.max_noise>-.1&&b.max_noise>D.max_noise-.15&&D.tot_noise+D.over_noise+D.over_noise<b.tot_noise+b.over_noise+b.over_noise;break;case 5:U=D.over_noise<b.over_noise||BitStream.EQ(D.over_noise,b.over_noise)&&D.tot_noise<b.tot_noise;break;case 6:U=D.over_noise<b.over_noise||BitStream.EQ(D.over_noise,b.over_noise)&&(D.max_noise<b.max_noise||BitStream.EQ(D.max_noise,b.max_noise)&&D.tot_noise<=b.tot_noise);break;case 7:U=D.over_count<b.over_count||D.over_noise<b.over_noise;break}return b.over_count==0&&(U=U&&D.bits<b.bits),U}function te(Y,b,D,X,q){var U=Y.internal_flags,v;b.scalefac_scale==0?v=1.2968395546510096:v=1.6817928305074292;for(var u=0,c=0;c<b.sfbmax;c++)u<D[c]&&(u=D[c]);var y=U.noise_shaping_amp;switch(y==3&&(q?y=2:y=1),y){case 2:break;case 1:u>1?u=Math.pow(u,.5):u*=.95;break;case 0:default:u>1?u=1:u*=.95;break}for(var B=0,c=0;c<b.sfbmax;c++){var G=b.width[c],W;if(B+=G,!(D[c]<u)){if((U.substep_shaping&2)!=0&&(U.pseudohalf[c]=U.pseudohalf[c]==0?1:0,U.pseudohalf[c]==0&&U.noise_shaping_amp==2))return;for(b.scalefac[c]++,W=-G;W<0;W++)X[B+W]*=v,X[B+W]>b.xrpow_max&&(b.xrpow_max=X[B+W]);if(U.noise_shaping_amp==2)return}}}function fe(Y,b){for(var D=1.2968395546510096,X=0,q=0;q<Y.sfbmax;q++){var U=Y.width[q],v=Y.scalefac[q];if(Y.preflag!=0&&(v+=L.pretab[q]),X+=U,(v&1)!=0){v++;for(var u=-U;u<0;u++)b[X+u]*=D,b[X+u]>Y.xrpow_max&&(Y.xrpow_max=b[X+u])}Y.scalefac[q]=v>>1}Y.preflag=0,Y.scalefac_scale=1}function de(Y,b,D){var X,q=b.scalefac;for(X=0;X<b.sfb_lmax;X++)if(q[X]>=16)return!0;for(var U=0;U<3;U++){var v=0,u=0;for(X=b.sfb_lmax+U;X<b.sfbdivide;X+=3)v<q[X]&&(v=q[X]);for(;X<b.sfbmax;X+=3)u<q[X]&&(u=q[X]);if(!(v<16&&u<8)){if(b.subblock_gain[U]>=7)return!0;b.subblock_gain[U]++;var c=Y.scalefac_band.l[b.sfb_lmax];for(X=b.sfb_lmax+U;X<b.sfbmax;X+=3){var y,B=b.width[X],G=q[X];if(f(G>=0),G=G-(4>>b.scalefac_scale),G>=0){q[X]=G,c+=B*3;continue}q[X]=0;{var W=210+(G<<b.scalefac_scale+1);y=L.IPOW20(W)}c+=B*(U+1);for(var j=-B;j<0;j++)D[c+j]*=y,D[c+j]>b.xrpow_max&&(b.xrpow_max=D[c+j]);c+=B*(3-U-1)}{var y=L.IPOW20(202);c+=b.width[X]*(U+1);for(var j=-b.width[X];j<0;j++)D[c+j]*=y,D[c+j]>b.xrpow_max&&(b.xrpow_max=D[c+j])}}}return!1}function _(Y,b,D,X,q){var U=Y.internal_flags;te(Y,b,D,X,q);var v=H(b);return v?!1:(U.mode_gr==2?v=K.scale_bitcount(b):v=K.scale_bitcount_lsf(U,b),v?(U.noise_shaping>1&&(m.fill(U.pseudohalf,0),b.scalefac_scale==0?(fe(b,X),v=!1):b.block_type==x.SHORT_TYPE&&U.subblock_gain>0&&(v=de(U,b,X)||H(b))),v||(U.mode_gr==2?v=K.scale_bitcount(b):v=K.scale_bitcount_lsf(U,b)),!v):!0)}this.outer_loop=function(Y,b,D,X,q,U){var v=Y.internal_flags,u=new E,c=d(576),y=d(p.SFBMAX),B=new g,G,W=new R,j=9999999,re=!1,ae=!1,be=0;if(P(v,b,U,q,X),v.noise_shaping==0)return 100;L.calc_noise(b,D,y,B,W),B.bits=b.part2_3_length,u.assign(b);var Me=0;for(s.arraycopy(X,0,c,0,576);!re;){do{var Be=new g,Ge,Ye=255;if((v.substep_shaping&2)!=0?Ge=20:Ge=3,v.sfb21_extra&&(y[u.sfbmax]>1||u.block_type==x.SHORT_TYPE&&(y[u.sfbmax+1]>1||y[u.sfbmax+2]>1))||!_(Y,u,y,X,ae))break;u.scalefac_scale!=0&&(Ye=254);var it=U-u.part2_length;if(it<=0)break;for(;(u.part2_3_length=K.count_bits(v,X,u,W))>it&&u.global_gain<=Ye;)u.global_gain++;if(u.global_gain>Ye)break;if(B.over_count==0){for(;(u.part2_3_length=K.count_bits(v,X,u,W))>j&&u.global_gain<=Ye;)u.global_gain++;if(u.global_gain>Ye)break}if(L.calc_noise(u,D,y,Be,W),Be.bits=u.part2_3_length,b.block_type!=x.SHORT_TYPE?G=Y.quant_comp:G=Y.quant_comp_short,G=ee(G,B,Be,u,y)?1:0,G!=0)j=b.part2_3_length,B=Be,b.assign(u),Me=0,s.arraycopy(X,0,c,0,576);else if(v.full_outer_loop==0&&(++Me>Ge&&B.over_count==0||v.noise_shaping_amp==3&&ae&&Me>30||v.noise_shaping_amp==3&&ae&&u.global_gain-be>15))break}while(u.global_gain+u.scalefac_scale<255);v.noise_shaping_amp==3?ae?re=!0:(u.assign(b),s.arraycopy(c,0,X,0,576),Me=0,be=u.global_gain,ae=!0):re=!0}return f(b.global_gain+b.scalefac_scale<=255),Y.VBR==i.vbr_rh||Y.VBR==i.vbr_mtrh?s.arraycopy(c,0,X,0,576):(v.substep_shaping&1)!=0&&trancate_smallspectrums(v,b,D,X),B.over_count},this.iteration_finish_one=function(Y,b,D){var X=Y.l3_side,q=X.tt[b][D];K.best_scalefac_store(Y,b,D,X),Y.use_best_huffman==1&&K.best_huffman_divide(Y,q),A.ResvAdjust(Y,q)},this.VBR_encode_granule=function(Y,b,D,X,q,U,v){var u=Y.internal_flags,c=new E,y=d(576),B=v,G=v+1,W=(v+U)/2,j,re,ae=0,be=u.sfb21_extra;f(B<=LameInternalFlags.MAX_BITS_PER_CHANNEL),m.fill(c.l3_enc,0);do f(W>=U),f(W<=v),f(U<=v),W>B-42?u.sfb21_extra=!1:u.sfb21_extra=be,re=outer_loop(Y,b,D,X,q,W),re<=0?(ae=1,G=b.part2_3_length,c.assign(b),s.arraycopy(X,0,y,0,576),v=G-32,j=v-U,W=(v+U)/2):(U=W+32,j=v-U,W=(v+U)/2,ae!=0&&(ae=2,b.assign(c),s.arraycopy(y,0,X,0,576)));while(j>12);u.sfb21_extra=be,ae==2&&s.arraycopy(c.l3_enc,0,b.l3_enc,0,576),f(b.part2_3_length<=B)},this.get_framebits=function(Y,b){var D=Y.internal_flags;D.bitrate_index=D.VBR_min_bitrate;var X=M.getframebits(Y);D.bitrate_index=1,X=M.getframebits(Y);for(var q=1;q<=D.VBR_max_bitrate;q++){D.bitrate_index=q;var U=new MeanBits(X);b[q]=A.ResvFrameBegin(Y,U),X=U.bits}},this.VBR_old_prepare=function(Y,b,D,X,q,U,v,u,c){var y=Y.internal_flags,B,G=0,W=1,j=0;y.bitrate_index=y.VBR_max_bitrate;var re=A.ResvFrameBegin(Y,new MeanBits(0))/y.mode_gr;get_framebits(Y,U);for(var ae=0;ae<y.mode_gr;ae++){var be=L.on_pe(Y,b,u[ae],re,ae,0);y.mode_ext==x.MPG_MD_MS_LR&&(ms_convert(y.l3_side,ae),L.reduce_side(u[ae],D[ae],re,be));for(var Me=0;Me<y.channels_out;++Me){var Be=y.l3_side.tt[ae][Me];Be.block_type!=x.SHORT_TYPE?(G=1.28/(1+Math.exp(3.5-b[ae][Me]/300))-.05,B=y.PSY.mask_adjust-G):(G=2.56/(1+Math.exp(3.5-b[ae][Me]/300))-.14,B=y.PSY.mask_adjust_short-G),y.masking_lower=Math.pow(10,B*.1),init_outer_loop(y,Be),c[ae][Me]=L.calc_xmin(Y,X[ae][Me],Be,q[ae][Me]),c[ae][Me]!=0&&(W=0),v[ae][Me]=126,j+=u[ae][Me]}}for(var ae=0;ae<y.mode_gr;ae++)for(var Me=0;Me<y.channels_out;Me++)j>U[y.VBR_max_bitrate]&&(u[ae][Me]*=U[y.VBR_max_bitrate],u[ae][Me]/=j),v[ae][Me]>u[ae][Me]&&(v[ae][Me]=u[ae][Me]);return W},this.bitpressure_strategy=function(Y,b,D,X){for(var q=0;q<Y.mode_gr;q++)for(var U=0;U<Y.channels_out;U++){for(var v=Y.l3_side.tt[q][U],u=b[q][U],c=0,y=0;y<v.psy_lmax;y++)u[c++]*=1+.029*y*y/x.SBMAX_l/x.SBMAX_l;if(v.block_type==x.SHORT_TYPE)for(var y=v.sfb_smin;y<x.SBMAX_s;y++)u[c++]*=1+.029*y*y/x.SBMAX_s/x.SBMAX_s,u[c++]*=1+.029*y*y/x.SBMAX_s/x.SBMAX_s,u[c++]*=1+.029*y*y/x.SBMAX_s/x.SBMAX_s;X[q][U]=0|Math.max(D[q][U],.9*X[q][U])}},this.VBR_new_prepare=function(Y,b,D,X,q,U){var v=Y.internal_flags,u=1,c=0,y=0,B;if(Y.free_format){v.bitrate_index=0;var G=new MeanBits(c);B=A.ResvFrameBegin(Y,G),c=G.bits,q[0]=B}else{v.bitrate_index=v.VBR_max_bitrate;var G=new MeanBits(c);A.ResvFrameBegin(Y,G),c=G.bits,get_framebits(Y,q),B=q[v.VBR_max_bitrate]}for(var W=0;W<v.mode_gr;W++){L.on_pe(Y,b,U[W],c,W,0),v.mode_ext==x.MPG_MD_MS_LR&&ms_convert(v.l3_side,W);for(var j=0;j<v.channels_out;++j){var re=v.l3_side.tt[W][j];v.masking_lower=Math.pow(10,v.PSY.mask_adjust*.1),init_outer_loop(v,re),L.calc_xmin(Y,D[W][j],re,X[W][j])!=0&&(u=0),y+=U[W][j]}}for(var W=0;W<v.mode_gr;W++)for(var j=0;j<v.channels_out;j++)y>B&&(U[W][j]*=B,U[W][j]/=y);return u},this.calc_target_bits=function(Y,b,D,X,q,U){var v=Y.internal_flags,u=v.l3_side,c,y,B,G,W=0;v.bitrate_index=v.VBR_max_bitrate;var j=new MeanBits(W);for(U[0]=A.ResvFrameBegin(Y,j),W=j.bits,v.bitrate_index=1,W=M.getframebits(Y)-v.sideinfo_len*8,q[0]=W/(v.mode_gr*v.channels_out),W=Y.VBR_mean_bitrate_kbps*Y.framesize*1e3,(v.substep_shaping&1)!=0&&(W*=1.09),W/=Y.out_samplerate,W-=v.sideinfo_len*8,W/=v.mode_gr*v.channels_out,c=.93+.07*(11-Y.compression_ratio)/5.5,c<.9&&(c=.9),c>1&&(c=1),y=0;y<v.mode_gr;y++){var re=0;for(B=0;B<v.channels_out;B++){if(X[y][B]=int(c*W),b[y][B]>700){var ae=int((b[y][B]-700)/1.4),be=u.tt[y][B];X[y][B]=int(c*W),be.block_type==x.SHORT_TYPE&&ae<W/2&&(ae=W/2),ae>W*3/2?ae=W*3/2:ae<0&&(ae=0),X[y][B]+=ae}X[y][B]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(X[y][B]=LameInternalFlags.MAX_BITS_PER_CHANNEL),re+=X[y][B]}if(re>LameInternalFlags.MAX_BITS_PER_GRANULE)for(B=0;B<v.channels_out;++B)X[y][B]*=LameInternalFlags.MAX_BITS_PER_GRANULE,X[y][B]/=re}if(v.mode_ext==x.MPG_MD_MS_LR)for(y=0;y<v.mode_gr;y++)L.reduce_side(X[y],D[y],W*v.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(G=0,y=0;y<v.mode_gr;y++)for(B=0;B<v.channels_out;B++)X[y][B]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(X[y][B]=LameInternalFlags.MAX_BITS_PER_CHANNEL),G+=X[y][B];if(G>U[0])for(y=0;y<v.mode_gr;y++)for(B=0;B<v.channels_out;B++)X[y][B]*=U[0],X[y][B]/=G}}h.exports=O},429:(h,T,e)=>{var n=e(302),s=e(935);s.System;var i=s.VbrMode,o=s.Float;s.ShortBlock;var m=s.Util;s.Arrays,s.new_array_n,s.new_byte,s.new_double;var d=s.new_float;s.new_float_n;var f=s.new_int;s.new_int_n;var S=s.assert,g=e(687),R=e(3134),x=e(1998);E.Q_MAX=257,E.Q_MAX2=116,E.LARGE_BITS=1e5,E.IXMAX_VAL=8206;function E(){var p=null,O=null,M=null;this.setModules=function(_,Y,b){p=_,O=Y,M=b};function A(_){return S(0<=_+E.Q_MAX2&&_<E.Q_MAX),H[_+E.Q_MAX2]}this.IPOW20=function(_){return S(0<=_&&_<E.Q_MAX),Z[_]};var L=2220446049250313e-31,V=E.IXMAX_VAL,K=V+2,F=E.Q_MAX,k=E.Q_MAX2;E.LARGE_BITS;var l=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var P=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=P,this.sfBandIndex=[new n([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var H=d(F+k+1),Z=d(F),Q=d(K),ee=d(K);this.adj43=ee;function te(_,Y){var b=M.ATHformula(Y,_);return b-=l,b=Math.pow(10,b/10+_.ATHlower),b}function fe(_){for(var Y=_.internal_flags.ATH.l,b=_.internal_flags.ATH.psfb21,D=_.internal_flags.ATH.s,X=_.internal_flags.ATH.psfb12,q=_.internal_flags,U=_.out_samplerate,v=0;v<g.SBMAX_l;v++){var u=q.scalefac_band.l[v],c=q.scalefac_band.l[v+1];Y[v]=o.MAX_VALUE;for(var y=u;y<c;y++){var B=y*U/1152,G=te(_,B);Y[v]=Math.min(Y[v],G)}}for(var v=0;v<g.PSFB21;v++){var u=q.scalefac_band.psfb21[v],c=q.scalefac_band.psfb21[v+1];b[v]=o.MAX_VALUE;for(var y=u;y<c;y++){var B=y*U/1152,G=te(_,B);b[v]=Math.min(b[v],G)}}for(var v=0;v<g.SBMAX_s;v++){var u=q.scalefac_band.s[v],c=q.scalefac_band.s[v+1];D[v]=o.MAX_VALUE;for(var y=u;y<c;y++){var B=y*U/384,G=te(_,B);D[v]=Math.min(D[v],G)}D[v]*=q.scalefac_band.s[v+1]-q.scalefac_band.s[v]}for(var v=0;v<g.PSFB12;v++){var u=q.scalefac_band.psfb12[v],c=q.scalefac_band.psfb12[v+1];X[v]=o.MAX_VALUE;for(var y=u;y<c;y++){var B=y*U/384,G=te(_,B);X[v]=Math.min(X[v],G)}X[v]*=q.scalefac_band.s[13]-q.scalefac_band.s[12]}if(_.noATH){for(var v=0;v<g.SBMAX_l;v++)Y[v]=1e-20;for(var v=0;v<g.PSFB21;v++)b[v]=1e-20;for(var v=0;v<g.SBMAX_s;v++)D[v]=1e-20;for(var v=0;v<g.PSFB12;v++)X[v]=1e-20}q.ATH.floor=10*Math.log10(te(_,-1))}this.iteration_init=function(_){var Y=_.internal_flags,b=Y.l3_side,D;if(Y.iteration_init_init==0){for(Y.iteration_init_init=1,b.main_data_begin=0,fe(_),Q[0]=0,D=1;D<K;D++)Q[D]=Math.pow(D,1.3333333333333333);for(D=0;D<K-1;D++)ee[D]=D+1-Math.pow(.5*(Q[D]+Q[D+1]),.75);for(ee[D]=.5,D=0;D<F;D++)Z[D]=Math.pow(2,(D-210)*-.1875);for(D=0;D<=F+k;D++)H[D]=Math.pow(2,(D-210-k)*.25);p.huffman_init(Y);{var X,q,U,v;for(D=_.exp_nspsytune>>2&63,D>=32&&(D-=64),X=Math.pow(10,D/4/10),D=_.exp_nspsytune>>8&63,D>=32&&(D-=64),q=Math.pow(10,D/4/10),D=_.exp_nspsytune>>14&63,D>=32&&(D-=64),U=Math.pow(10,D/4/10),D=_.exp_nspsytune>>20&63,D>=32&&(D-=64),v=U*Math.pow(10,D/4/10),D=0;D<g.SBMAX_l;D++){var u;D<=6?u=X:D<=13?u=q:D<=20?u=U:u=v,Y.nsPsy.longfact[D]=u}for(D=0;D<g.SBMAX_s;D++){var u;D<=5?u=X:D<=10?u=q:D<=11?u=U:u=v,Y.nsPsy.shortfact[D]=u}}}},this.on_pe=function(_,Y,b,D,X,q){var U=_.internal_flags,v=0,u,c=f(2),y,B=new R(v),G=O.ResvMaxBits(_,D,B,q);v=B.bits;var W=v+G;for(W>x.MAX_BITS_PER_GRANULE&&(W=x.MAX_BITS_PER_GRANULE),u=0,y=0;y<U.channels_out;++y)b[y]=Math.min(x.MAX_BITS_PER_CHANNEL,v/U.channels_out),c[y]=0|b[y]*Y[X][y]/700-b[y],c[y]>D*3/4&&(c[y]=D*3/4),c[y]<0&&(c[y]=0),c[y]+b[y]>x.MAX_BITS_PER_CHANNEL&&(c[y]=Math.max(0,x.MAX_BITS_PER_CHANNEL-b[y])),u+=c[y];if(u>G)for(y=0;y<U.channels_out;++y)c[y]=G*c[y]/u;for(y=0;y<U.channels_out;++y)b[y]+=c[y],G-=c[y];for(u=0,y=0;y<U.channels_out;++y)u+=b[y];if(u>x.MAX_BITS_PER_GRANULE){var j=0;for(y=0;y<U.channels_out;++y)b[y]*=x.MAX_BITS_PER_GRANULE,b[y]/=u,j+=b[y];S(j<=x.MAX_BITS_PER_GRANULE)}return W},this.reduce_side=function(_,Y,b,D){S(D<=x.MAX_BITS_PER_GRANULE),S(_[0]+_[1]<=x.MAX_BITS_PER_GRANULE);var X=.33*(.5-Y)/.5;X<0&&(X=0),X>.5&&(X=.5);var q=0|X*.5*(_[0]+_[1]);q>x.MAX_BITS_PER_CHANNEL-_[0]&&(q=x.MAX_BITS_PER_CHANNEL-_[0]),q<0&&(q=0),_[1]>=125&&(_[1]-q>125?(_[0]<b&&(_[0]+=q),_[1]-=q):(_[0]+=_[1]-125,_[1]=125)),q=_[0]+_[1],q>D&&(_[0]=D*_[0]/q,_[1]=D*_[1]/q),S(_[0]<=x.MAX_BITS_PER_CHANNEL),S(_[1]<=x.MAX_BITS_PER_CHANNEL),S(_[0]+_[1]<=x.MAX_BITS_PER_GRANULE)},this.athAdjust=function(_,Y,b){var D=90.30873362,X=94.82444863,q=m.FAST_LOG10_X(Y,10),U=_*_,v=0;return q-=b,U>1e-20&&(v=1+m.FAST_LOG10_X(U,10/D)),v<0&&(v=0),q*=v,q+=b+D-X,Math.pow(10,.1*q)},this.calc_xmin=function(_,Y,b,D){var X=0,q=_.internal_flags,U,v=0,u=0,c=q.ATH,y=b.xr,B=_.VBR==i.vbr_mtrh?1:0,G=q.masking_lower;for((_.VBR==i.vbr_mtrh||_.VBR==i.vbr_mt)&&(G=1),U=0;U<b.psy_lmax;U++){var W,j,re,ae,be,Me;_.VBR==i.vbr_rh||_.VBR==i.vbr_mtrh?j=athAdjust(c.adjust,c.l[U],c.floor):j=c.adjust*c.l[U],be=b.width[U],re=j/be,ae=L,Me=be>>1,W=0;do{var Be,Ge;Be=y[v]*y[v],W+=Be,ae+=Be<re?Be:re,v++,Ge=y[v]*y[v],W+=Ge,ae+=Ge<re?Ge:re,v++}while(--Me>0);if(W>j&&u++,U==g.SBPSY_l){var Ye=j*q.nsPsy.longfact[U];ae<Ye&&(ae=Ye)}if(B!=0&&(j=ae),!_.ATHonly){var it=Y.en.l[U];if(it>0){var Ye;Ye=W*Y.thm.l[U]*G/it,B!=0&&(Ye*=q.nsPsy.longfact[U]),j<Ye&&(j=Ye)}}B!=0?D[X++]=j:D[X++]=j*q.nsPsy.longfact[U]}var _t=575;if(b.block_type!=g.SHORT_TYPE)for(var C=576;C--!=0&&BitStream.EQ(y[C],0);)_t=C;b.max_nonzero_coeff=_t;for(var z=b.sfb_smin;U<b.psymax;z++,U+=3){var be,Ne,Te;for(_.VBR==i.vbr_rh||_.VBR==i.vbr_mtrh?Te=athAdjust(c.adjust,c.s[z],c.floor):Te=c.adjust*c.s[z],be=b.width[U],Ne=0;Ne<3;Ne++){var W=0,j,re,ae,Me=be>>1;re=Te/be,ae=L;do{var Be,Ge;Be=y[v]*y[v],W+=Be,ae+=Be<re?Be:re,v++,Ge=y[v]*y[v],W+=Ge,ae+=Ge<re?Ge:re,v++}while(--Me>0);if(W>Te&&u++,z==g.SBPSY_s){var Ye=Te*q.nsPsy.shortfact[z];ae<Ye&&(ae=Ye)}if(B!=0?j=ae:j=Te,!_.ATHonly&&!_.ATHshort){var it=Y.en.s[z][Ne];if(it>0){var Ye;Ye=W*Y.thm.s[z][Ne]*G/it,B!=0&&(Ye*=q.nsPsy.shortfact[z]),j<Ye&&(j=Ye)}}B!=0?D[X++]=j:D[X++]=j*q.nsPsy.shortfact[z]}_.useTemporal&&(D[X-3]>D[X-3+1]&&(D[X-3+1]+=(D[X-3]-D[X-3+1])*q.decay),D[X-3+1]>D[X-3+2]&&(D[X-3+2]+=(D[X-3+1]-D[X-3+2])*q.decay))}return u};function de(_){this.s=_}this.calc_noise_core=function(_,Y,b,D){var X=0,q=Y.s,U=_.l3_enc;if(q>_.count1)for(;b--!=0;){var v;v=_.xr[q],q++,X+=v*v,v=_.xr[q],q++,X+=v*v}else if(q>_.big_values){var u=d(2);for(u[0]=0,u[1]=D;b--!=0;){var v;v=Math.abs(_.xr[q])-u[U[q]],q++,X+=v*v,v=Math.abs(_.xr[q])-u[U[q]],q++,X+=v*v}}else for(;b--!=0;){var v;v=Math.abs(_.xr[q])-Q[U[q]]*D,q++,X+=v*v,v=Math.abs(_.xr[q])-Q[U[q]]*D,q++,X+=v*v}return Y.s=q,X},this.calc_noise=function(_,Y,b,D,X){var q=0,U=0,v,u,c=0,y=0,B=0,G=-20,W=0,j=_.scalefac,re=0;for(D.over_SSD=0,v=0;v<_.psymax;v++){var ae=_.global_gain-(j[re++]+(_.preflag!=0?P[v]:0)<<_.scalefac_scale+1)-_.subblock_gain[_.window[v]]*8,be=0;if(X!=null&&X.step[v]==ae)be=X.noise[v],W+=_.width[v],b[q++]=be/Y[U++],be=X.noise_log[v];else{var Me=A(ae);if(u=_.width[v]>>1,W+_.width[v]>_.max_nonzero_coeff){var Be;Be=_.max_nonzero_coeff-W+1,Be>0?u=Be>>1:u=0}var Ge=new de(W);be=this.calc_noise_core(_,Ge,u,Me),W=Ge.s,X!=null&&(X.step[v]=ae,X.noise[v]=be),be=b[q++]=be/Y[U++],be=m.FAST_LOG10(Math.max(be,1e-20)),X!=null&&(X.noise_log[v]=be)}if(X!=null&&(X.global_gain=_.global_gain),B+=be,be>0){var Ye;Ye=Math.max(0|be*10+.5,1),D.over_SSD+=Ye*Ye,c++,y+=be}G=Math.max(G,be)}return D.over_count=c,D.tot_noise=B,D.over_noise=y,D.max_noise=G,c},this.set_pinfo=function(_,Y,b,D,X){var q=_.internal_flags,U,v,u,c,y,B=Y.scalefac_scale==0?.5:1,G=Y.scalefac,W=d(L3Side.SFBMAX),j=d(L3Side.SFBMAX),re=new CalcNoiseResult;calc_xmin(_,b,Y,W),calc_noise(Y,W,j,re,null);var ae=0;for(v=Y.sfb_lmax,Y.block_type!=g.SHORT_TYPE&&Y.mixed_block_flag==0&&(v=22),U=0;U<v;U++){var be=q.scalefac_band.l[U],Me=q.scalefac_band.l[U+1],Be=Me-be;for(c=0;ae<Me;ae++)c+=Y.xr[ae]*Y.xr[ae];c/=Be,y=1e15,q.pinfo.en[D][X][U]=y*c,q.pinfo.xfsf[D][X][U]=y*W[U]*j[U]/Be,b.en.l[U]>0&&!_.ATHonly?c=c/b.en.l[U]:c=0,q.pinfo.thr[D][X][U]=y*Math.max(c*b.thm.l[U],q.ATH.l[U]),q.pinfo.LAMEsfb[D][X][U]=0,Y.preflag!=0&&U>=11&&(q.pinfo.LAMEsfb[D][X][U]=-B*P[U]),U<g.SBPSY_l&&(S(G[U]>=0),q.pinfo.LAMEsfb[D][X][U]-=B*G[U])}if(Y.block_type==g.SHORT_TYPE)for(v=U,U=Y.sfb_smin;U<g.SBMAX_s;U++)for(var be=q.scalefac_band.s[U],Me=q.scalefac_band.s[U+1],Be=Me-be,Ge=0;Ge<3;Ge++){for(c=0,u=be;u<Me;u++)c+=Y.xr[ae]*Y.xr[ae],ae++;c=Math.max(c/Be,1e-20),y=1e15,q.pinfo.en_s[D][X][3*U+Ge]=y*c,q.pinfo.xfsf_s[D][X][3*U+Ge]=y*W[v]*j[v]/Be,b.en.s[U][Ge]>0?c=c/b.en.s[U][Ge]:c=0,(_.ATHonly||_.ATHshort)&&(c=0),q.pinfo.thr_s[D][X][3*U+Ge]=y*Math.max(c*b.thm.s[U][Ge],q.ATH.s[U]),q.pinfo.LAMEsfb_s[D][X][3*U+Ge]=-2*Y.subblock_gain[Ge],U<g.SBPSY_s&&(q.pinfo.LAMEsfb_s[D][X][3*U+Ge]-=B*G[v]),v++}q.pinfo.LAMEqss[D][X]=Y.global_gain,q.pinfo.LAMEmainbits[D][X]=Y.part2_3_length+Y.part2_length,q.pinfo.LAMEsfbits[D][X]=Y.part2_length,q.pinfo.over[D][X]=re.over_count,q.pinfo.max_noise[D][X]=re.max_noise*10,q.pinfo.over_noise[D][X]=re.over_noise*10,q.pinfo.tot_noise[D][X]=re.tot_noise*10,q.pinfo.over_SSD[D][X]=re.over_SSD}}h.exports=E},1062:(h,T,e)=>{var n=e(935);n.System,n.VbrMode,n.Float,n.ShortBlock,n.Util,n.Arrays,n.new_array_n,n.new_byte,n.new_double;var s=n.new_float;n.new_float_n;var i=n.new_int;n.new_int_n,n.assert;var o=e(1287);function m(){this.linprebuf=s(o.MAX_ORDER*2),this.linpre=0,this.lstepbuf=s(o.MAX_SAMPLES_PER_WINDOW+o.MAX_ORDER),this.lstep=0,this.loutbuf=s(o.MAX_SAMPLES_PER_WINDOW+o.MAX_ORDER),this.lout=0,this.rinprebuf=s(o.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=s(o.MAX_SAMPLES_PER_WINDOW+o.MAX_ORDER),this.rstep=0,this.routbuf=s(o.MAX_SAMPLES_PER_WINDOW+o.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=i(0|o.STEPS_per_dB*o.MAX_dB),this.B=i(0|o.STEPS_per_dB*o.MAX_dB)}h.exports=m},3060:(h,T,e)=>{var n=e(935),s=n.assert;function i(){var o;this.setModules=function(m){o=m},this.ResvFrameBegin=function(m,d){var f=m.internal_flags,S,g=f.l3_side,R=o.getframebits(m);d.bits=(R-f.sideinfo_len*8)/f.mode_gr;var x=8*256*f.mode_gr-8;m.brate>320?S=8*int(m.brate*1e3/(m.out_samplerate/1152)/8+.5):(S=11520,m.strict_ISO&&(S=8*int(32e4/(m.out_samplerate/1152)/8+.5))),f.ResvMax=S-R,f.ResvMax>x&&(f.ResvMax=x),(f.ResvMax<0||m.disable_reservoir)&&(f.ResvMax=0);var E=d.bits*f.mode_gr+Math.min(f.ResvSize,f.ResvMax);return E>S&&(E=S),s(f.ResvMax%8==0),s(f.ResvMax>=0),g.resvDrain_pre=0,f.pinfo!=null&&(f.pinfo.mean_bits=d.bits/2,f.pinfo.resvsize=f.ResvSize),E},this.ResvMaxBits=function(m,d,f,S){var g=m.internal_flags,R,x=g.ResvSize,E=g.ResvMax;S!=0&&(x+=d),(g.substep_shaping&1)!=0&&(E*=.9),f.bits=d,x*10>E*9?(R=x-E*9/10,f.bits+=R,g.substep_shaping|=128):(R=0,g.substep_shaping&=127,!m.disable_reservoir&&(g.substep_shaping&1)==0&&(f.bits-=.1*d));var p=x<g.ResvMax*6/10?x:g.ResvMax*6/10;return p-=R,p<0&&(p=0),p},this.ResvAdjust=function(m,d){m.ResvSize-=d.part2_3_length+d.part2_length},this.ResvFrameEnd=function(m,d){var f,S=m.l3_side;m.ResvSize+=d*m.mode_gr;var g=0;S.resvDrain_post=0,S.resvDrain_pre=0,(f=m.ResvSize%8)!=0&&(g+=f),f=m.ResvSize-g-m.ResvMax,f>0&&(s(f%8==0),s(f>=0),g+=f);{var R=Math.min(S.main_data_begin*8,g)/8;S.resvDrain_pre+=8*R,g-=8*R,m.ResvSize-=8*R,S.main_data_begin-=R}S.resvDrain_post+=g,m.ResvSize-=g}}h.exports=i},302:(h,T,e)=>{var n=e(935),s=n.System;n.VbrMode,n.Float,n.ShortBlock,n.Util,n.Arrays,n.new_array_n,n.new_byte,n.new_double,n.new_float,n.new_float_n;var i=n.new_int;n.new_int_n,n.assert;var o=e(687);function m(d,f,S,g){this.l=i(1+o.SBMAX_l),this.s=i(1+o.SBMAX_s),this.psfb21=i(1+o.PSFB21),this.psfb12=i(1+o.PSFB12);var R=this.l,x=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],s.arraycopy(this.arrL,0,R,0,Math.min(this.arrL.length,this.l.length)),s.arraycopy(this.arrS,0,x,0,Math.min(this.arrS.length,this.s.length)),s.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),s.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}h.exports=m},7721:h=>{function T(n,s,i,o){this.xlen=n,this.linmax=s,this.table=i,this.hlen=o}var e={};e.t1HB=[1,1,1,0],e.t2HB=[1,2,1,3,1,1,3,2,0],e.t3HB=[3,2,1,1,1,1,3,2,0],e.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],e.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],e.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],e.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],e.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],e.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],e.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],e.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],e.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],e.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],e.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],e.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],e.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],e.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],e.t1l=[1,4,3,5],e.t2l=[1,4,7,4,5,7,6,7,8],e.t3l=[2,3,7,4,4,7,6,7,8],e.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],e.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],e.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],e.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],e.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],e.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],e.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],e.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],e.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],e.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],e.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],e.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],e.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],e.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],e.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],e.ht=[new T(0,0,null,null),new T(2,0,e.t1HB,e.t1l),new T(3,0,e.t2HB,e.t2l),new T(3,0,e.t3HB,e.t3l),new T(0,0,null,null),new T(4,0,e.t5HB,e.t5l),new T(4,0,e.t6HB,e.t6l),new T(6,0,e.t7HB,e.t7l),new T(6,0,e.t8HB,e.t8l),new T(6,0,e.t9HB,e.t9l),new T(8,0,e.t10HB,e.t10l),new T(8,0,e.t11HB,e.t11l),new T(8,0,e.t12HB,e.t12l),new T(16,0,e.t13HB,e.t13l),new T(0,0,null,e.t16_5l),new T(16,0,e.t15HB,e.t15l),new T(1,1,e.t16HB,e.t16l),new T(2,3,e.t16HB,e.t16l),new T(3,7,e.t16HB,e.t16l),new T(4,15,e.t16HB,e.t16l),new T(6,63,e.t16HB,e.t16l),new T(8,255,e.t16HB,e.t16l),new T(10,1023,e.t16HB,e.t16l),new T(13,8191,e.t16HB,e.t16l),new T(4,15,e.t24HB,e.t24l),new T(5,31,e.t24HB,e.t24l),new T(6,63,e.t24HB,e.t24l),new T(7,127,e.t24HB,e.t24l),new T(8,255,e.t24HB,e.t24l),new T(9,511,e.t24HB,e.t24l),new T(11,2047,e.t24HB,e.t24l),new T(13,8191,e.t24HB,e.t24l),new T(0,0,e.t32HB,e.t32l),new T(0,0,e.t33HB,e.t33l)],e.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],e.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],e.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],e.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],e.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],e.scfsi_band=[0,6,11,16,21],h.exports=e},5638:(h,T,e)=>{var n=e(935),s=n.System;n.VbrMode,n.Float,n.ShortBlock,n.Util;var i=n.Arrays;n.new_array_n,n.new_byte,n.new_double,n.new_float,n.new_float_n;var o=n.new_int;n.new_int_n;var m=n.assert,d=e(687),f=e(7721),S=e(9438),g=e(429);function R(){var x=null;this.qupvt=null,this.setModules=function(U){this.qupvt=U,x=U};function E(U){this.bits=0|U}var p=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function O(U,v,u,c,y,B){var G=.5946/v;for(m(U>0),U=U>>1;U--!=0;)y[B++]=G>u[c++]?0:1,y[B++]=G>u[c++]?0:1}function M(U,v,u,c,y,B){m(U>0),U=U>>1;var G=U%2;for(U=U>>1;U--!=0;){var W,j,re,ae,be,Me,Be,Ge;W=u[c++]*v,j=u[c++]*v,be=0|W,re=u[c++]*v,Me=0|j,ae=u[c++]*v,Be=0|re,W+=x.adj43[be],Ge=0|ae,j+=x.adj43[Me],y[B++]=0|W,re+=x.adj43[Be],y[B++]=0|j,ae+=x.adj43[Ge],y[B++]=0|re,y[B++]=0|ae}if(G!=0){var W,j,be,Me;W=u[c++]*v,j=u[c++]*v,be=0|W,Me=0|j,W+=x.adj43[be],j+=x.adj43[Me],y[B++]=0|W,y[B++]=0|j}}function A(U,v,u,c,y){var B,G,W=0,j,re=0,ae=0,be=0,Me=v,Be=0,Ge=Me,Ye=0,it=U,_t=0;for(j=y!=null&&c.global_gain==y.global_gain,c.block_type==d.SHORT_TYPE?G=38:G=21,B=0;B<=G;B++){var C=-1;if((j||c.block_type==d.NORM_TYPE)&&(C=c.global_gain-(c.scalefac[B]+(c.preflag!=0?x.pretab[B]:0)<<c.scalefac_scale+1)-c.subblock_gain[c.window[B]]*8),m(c.width[B]>=0),j&&y.step[B]==C)re!=0&&(M(re,u,it,_t,Ge,Ye),re=0),ae!=0&&(O(ae,u,it,_t,Ge,Ye),ae=0);else{var z=c.width[B];if(W+c.width[B]>c.max_nonzero_coeff){var Ne;Ne=c.max_nonzero_coeff-W+1,i.fill(v,c.max_nonzero_coeff,576,0),z=Ne,z<0&&(z=0),B=G+1}if(re==0&&ae==0&&(Ge=Me,Ye=Be,it=U,_t=be),y!=null&&y.sfb_count1>0&&B>=y.sfb_count1&&y.step[B]>0&&C>=y.step[B]?(re!=0&&(M(re,u,it,_t,Ge,Ye),re=0,Ge=Me,Ye=Be,it=U,_t=be),ae+=z):(ae!=0&&(O(ae,u,it,_t,Ge,Ye),ae=0,Ge=Me,Ye=Be,it=U,_t=be),re+=z),z<=0){ae!=0&&(O(ae,u,it,_t,Ge,Ye),ae=0),re!=0&&(M(re,u,it,_t,Ge,Ye),re=0);break}}B<=G&&(Be+=c.width[B],be+=c.width[B],W+=c.width[B])}re!=0&&(M(re,u,it,_t,Ge,Ye),re=0),ae!=0&&(O(ae,u,it,_t,Ge,Ye),ae=0)}function L(U,v,u){var c=0,y=0;do{var B=U[v++],G=U[v++];c<B&&(c=B),y<G&&(y=G)}while(v<u);return c<y&&(c=y),c}function V(U,v,u,c,y,B){var G=f.ht[c].xlen*65536+f.ht[y].xlen,W=0,j;do{var re=U[v++],ae=U[v++];re!=0&&(re>14&&(re=15,W+=G),re*=16),ae!=0&&(ae>14&&(ae=15,W+=G),re+=ae),W+=f.largetbl[re]}while(v<u);return j=W&65535,W>>=16,W>j&&(W=j,c=y),B.bits+=W,c}function K(U,v,u,c){var y=0,B=f.ht[1].hlen;do{var G=U[v+0]*2+U[v+1];v+=2,y+=B[G]}while(v<u);return c.bits+=y,1}function F(U,v,u,c,y){var B=0,G,W=f.ht[c].xlen,j;c==2?j=f.table23:j=f.table56;do{var re=U[v+0]*W+U[v+1];v+=2,B+=j[re]}while(v<u);return G=B&65535,B>>=16,B>G&&(B=G,c++),y.bits+=B,c}function k(U,v,u,c,y){var B=0,G=0,W=0,j=f.ht[c].xlen,re=f.ht[c].hlen,ae=f.ht[c+1].hlen,be=f.ht[c+2].hlen;do{var Me=U[v+0]*j+U[v+1];v+=2,B+=re[Me],G+=ae[Me],W+=be[Me]}while(v<u);var Be=c;return B>G&&(B=G,Be++),B>W&&(B=W,Be=c+2),y.bits+=B,Be}var l=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function P(U,v,u,c){var y=L(U,v,u);switch(y){case 0:return y;case 1:return K(U,v,u,c);case 2:case 3:return F(U,v,u,l[y-1],c);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return k(U,v,u,l[y-1],c);default:if(y>g.IXMAX_VAL)return c.bits=g.LARGE_BITS,-1;y-=15;var B;for(B=24;B<32&&!(f.ht[B].linmax>=y);B++);var G;for(G=B-8;G<24&&!(f.ht[G].linmax>=y);G++);return V(U,v,u,G,B,c)}}this.noquant_count_bits=function(U,v,u){var c=v.l3_enc,y=Math.min(576,v.max_nonzero_coeff+2>>1<<1);for(u!=null&&(u.sfb_count1=0);y>1&&(c[y-1]|c[y-2])==0;y-=2);v.count1=y;for(var B=0,G=0;y>3;y-=4){var W;if(((c[y-1]|c[y-2]|c[y-3]|c[y-4])&2147483647)>1)break;W=((c[y-4]*2+c[y-3])*2+c[y-2])*2+c[y-1],B+=f.t32l[W],G+=f.t33l[W]}var j=B;if(v.count1table_select=0,B>G&&(j=G,v.count1table_select=1),v.count1bits=j,v.big_values=y,y==0)return j;if(v.block_type==d.SHORT_TYPE)B=3*U.scalefac_band.s[3],B>v.big_values&&(B=v.big_values),G=v.big_values;else if(v.block_type==d.NORM_TYPE){if(m(y<=576),B=v.region0_count=U.bv_scf[y-2],G=v.region1_count=U.bv_scf[y-1],m(B+G+2<d.SBPSY_l),G=U.scalefac_band.l[B+G+2],B=U.scalefac_band.l[B+1],G<y){var re=new E(j);v.table_select[2]=P(c,G,y,re),j=re.bits}}else v.region0_count=7,v.region1_count=d.SBMAX_l-1-7-1,B=U.scalefac_band.l[8],G=y,B>G&&(B=G);if(B=Math.min(B,y),G=Math.min(G,y),m(B>=0),m(G>=0),0<B){var re=new E(j);v.table_select[0]=P(c,0,B,re),j=re.bits}if(B<G){var re=new E(j);v.table_select[1]=P(c,B,G,re),j=re.bits}if(U.use_best_huffman==2&&(v.part2_3_length=j,best_huffman_divide(U,v),j=v.part2_3_length),u!=null&&v.block_type==d.NORM_TYPE){for(var ae=0;U.scalefac_band.l[ae]<v.big_values;)ae++;u.sfb_count1=ae}return j},this.count_bits=function(U,v,u,c){var y=u.l3_enc,B=g.IXMAX_VAL/x.IPOW20(u.global_gain);if(u.xrpow_max>B)return g.LARGE_BITS;if(A(v,y,x.IPOW20(u.global_gain),u,c),(U.substep_shaping&2)!=0)for(var G=0,W=u.global_gain+u.scalefac_scale,j=.634521682242439/x.IPOW20(W),re=0;re<u.sfbmax;re++){var ae=u.width[re];if(m(ae>=0),U.pseudohalf[re]==0)G+=ae;else{var be;for(be=G,G+=ae;be<G;++be)y[be]=v[be]>=j?y[be]:0}}return this.noquant_count_bits(U,u,c)};function H(U,v,u,c,y,B,G){for(var W=v.big_values,j=0;j<=22;j++)c[j]=g.LARGE_BITS;for(var j=0;j<16;j++){var re=U.scalefac_band.l[j+1];if(re>=W)break;var ae=0,be=new E(ae),Me=P(u,0,re,be);ae=be.bits;for(var Be=0;Be<8;Be++){var Ge=U.scalefac_band.l[j+Be+2];if(Ge>=W)break;var Ye=ae;be=new E(Ye);var it=P(u,re,Ge,be);Ye=be.bits,c[j+Be]>Ye&&(c[j+Be]=Ye,y[j+Be]=j,B[j+Be]=Me,G[j+Be]=it)}}}function Z(U,v,u,c,y,B,G,W){for(var j=v.big_values,re=2;re<d.SBMAX_l+1;re++){var ae=U.scalefac_band.l[re];if(ae>=j)break;var be=y[re-2]+v.count1bits;if(u.part2_3_length<=be)break;var Me=new E(be),Be=P(c,ae,j,Me);be=Me.bits,!(u.part2_3_length<=be)&&(u.assign(v),u.part2_3_length=be,u.region0_count=B[re-2],u.region1_count=re-2-B[re-2],u.table_select[0]=G[re-2],u.table_select[1]=W[re-2],u.table_select[2]=Be)}}this.best_huffman_divide=function(U,v){var u=new S,c=v.l3_enc,y=o(7+15+1),B=o(7+15+1),G=o(7+15+1),W=o(7+15+1);if(!(v.block_type==d.SHORT_TYPE&&U.mode_gr==1)){u.assign(v),v.block_type==d.NORM_TYPE&&(H(U,v,c,y,B,G,W),Z(U,u,v,c,y,B,G,W));var j=u.big_values;if(!(j==0||(c[j-2]|c[j-1])>1)&&(j=v.count1+2,!(j>576))){u.assign(v),u.count1=j;var re=0,ae=0;for(m(j<=576);j>u.big_values;j-=4){var be=((c[j-4]*2+c[j-3])*2+c[j-2])*2+c[j-1];re+=f.t32l[be],ae+=f.t33l[be]}if(u.big_values=j,u.count1table_select=0,re>ae&&(re=ae,u.count1table_select=1),u.count1bits=re,u.block_type==d.NORM_TYPE)Z(U,u,v,c,y,B,G,W);else{if(u.part2_3_length=re,re=U.scalefac_band.l[8],re>j&&(re=j),re>0){var Me=new E(u.part2_3_length);u.table_select[0]=P(c,0,re,Me),u.part2_3_length=Me.bits}if(j>re){var Me=new E(u.part2_3_length);u.table_select[1]=P(c,re,j,Me),u.part2_3_length=Me.bits}v.part2_3_length>u.part2_3_length&&v.assign(u)}}}};var Q=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],ee=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],te=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],fe=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];R.slen1_tab=te,R.slen2_tab=fe;function de(U,v){for(var u,c=v.tt[1][U],y=v.tt[0][U],B=0;B<f.scfsi_band.length-1;B++){for(u=f.scfsi_band[B];u<f.scfsi_band[B+1]&&!(y.scalefac[u]!=c.scalefac[u]&&c.scalefac[u]>=0);u++);if(u==f.scfsi_band[B+1]){for(u=f.scfsi_band[B];u<f.scfsi_band[B+1];u++)c.scalefac[u]=-1;v.scfsi[U][B]=1}}var G=0,W=0;for(u=0;u<11;u++)c.scalefac[u]!=-1&&(W++,G<c.scalefac[u]&&(G=c.scalefac[u]));for(var j=0,re=0;u<d.SBPSY_l;u++)c.scalefac[u]!=-1&&(re++,j<c.scalefac[u]&&(j=c.scalefac[u]));for(var B=0;B<16;B++)if(G<Q[B]&&j<ee[B]){var ae=te[B]*W+fe[B]*re;c.part2_length>ae&&(c.part2_length=ae,c.scalefac_compress=B)}}this.best_scalefac_store=function(U,v,u,c){var y=c.tt[v][u],B,G,W,j,re=0;for(W=0,B=0;B<y.sfbmax;B++){var ae=y.width[B];for(m(ae>=0),W+=ae,j=-ae;j<0&&y.l3_enc[j+W]==0;j++);j==0&&(y.scalefac[B]=re=-2)}if(y.scalefac_scale==0&&y.preflag==0){var be=0;for(B=0;B<y.sfbmax;B++)y.scalefac[B]>0&&(be|=y.scalefac[B]);if((be&1)==0&&be!=0){for(B=0;B<y.sfbmax;B++)y.scalefac[B]>0&&(y.scalefac[B]>>=1);y.scalefac_scale=re=1}}if(y.preflag==0&&y.block_type!=d.SHORT_TYPE&&U.mode_gr==2){for(B=11;B<d.SBPSY_l&&!(y.scalefac[B]<x.pretab[B]&&y.scalefac[B]!=-2);B++);if(B==d.SBPSY_l){for(B=11;B<d.SBPSY_l;B++)y.scalefac[B]>0&&(y.scalefac[B]-=x.pretab[B]);y.preflag=re=1}}for(G=0;G<4;G++)c.scfsi[u][G]=0;for(U.mode_gr==2&&v==1&&c.tt[0][u].block_type!=d.SHORT_TYPE&&c.tt[1][u].block_type!=d.SHORT_TYPE&&(de(u,c),re=0),B=0;B<y.sfbmax;B++)y.scalefac[B]==-2&&(y.scalefac[B]=0);re!=0&&(U.mode_gr==2?this.scale_bitcount(y):this.scale_bitcount_lsf(U,y))};function _(U,v){for(var u=0;u<v;++u)if(U[u]<0)return!1;return!0}var Y=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],b=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],D=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(U){var v,u,c=0,y=0,B,G=U.scalefac;if(m(_(G,U.sfbmax)),U.block_type==d.SHORT_TYPE)B=Y,U.mixed_block_flag!=0&&(B=b);else if(B=D,U.preflag==0){for(u=11;u<d.SBPSY_l&&!(G[u]<x.pretab[u]);u++);if(u==d.SBPSY_l)for(U.preflag=1,u=11;u<d.SBPSY_l;u++)G[u]-=x.pretab[u]}for(u=0;u<U.sfbdivide;u++)c<G[u]&&(c=G[u]);for(;u<U.sfbmax;u++)y<G[u]&&(y=G[u]);for(U.part2_length=g.LARGE_BITS,v=0;v<16;v++)c<Q[v]&&y<ee[v]&&U.part2_length>B[v]&&(U.part2_length=B[v],U.scalefac_compress=v);return U.part2_length==g.LARGE_BITS};var X=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(U,v){var u,c,y,B,G,W,j,re,ae=o(4),be=v.scalefac;for(v.preflag!=0?u=2:u=0,j=0;j<4;j++)ae[j]=0;if(v.block_type==d.SHORT_TYPE){c=1;var Me=x.nr_of_sfb_block[u][c];for(re=0,y=0;y<4;y++)for(B=Me[y]/3,j=0;j<B;j++,re++)for(G=0;G<3;G++)be[re*3+G]>ae[y]&&(ae[y]=be[re*3+G])}else{c=0;var Me=x.nr_of_sfb_block[u][c];for(re=0,y=0;y<4;y++)for(B=Me[y],j=0;j<B;j++,re++)be[re]>ae[y]&&(ae[y]=be[re])}for(W=!1,y=0;y<4;y++)ae[y]>X[u][y]&&(W=!0);if(!W){var Be,Ge,Ye,it;for(v.sfb_partition_table=x.nr_of_sfb_block[u][c],y=0;y<4;y++)v.slen[y]=q[ae[y]];switch(Be=v.slen[0],Ge=v.slen[1],Ye=v.slen[2],it=v.slen[3],u){case 0:v.scalefac_compress=(Be*5+Ge<<4)+(Ye<<2)+it;break;case 1:v.scalefac_compress=400+(Be*5+Ge<<2)+Ye;break;case 2:v.scalefac_compress=500+Be*3+Ge;break;default:s.err.printf(`intensity stereo not implemented yet
`);break}}if(!W)for(m(v.sfb_partition_table!=null),v.part2_length=0,y=0;y<4;y++)v.part2_length+=v.slen[y]*v.sfb_partition_table[y];return W};var q=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(U){for(var v=2;v<=576;v+=2){for(var u=0,c;U.scalefac_band.l[++u]<v;);for(c=p[u][0];U.scalefac_band.l[c+1]>v;)c--;for(c<0&&(c=p[u][0]),U.bv_scf[v-2]=c,c=p[u][1];U.scalefac_band.l[c+U.bv_scf[v-2]+2]>v;)c--;c<0&&(c=p[u][1]),U.bv_scf[v-1]=c}}}h.exports=R},7095:h=>{function T(){this.setModules=function(e,n){}}h.exports=T},3362:h=>{function T(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}h.exports=T},3398:(h,T,e)=>{var n=e(935),s=n.System,i=n.VbrMode;n.Float;var o=n.ShortBlock;n.Util;var m=n.Arrays;n.new_array_n;var d=n.new_byte;n.new_double,n.new_float,n.new_float_n,n.new_int,n.new_int_n;var f=n.assert;S.NUMTOCENTRIES=100,S.MAXFRAMESIZE=2880;function S(){var g,R,x;this.setModules=function(v,u,c){g=v,R=u,x=c};var E=1,p=2,O=4,M=8,A=S.NUMTOCENTRIES,L=S.MAXFRAMESIZE,V=A+4+4+4+4+4,K=V+9+1+1+8+1+1+3+1+1+2+4+2+2,F=128,k=64,l=32,P=null,H="Xing",Z="Info",Q=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function ee(v,u){if(v.nVbrNumFrames++,v.sum+=u,v.seen++,!(v.seen<v.want)&&(v.pos<v.size&&(v.bag[v.pos]=v.sum,v.pos++,v.seen=0),v.pos==v.size)){for(var c=1;c<v.size;c+=2)v.bag[c/2]=v.bag[c];v.want*=2,v.pos/=2}}function te(v,u){if(!(v.pos<=0))for(var c=1;c<A;++c){var y=c/A,B,G,W=0|Math.floor(y*v.pos);W>v.pos-1&&(W=v.pos-1),B=v.bag[W],G=v.sum;var j=0|256*B/G;j>255&&(j=255),u[c]=255&j}}this.addVbrFrame=function(v){var u=v.internal_flags,c=Tables.bitrate_table[v.version][u.bitrate_index];f(u.VBR_seek_table.bag!=null),ee(u.VBR_seek_table,c)};function fe(v,u){var c=v[u+0]&255;return c<<=8,c|=v[u+1]&255,c<<=8,c|=v[u+2]&255,c<<=8,c|=v[u+3]&255,c}function de(v,u,c){v[u+0]=255&(c>>24&255),v[u+1]=255&(c>>16&255),v[u+2]=255&(c>>8&255),v[u+3]=255&(c&255)}function _(v,u,c){v[u+0]=255&(c>>8&255),v[u+1]=255&(c&255)}function Y(v,u){return new String(v,u,H.length(),P).equals(H)||new String(v,u,Z.length(),P).equals(Z)}function b(v,u,c){return 255&(v<<u|c&~(-1<<u))}function D(v,u){var c=v.internal_flags;u[0]=b(u[0],8,255),u[1]=b(u[1],3,7),u[1]=b(u[1],1,v.out_samplerate<16e3?0:1),u[1]=b(u[1],1,v.version),u[1]=b(u[1],2,1),u[1]=b(u[1],1,v.error_protection?0:1),u[2]=b(u[2],4,c.bitrate_index),u[2]=b(u[2],2,c.samplerate_index),u[2]=b(u[2],1,0),u[2]=b(u[2],1,v.extension),u[3]=b(u[3],2,v.mode.ordinal()),u[3]=b(u[3],2,c.mode_ext),u[3]=b(u[3],1,v.copyright),u[3]=b(u[3],1,v.original),u[3]=b(u[3],2,v.emphasis),u[0]=255;var y=255&(u[1]&241),B;v.version==1?B=F:v.out_samplerate<16e3?B=l:B=k,v.VBR==i.vbr_off&&(B=v.brate);var G;v.free_format?G=0:G=255&16*g.BitrateIndex(B,v.version,v.out_samplerate),v.version==1?(u[1]=255&(y|10),y=255&(u[2]&13),u[2]=255&(G|y)):(u[1]=255&(y|2),y=255&(u[2]&13),u[2]=255&(G|y))}this.getVbrTag=function(v){var u=new VBRTagData,c=0;u.flags=0;var y=v[c+1]>>3&1,B=v[c+2]>>2&3,G=v[c+3]>>6&3,W=v[c+2]>>4&15;if(W=Tables.bitrate_table[y][W],v[c+1]>>4==14?u.samprate=Tables.samplerate_table[2][B]:u.samprate=Tables.samplerate_table[y][B],y!=0?G!=3?c+=36:c+=21:G!=3?c+=21:c+=13,!Y(v,c))return null;c+=4,u.hId=y;var j=u.flags=fe(v,c);if(c+=4,(j&E)!=0&&(u.frames=fe(v,c),c+=4),(j&p)!=0&&(u.bytes=fe(v,c),c+=4),(j&O)!=0){if(u.toc!=null)for(var re=0;re<A;re++)u.toc[re]=v[c+re];c+=A}u.vbrScale=-1,(j&M)!=0&&(u.vbrScale=fe(v,c),c+=4),u.headersize=(y+1)*72e3*W/u.samprate,c+=21;var ae=v[c+0]<<4;ae+=v[c+1]>>4;var be=(v[c+1]&15)<<8;return be+=v[c+2]&255,(ae<0||ae>3e3)&&(ae=-1),(be<0||be>3e3)&&(be=-1),u.encDelay=ae,u.encPadding=be,u},this.InitVbrTag=function(v){var u=v.internal_flags,c;v.version==1?c=F:v.out_samplerate<16e3?c=l:c=k,v.VBR==i.vbr_off&&(c=v.brate);var y=(v.version+1)*72e3*c/v.out_samplerate,B=u.sideinfo_len+K;if(u.VBR_seek_table.TotalFrameSize=y,y<B||y>L){v.bWriteVbrTag=!1;return}u.VBR_seek_table.nVbrNumFrames=0,u.VBR_seek_table.nBytesWritten=0,u.VBR_seek_table.sum=0,u.VBR_seek_table.seen=0,u.VBR_seek_table.want=1,u.VBR_seek_table.pos=0,u.VBR_seek_table.bag==null&&(u.VBR_seek_table.bag=new int[400],u.VBR_seek_table.size=400);var G=d(L);D(v,G);for(var W=u.VBR_seek_table.TotalFrameSize,j=0;j<W;++j)R.add_dummy_byte(v,G[j]&255,1)};function X(v,u){var c=u^v;return u=u>>8^Q[c&255],u}this.updateMusicCRC=function(v,u,c,y){for(var B=0;B<y;++B)v[0]=X(u[c+B],v[0])};function q(v,u,c,y,B){var G=v.internal_flags,W=0,j=v.encoder_delay,re=v.encoder_padding,ae=100-10*v.VBR_q-v.quality,be=x.getLameVeryShortVersion(),Me,Be=0,Ge,Ye=[1,5,3,2,4,0,3],it=0|(v.lowpassfreq/100+.5>255?255:v.lowpassfreq/100+.5),_t=0,C=0,z=0,Ne=v.internal_flags.noise_shaping,Te=0,Ue=0,Ee=0,De=0,ze=0,Xe=(v.exp_nspsytune&1)!=0,Ze=(v.exp_nspsytune&2)!=0,Fe=!1,rt=!1,vt=v.internal_flags.nogap_total,at=v.internal_flags.nogap_current,He=v.ATHtype,et=0,$e;switch(v.VBR){case vbr_abr:$e=v.VBR_mean_bitrate_kbps;break;case vbr_off:$e=v.brate;break;default:$e=v.VBR_min_bitrate_kbps}switch(v.VBR.ordinal()<Ye.length?Me=Ye[v.VBR.ordinal()]:Me=0,Ge=16*Be+Me,G.findReplayGain&&(G.RadioGain>510&&(G.RadioGain=510),G.RadioGain<-510&&(G.RadioGain=-510),C=8192,C|=3072,G.RadioGain>=0?C|=G.RadioGain:(C|=512,C|=-G.RadioGain)),G.findPeakSample&&(_t=Math.abs(0|G.PeakSample/32767*Math.pow(2,23)+.5)),vt!=-1&&(at>0&&(rt=!0),at<vt-1&&(Fe=!0)),et=He+((Xe?1:0)<<4)+((Ze?1:0)<<5)+((Fe?1:0)<<6)+((rt?1:0)<<7),ae<0&&(ae=0),v.mode){case MONO:Te=0;break;case STEREO:Te=1;break;case DUAL_CHANNEL:Te=2;break;case JOINT_STEREO:v.force_ms?Te=4:Te=3;break;case NOT_SET:default:Te=7;break}v.in_samplerate<=32e3?Ee=0:v.in_samplerate==48e3?Ee=2:v.in_samplerate>48e3?Ee=3:Ee=1,(v.short_blocks==o.short_block_forced||v.short_blocks==o.short_block_dispensed||v.lowpassfreq==-1&&v.highpassfreq==-1||v.scale_left<v.scale_right||v.scale_left>v.scale_right||v.disable_reservoir&&v.brate<320||v.noATH||v.ATHonly||He==0||v.in_samplerate<=32e3)&&(Ue=1),De=Ne+(Te<<2)+(Ue<<5)+(Ee<<6),ze=G.nMusicCRC,de(c,y+W,ae),W+=4;for(var ct=0;ct<9;ct++)c[y+W+ct]=255&be.charAt(ct);W+=9,c[y+W]=255&Ge,W++,c[y+W]=255&it,W++,de(c,y+W,_t),W+=4,_(c,y+W,C),W+=2,_(c,y+W,z),W+=2,c[y+W]=255&et,W++,$e>=255?c[y+W]=255:c[y+W]=255&$e,W++,c[y+W]=255&j>>4,c[y+W+1]=255&(j<<4)+(re>>8),c[y+W+2]=255&re,W+=3,c[y+W]=255&De,W++,c[y+W++]=0,_(c,y+W,v.preset),W+=2,de(c,y+W,u),W+=4,_(c,y+W,ze),W+=2;for(var St=0;St<W;St++)B=X(c[y+St],B);return _(c,y+W,B),W+=2,W}function U(v){v.seek(0);var u=d(10);v.readFully(u);var c;return new String(u,"ISO-8859-1").startsWith("ID3")?c=0:c=((u[6]&127)<<21|(u[7]&127)<<14|(u[8]&127)<<7|u[9]&127)+u.length,c}this.getLameTagFrame=function(v,u){var c=v.internal_flags;if(!v.bWriteVbrTag||c.Class_ID!=Lame.LAME_ID||c.VBR_seek_table.pos<=0)return 0;if(u.length<c.VBR_seek_table.TotalFrameSize)return c.VBR_seek_table.TotalFrameSize;m.fill(u,0,c.VBR_seek_table.TotalFrameSize,0),D(v,u);var y=d(A);if(v.free_format)for(var B=1;B<A;++B)y[B]=255&255*B/100;else te(c.VBR_seek_table,y);var G=c.sideinfo_len;v.error_protection&&(G-=2),v.VBR==i.vbr_off?(u[G++]=255&Z.charAt(0),u[G++]=255&Z.charAt(1),u[G++]=255&Z.charAt(2),u[G++]=255&Z.charAt(3)):(u[G++]=255&H.charAt(0),u[G++]=255&H.charAt(1),u[G++]=255&H.charAt(2),u[G++]=255&H.charAt(3)),de(u,G,E+p+O+M),G+=4,de(u,G,c.VBR_seek_table.nVbrNumFrames),G+=4;var W=c.VBR_seek_table.nBytesWritten+c.VBR_seek_table.TotalFrameSize;de(u,G,0|W),G+=4,s.arraycopy(y,0,u,G,y.length),G+=y.length,v.error_protection&&R.CRC_writeheader(c,u);for(var j=0,B=0;B<G;B++)j=X(u[B],j);return G+=q(v,W,u,G,j),c.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(v,u){var c=v.internal_flags;if(c.VBR_seek_table.pos<=0||(u.seek(u.length()),u.length()==0))return-1;var y=U(u);u.seek(y);var B=d(L),G=getLameTagFrame(v,B);return G>B.length?-1:(G<1||u.write(B,0,G),0)}}h.exports=S},2367:h=>{function T(){var e="http://www.mp3dev.org/",n=3,s=98,i=4,o=0,m=93;this.getLameVersion=function(){return n+"."+s+"."+i},this.getLameShortVersion=function(){return n+"."+s+"."+i},this.getLameVeryShortVersion=function(){return"LAME"+n+"."+s+"r"},this.getPsyVersion=function(){return o+"."+m},this.getLameUrl=function(){return e},this.getLameOsBitness=function(){return"32bits"}}h.exports=T},935:h=>{function T(M){return new Int8Array(M)}function e(M){return new Int16Array(M)}function n(M){return new Int32Array(M)}function s(M){return new Float32Array(M)}function i(M){return new Float64Array(M)}function o(M){if(M.length==1)return s(M[0]);var A=M[0];M=M.slice(1);for(var L=[],V=0;V<A;V++)L.push(o(M));return L}function m(M){if(M.length==1)return n(M[0]);var A=M[0];M=M.slice(1);for(var L=[],V=0;V<A;V++)L.push(m(M));return L}function d(M){if(M.length==1)return e(M[0]);var A=M[0];M=M.slice(1);for(var L=[],V=0;V<A;V++)L.push(d(M));return L}function f(M){if(M.length==1)return new Array(M[0]);var A=M[0];M=M.slice(1);for(var L=[],V=0;V<A;V++)L.push(f(M));return L}var S={};S.fill=function(M,A,L,V){if(arguments.length==2)for(var K=0;K<M.length;K++)M[K]=arguments[1];else for(var K=A;K<L;K++)M[K]=V};var g={};g.arraycopy=function(M,A,L,V,K){for(var F=A+K;A<F;)L[V++]=M[A++]};var R={};R.SQRT2=1.4142135623730951,R.FAST_LOG10=function(M){return Math.log10(M)},R.FAST_LOG10_X=function(M,A){return Math.log10(M)*A};function x(M){this.ordinal=M}x.short_block_allowed=new x(0),x.short_block_coupled=new x(1),x.short_block_dispensed=new x(2),x.short_block_forced=new x(3);var E={};E.MAX_VALUE=34028235e31;function p(M){this.ordinal=M}p.vbr_off=new p(0),p.vbr_mt=new p(1),p.vbr_rh=new p(2),p.vbr_abr=new p(3),p.vbr_mtrh=new p(4),p.vbr_default=p.vbr_mtrh;var O=function(M){};h.exports={System:g,VbrMode:p,Float:E,ShortBlock:x,Util:R,Arrays:S,new_array_n:f,new_byte:T,new_double:i,new_float:s,new_float_n:o,new_int:n,new_int_n:m,new_short:e,new_short_n:d,assert:O}},5644:(h,T,e)=>{var n=e(935);n.System,n.VbrMode,n.Float,n.ShortBlock,n.Util,n.Arrays,n.new_array_n;var s=n.new_byte;n.new_double,n.new_float,n.new_float_n,n.new_int,n.new_int_n;var i=n.assert;Lame=e(4566),Presets=e(9457),GainAnalysis=e(1287),QuantizePVT=e(429),Quantize=e(9833),Takehiro=e(5638),Reservoir=e(3060),MPEGMode=e(8231),BitStream=e(3724),e(687);var o=e(2367),m=e(3398);function d(){this.setModules=function(p,O){}}function f(){this.setModules=function(p,O,M){}}function S(){}function g(){this.setModules=function(p,O){}}function R(p,O,M){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),p=1,O=44100,M=128);var A=new Lame,L=new d,V=new GainAnalysis,K=new BitStream,F=new Presets,k=new QuantizePVT,l=new Quantize,P=new m,H=new o,Z=new g,Q=new Reservoir,ee=new Takehiro,te=new f,fe=new S;A.setModules(V,K,F,k,l,P,H,Z,fe),K.setModules(V,fe,H,P),Z.setModules(K,H),F.setModules(A),l.setModules(K,Q,k,ee),k.setModules(ee,Q,A.enc.psy),Q.setModules(K),ee.setModules(k),P.setModules(A,K,H),L.setModules(te,fe),te.setModules(H,Z,F);var de=A.lame_init();de.num_channels=p,de.in_samplerate=O,de.brate=M,de.mode=MPEGMode.STEREO,de.quality=3,de.bWriteVbrTag=!1,de.disable_reservoir=!0,de.write_id3tag_automatic=!1;var _=A.lame_init_params(de);i(_==0);var Y=1152,b=0|1.25*Y+7200,D=s(b);this.encodeBuffer=function(X,q){p==1&&(q=X),i(X.length==q.length),X.length>Y&&(Y=X.length,b=0|1.25*Y+7200,D=s(b));var U=A.lame_encode_buffer(de,X,q,X.length,D,0,b);return new Int8Array(D.subarray(0,U))},this.flush=function(){var X=A.lame_encode_flush(de,D,0,b);return new Int8Array(D.subarray(0,X))}}function x(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function E(p){return p.charCodeAt(0)<<24|p.charCodeAt(1)<<16|p.charCodeAt(2)<<8|p.charCodeAt(3)}x.RIFF=E("RIFF"),x.WAVE=E("WAVE"),x.fmt_=E("fmt "),x.data=E("data"),x.readHeader=function(p){var O=new x,M=p.getUint32(0,!1);if(x.RIFF==M&&(p.getUint32(4,!0),x.WAVE==p.getUint32(8,!1)&&x.fmt_==p.getUint32(12,!1))){var A=p.getUint32(16,!0),L=16+4;switch(A){case 16:case 18:O.channels=p.getUint16(L+2,!0),O.sampleRate=p.getUint32(L+4,!0);break;default:throw"extended fmt chunk not implemented"}L+=A;for(var V=x.data,K=0;V!=M&&(M=p.getUint32(L,!1),K=p.getUint32(L+4,!0),V!=M);)L+=K+8;return O.dataLen=K,O.dataOffset=L+8,O}},h.exports.Mp3Encoder=R,h.exports.WavHeader=x},5235:(h,T,e)=>{h.exports=e(8425)},8425:(h,T,e)=>{T.__esModule=!0,T.tokenize=T.test=T.scanner=T.parser=T.options=T.inherits=T.find=void 0;var n=e(2227),s=e(7951),i=S(s),o=e(6417),m=S(o),d=e(5788),f=S(d);function S(E){if(E&&E.__esModule)return E;var p={};if(E!=null)for(var O in E)Object.prototype.hasOwnProperty.call(E,O)&&(p[O]=E[O]);return p.default=E,p}Array.isArray||(Array.isArray=function(E){return Object.prototype.toString.call(E)==="[object Array]"});var g=function(p){return f.run(m.run(p))},R=function(p){for(var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,M=g(p),A=[],L=0;L<M.length;L++){var V=M[L];V.isLink&&(!O||V.type===O)&&A.push(V.toObject())}return A},x=function(p){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,M=g(p);return M.length===1&&M[0].isLink&&(!O||M[0].type===O)};T.find=R,T.inherits=n.inherits,T.options=i,T.parser=f,T.scanner=m,T.test=x,T.tokenize=g},5788:(h,T,e)=>{T.__esModule=!0,T.start=T.run=T.TOKENS=T.State=void 0;var n=e(5439),s=e(3370),i=m(s),o=e(3333);function m(re){if(re&&re.__esModule)return re;var ae={};if(re!=null)for(var be in re)Object.prototype.hasOwnProperty.call(re,be)&&(ae[be]=re[be]);return ae.default=re,ae}var d=function(ae){return new n.TokenState(ae)},f=d(),S=d(),g=d(),R=d(),x=d(),E=d(),p=d(),O=d(s.URL),M=d(),A=d(s.URL),L=d(s.URL),V=d(),K=d(),F=d(),k=d(),l=d(),P=d(s.URL),H=d(s.URL),Z=d(s.URL),Q=d(s.URL),ee=d(),te=d(),fe=d(),de=d(),_=d(),Y=d(),b=d(s.EMAIL),D=d(),X=d(s.EMAIL),q=d(s.MAILTOEMAIL),U=d(),v=d(),u=d(),c=d(),y=d(s.NL);f.on(o.NL,y).on(o.PROTOCOL,S).on(o.MAILTO,g).on(o.SLASH,R),S.on(o.SLASH,R),R.on(o.SLASH,x),f.on(o.TLD,E).on(o.DOMAIN,E).on(o.LOCALHOST,O).on(o.NUM,E),x.on(o.TLD,L).on(o.DOMAIN,L).on(o.NUM,L).on(o.LOCALHOST,L),E.on(o.DOT,p),_.on(o.DOT,Y),p.on(o.TLD,O).on(o.DOMAIN,E).on(o.NUM,E).on(o.LOCALHOST,E),Y.on(o.TLD,b).on(o.DOMAIN,_).on(o.NUM,_).on(o.LOCALHOST,_),O.on(o.DOT,p),b.on(o.DOT,Y),O.on(o.COLON,M).on(o.SLASH,L),M.on(o.NUM,A),A.on(o.SLASH,L),b.on(o.COLON,D),D.on(o.NUM,X);var B=[o.DOMAIN,o.AT,o.LOCALHOST,o.NUM,o.PLUS,o.POUND,o.PROTOCOL,o.SLASH,o.TLD,o.UNDERSCORE,o.SYM,o.AMPERSAND],G=[o.COLON,o.DOT,o.QUERY,o.PUNCTUATION,o.CLOSEBRACE,o.CLOSEBRACKET,o.CLOSEANGLEBRACKET,o.CLOSEPAREN,o.OPENBRACE,o.OPENBRACKET,o.OPENANGLEBRACKET,o.OPENPAREN];L.on(o.OPENBRACE,K).on(o.OPENBRACKET,F).on(o.OPENANGLEBRACKET,k).on(o.OPENPAREN,l),V.on(o.OPENBRACE,K).on(o.OPENBRACKET,F).on(o.OPENANGLEBRACKET,k).on(o.OPENPAREN,l),K.on(o.CLOSEBRACE,L),F.on(o.CLOSEBRACKET,L),k.on(o.CLOSEANGLEBRACKET,L),l.on(o.CLOSEPAREN,L),P.on(o.CLOSEBRACE,L),H.on(o.CLOSEBRACKET,L),Z.on(o.CLOSEANGLEBRACKET,L),Q.on(o.CLOSEPAREN,L),ee.on(o.CLOSEBRACE,L),te.on(o.CLOSEBRACKET,L),fe.on(o.CLOSEANGLEBRACKET,L),de.on(o.CLOSEPAREN,L),K.on(B,P),F.on(B,H),k.on(B,Z),l.on(B,Q),K.on(G,ee),F.on(G,te),k.on(G,fe),l.on(G,de),P.on(B,P),H.on(B,H),Z.on(B,Z),Q.on(B,Q),P.on(G,P),H.on(G,H),Z.on(G,Z),Q.on(G,Q),ee.on(B,P),te.on(B,H),fe.on(B,Z),de.on(B,Q),ee.on(G,ee),te.on(G,te),fe.on(G,fe),de.on(G,de),L.on(B,L),V.on(B,L),L.on(G,V),V.on(G,V),g.on(o.TLD,q).on(o.DOMAIN,q).on(o.NUM,q).on(o.LOCALHOST,q),q.on(B,q).on(G,U),U.on(B,q).on(G,U);var W=[o.DOMAIN,o.NUM,o.PLUS,o.POUND,o.QUERY,o.UNDERSCORE,o.SYM,o.AMPERSAND,o.TLD];E.on(W,v).on(o.AT,u),O.on(W,v).on(o.AT,u),p.on(W,v),v.on(W,v).on(o.AT,u).on(o.DOT,c),c.on(W,v),u.on(o.TLD,_).on(o.DOMAIN,_).on(o.LOCALHOST,b);var j=function(ae){for(var be=ae.length,Me=0,Be=[],Ge=[];Me<be;){for(var Ye=f,it=null,_t=null,C=0,z=null,Ne=-1;Me<be&&!(it=Ye.next(ae[Me]));)Ge.push(ae[Me++]);for(;Me<be&&(_t=it||Ye.next(ae[Me]));)it=null,Ye=_t,Ye.accepts()?(Ne=0,z=Ye):Ne>=0&&Ne++,Me++,C++;if(Ne<0)for(var Te=Me-C;Te<Me;Te++)Ge.push(ae[Te]);else{Ge.length>0&&(Be.push(new s.TEXT(Ge)),Ge=[]),Me-=Ne,C-=Ne;var Ue=z.emit();Be.push(new Ue(ae.slice(Me-C,Me)))}}return Ge.length>0&&Be.push(new s.TEXT(Ge)),Be};T.State=n.TokenState,T.TOKENS=i,T.run=j,T.start=f},6417:(h,T,e)=>{T.__esModule=!0,T.start=T.run=T.TOKENS=T.State=void 0;var n=e(5439),s=e(3333),i=o(s);function o(b){if(b&&b.__esModule)return b;var D={};if(b!=null)for(var X in b)Object.prototype.hasOwnProperty.call(b,X)&&(D[X]=b[X]);return D.default=b,D}var m="aaa|aarp|abarth|abb|abbott|abbvie|abc|able|abogado|abudhabi|ac|academy|accenture|accountant|accountants|aco|active|actor|ad|adac|ads|adult|ae|aeg|aero|aetna|af|afamilycompany|afl|africa|ag|agakhan|agency|ai|aig|aigo|airbus|airforce|airtel|akdn|al|alfaromeo|alibaba|alipay|allfinanz|allstate|ally|alsace|alstom|am|americanexpress|americanfamily|amex|amfam|amica|amsterdam|analytics|android|anquan|anz|ao|aol|apartments|app|apple|aq|aquarelle|ar|arab|aramco|archi|army|arpa|art|arte|as|asda|asia|associates|at|athleta|attorney|au|auction|audi|audible|audio|auspost|author|auto|autos|avianca|aw|aws|ax|axa|az|azure|ba|baby|baidu|banamex|bananarepublic|band|bank|bar|barcelona|barclaycard|barclays|barefoot|bargains|baseball|basketball|bauhaus|bayern|bb|bbc|bbt|bbva|bcg|bcn|bd|be|beats|beauty|beer|bentley|berlin|best|bestbuy|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|black|blackfriday|blanco|blockbuster|blog|bloomberg|blue|bm|bms|bmw|bn|bnl|bnpparibas|bo|boats|boehringer|bofa|bom|bond|boo|book|booking|boots|bosch|bostik|boston|bot|boutique|box|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|calvinklein|cam|camera|camp|cancerresearch|canon|capetown|capital|capitalone|car|caravan|cards|care|career|careers|cars|cartier|casa|case|caseih|cash|casino|cat|catering|catholic|cba|cbn|cbre|cbs|cc|cd|ceb|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|chase|chat|cheap|chintai|chloe|christmas|chrome|chrysler|church|ci|cipriani|circle|cisco|citadel|citi|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|comcast|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cookingchannel|cool|coop|corsica|country|coupon|coupons|courses|cr|credit|creditcard|creditunion|cricket|crown|crs|cruise|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|data|date|dating|datsun|day|dclk|dds|de|deal|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|discover|dish|diy|dj|dk|dm|dnp|do|docs|doctor|dodge|dog|doha|domains|dot|download|drive|dtv|dubai|duck|dunlop|duns|dupont|durban|dvag|dvr|dz|earth|eat|ec|eco|edeka|edu|education|ee|eg|email|emerck|energy|engineer|engineering|enterprises|epost|epson|equipment|er|ericsson|erni|es|esq|estate|esurance|et|etisalat|eu|eurovision|eus|events|everbank|exchange|expert|exposed|express|extraspace|fage|fail|fairwinds|faith|family|fan|fans|farm|farmers|fashion|fast|fedex|feedback|ferrari|ferrero|fi|fiat|fidelity|fido|film|final|finance|financial|fire|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|flir|florist|flowers|fly|fm|fo|foo|food|foodnetwork|football|ford|forex|forsale|forum|foundation|fox|fr|free|fresenius|frl|frogans|frontdoor|frontier|ftr|fujitsu|fujixerox|fun|fund|furniture|futbol|fyi|ga|gal|gallery|gallo|gallup|game|games|gap|garden|gb|gbiz|gd|gdn|ge|gea|gent|genting|george|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glade|glass|gle|global|globo|gm|gmail|gmbh|gmo|gmx|gn|godaddy|gold|goldpoint|golf|goo|goodhands|goodyear|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|grocery|group|gs|gt|gu|guardian|gucci|guge|guide|guitars|guru|gw|gy|hair|hamburg|hangout|haus|hbo|hdfc|hdfcbank|health|healthcare|help|helsinki|here|hermes|hgtv|hiphop|hisamitsu|hitachi|hiv|hk|hkt|hm|hn|hockey|holdings|holiday|homedepot|homegoods|homes|homesense|honda|honeywell|horse|hospital|host|hosting|hot|hoteles|hotels|hotmail|house|how|hr|hsbc|ht|htc|hu|hughes|hyatt|hyundai|ibm|icbc|ice|icu|id|ie|ieee|ifm|ikano|il|im|imamat|imdb|immo|immobilien|in|industries|infiniti|info|ing|ink|institute|insurance|insure|int|intel|international|intuit|investments|io|ipiranga|iq|ir|irish|is|iselect|ismaili|ist|istanbul|it|itau|itv|iveco|iwc|jaguar|java|jcb|jcp|je|jeep|jetzt|jewelry|jio|jlc|jll|jm|jmp|jnj|jo|jobs|joburg|jot|joy|jp|jpmorgan|jprs|juegos|juniper|kaufen|kddi|ke|kerryhotels|kerrylogistics|kerryproperties|kfh|kg|kh|ki|kia|kim|kinder|kindle|kitchen|kiwi|km|kn|koeln|komatsu|kosher|kp|kpmg|kpn|kr|krd|kred|kuokgroup|kw|ky|kyoto|kz|la|lacaixa|ladbrokes|lamborghini|lamer|lancaster|lancia|lancome|land|landrover|lanxess|lasalle|lat|latino|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|lefrak|legal|lego|lexus|lgbt|li|liaison|lidl|life|lifeinsurance|lifestyle|lighting|like|lilly|limited|limo|lincoln|linde|link|lipsy|live|living|lixil|lk|loan|loans|locker|locus|loft|lol|london|lotte|lotto|love|lpl|lplfinancial|lr|ls|lt|ltd|ltda|lu|lundbeck|lupin|luxe|luxury|lv|ly|ma|macys|madrid|maif|maison|makeup|man|management|mango|map|market|marketing|markets|marriott|marshalls|maserati|mattel|mba|mc|mckinsey|md|me|med|media|meet|melbourne|meme|memorial|men|menu|meo|merckmsd|metlife|mg|mh|miami|microsoft|mil|mini|mint|mit|mitsubishi|mk|ml|mlb|mls|mm|mma|mn|mo|mobi|mobile|mobily|moda|moe|moi|mom|monash|money|monster|mopar|mormon|mortgage|moscow|moto|motorcycles|mov|movie|movistar|mp|mq|mr|ms|msd|mt|mtn|mtr|mu|museum|mutual|mv|mw|mx|my|mz|na|nab|nadex|nagoya|name|nationwide|natura|navy|nba|nc|ne|nec|net|netbank|netflix|network|neustar|new|newholland|news|next|nextdirect|nexus|nf|nfl|ng|ngo|nhk|ni|nico|nike|nikon|ninja|nissan|nissay|nl|no|nokia|northwesternmutual|norton|now|nowruz|nowtv|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|observer|off|office|okinawa|olayan|olayangroup|oldnavy|ollo|om|omega|one|ong|onl|online|onyourside|ooo|open|oracle|orange|org|organic|origins|osaka|otsuka|ott|ovh|pa|page|panasonic|panerai|paris|pars|partners|parts|party|passagens|pay|pccw|pe|pet|pf|pfizer|pg|ph|pharmacy|phd|philips|phone|photo|photography|photos|physio|piaget|pics|pictet|pictures|pid|pin|ping|pink|pioneer|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pnc|pohl|poker|politie|porn|post|pr|pramerica|praxi|press|prime|pro|prod|productions|prof|progressive|promo|properties|property|protection|pru|prudential|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|qvc|racing|radio|raid|re|read|realestate|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|reliance|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|richardli|ricoh|rightathome|ril|rio|rip|rmit|ro|rocher|rocks|rodeo|rogers|room|rs|rsvp|ru|rugby|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsclub|samsung|sandvik|sandvikcoromant|sanofi|sap|sapo|sarl|sas|save|saxo|sb|sbi|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scjohnson|scor|scot|sd|se|search|seat|secure|security|seek|select|sener|services|ses|seven|sew|sex|sexy|sfr|sg|sh|shangrila|sharp|shaw|shell|shia|shiksha|shoes|shop|shopping|shouji|show|showtime|shriram|si|silk|sina|singles|site|sj|sk|ski|skin|sky|skype|sl|sling|sm|smart|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|space|spiegel|spot|spreadbetting|sr|srl|srt|st|stada|staples|star|starhub|statebank|statefarm|statoil|stc|stcgroup|stockholm|storage|store|stream|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiftcover|swiss|sx|sy|sydney|symantec|systems|sz|tab|taipei|talk|taobao|target|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|tdk|team|tech|technology|tel|telecity|telefonica|temasek|tennis|teva|tf|tg|th|thd|theater|theatre|tiaa|tickets|tienda|tiffany|tips|tires|tirol|tj|tjmaxx|tjx|tk|tkmaxx|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|tr|trade|trading|training|travel|travelchannel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tunes|tushu|tv|tvs|tw|tz|ua|ubank|ubs|uconnect|ug|uk|unicom|university|uno|uol|ups|us|uy|uz|va|vacations|vana|vanguard|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|vig|viking|villas|vin|vip|virgin|visa|vision|vista|vistaprint|viva|vivo|vlaanderen|vn|vodka|volkswagen|volvo|vote|voting|voto|voyage|vu|vuelos|wales|walmart|walter|wang|wanggou|warman|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weibo|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|winners|wme|wolterskluwer|woodside|work|works|world|wow|ws|wtc|wtf|xbox|xerox|xfinity|xihuan|xin|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--30rr7y|xn--3bst00m|xn--3ds443g|xn--3e0b707e|xn--3hcrj9c|xn--3oq18vl8pn36a|xn--3pxu8k|xn--42c2d9a|xn--45br5cyl|xn--45brj9c|xn--45q11c|xn--4gbrim|xn--54b7fta0cc|xn--55qw42g|xn--55qx5d|xn--5su34j936bgsg|xn--5tzm5g|xn--6frz82g|xn--6qq986b3xl|xn--80adxhks|xn--80ao21a|xn--80aqecdr1a|xn--80asehdb|xn--80aswg|xn--8y0a063a|xn--90a3ac|xn--90ae|xn--90ais|xn--9dbq2a|xn--9et52u|xn--9krt00a|xn--b4w605ferd|xn--bck1b9a5dre4c|xn--c1avg|xn--c2br7g|xn--cck2b3b|xn--cg4bki|xn--clchc0ea0b2g2a9gcd|xn--czr694b|xn--czrs0t|xn--czru2d|xn--d1acj3b|xn--d1alf|xn--e1a4c|xn--eckvdtc9d|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fhbei|xn--fiq228c5hs|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--fjq720a|xn--flw351e|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--fzys8d69uvgm|xn--g2xx48c|xn--gckr3f0f|xn--gecrj9c|xn--gk3at1e|xn--h2breg3eve|xn--h2brj9c|xn--h2brj9c8c|xn--hxt814e|xn--i1b6b1a6a2e|xn--imr513n|xn--io0a7i|xn--j1aef|xn--j1amh|xn--j6w193g|xn--jlq61u9w7b|xn--jvr189m|xn--kcrx77d1x4a|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--kput3i|xn--l1acc|xn--lgbbat1ad8j|xn--mgb9awbf|xn--mgba3a3ejt|xn--mgba3a4f16a|xn--mgba7c0bbn0a|xn--mgbaakc7dvf|xn--mgbaam7a8h|xn--mgbab2bd|xn--mgbai9azgqp6j|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a|xn--mgbbh1a71e|xn--mgbc0a9azcg|xn--mgbca7dzdo|xn--mgberp4a5d4ar|xn--mgbgu82a|xn--mgbi4ecexp|xn--mgbpl2fh|xn--mgbt3dhd|xn--mgbtx2b|xn--mgbx4cd0ab|xn--mix891f|xn--mk1bu44c|xn--mxtq1m|xn--ngbc5azd|xn--ngbe9e0a|xn--ngbrx|xn--node|xn--nqv7f|xn--nqv7fs00ema|xn--nyqy26a|xn--o3cw4h|xn--ogbpf8fl|xn--p1acf|xn--p1ai|xn--pbt977c|xn--pgbs0dh|xn--pssy2u|xn--q9jyb4c|xn--qcka1pmc|xn--qxam|xn--rhqv96g|xn--rovu88b|xn--rvc1e0am3e|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--tckwe|xn--tiq49xqyj|xn--unup4y|xn--vermgensberater-ctb|xn--vermgensberatung-pwb|xn--vhquv|xn--vuq861b|xn--w4r85el8fhu5dnra|xn--w4rs40l|xn--wgbh1c|xn--wgbl6a|xn--xhq521b|xn--xkc2al3hye2a|xn--xkc2dl3a5ee0h|xn--y9a3aq|xn--yfro4i67o|xn--ygbi2ammx|xn--zfr164b|xperia|xxx|xyz|yachts|yahoo|yamaxun|yandex|ye|yodobashi|yoga|yokohama|you|youtube|yt|yun|za|zappos|zara|zero|zip|zippo|zm|zone|zuerich|zw".split("|"),d="0123456789".split(""),f="0123456789abcdefghijklmnopqrstuvwxyz".split(""),S=[" ","\f","\r","	","\v","\xA0","\u1680","\u180E"],g=[],R=function(D){return new n.CharacterState(D)},x=R(),E=R(s.NUM),p=R(s.DOMAIN),O=R(),M=R(s.WS);x.on("@",R(s.AT)).on(".",R(s.DOT)).on("+",R(s.PLUS)).on("#",R(s.POUND)).on("?",R(s.QUERY)).on("/",R(s.SLASH)).on("_",R(s.UNDERSCORE)).on(":",R(s.COLON)).on("{",R(s.OPENBRACE)).on("[",R(s.OPENBRACKET)).on("<",R(s.OPENANGLEBRACKET)).on("(",R(s.OPENPAREN)).on("}",R(s.CLOSEBRACE)).on("]",R(s.CLOSEBRACKET)).on(">",R(s.CLOSEANGLEBRACKET)).on(")",R(s.CLOSEPAREN)).on("&",R(s.AMPERSAND)).on([",",";","!",'"',"'"],R(s.PUNCTUATION)),x.on(`
`,R(s.NL)).on(S,M),M.on(S,M);for(var A=0;A<m.length;A++){var L=(0,n.stateify)(m[A],x,s.TLD,s.DOMAIN);g.push.apply(g,L)}var V=(0,n.stateify)("file",x,s.DOMAIN,s.DOMAIN),K=(0,n.stateify)("ftp",x,s.DOMAIN,s.DOMAIN),F=(0,n.stateify)("http",x,s.DOMAIN,s.DOMAIN),k=(0,n.stateify)("mailto",x,s.DOMAIN,s.DOMAIN);g.push.apply(g,V),g.push.apply(g,K),g.push.apply(g,F),g.push.apply(g,k);var l=V.pop(),P=K.pop(),H=F.pop(),Z=k.pop(),Q=R(s.DOMAIN),ee=R(s.PROTOCOL),te=R(s.MAILTO);P.on("s",Q).on(":",ee),H.on("s",Q).on(":",ee),g.push(Q),l.on(":",ee),Q.on(":",ee),Z.on(":",te);var fe=(0,n.stateify)("localhost",x,s.LOCALHOST,s.DOMAIN);g.push.apply(g,fe),x.on(d,E),E.on("-",O).on(d,E).on(f,p),p.on("-",O).on(f,p);for(var de=0;de<g.length;de++)g[de].on("-",O).on(f,p);O.on("-",O).on(d,p).on(f,p),x.defaultTransition=R(s.SYM);var _=function(D){for(var X=D.replace(/[A-Z]/g,function(j){return j.toLowerCase()}),q=D.length,U=[],v=0;v<q;){for(var u=x,c=null,y=0,B=null,G=-1;v<q&&(c=u.next(X[v]));)u=c,u.accepts()?(G=0,B=u):G>=0&&G++,y++,v++;if(!(G<0)){v-=G,y-=G;var W=B.emit();U.push(new W(D.substr(v-y,y)))}}return U},Y=x;T.State=n.CharacterState,T.TOKENS=i,T.run=_,T.start=Y},5439:(h,T,e)=>{T.__esModule=!0,T.stateify=T.TokenState=T.CharacterState=void 0;var n=e(2227);function s(){return function(f){this.j=[],this.T=f||null}}var i=s();i.prototype={defaultTransition:!1,on:function(S,g){if(S instanceof Array){for(var R=0;R<S.length;R++)this.j.push([S[R],g]);return this}return this.j.push([S,g]),this},next:function(S){for(var g=0;g<this.j.length;g++){var R=this.j[g],x=R[0],E=R[1];if(this.test(S,x))return E}return this.defaultTransition},accepts:function(){return!!this.T},test:function(S,g){return S===g},emit:function(){return this.T}};var o=(0,n.inherits)(i,s(),{test:function(S,g){return S===g||g instanceof RegExp&&g.test(S)}}),m=(0,n.inherits)(i,s(),{jump:function(S){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,R=this.next(new S(""));return R===this.defaultTransition?(R=new this.constructor(g),this.on(S,R)):g&&(R.T=g),R},test:function(S,g){return S instanceof g}});function d(f,S,g,R){for(var x=0,E=f.length,p=S,O=[],M=void 0;x<E&&(M=p.next(f[x]));)p=M,x++;if(x>=E)return[];for(;x<E-1;)M=new o(R),O.push(M),p.on(f[x],M),p=M,x++;return M=new o(g),O.push(M),p.on(f[E-1],M),O}T.CharacterState=o,T.TokenState=m,T.stateify=d},9770:(h,T)=>{T.__esModule=!0;function e(){return function(n){n&&(this.v=n)}}T.createTokenClass=e},3370:(h,T,e)=>{T.__esModule=!0,T.URL=T.TEXT=T.NL=T.EMAIL=T.MAILTOEMAIL=T.Base=void 0;var n=e(9770),s=e(2227),i=e(3333);function o(x){return x instanceof i.DOMAIN||x instanceof i.TLD}var m=(0,n.createTokenClass)();m.prototype={type:"token",isLink:!1,toString:function(){for(var E=[],p=0;p<this.v.length;p++)E.push(this.v[p].toString());return E.join("")},toHref:function(){return this.toString()},toObject:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"http";return{type:this.type,value:this.toString(),href:this.toHref(E)}}};var d=(0,s.inherits)(m,(0,n.createTokenClass)(),{type:"email",isLink:!0}),f=(0,s.inherits)(m,(0,n.createTokenClass)(),{type:"email",isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),S=(0,s.inherits)(m,(0,n.createTokenClass)(),{type:"text"}),g=(0,s.inherits)(m,(0,n.createTokenClass)(),{type:"nl"}),R=(0,s.inherits)(m,(0,n.createTokenClass)(),{type:"url",isLink:!0,toHref:function(){for(var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"http",p=!1,O=!1,M=this.v,A=[],L=0;M[L]instanceof i.PROTOCOL;)p=!0,A.push(M[L].toString().toLowerCase()),L++;for(;M[L]instanceof i.SLASH;)O=!0,A.push(M[L].toString()),L++;for(;o(M[L]);)A.push(M[L].toString().toLowerCase()),L++;for(;L<M.length;L++)A.push(M[L].toString());return A=A.join(""),p||O||(A=E+"://"+A),A},hasProtocol:function(){return this.v[0]instanceof i.PROTOCOL}});T.Base=m,T.MAILTOEMAIL=d,T.EMAIL=f,T.NL=g,T.TEXT=S,T.URL=R},3333:(h,T,e)=>{T.__esModule=!0,T.AMPERSAND=T.CLOSEPAREN=T.CLOSEANGLEBRACKET=T.CLOSEBRACKET=T.CLOSEBRACE=T.OPENPAREN=T.OPENANGLEBRACKET=T.OPENBRACKET=T.OPENBRACE=T.WS=T.TLD=T.SYM=T.UNDERSCORE=T.SLASH=T.MAILTO=T.PROTOCOL=T.QUERY=T.POUND=T.PLUS=T.NUM=T.NL=T.LOCALHOST=T.PUNCTUATION=T.DOT=T.COLON=T.AT=T.DOMAIN=T.Base=void 0;var n=e(9770),s=e(2227),i=(0,n.createTokenClass)();i.prototype={toString:function(){return this.v+""}};function o(Y){var b=Y?{v:Y}:{};return(0,s.inherits)(i,(0,n.createTokenClass)(),b)}var m=o(),d=o("@"),f=o(":"),S=o("."),g=o(),R=o(),x=o(`
`),E=o(),p=o("+"),O=o("#"),M=o(),A=o("mailto:"),L=o("?"),V=o("/"),K=o("_"),F=o(),k=o(),l=o(),P=o("{"),H=o("["),Z=o("<"),Q=o("("),ee=o("}"),te=o("]"),fe=o(">"),de=o(")"),_=o("&");T.Base=i,T.DOMAIN=m,T.AT=d,T.COLON=f,T.DOT=S,T.PUNCTUATION=g,T.LOCALHOST=R,T.NL=x,T.NUM=E,T.PLUS=p,T.POUND=O,T.QUERY=L,T.PROTOCOL=M,T.MAILTO=A,T.SLASH=V,T.UNDERSCORE=K,T.SYM=F,T.TLD=k,T.WS=l,T.OPENBRACE=P,T.OPENBRACKET=H,T.OPENANGLEBRACKET=Z,T.OPENPAREN=Q,T.CLOSEBRACE=ee,T.CLOSEBRACKET=te,T.CLOSEANGLEBRACKET=fe,T.CLOSEPAREN=de,T.AMPERSAND=_},2227:(h,T)=>{T.__esModule=!0,T.inherits=e;function e(n,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=Object.create(n.prototype);for(var m in i)o[m]=i[m];return o.constructor=s,s.prototype=o,s}},7951:(h,T)=>{T.__esModule=!0;var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},n={defaultProtocol:"http",events:null,format:o,formatHref:o,nl2br:!1,tagName:"a",target:m,validate:!0,ignoreTags:[],attributes:null,className:"linkified"};T.defaults=n,T.Options=s,T.contains=i;function s(d){d=d||{},this.defaultProtocol=d.hasOwnProperty("defaultProtocol")?d.defaultProtocol:n.defaultProtocol,this.events=d.hasOwnProperty("events")?d.events:n.events,this.format=d.hasOwnProperty("format")?d.format:n.format,this.formatHref=d.hasOwnProperty("formatHref")?d.formatHref:n.formatHref,this.nl2br=d.hasOwnProperty("nl2br")?d.nl2br:n.nl2br,this.tagName=d.hasOwnProperty("tagName")?d.tagName:n.tagName,this.target=d.hasOwnProperty("target")?d.target:n.target,this.validate=d.hasOwnProperty("validate")?d.validate:n.validate,this.ignoreTags=[],this.attributes=d.attributes||d.linkAttributes||n.attributes,this.className=d.hasOwnProperty("className")?d.className:d.linkClass||n.className;for(var f=d.hasOwnProperty("ignoreTags")?d.ignoreTags:n.ignoreTags,S=0;S<f.length;S++)this.ignoreTags.push(f[S].toUpperCase())}s.prototype={resolve:function(f){var S=f.toHref(this.defaultProtocol);return{formatted:this.get("format",f.toString(),f),formattedHref:this.get("formatHref",S,f),tagName:this.get("tagName",S,f),className:this.get("className",S,f),target:this.get("target",S,f),events:this.getObject("events",S,f),attributes:this.getObject("attributes",S,f)}},check:function(f){return this.get("validate",f.toString(),f)},get:function(f,S,g){var R=void 0,x=this[f];if(!x)return x;switch(typeof x=="undefined"?"undefined":e(x)){case"function":return x(S,g.type);case"object":return R=x.hasOwnProperty(g.type)?x[g.type]:n[f],typeof R=="function"?R(S,g.type):R}return x},getObject:function(f,S,g){var R=this[f];return typeof R=="function"?R(S,g.type):R}};function i(d,f){for(var S=0;S<d.length;S++)if(d[S]===f)return!0;return!1}function o(d){return d}function m(d,f){return f==="url"?"_blank":null}},9085:(h,T,e)=>{e.d(T,{Go:()=>i,jn:()=>s,v5:()=>n});var n=["png","jpg","jpeg","webp","svg","gif"],s=["mp4","video/ogg","webm","quicktime"],i=["mp3","audio/ogg","wav","mpeg"]},9706:(h,T,e)=>{e.r(T),e.d(T,{messagesValidation:()=>o,partcipantsValidation:()=>i,roomsValidation:()=>s});var n=e(3336);e(6541),e(1539),e(9753),e(9826),e(1703),e(6647);function s(d){var f=[{key:"roomId",type:["string","number"]},{key:"roomName",type:["string"]},{key:"users",type:["array"]}],S=function(R,x){return x.every(function(E){var p=!1;return(E.type[0]==="array"&&Array.isArray(R[E.key])||E.type.find(function(O){return O===(0,n.Z)(R[E.key])}))&&(p=!0),p&&m(R,E.key)})};if(!S(d,f))throw new Error("Rooms object is not valid! Must contain roomId[String, Number], roomName[String] and users[Array]")}function i(d){var f=[{key:"_id",type:["string","number"]},{key:"username",type:["string"]}],S=function(R,x){return x.every(function(E){var p=E.type.find(function(O){return O===(0,n.Z)(R[E.key])});return p&&m(R,E.key)})};if(!S(d,f))throw new Error("Participants object is not valid! Must contain _id[String, Number] and username[String]")}function o(d){var f=[{key:"_id",type:["string","number"]},{key:"content",type:["string","number"]},{key:"senderId",type:["string","number"]}],S=function(R,x){return x.every(function(E){var p=E.type.find(function(O){return O===(0,n.Z)(R[E.key])});return p&&m(R,E.key)})};if(!S(d,f))throw new Error("Messages object is not valid! Must contain _id[String, Number], content[String, Number] and senderId[String, Number]")}function m(d,f){return Object.prototype.hasOwnProperty.call(d,f)&&d[f]!==null&&d[f]!==void 0}},8438:(h,T,e)=>{e.r(T),e.d(T,{isAudioFile:()=>d,isImageFile:()=>i,isImageVideoFile:()=>m,isVideoFile:()=>o}),e(5212),e(1539),e(6699),e(2023);var n=e(9085);function s(f,S){if(!(!S||!S.type))return f.some(function(g){return S.type.toLowerCase().includes(g)})}function i(f){return s(n.v5,f)}function o(f){return s(n.jn,f)}function m(f){return s(n.v5,f)||s(n.jn,f)}function d(f){return s(n.Go,f)}},8772:(h,T,e)=>{e.r(T),e.d(T,{detectMobile:()=>n}),e(3650),e(4916),e(7601),e(1703),e(6647);function n(){var i=s(),o=i.substr(0,4);return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw(n|u)|c55\/|capi|ccwa|cdm|cell|chtm|cldc|cmd|co(mp|nd)|craw|da(it|ll|ng)|dbte|dcs|devi|dica|dmob|do(c|p)o|ds(12|d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(|_)|g1 u|g560|gene|gf5|gmo|go(\.w|od)|gr(ad|un)|haie|hcit|hd(m|p|t)|hei|hi(pt|ta)|hp( i|ip)|hsc|ht(c(| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i(20|go|ma)|i230|iac( ||\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|[a-w])|libw|lynx|m1w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|mcr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|([1-8]|c))|phil|pire|pl(ay|uc)|pn2|po(ck|rt|se)|prox|psio|ptg|qaa|qc(07|12|21|32|60|[2-7]|i)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h|oo|p)|sdk\/|se(c(|0|1)|47|mc|nd|ri)|sgh|shar|sie(|m)|sk0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h|v|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl|tdg|tel(i|m)|tim|tmo|to(pl|sh)|ts(70|m|m3|m5)|tx9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas|your|zeto|zte/i.test(o)}function s(){var i=navigator.userAgent||navigator.vendor||window.opera||null;if(!i)throw new Error("Failed to look for user agent information.");return i}},3336:(h,T,e)=>{e.d(T,{Z:()=>n}),e(2526),e(1817),e(1539),e(2165),e(6992),e(8783),e(3948);function n(s){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},n(s)}}},Rt={};function Ie(h){var T=Rt[h];if(T!==void 0)return T.exports;var e=Rt[h]={exports:{}};return ut[h](e,e.exports,Ie),e.exports}Ie.n=h=>{var T=h&&h.__esModule?()=>h.default:()=>h;return Ie.d(T,{a:T}),T},Ie.d=(h,T)=>{for(var e in T)Ie.o(T,e)&&!Ie.o(h,e)&&Object.defineProperty(h,e,{enumerable:!0,get:T[e]})},Ie.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Ie.o=(h,T)=>Object.prototype.hasOwnProperty.call(h,T),Ie.r=h=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},Ie.p="";var cr={};(()=>{if(Ie.r(cr),Ie.d(cr,{default:()=>Du}),typeof window!="undefined"){var h=window.document.currentScript,T=h&&h.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);T&&(Ie.p=T[1])}Ie(9070);const e=fv;var n={class:"vac-chat-container"};function s(a,t,r,I,N,w){var le=(0,e.resolveComponent)("rooms-list"),he=(0,e.resolveComponent)("room"),Re=(0,e.resolveComponent)("media-preview");return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:"vac-card-window",style:(0,e.normalizeStyle)([{height:r.height},w.cssVars])},[(0,e.createElementVNode)("div",n,[r.singleRoom?(0,e.createCommentVNode)("",!0):((0,e.openBlock)(),(0,e.createBlock)(le,{key:0,"current-user-id":r.currentUserId,rooms:w.orderedRooms,"loading-rooms":r.loadingRooms,"rooms-loaded":r.roomsLoaded,room:N.room,"room-actions":r.roomActions,"text-messages":w.t,"show-search":r.showSearch,"show-add-room":r.showAddRoom,"show-rooms-list":N.showRoomsList,"text-formatting":r.textFormatting,"link-options":r.linkOptions,"is-mobile":N.isMobile,"scroll-distance":r.scrollDistance,onFetchRoom:w.fetchRoom,onFetchMoreRooms:w.fetchMoreRooms,onLoadingMoreRooms:t[0]||(t[0]=function(ce){return N.loadingMoreRooms=ce}),onAddRoom:w.addRoom,onRoomActionHandler:w.roomActionHandler},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(ce,Ae){return{name:Ae,fn:(0,e.withCtx)(function(_e){return[(0,e.renderSlot)(a.$slots,Ae,(0,e.normalizeProps)((0,e.guardReactiveProps)(_e)))]})}})]),1032,["current-user-id","rooms","loading-rooms","rooms-loaded","room","room-actions","text-messages","show-search","show-add-room","show-rooms-list","text-formatting","link-options","is-mobile","scroll-distance","onFetchRoom","onFetchMoreRooms","onAddRoom","onRoomActionHandler"])),(0,e.createVNode)(he,{"current-user-id":r.currentUserId,rooms:r.rooms,"room-id":N.room.roomId||"","load-first-room":r.loadFirstRoom,messages:r.messages,"room-message":r.roomMessage,"messages-loaded":r.messagesLoaded,"menu-actions":r.menuActions,"message-actions":r.messageActions,"message-selection-actions":r.messageSelectionActions,"auto-scroll":r.autoScroll,"show-send-icon":r.showSendIcon,"show-files":r.showFiles,"show-audio":r.showAudio,"audio-bit-rate":r.audioBitRate,"audio-sample-rate":r.audioSampleRate,"show-emojis":r.showEmojis,"show-reaction-emojis":r.showReactionEmojis,"show-new-messages-divider":r.showNewMessagesDivider,"show-footer":r.showFooter,"text-messages":w.t,"single-room":r.singleRoom,"show-rooms-list":N.showRoomsList,"text-formatting":r.textFormatting,"link-options":r.linkOptions,"is-mobile":N.isMobile,"loading-rooms":r.loadingRooms,"room-info-enabled":r.roomInfoEnabled,"textarea-action-enabled":r.textareaActionEnabled,"textarea-auto-focus":r.textareaAutoFocus,"user-tags-enabled":r.userTagsEnabled,"emojis-suggestion-enabled":r.emojisSuggestionEnabled,"scroll-distance":r.scrollDistance,"accepted-files":r.acceptedFiles,"templates-text":r.templatesText,"username-options":r.usernameOptions,onToggleRoomsList:w.toggleRoomsList,onRoomInfo:w.roomInfo,onFetchMessages:w.fetchMessages,onSendMessage:w.sendMessage,onEditMessage:w.editMessage,onDeleteMessage:w.deleteMessage,onOpenFile:w.openFile,onOpenUserTag:w.openUserTag,onOpenFailedMessage:w.openFailedMessage,onMenuActionHandler:w.menuActionHandler,onMessageActionHandler:w.messageActionHandler,onMessageSelectionActionHandler:w.messageSelectionActionHandler,onSendMessageReaction:w.sendMessageReaction,onTypingMessage:w.typingMessage,onTextareaActionHandler:w.textareaActionHandler},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(ce,Ae){return{name:Ae,fn:(0,e.withCtx)(function(_e){return[(0,e.renderSlot)(a.$slots,Ae,(0,e.normalizeProps)((0,e.guardReactiveProps)(_e)))]})}})]),1032,["current-user-id","rooms","room-id","load-first-room","messages","room-message","messages-loaded","menu-actions","message-actions","message-selection-actions","auto-scroll","show-send-icon","show-files","show-audio","audio-bit-rate","audio-sample-rate","show-emojis","show-reaction-emojis","show-new-messages-divider","show-footer","text-messages","single-room","show-rooms-list","text-formatting","link-options","is-mobile","loading-rooms","room-info-enabled","textarea-action-enabled","textarea-auto-focus","user-tags-enabled","emojis-suggestion-enabled","scroll-distance","accepted-files","templates-text","username-options","onToggleRoomsList","onRoomInfo","onFetchMessages","onSendMessage","onEditMessage","onDeleteMessage","onOpenFile","onOpenUserTag","onOpenFailedMessage","onMenuActionHandler","onMessageActionHandler","onMessageSelectionActionHandler","onSendMessageReaction","onTypingMessage","onTextareaActionHandler"])]),(0,e.createVNode)(e.Transition,{name:"vac-fade-preview",appear:""},{default:(0,e.withCtx)(function(){return[N.showMediaPreview?((0,e.openBlock)(),(0,e.createBlock)(Re,{key:0,file:N.previewFile,onCloseMediaPreview:t[1]||(t[1]=function(ce){return N.showMediaPreview=!1})},null,8,["file"])):(0,e.createCommentVNode)("",!0)]}),_:1})],4)}Ie(7941),Ie(2526),Ie(7327),Ie(1539),Ie(5003),Ie(9554),Ie(4747),Ie(9337),Ie(3321);function i(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}function o(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(a);t&&(I=I.filter(function(N){return Object.getOwnPropertyDescriptor(a,N).enumerable})),r.push.apply(r,I)}return r}function m(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(I){i(a,I,r[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(I){Object.defineProperty(a,I,Object.getOwnPropertyDescriptor(r,I))})}return a}Ie(9653),Ie(1249),Ie(2707),Ie(7042),Ie(9826),Ie(9720);var d={key:0,class:"vac-rooms-empty"},f={key:1,id:"rooms-list",class:"vac-room-list"},S=["id","onClick"],g={key:0,id:"infinite-loader-rooms"};function R(a,t,r,I,N,w){var le=(0,e.resolveComponent)("rooms-search"),he=(0,e.resolveComponent)("loader"),Re=(0,e.resolveComponent)("room-content");return(0,e.withDirectives)(((0,e.openBlock)(),(0,e.createElementBlock)("div",{class:(0,e.normalizeClass)(["vac-rooms-container",{"vac-rooms-container-full":r.isMobile,"vac-app-border-r":!r.isMobile}])},[(0,e.renderSlot)(a.$slots,"rooms-header"),(0,e.renderSlot)(a.$slots,"rooms-list-search",{},function(){return[(0,e.createVNode)(le,{rooms:r.rooms,"loading-rooms":r.loadingRooms,"text-messages":r.textMessages,"show-search":r.showSearch,"show-add-room":r.showAddRoom,onSearchRoom:w.searchRoom,onAddRoom:t[0]||(t[0]=function(ce){return a.$emit("add-room")})},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(ce,Ae){return{name:Ae,fn:(0,e.withCtx)(function(_e){return[(0,e.renderSlot)(a.$slots,Ae,(0,e.normalizeProps)((0,e.guardReactiveProps)(_e)))]})}})]),1032,["rooms","loading-rooms","text-messages","show-search","show-add-room","onSearchRoom"])]}),(0,e.createVNode)(he,{show:r.loadingRooms},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(ce,Ae){return{name:Ae,fn:(0,e.withCtx)(function(_e){return[(0,e.renderSlot)(a.$slots,Ae,(0,e.normalizeProps)((0,e.guardReactiveProps)(_e)))]})}})]),1032,["show"]),!r.loadingRooms&&!r.rooms.length?((0,e.openBlock)(),(0,e.createElementBlock)("div",d,[(0,e.renderSlot)(a.$slots,"rooms-empty",{},function(){return[(0,e.createTextVNode)((0,e.toDisplayString)(r.textMessages.ROOMS_EMPTY),1)]})])):(0,e.createCommentVNode)("",!0),r.loadingRooms?(0,e.createCommentVNode)("",!0):((0,e.openBlock)(),(0,e.createElementBlock)("div",f,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(N.filteredRooms,function(ce){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{id:ce.roomId,key:ce.roomId,class:(0,e.normalizeClass)(["vac-room-item",{"vac-room-selected":N.selectedRoomId===ce.roomId}]),onClick:function(_e){return w.openRoom(ce)}},[(0,e.createVNode)(Re,{"current-user-id":r.currentUserId,room:ce,"text-formatting":r.textFormatting,"link-options":r.linkOptions,"text-messages":r.textMessages,"room-actions":r.roomActions,onRoomActionHandler:t[1]||(t[1]=function(Ae){return a.$emit("room-action-handler",Ae)})},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(Ae,_e){return{name:_e,fn:(0,e.withCtx)(function(Ve){return[(0,e.renderSlot)(a.$slots,_e,(0,e.normalizeProps)((0,e.guardReactiveProps)(Ve)))]})}})]),1032,["current-user-id","room","text-formatting","link-options","text-messages","room-actions"])],10,S)}),128)),(0,e.createVNode)(e.Transition,{name:"vac-fade-message"},{default:(0,e.withCtx)(function(){return[r.rooms.length&&!r.loadingRooms?((0,e.openBlock)(),(0,e.createElementBlock)("div",g,[(0,e.createVNode)(he,{show:N.showLoader,infinite:!0},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(ce,Ae){return{name:Ae,fn:(0,e.withCtx)(function(_e){return[(0,e.renderSlot)(a.$slots,Ae,(0,e.normalizeProps)((0,e.guardReactiveProps)(_e)))]})}})]),1032,["show"])])):(0,e.createCommentVNode)("",!0)]}),_:3})]))],2)),[[e.vShow,r.showRoomsList]])}Ie(2564);var x=(0,e.createElementVNode)("div",{id:"vac-circle"},null,-1);function E(a,t,r,I,N,w){return(0,e.openBlock)(),(0,e.createBlock)(e.Transition,{name:"vac-fade-spinner",appear:""},{default:(0,e.withCtx)(function(){return[r.show?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:(0,e.normalizeClass)(["vac-loader-wrapper",{"vac-container-center":!r.infinite,"vac-container-top":r.infinite}])},[(0,e.renderSlot)(a.$slots,"spinner-icon",(0,e.normalizeProps)((0,e.guardReactiveProps)({show:r.show,infinite:r.infinite})),function(){return[x]})],2)):(0,e.createCommentVNode)("",!0)]}),_:3})}const p={name:"AppLoader",props:{show:{type:Boolean,default:!1},infinite:{type:Boolean,default:!1}}};var O=Ie(8118);const A=(0,O.Z)(p,[["render",E]]);var L={key:0,class:"vac-icon-search"},V=["placeholder"];function K(a,t,r,I,N,w){var le=(0,e.resolveComponent)("svg-icon");return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:(0,e.normalizeClass)({"vac-box-search":w.showSearchBar,"vac-box-empty":!w.showSearchBar})},[r.showSearch?((0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:0},[!r.loadingRooms&&r.rooms.length?((0,e.openBlock)(),(0,e.createElementBlock)("div",L,[(0,e.renderSlot)(a.$slots,"search-icon",{},function(){return[(0,e.createVNode)(le,{name:"search"})]})])):(0,e.createCommentVNode)("",!0),!r.loadingRooms&&r.rooms.length?((0,e.openBlock)(),(0,e.createElementBlock)("input",{key:1,type:"search",placeholder:r.textMessages.SEARCH,autocomplete:"off",class:"vac-input",onInput:t[0]||(t[0]=function(he){return a.$emit("search-room",he)})},null,40,V)):(0,e.createCommentVNode)("",!0)],64)):(0,e.createCommentVNode)("",!0),r.showAddRoom?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:1,class:"vac-svg-button vac-add-icon",onClick:t[1]||(t[1]=function(he){return a.$emit("add-room")})},[(0,e.renderSlot)(a.$slots,"add-icon",{},function(){return[(0,e.createVNode)(le,{name:"add"})]})])):(0,e.createCommentVNode)("",!0)],2)}Ie(2222),Ie(8309);var F=["viewBox"],k=["id","d"],l=["id","d"];function P(a,t,r,I,N,w){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:"24",height:"24",viewBox:"0 0 ".concat(w.size," ").concat(w.size)},[(0,e.createElementVNode)("path",{id:w.svgId,d:N.svgItem[r.name].path},null,8,k),N.svgItem[r.name].path2?((0,e.openBlock)(),(0,e.createElementBlock)("path",{key:0,id:w.svgId,d:N.svgItem[r.name].path2},null,8,l)):(0,e.createCommentVNode)("",!0)],8,F)}const H={name:"SvgIcon",props:{name:{type:String,default:null},param:{type:String,default:null}},data:function(){return{svgItem:{search:{path:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"},add:{path:"M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},toggle:{path:"M5,13L9,17L7.6,18.42L1.18,12L7.6,5.58L9,7L5,11H21V13H5M21,6V8H11V6H21M21,16V18H11V16H21Z"},menu:{path:"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"},close:{path:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"},file:{path:"M14,17H7V15H14M17,13H7V11H17M17,9H7V7H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"},paperclip:{path:"M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z"},"close-outline":{path:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},send:{path:"M2,21L23,12L2,3V10L17,12L2,14V21Z"},emoji:{path:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"},document:{path:"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"},pencil:{path:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"},checkmark:{path:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"},"double-checkmark":{path:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"},eye:{path:"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"},dropdown:{path:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"},deleted:{path:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,13.85 4.63,15.55 5.68,16.91L16.91,5.68C15.55,4.63 13.85,4 12,4M12,20A8,8 0 0,0 20,12C20,10.15 19.37,8.45 18.32,7.09L7.09,18.32C8.45,19.37 10.15,20 12,20Z"},microphone:{size:"large",path:"M432.8,216.4v39.2c0,45.2-15.3,84.3-45.2,118.4c-29.8,33.2-67.3,52.8-111.6,57.9v40.9h78.4c5.1,0,10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6c0,5.1-1.7,10.2-6,13.6c-4.3,4.3-8.5,6-13.6,6H157.6c-5.1,0-10.2-1.7-13.6-6c-4.3-4.3-6-8.5-6-13.6c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6H236v-40.9c-44.3-5.1-81.8-23.9-111.6-57.9s-45.2-73.3-45.2-118.4v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6s10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6v39.2c0,37.5,13.6,70.7,40,97.1s59.6,40,97.1,40s70.7-13.6,97.1-40c26.4-26.4,40-59.6,40-97.1v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6c5.1,0,10.2,1.7,13.6,6C430.2,206.2,432.8,211.3,432.8,216.4z M353.5,98v157.6c0,27.3-9.4,50.3-29,69c-19.6,19.6-42.6,29-69,29s-50.3-9.4-69-29c-19.6-19.6-29-42.6-29-69V98c0-27.3,9.4-50.3,29-69c19.6-19.6,42.6-29,69-29s50.3,9.4,69,29C344.2,47.7,353.5,71.6,353.5,98z"},"audio-play":{size:"medium",path:"M43.331,21.237L7.233,0.397c-0.917-0.529-2.044-0.529-2.96,0c-0.916,0.528-1.48,1.505-1.48,2.563v41.684   c0,1.058,0.564,2.035,1.48,2.563c0.458,0.268,0.969,0.397,1.48,0.397c0.511,0,1.022-0.133,1.48-0.397l36.098-20.84   c0.918-0.529,1.479-1.506,1.479-2.564S44.247,21.767,43.331,21.237z"},"audio-pause":{size:"medium",path:"M17.991,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C4.729,2.969,7.698,0,11.36,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z",path2:"M42.877,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C29.616,2.969,32.585,0,36.246,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z"}}}},computed:{svgId:function(){var t=this.param?"-"+this.param:"";return"vac-icon-".concat(this.name).concat(t)},size:function(){var t=this.svgItem[this.name];return t.size==="large"?512:t.size==="medium"?48:24}}},Q=(0,O.Z)(H,[["render",P]]),ee={name:"RoomsSearch",components:{SvgIcon:Q},props:{textMessages:{type:Object,required:!0},showSearch:{type:Boolean,required:!0},showAddRoom:{type:Boolean,required:!0},rooms:{type:Array,required:!0},loadingRooms:{type:Boolean,required:!0}},emits:["search-room","add-room"],computed:{showSearchBar:function(){return this.showSearch||this.showAddRoom}}},fe=(0,O.Z)(ee,[["render",K]]);var de={class:"vac-room-container"},_={class:"vac-name-container vac-text-ellipsis"},Y={class:"vac-title-container"},b={class:"vac-room-name vac-text-ellipsis"},D={key:1,class:"vac-text-date"},X={key:0},q={key:1,class:"vac-text-ellipsis"},U={key:3,class:"vac-text-ellipsis"},v={class:"vac-room-options-container"},u={key:0,class:"vac-badge-counter vac-room-badge"},c={key:0,class:"vac-menu-options"},y={class:"vac-menu-list"},B=["onClick"];function G(a,t,r,I,N,w){var le=(0,e.resolveComponent)("svg-icon"),he=(0,e.resolveComponent)("format-message"),Re=(0,e.resolveDirective)("click-outside");return(0,e.openBlock)(),(0,e.createElementBlock)("div",de,[(0,e.renderSlot)(a.$slots,"room-list-item",(0,e.normalizeProps)((0,e.guardReactiveProps)({room:r.room})),function(){return[(0,e.renderSlot)(a.$slots,"room-list-avatar",(0,e.normalizeProps)((0,e.guardReactiveProps)({room:r.room})),function(){return[r.room.avatar?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:"vac-avatar",style:(0,e.normalizeStyle)({"background-image":"url('".concat(r.room.avatar,"')")})},null,4)):(0,e.createCommentVNode)("",!0)]}),(0,e.createElementVNode)("div",_,[(0,e.createElementVNode)("div",Y,[w.userStatus?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:(0,e.normalizeClass)(["vac-state-circle",{"vac-state-online":w.userStatus==="online"}])},null,2)):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("div",b,(0,e.toDisplayString)(r.room.roomName),1),r.room.lastMessage?((0,e.openBlock)(),(0,e.createElementBlock)("div",D,(0,e.toDisplayString)(r.room.lastMessage.timestamp),1)):(0,e.createCommentVNode)("",!0)]),(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["vac-text-last",{"vac-message-new":r.room.lastMessage&&r.room.lastMessage.new&&!w.typingUsers}])},[w.isMessageCheckmarkVisible?((0,e.openBlock)(),(0,e.createElementBlock)("span",X,[(0,e.renderSlot)(a.$slots,"checkmark-icon",(0,e.normalizeProps)((0,e.guardReactiveProps)({message:r.room.lastMessage})),function(){return[(0,e.createVNode)(le,{name:r.room.lastMessage.distributed?"double-checkmark":"checkmark",param:r.room.lastMessage.seen?"seen":"",class:"vac-icon-check"},null,8,["name","param"])]})])):(0,e.createCommentVNode)("",!0),r.room.lastMessage&&!r.room.lastMessage.deleted&&w.isAudio?((0,e.openBlock)(),(0,e.createElementBlock)("div",q,[(0,e.renderSlot)(a.$slots,"microphone-icon",{},function(){return[(0,e.createVNode)(le,{name:"microphone",class:"vac-icon-microphone"})]}),(0,e.createTextVNode)(" "+(0,e.toDisplayString)(w.formattedDuration),1)])):r.room.lastMessage?((0,e.openBlock)(),(0,e.createBlock)(he,{key:2,content:w.getLastMessage,deleted:!!r.room.lastMessage.deleted&&!w.typingUsers,users:r.room.users,linkify:!1,"text-formatting":r.textFormatting,"link-options":r.linkOptions,"single-line":!0},{"deleted-icon":(0,e.withCtx)(function(ce){return[(0,e.renderSlot)(a.$slots,"deleted-icon",(0,e.normalizeProps)((0,e.guardReactiveProps)(ce)))]}),_:3},8,["content","deleted","users","text-formatting","link-options"])):(0,e.createCommentVNode)("",!0),!r.room.lastMessage&&w.typingUsers?((0,e.openBlock)(),(0,e.createElementBlock)("div",U,(0,e.toDisplayString)(w.typingUsers),1)):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("div",v,[r.room.unreadCount?((0,e.openBlock)(),(0,e.createElementBlock)("div",u,(0,e.toDisplayString)(r.room.unreadCount),1)):(0,e.createCommentVNode)("",!0),(0,e.renderSlot)(a.$slots,"room-list-options",(0,e.normalizeProps)((0,e.guardReactiveProps)({room:r.room})),function(){return[r.roomActions.length?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:"vac-svg-button vac-list-room-options",onClick:t[0]||(t[0]=(0,e.withModifiers)(function(ce){return N.roomMenuOpened=r.room.roomId},["stop"]))},[(0,e.renderSlot)(a.$slots,"room-list-options-icon",{},function(){return[(0,e.createVNode)(le,{name:"dropdown",param:"room"})]})])):(0,e.createCommentVNode)("",!0),r.roomActions.length?((0,e.openBlock)(),(0,e.createBlock)(e.Transition,{key:1,name:"vac-slide-left"},{default:(0,e.withCtx)(function(){return[N.roomMenuOpened===r.room.roomId?(0,e.withDirectives)(((0,e.openBlock)(),(0,e.createElementBlock)("div",c,[(0,e.createElementVNode)("div",y,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.roomActions,function(ce){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{key:ce.name},[(0,e.createElementVNode)("div",{class:"vac-menu-item",onClick:(0,e.withModifiers)(function(Ae){return w.roomActionHandler(ce)},["stop"])},(0,e.toDisplayString)(ce.title),9,B)])}),128))])])),[[Re,w.closeRoomMenu]]):(0,e.createCommentVNode)("",!0)]}),_:1})):(0,e.createCommentVNode)("",!0)]})])],2)])]})])}Ie(915),Ie(8734),Ie(7397);var W={class:"vac-image-link-container"},j={class:"vac-image-link-message"},re=["innerHTML"],ae=["innerHTML"];function be(a,t,r,I,N,w){var le=(0,e.resolveComponent)("svg-icon");return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:(0,e.normalizeClass)(["vac-format-message-wrapper",{"vac-text-ellipsis":r.singleLine}])},[r.textFormatting.disabled?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:1,innerHTML:w.formattedContent},null,8,ae)):((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:(0,e.normalizeClass)({"vac-text-ellipsis":r.singleLine})},[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(w.linkifiedMessage,function(he,Re){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{key:Re,class:"vac-format-container"},[((0,e.openBlock)(),(0,e.createBlock)((0,e.resolveDynamicComponent)(he.url?"a":"span"),{class:(0,e.normalizeClass)({"vac-text-ellipsis":r.singleLine,"vac-text-bold":he.bold,"vac-text-italic":r.deleted||he.italic,"vac-text-strike":he.strike,"vac-text-underline":he.underline,"vac-text-inline-code":!r.singleLine&&he.inline,"vac-text-multiline-code":!r.singleLine&&he.multiline,"vac-text-tag":!r.singleLine&&!r.reply&&he.tag}),href:he.href,target:he.href?r.linkOptions.target:null,rel:he.href?r.linkOptions.rel:null,onClick:function(Ae){return w.openTag(he)}},{default:(0,e.withCtx)(function(){return[(0,e.renderSlot)(a.$slots,"deleted-icon",(0,e.normalizeProps)((0,e.guardReactiveProps)({deleted:r.deleted})),function(){return[r.deleted?((0,e.openBlock)(),(0,e.createBlock)(le,{key:0,name:"deleted",class:"vac-icon-deleted"})):(0,e.createCommentVNode)("",!0)]}),he.url&&he.image?((0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:0},[(0,e.createElementVNode)("div",W,[(0,e.createElementVNode)("div",{class:"vac-image-link",style:(0,e.normalizeStyle)({"background-image":"url('".concat(he.value,"')"),height:he.height})},null,4)]),(0,e.createElementVNode)("div",j,[(0,e.createElementVNode)("span",null,(0,e.toDisplayString)(he.value),1)])],64)):((0,e.openBlock)(),(0,e.createElementBlock)("span",{key:1,innerHTML:he.value},null,8,re))]}),_:2},1032,["class","href","target","rel","onClick"]))])}),128))],2))],2)}Ie(9753);function Me(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,I=new Array(t);r<t;r++)I[r]=a[r];return I}function Be(a){if(Array.isArray(a))return Me(a)}Ie(1817),Ie(2165),Ie(6992),Ie(8783),Ie(3948),Ie(1038);function Ge(a){if(typeof Symbol!="undefined"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}Ie(4916),Ie(7601);function Ye(a,t){if(!!a){if(typeof a=="string")return Me(a,t);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Me(a,t)}}Ie(1703),Ie(6647);function it(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _t(a){return Be(a)||Ge(a)||Ye(a)||it()}Ie(2772),Ie(4986),Ie(5212),Ie(6699),Ie(2023),Ie(6373),Ie(4603),Ie(8450),Ie(8386),Ie(9714),Ie(5306),Ie(8757),Ie(3650),Ie(4723),Ie(189);var C=Ie(5235);const z=function(a,t,r){var I,N={bold:r.bold,italic:r.italic,strike:r.strike,underline:r.underline,multilineCode:r.multilineCode,inlineCode:r.inlineCode},w=(I={},i(I,N.bold,{end:"\\"+N.bold,allowed_chars:".",type:"bold"}),i(I,N.italic,{end:N.italic,allowed_chars:".",type:"italic"}),i(I,N.strike,{end:N.strike,allowed_chars:".",type:"strike"}),i(I,N.underline,{end:N.underline,allowed_chars:".",type:"underline"}),i(I,N.multilineCode,{end:N.multilineCode,allowed_chars:`(.|
)`,type:"multiline-code"}),i(I,N.inlineCode,{end:N.inlineCode,allowed_chars:".",type:"inline-code"}),i(I,"<usertag>",{allowed_chars:".",end:"</usertag>",type:"tag"}),I),le=Ne(a,w),he=Te(le,w),Re=[].concat.apply([],he);return t&&ze(Re),Re};function Ne(a,t){var r=[],I=-1,N=null,w=C.find(a),le=!1;if(w.length>0&&(I=a.indexOf(w[0].value),le=!0),Object.keys(t).forEach(function(ht){var bt=a.indexOf(ht);bt>=0&&(I<0||bt<I)&&(I=bt,N=ht,le=!1)}),le&&N!==-1){var he=a.substr(0,I),Re=a.substr(I,w[0].value.length),ce=a.substr(I+w[0].value.length);return r.push(he),r.push(Re),r=r.concat(Ne(ce,t)),r}if(N){var Ae=a.substr(0,I),_e=N,Ve=a.substr(I+_e.length);if(a.replace(/\s/g,"").length===_e.length*2)return[a];var we=Ve.match(new RegExp("^("+(t[_e].allowed_chars||".")+"*"+(t[_e].end?"?":"")+")"+(t[_e].end?"("+t[_e].end+")":""),"m"));if(!we||!we[1])Ae=Ae+_e,r.push(Ae);else{Ae&&r.push(Ae);var st={start:_e,content:Ne(we[1],t),end:we[2],type:t[_e].type};r.push(st),Ve=Ve.substr(we[0].length)}return r=r.concat(Ne(Ve,t)),r}else return a?[a]:[]}function Te(a,t){var r=[];return a.forEach(function(I){typeof I=="string"?r.push({types:[],value:I}):t[I.start]&&r.push(Ue(I))}),r}function Ue(a){var t=[];return Ee(a,t,[]),t}function Ee(a,t,r){a.content.forEach(function(I){typeof I=="string"?t.push({types:De(r.concat([a.type])),value:I}):Ee(I,t,De([I.type].concat([a.type]).concat(r)))})}function De(a){return _t(new Set(a))}function ze(a){var t=[];return a.forEach(function(r){var I=C.find(r.value);if(I.length){var N=r.value.replace(I[0].value,"");t.push({types:r.types,value:N}),r.types=["url"].concat(r.types),r.href=I[0].href,r.value=I[0].value}t.push(r)}),t}var Xe=Ie(9085);const Ze={name:"FormatMessage",components:{SvgIcon:Q},props:{content:{type:[String,Number],required:!0},deleted:{type:Boolean,default:!1},users:{type:Array,default:function(){return[]}},linkify:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!1},reply:{type:Boolean,default:!1},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0}},emits:["open-user-tag"],computed:{linkifiedMessage:function(){var t=this,r=z(this.formatTags(this.content),this.linkify&&!this.linkOptions.disabled,this.textFormatting);return r.forEach(function(I){I.url=t.checkType(I,"url"),I.bold=t.checkType(I,"bold"),I.italic=t.checkType(I,"italic"),I.strike=t.checkType(I,"strike"),I.underline=t.checkType(I,"underline"),I.inline=t.checkType(I,"inline-code"),I.multiline=t.checkType(I,"multiline-code"),I.tag=t.checkType(I,"tag"),I.image=t.checkImageType(I),I.value=t.replaceEmojiByElement(I.value)}),r},formattedContent:function(){return this.formatTags(this.content)}},methods:{checkType:function(t,r){return t.types.indexOf(r)!==-1},checkImageType:function(t){var r=t.value.lastIndexOf("."),I=t.value.lastIndexOf("/");I>r&&(r=-1);var N=t.value.substring(r+1,t.value.length),w=r>0&&Xe.v5.some(function(le){return N.toLowerCase().includes(le)});return w&&this.setImageSize(t),w},setImageSize:function(t){var r=new Image;r.src=t.value,r.addEventListener("load",I);function I(N){var w=N.path[0].width/150;t.height=Math.round(N.path[0].height/w)+"px",r.removeEventListener("load",I)}},formatTags:function(t){var r=this,I="<usertag>",N="</usertag>",w=_t(t.matchAll(new RegExp(I,"gi"))).map(function(he){return he.index}),le=t;return w.forEach(function(he){var Re=le.substring(he+I.length,le.indexOf(N,he)),ce=r.users.find(function(Ae){return Ae._id===Re});t=t.replaceAll(Re,"@".concat((ce==null?void 0:ce.username)||"unknown"))}),t},openTag:function(t){if(!this.singleLine&&this.checkType(t,"tag")){var r=this.users.find(function(I){return t.value.indexOf(I.username)!==-1});this.$emit("open-user-tag",r)}},replaceEmojiByElement:function(t){var r;if(this.singleLine)r=16;else{var I=this.containsOnlyEmojis();r=I?28:20}return t.replaceAll(/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFF]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])/g,function(N){return'<span style="font-size: '.concat(r,'px">').concat(N,"</span>")})},containsOnlyEmojis:function(){var t=this.content.replace(new RegExp("[\0-\u1EEFf]","g"),""),r=this.content.replace(new RegExp(`[
\rs]+|( )+`,"g"),"");return t.length===r.length}}},rt=(0,O.Z)(Ze,[["render",be]]);var vt=Ie(3336);Ie(8862);var at="__v-click-outside",He=typeof window!="undefined",et=typeof navigator!="undefined",$e=He&&("ontouchstart"in window||et&&navigator.msMaxTouchPoints>0),ct=$e?["touchstart"]:["click"],St=function(t){var r=typeof t=="function";if(!r&&(0,vt.Z)(t)!=="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:r?t:t.handler,middleware:t.middleware||function(I){return I},events:t.events||ct,isActive:t.isActive!==!1,detectIframe:t.detectIframe!==!1,capture:Boolean(t.capture)}},It=function(t){var r=t.event,I=t.handler,N=t.middleware;N(r)&&I(r)},jt=function(t){var r=t.el,I=t.event,N=t.handler,w=t.middleware;setTimeout(function(){var le=document,he=le.activeElement;he&&he.tagName==="IFRAME"&&!r.contains(he)&&It({event:I,handler:N,middleware:w})},0)},Xt=function(t){var r=t.el,I=t.event,N=t.handler,w=t.middleware,le=I.path||I.composedPath&&I.composedPath(),he=le?le.indexOf(r)<0:!r.contains(I.target);!he||It({event:I,handler:N,middleware:w})},Pt=function(t,r){var I=r.value,N=St(I),w=N.events,le=N.handler,he=N.middleware,Re=N.isActive,ce=N.detectIframe,Ae=N.capture;if(!!Re){if(t[at]=w.map(function(Ve){return{event:Ve,srcTarget:document.documentElement,handler:function(st){return Xt({el:t,event:st,handler:le,middleware:he})},capture:Ae}}),ce){var _e={event:"blur",srcTarget:window,handler:function(we){return jt({el:t,event:we,handler:le,middleware:he})},capture:Ae};t[at]=[].concat(_t(t[at]),[_e])}t[at].forEach(function(Ve){var we=Ve.event,st=Ve.srcTarget,ht=Ve.handler;return setTimeout(function(){!t[at]||st.addEventListener(we,ht,Ae)},0)})}},Kt=function(t){var r=t[at]||[];r.forEach(function(I){var N=I.event,w=I.srcTarget,le=I.handler,he=I.capture;return w.removeEventListener(N,le,he)}),delete t[at]},ar=function(t,r){var I=r.value,N=r.oldValue;JSON.stringify(I)!==JSON.stringify(N)&&(Kt(t),Pt(t,{value:I}))},yr={beforeMount:Pt,updated:ar,unmounted:Kt};const er=He?yr:{};Ie(9600);const J=function(a,t,r){if(a.typingUsers&&a.typingUsers.length){var I=a.users.filter(function(N){if(N._id!==t&&a.typingUsers.indexOf(N._id)!==-1&&!(N.status&&N.status.state==="offline"))return!0});return I.length?a.users.length===2?r.IS_TYPING:I.map(function(N){return N.username}).join(", ")+" "+r.IS_TYPING:void 0}};var $=Ie(8438),oe=$.isAudioFile;const ue={name:"RoomsContent",components:{SvgIcon:Q,FormatMessage:rt},directives:{clickOutside:er},props:{currentUserId:{type:[String,Number],required:!0},room:{type:Object,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},textMessages:{type:Object,required:!0},roomActions:{type:Array,required:!0}},emits:["room-action-handler"],data:function(){return{roomMenuOpened:null}},computed:{getLastMessage:function(){var t=this,r=this.typingUsers;if(r)return r;var I=this.room.lastMessage.deleted?this.textMessages.MESSAGE_DELETED:this.room.lastMessage.content;if(this.room.users.length<=2)return I;var N=this.room.users.find(function(w){return w._id===t.room.lastMessage.senderId});return this.room.lastMessage.username?"".concat(this.room.lastMessage.username," - ").concat(I):!N||N._id===this.currentUserId?I:"".concat(N.username," - ").concat(I)},userStatus:function(){var t=this;if(!(!this.room.users||this.room.users.length!==2)){var r=this.room.users.find(function(I){return I._id!==t.currentUserId});return r&&r.status?r.status.state:null}},typingUsers:function(){return J(this.room,this.currentUserId,this.textMessages)},isMessageCheckmarkVisible:function(){return!this.typingUsers&&this.room.lastMessage&&!this.room.lastMessage.deleted&&this.room.lastMessage.senderId===this.currentUserId&&(this.room.lastMessage.saved||this.room.lastMessage.distributed||this.room.lastMessage.seen)},formattedDuration:function(){var t,r,I=(t=this.room.lastMessage)===null||t===void 0||(r=t.files)===null||r===void 0?void 0:r[0];if(I){if(!I.duration)return"".concat(I.name,".").concat(I.extension);var N=Math.floor(I.duration);return(N-(N%=60))/60+(N>9?":":":0")+N}return""},isAudio:function(){return this.room.lastMessage.files?oe(this.room.lastMessage.files[0]):!1}},methods:{roomActionHandler:function(t){this.closeRoomMenu(),this.$emit("room-action-handler",{action:t,roomId:this.room.roomId})},closeRoomMenu:function(){this.roomMenuOpened=null}}},ne=(0,O.Z)(ue,[["render",G]]);Ie(6755);const pe=function(a,t,r){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return!r||r===""?a:a.filter(function(N){return I?Se(N[t]).startsWith(Se(r)):Se(N[t]).includes(Se(r))})};function Se(a){return a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const ge={name:"RoomsList",components:{Loader:A,RoomsSearch:fe,RoomContent:ne},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},showRoomsList:{type:Boolean,required:!0},showSearch:{type:Boolean,required:!0},showAddRoom:{type:Boolean,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},isMobile:{type:Boolean,required:!0},rooms:{type:Array,required:!0},loadingRooms:{type:Boolean,required:!0},roomsLoaded:{type:Boolean,required:!0},room:{type:Object,required:!0},roomActions:{type:Array,required:!0},scrollDistance:{type:Number,required:!0}},emits:["add-room","room-action-handler","loading-more-rooms","fetch-room","fetch-more-rooms"],data:function(){return{filteredRooms:this.rooms||[],observer:null,showLoader:!0,loadingMoreRooms:!1,selectedRoomId:""}},watch:{rooms:{deep:!0,handler:function(t,r){this.filteredRooms=t,(t.length!==r.length||this.roomsLoaded)&&(this.loadingMoreRooms=!1)}},loadingRooms:function(t){var r=this;t||setTimeout(function(){return r.initIntersectionObserver()})},loadingMoreRooms:function(t){this.$emit("loading-more-rooms",t)},roomsLoaded:{immediate:!0,handler:function(t){t&&(this.loadingMoreRooms=!1,this.loadingRooms||(this.showLoader=!1))}},room:{immediate:!0,handler:function(t){t&&!this.isMobile&&(this.selectedRoomId=t.roomId)}}},methods:{initIntersectionObserver:function(){var t=this;this.observer&&(this.showLoader=!0,this.observer.disconnect());var r=document.getElementById("infinite-loader-rooms");if(r){var I={root:document.getElementById("rooms-list"),rootMargin:"".concat(this.scrollDistance,"px"),threshold:0};this.observer=new IntersectionObserver(function(N){N[0].isIntersecting&&t.loadMoreRooms()},I),this.observer.observe(r)}},searchRoom:function(t){this.filteredRooms=pe(this.rooms,"roomName",t.target.value)},openRoom:function(t){t.roomId===this.room.roomId&&!this.isMobile||(this.isMobile||(this.selectedRoomId=t.roomId),this.$emit("fetch-room",{room:t}))},loadMoreRooms:function(){if(!this.loadingMoreRooms){if(this.roomsLoaded){this.loadingMoreRooms=!1,this.showLoader=!1;return}this.$emit("fetch-more-rooms"),this.loadingMoreRooms=!0}}}},xe=(0,O.Z)(ge,[["render",R]]);var Pe={class:"vac-container-center vac-room-empty"},ot={class:"vac-messages-container"},dt={key:0,class:"vac-text-started"},Ke={key:1,class:"vac-text-started"},gt={key:0,id:"infinite-loader-messages"},Oe={key:2},ve={key:0,class:"vac-badge-counter vac-messages-count"};function ke(a,t,r,I,N,w){var le=(0,e.resolveComponent)("room-header"),he=(0,e.resolveComponent)("loader"),Re=(0,e.resolveComponent)("room-message"),ce=(0,e.resolveComponent)("svg-icon"),Ae=(0,e.resolveComponent)("room-footer");return(0,e.withDirectives)(((0,e.openBlock)(),(0,e.createElementBlock)("div",{class:"vac-col-messages",onTouchstart:t[12]||(t[12]=function(){return w.touchStart&&w.touchStart.apply(w,arguments)})},[w.showNoRoom?(0,e.renderSlot)(a.$slots,"no-room-selected",{key:0},function(){return[(0,e.createElementVNode)("div",Pe,[(0,e.createElementVNode)("div",null,(0,e.toDisplayString)(r.textMessages.ROOM_EMPTY),1)])]}):((0,e.openBlock)(),(0,e.createBlock)(le,{key:1,"current-user-id":r.currentUserId,"text-messages":r.textMessages,"single-room":r.singleRoom,"show-rooms-list":r.showRoomsList,"is-mobile":r.isMobile,"room-info-enabled":r.roomInfoEnabled,"menu-actions":r.menuActions,room:w.room,"message-selection-enabled":N.messageSelectionEnabled,"message-selection-actions":r.messageSelectionActions,"selected-messages-total":N.selectedMessages.length,onToggleRoomsList:t[0]||(t[0]=function(_e){return a.$emit("toggle-rooms-list")}),onRoomInfo:t[1]||(t[1]=function(_e){return a.$emit("room-info")}),onMenuActionHandler:t[2]||(t[2]=function(_e){return a.$emit("menu-action-handler",_e)}),onMessageSelectionActionHandler:w.messageSelectionActionHandler,onCancelMessageSelection:t[3]||(t[3]=function(_e){return N.messageSelectionEnabled=!1})},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(_e,Ve){return{name:Ve,fn:(0,e.withCtx)(function(we){return[(0,e.renderSlot)(a.$slots,Ve,(0,e.normalizeProps)((0,e.guardReactiveProps)(we)))]})}})]),1032,["current-user-id","text-messages","single-room","show-rooms-list","is-mobile","room-info-enabled","menu-actions","room","message-selection-enabled","message-selection-actions","selected-messages-total","onMessageSelectionActionHandler"])),(0,e.createElementVNode)("div",{id:"messages-list",ref:"scrollContainer",class:"vac-container-scroll",onScroll:t[5]||(t[5]=function(){return w.onContainerScroll&&w.onContainerScroll.apply(w,arguments)})},[(0,e.createVNode)(he,{show:N.loadingMessages},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(_e,Ve){return{name:Ve,fn:(0,e.withCtx)(function(we){return[(0,e.renderSlot)(a.$slots,Ve,(0,e.normalizeProps)((0,e.guardReactiveProps)(we)))]})}})]),1032,["show"]),(0,e.createElementVNode)("div",ot,[(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)({"vac-messages-hidden":N.loadingMessages})},[(0,e.createVNode)(e.Transition,{name:"vac-fade-message"},{default:(0,e.withCtx)(function(){return[(0,e.createElementVNode)("div",null,[w.showNoMessages?((0,e.openBlock)(),(0,e.createElementBlock)("div",dt,[(0,e.renderSlot)(a.$slots,"messages-empty",{},function(){return[(0,e.createTextVNode)((0,e.toDisplayString)(r.textMessages.MESSAGES_EMPTY),1)]})])):(0,e.createCommentVNode)("",!0),w.showMessagesStarted?((0,e.openBlock)(),(0,e.createElementBlock)("div",Ke,(0,e.toDisplayString)(r.textMessages.CONVERSATION_STARTED)+" "+(0,e.toDisplayString)(r.messages[0].date),1)):(0,e.createCommentVNode)("",!0)])]}),_:3}),r.messages.length&&!r.messagesLoaded?((0,e.openBlock)(),(0,e.createElementBlock)("div",gt,[(0,e.createVNode)(he,{show:!0,infinite:!0},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(_e,Ve){return{name:Ve,fn:(0,e.withCtx)(function(we){return[(0,e.renderSlot)(a.$slots,Ve,(0,e.normalizeProps)((0,e.guardReactiveProps)(we)))]})}})]),1024)])):(0,e.createCommentVNode)("",!0),((0,e.openBlock)(),(0,e.createBlock)(e.TransitionGroup,{key:r.roomId,name:"vac-fade-message",tag:"span"},{default:(0,e.withCtx)(function(){return[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.messages,function(_e,Ve){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{key:_e.indexId||_e._id},[(0,e.createVNode)(Re,{"current-user-id":r.currentUserId,message:_e,index:Ve,messages:r.messages,"edited-message-id":N.editedMessageId,"message-actions":r.messageActions,"room-users":w.room.users,"text-messages":r.textMessages,"new-messages":N.newMessages,"show-reaction-emojis":r.showReactionEmojis,"show-new-messages-divider":r.showNewMessagesDivider,"text-formatting":r.textFormatting,"link-options":r.linkOptions,"username-options":r.usernameOptions,"message-selection-enabled":N.messageSelectionEnabled,"selected-messages":N.selectedMessages,onMessageAdded:w.onMessageAdded,onMessageActionHandler:w.messageActionHandler,onOpenFile:w.openFile,onOpenUserTag:w.openUserTag,onOpenFailedMessage:t[4]||(t[4]=function(we){return a.$emit("open-failed-message",we)}),onSendMessageReaction:w.sendMessageReaction,onSelectMessage:w.selectMessage,onUnselectMessage:w.unselectMessage},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(we,st){return{name:st,fn:(0,e.withCtx)(function(ht){return[(0,e.renderSlot)(a.$slots,st,(0,e.normalizeProps)((0,e.guardReactiveProps)(ht)))]})}})]),1032,["current-user-id","message","index","messages","edited-message-id","message-actions","room-users","text-messages","new-messages","show-reaction-emojis","show-new-messages-divider","text-formatting","link-options","username-options","message-selection-enabled","selected-messages","onMessageAdded","onMessageActionHandler","onOpenFile","onOpenUserTag","onSendMessageReaction","onSelectMessage","onUnselectMessage"])])}),128))]}),_:3}))],2)])],544),N.loadingMessages?(0,e.createCommentVNode)("",!0):((0,e.openBlock)(),(0,e.createElementBlock)("div",Oe,[(0,e.createVNode)(e.Transition,{name:"vac-bounce"},{default:(0,e.withCtx)(function(){return[N.scrollIcon?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:"vac-icon-scroll",onClick:t[6]||(t[6]=function(){return w.scrollToBottom&&w.scrollToBottom.apply(w,arguments)})},[(0,e.createVNode)(e.Transition,{name:"vac-bounce"},{default:(0,e.withCtx)(function(){return[N.scrollMessagesCount?((0,e.openBlock)(),(0,e.createElementBlock)("div",ve,(0,e.toDisplayString)(N.scrollMessagesCount),1)):(0,e.createCommentVNode)("",!0)]}),_:1}),(0,e.renderSlot)(a.$slots,"scroll-icon",{},function(){return[(0,e.createVNode)(ce,{name:"dropdown",param:"scroll"})]})])):(0,e.createCommentVNode)("",!0)]}),_:3})])),(0,e.createVNode)(Ae,{room:w.room,"room-id":r.roomId,"room-message":r.roomMessage,"text-messages":r.textMessages,"show-send-icon":r.showSendIcon,"show-files":r.showFiles,"show-audio":r.showAudio,"show-emojis":r.showEmojis,"show-footer":r.showFooter,"accepted-files":r.acceptedFiles,"textarea-action-enabled":r.textareaActionEnabled,"textarea-auto-focus":r.textareaAutoFocus,"user-tags-enabled":r.userTagsEnabled,"emojis-suggestion-enabled":r.emojisSuggestionEnabled,"templates-text":r.templatesText,"text-formatting":r.textFormatting,"link-options":r.linkOptions,"audio-bit-rate":r.audioBitRate,"audio-sample-rate":r.audioSampleRate,"init-reply-message":N.initReplyMessage,"init-edit-message":N.initEditMessage,onUpdateEditedMessageId:t[7]||(t[7]=function(_e){return N.editedMessageId=_e}),onEditMessage:t[8]||(t[8]=function(_e){return a.$emit("edit-message",_e)}),onSendMessage:t[9]||(t[9]=function(_e){return a.$emit("send-message",_e)}),onTypingMessage:t[10]||(t[10]=function(_e){return a.$emit("typing-message",_e)}),onTextareaActionHandler:t[11]||(t[11]=function(_e){return a.$emit("textarea-action-handler",_e)})},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(_e,Ve){return{name:Ve,fn:(0,e.withCtx)(function(we){return[(0,e.renderSlot)(a.$slots,Ve,(0,e.normalizeProps)((0,e.guardReactiveProps)(we)))]})}})]),1032,["room","room-id","room-message","text-messages","show-send-icon","show-files","show-audio","show-emojis","show-footer","accepted-files","textarea-action-enabled","textarea-auto-focus","user-tags-enabled","emojis-suggestion-enabled","templates-text","text-formatting","link-options","audio-bit-rate","audio-sample-rate","init-reply-message","init-edit-message"])],544)),[[e.vShow,r.isMobile&&!r.showRoomsList||!r.isMobile||r.singleRoom]])}var se={class:"vac-room-header vac-app-border-b"},ie={class:"vac-room-wrapper"},me={key:0,class:"vac-room-selection"},qe=["id"],lt=["onClick"],Je={class:"vac-selection-button-count"},pt={class:"vac-text-ellipsis"},Et={class:"vac-room-name vac-text-ellipsis"},Ct={key:0,class:"vac-room-info vac-text-ellipsis"},Qe={key:1,class:"vac-room-info vac-text-ellipsis"},wt={key:0,class:"vac-menu-options"},Nt={class:"vac-menu-list"},$t=["onClick"];function tr(a,t,r,I,N,w){var le=(0,e.resolveComponent)("svg-icon"),he=(0,e.resolveDirective)("click-outside");return(0,e.openBlock)(),(0,e.createElementBlock)("div",se,[(0,e.renderSlot)(a.$slots,"room-header",(0,e.normalizeProps)((0,e.guardReactiveProps)({room:r.room,typingUsers:w.typingUsers,userStatus:w.userStatus})),function(){return[(0,e.createElementVNode)("div",ie,[(0,e.createVNode)(e.Transition,{name:"vac-slide-up"},{default:(0,e.withCtx)(function(){return[r.messageSelectionEnabled?((0,e.openBlock)(),(0,e.createElementBlock)("div",me,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.messageSelectionActions,function(Re){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{id:Re.name,key:Re.name},[(0,e.createElementVNode)("div",{class:"vac-selection-button",onClick:function(Ae){return w.messageSelectionActionHandler(Re)}},[(0,e.createTextVNode)((0,e.toDisplayString)(Re.title)+" ",1),(0,e.createElementVNode)("span",Je,(0,e.toDisplayString)(r.selectedMessagesTotal),1)],8,lt)],8,qe)}),128)),(0,e.createElementVNode)("div",{class:"vac-selection-cancel vac-item-clickable",onClick:t[0]||(t[0]=function(Re){return a.$emit("cancel-message-selection")})},(0,e.toDisplayString)(r.textMessages.CANCEL_SELECT_MESSAGE),1)])):(0,e.createCommentVNode)("",!0)]}),_:1}),!r.messageSelectionEnabled&&N.messageSelectionAnimationEnded?((0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:0},[r.singleRoom?(0,e.createCommentVNode)("",!0):((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:(0,e.normalizeClass)(["vac-svg-button vac-toggle-button",{"vac-rotate-icon-init":!r.isMobile,"vac-rotate-icon":!r.showRoomsList&&!r.isMobile}]),onClick:t[1]||(t[1]=function(Re){return a.$emit("toggle-rooms-list")})},[(0,e.renderSlot)(a.$slots,"toggle-icon",{},function(){return[(0,e.createVNode)(le,{name:"toggle"})]})],2)),(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["vac-info-wrapper",{"vac-item-clickable":r.roomInfoEnabled}]),onClick:t[2]||(t[2]=function(Re){return a.$emit("room-info")})},[(0,e.renderSlot)(a.$slots,"room-header-avatar",(0,e.normalizeProps)((0,e.guardReactiveProps)({room:r.room})),function(){return[r.room.avatar?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:"vac-avatar",style:(0,e.normalizeStyle)({"background-image":"url('".concat(r.room.avatar,"')")})},null,4)):(0,e.createCommentVNode)("",!0)]}),(0,e.renderSlot)(a.$slots,"room-header-info",(0,e.normalizeProps)((0,e.guardReactiveProps)({room:r.room,typingUsers:w.typingUsers,userStatus:w.userStatus})),function(){return[(0,e.createElementVNode)("div",pt,[(0,e.createElementVNode)("div",Et,(0,e.toDisplayString)(r.room.roomName),1),w.typingUsers?((0,e.openBlock)(),(0,e.createElementBlock)("div",Ct,(0,e.toDisplayString)(w.typingUsers),1)):((0,e.openBlock)(),(0,e.createElementBlock)("div",Qe,(0,e.toDisplayString)(w.userStatus),1))])]})],2),r.room.roomId?(0,e.renderSlot)(a.$slots,"room-options",{key:1},function(){return[r.menuActions.length?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:"vac-svg-button vac-room-options",onClick:t[3]||(t[3]=function(Re){return N.menuOpened=!N.menuOpened})},[(0,e.renderSlot)(a.$slots,"menu-icon",{},function(){return[(0,e.createVNode)(le,{name:"menu"})]})])):(0,e.createCommentVNode)("",!0),r.menuActions.length?((0,e.openBlock)(),(0,e.createBlock)(e.Transition,{key:1,name:"vac-slide-left"},{default:(0,e.withCtx)(function(){return[N.menuOpened?(0,e.withDirectives)(((0,e.openBlock)(),(0,e.createElementBlock)("div",wt,[(0,e.createElementVNode)("div",Nt,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.menuActions,function(Re){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{key:Re.name},[(0,e.createElementVNode)("div",{class:"vac-menu-item",onClick:function(Ae){return w.menuActionHandler(Re)}},(0,e.toDisplayString)(Re.title),9,$t)])}),128))])])),[[he,w.closeMenu]]):(0,e.createCommentVNode)("",!0)]}),_:1})):(0,e.createCommentVNode)("",!0)]}):(0,e.createCommentVNode)("",!0)],64)):(0,e.createCommentVNode)("",!0)])]})])}const rr={name:"RoomHeader",components:{SvgIcon:Q},directives:{clickOutside:er},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},singleRoom:{type:Boolean,required:!0},showRoomsList:{type:Boolean,required:!0},isMobile:{type:Boolean,required:!0},roomInfoEnabled:{type:Boolean,required:!0},menuActions:{type:Array,required:!0},room:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0},messageSelectionActions:{type:Array,required:!0},selectedMessagesTotal:{type:Number,required:!0}},emits:["toggle-rooms-list","room-info","menu-action-handler","cancel-message-selection","message-selection-action-handler"],data:function(){return{menuOpened:!1,messageSelectionAnimationEnded:!0}},computed:{typingUsers:function(){return J(this.room,this.currentUserId,this.textMessages)},userStatus:function(){var t=this;if(!(!this.room.users||this.room.users.length!==2)){var r=this.room.users.find(function(N){return N._id!==t.currentUserId});if(!!r.status){var I="";return r.status.state==="online"?I=this.textMessages.IS_ONLINE:r.status.lastChanged&&(I=this.textMessages.LAST_SEEN+r.status.lastChanged),I}}}},watch:{messageSelectionEnabled:function(t){var r=this;t?this.messageSelectionAnimationEnded=!1:setTimeout(function(){r.messageSelectionAnimationEnded=!0},300)}},methods:{menuActionHandler:function(t){this.closeMenu(),this.$emit("menu-action-handler",t)},closeMenu:function(){this.menuOpened=!1},messageSelectionActionHandler:function(t){this.$emit("message-selection-action-handler",t)}}},hr=(0,O.Z)(rr,[["render",tr]]);var nr={key:0,class:"vac-icon-textarea-left"},Sr=(0,e.createElementVNode)("div",{class:"vac-dot-audio-record"},null,-1),Hr={class:"vac-dot-audio-record-time"},yn=["placeholder"],Fn={class:"vac-icon-textarea"},Dn={key:1},jn=["accept"];function Gt(a,t,r,I,N,w){var le=(0,e.resolveComponent)("room-emojis"),he=(0,e.resolveComponent)("room-users-tag"),Re=(0,e.resolveComponent)("room-templates-text"),ce=(0,e.resolveComponent)("room-message-reply"),Ae=(0,e.resolveComponent)("room-files"),_e=(0,e.resolveComponent)("svg-icon"),Ve=(0,e.resolveComponent)("emoji-picker-container"),we=(0,e.resolveDirective)("click-outside");return(0,e.withDirectives)(((0,e.openBlock)(),(0,e.createElementBlock)("div",{id:"room-footer",class:(0,e.normalizeClass)(["vac-room-footer",{"vac-app-box-shadow":w.shadowFooter}])},[(0,e.createVNode)(le,{"filtered-emojis":N.filteredEmojis,"select-item":N.selectEmojiItem,"active-up-or-down":N.activeUpOrDownEmojis,onSelectEmoji:t[0]||(t[0]=function(st){return w.selectEmoji(st)}),onActivateItem:t[1]||(t[1]=function(st){return N.activeUpOrDownEmojis=0})},null,8,["filtered-emojis","select-item","active-up-or-down"]),(0,e.createVNode)(he,{"filtered-users-tag":N.filteredUsersTag,"select-item":N.selectUsersTagItem,"active-up-or-down":N.activeUpOrDownUsersTag,onSelectUserTag:t[2]||(t[2]=function(st){return w.selectUserTag(st)}),onActivateItem:t[3]||(t[3]=function(st){return N.activeUpOrDownUsersTag=0})},null,8,["filtered-users-tag","select-item","active-up-or-down"]),(0,e.createVNode)(Re,{"filtered-templates-text":N.filteredTemplatesText,"select-item":N.selectTemplatesTextItem,"active-up-or-down":N.activeUpOrDownTemplatesText,onSelectTemplateText:t[4]||(t[4]=function(st){return w.selectTemplateText(st)}),onActivateItem:t[5]||(t[5]=function(st){return N.activeUpOrDownTemplatesText=0})},null,8,["filtered-templates-text","select-item","active-up-or-down"]),(0,e.createVNode)(ce,{room:r.room,"message-reply":N.messageReply,"text-formatting":r.textFormatting,"link-options":r.linkOptions,onResetMessage:w.resetMessage},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(st,ht){return{name:ht,fn:(0,e.withCtx)(function(bt){return[(0,e.renderSlot)(a.$slots,ht,(0,e.normalizeProps)((0,e.guardReactiveProps)(bt)))]})}})]),1032,["room","message-reply","text-formatting","link-options","onResetMessage"]),(0,e.createVNode)(Ae,{files:N.files,onRemoveFile:w.removeFile,onResetMessage:w.resetMessage},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(st,ht){return{name:ht,fn:(0,e.withCtx)(function(bt){return[(0,e.renderSlot)(a.$slots,ht,(0,e.normalizeProps)((0,e.guardReactiveProps)(bt)))]})}})]),1032,["files","onRemoveFile","onResetMessage"]),(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["vac-box-footer",{"vac-box-footer-border":!N.files.length}])},[r.showAudio&&!N.files.length?((0,e.openBlock)(),(0,e.createElementBlock)("div",nr,[N.isRecording?((0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:0},[(0,e.createElementVNode)("div",{class:"vac-svg-button vac-icon-audio-stop",onClick:t[6]||(t[6]=function(){return w.stopRecorder&&w.stopRecorder.apply(w,arguments)})},[(0,e.renderSlot)(a.$slots,"audio-stop-icon",{},function(){return[(0,e.createVNode)(_e,{name:"close-outline"})]})]),Sr,(0,e.createElementVNode)("div",Hr,(0,e.toDisplayString)(w.recordedTime),1),(0,e.createElementVNode)("div",{class:"vac-svg-button vac-icon-audio-confirm",onClick:t[7]||(t[7]=function(st){return w.toggleRecorder(!1)})},[(0,e.renderSlot)(a.$slots,"audio-stop-icon",{},function(){return[(0,e.createVNode)(_e,{name:"checkmark"})]})])],64)):((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:1,class:"vac-svg-button",onClick:t[8]||(t[8]=function(st){return w.toggleRecorder(!0)})},[(0,e.renderSlot)(a.$slots,"microphone-icon",{},function(){return[(0,e.createVNode)(_e,{name:"microphone",class:"vac-icon-microphone"})]})]))])):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("textarea",{id:"roomTextarea",ref:"roomTextarea",placeholder:r.textMessages.TYPE_MESSAGE,class:(0,e.normalizeClass)(["vac-textarea",{"vac-textarea-outline":N.editedMessage._id}]),style:{"min-height":"20px","padding-left":"12px"},onInput:t[9]||(t[9]=function(){return w.onChangeInput&&w.onChangeInput.apply(w,arguments)}),onKeydown:[t[10]||(t[10]=(0,e.withKeys)(function(){return w.escapeTextarea&&w.escapeTextarea.apply(w,arguments)},["esc"])),t[11]||(t[11]=(0,e.withKeys)((0,e.withModifiers)(function(){return w.selectItem&&w.selectItem.apply(w,arguments)},["exact","prevent"]),["enter"])),t[13]||(t[13]=(0,e.withKeys)((0,e.withModifiers)(function(){},["exact","prevent"]),["tab"])),t[14]||(t[14]=(0,e.withKeys)(function(){return w.selectItem&&w.selectItem.apply(w,arguments)},["tab"])),t[15]||(t[15]=(0,e.withKeys)((0,e.withModifiers)(function(){},["exact","prevent"]),["up"])),t[16]||(t[16]=(0,e.withKeys)(function(st){return w.updateActiveUpOrDown(-1)},["up"])),t[17]||(t[17]=(0,e.withKeys)((0,e.withModifiers)(function(){},["exact","prevent"]),["down"])),t[18]||(t[18]=(0,e.withKeys)(function(st){return w.updateActiveUpOrDown(1)},["down"]))],onPaste:t[12]||(t[12]=function(){return w.onPasteImage&&w.onPasteImage.apply(w,arguments)})},null,42,yn),(0,e.createElementVNode)("div",Fn,[N.editedMessage._id?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:"vac-svg-button",onClick:t[19]||(t[19]=function(){return w.resetMessage&&w.resetMessage.apply(w,arguments)})},[(0,e.renderSlot)(a.$slots,"edit-close-icon",{},function(){return[(0,e.createVNode)(_e,{name:"close-outline"})]})])):(0,e.createCommentVNode)("",!0),r.showEmojis?(0,e.withDirectives)(((0,e.openBlock)(),(0,e.createElementBlock)("div",Dn,[(0,e.renderSlot)(a.$slots,"emoji-picker",(0,e.mergeProps)({emojiOpened:N.emojiOpened},{addEmoji:w.addEmoji}),function(){return[(0,e.createVNode)(Ve,{"emoji-opened":N.emojiOpened,"position-top":!0,onAddEmoji:w.addEmoji,onOpenEmoji:t[20]||(t[20]=function(st){return N.emojiOpened=st})},{"emoji-picker-icon":(0,e.withCtx)(function(){return[(0,e.renderSlot)(a.$slots,"emoji-picker-icon")]}),_:3},8,["emoji-opened","onAddEmoji"])]})])),[[we,function(){return N.emojiOpened=!1}]]):(0,e.createCommentVNode)("",!0),r.showFiles?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:2,class:"vac-svg-button",onClick:t[21]||(t[21]=function(){return w.launchFilePicker&&w.launchFilePicker.apply(w,arguments)})},[(0,e.renderSlot)(a.$slots,"paperclip-icon",{},function(){return[(0,e.createVNode)(_e,{name:"paperclip"})]})])):(0,e.createCommentVNode)("",!0),r.textareaActionEnabled?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:3,class:"vac-svg-button",onClick:t[22]||(t[22]=function(){return w.textareaActionHandler&&w.textareaActionHandler.apply(w,arguments)})},[(0,e.renderSlot)(a.$slots,"custom-action-icon",{},function(){return[(0,e.createVNode)(_e,{name:"deleted"})]})])):(0,e.createCommentVNode)("",!0),r.showFiles?((0,e.openBlock)(),(0,e.createElementBlock)("input",{key:4,ref:"file",type:"file",multiple:"",accept:r.acceptedFiles,style:{display:"none"},onChange:t[23]||(t[23]=function(st){return w.onFileChange(st.target.files)})},null,40,jn)):(0,e.createCommentVNode)("",!0),r.showSendIcon?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:5,class:(0,e.normalizeClass)(["vac-svg-button",{"vac-send-disabled":w.isMessageEmpty}]),onClick:t[24]||(t[24]=function(){return w.sendMessage&&w.sendMessage.apply(w,arguments)})},[(0,e.renderSlot)(a.$slots,"send-icon",{},function(){return[(0,e.createVNode)(_e,{name:"send",param:w.isMessageEmpty||w.isFileLoading?"disabled":""},null,8,["param"])]})],2)):(0,e.createCommentVNode)("",!0)])],2)],2)),[[e.vShow,Object.keys(r.room).length&&r.showFooter]])}Ie(2443),Ie(3680),Ie(3706),Ie(2703),Ie(8011),Ie(489),Ie(8304),Ie(8674),Ie(5069);function Ir(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ir=function(){return a};var a={},t=Object.prototype,r=t.hasOwnProperty,I=typeof Symbol=="function"?Symbol:{},N=I.iterator||"@@iterator",w=I.asyncIterator||"@@asyncIterator",le=I.toStringTag||"@@toStringTag";function he(ft,tt,xt){return Object.defineProperty(ft,tt,{value:xt,enumerable:!0,configurable:!0,writable:!0}),ft[tt]}try{he({},"")}catch{he=function(xt,Tt,At){return xt[Tt]=At}}function Re(ft,tt,xt,Tt){var At=tt&&tt.prototype instanceof _e?tt:_e,Mt=Object.create(At.prototype),Yt=new Ot(Tt||[]);return Mt._invoke=function(Zt,Qt,Bt){var Dt="suspendedStart";return function(ir,br){if(Dt==="executing")throw new Error("Generator is already running");if(Dt==="completed"){if(ir==="throw")throw br;return pr()}for(Bt.method=ir,Bt.arg=br;;){var qt=Bt.delegate;if(qt){var gr=fr(qt,Bt);if(gr){if(gr===Ae)continue;return gr}}if(Bt.method==="next")Bt.sent=Bt._sent=Bt.arg;else if(Bt.method==="throw"){if(Dt==="suspendedStart")throw Dt="completed",Bt.arg;Bt.dispatchException(Bt.arg)}else Bt.method==="return"&&Bt.abrupt("return",Bt.arg);Dt="executing";var lr=ce(Zt,Qt,Bt);if(lr.type==="normal"){if(Dt=Bt.done?"completed":"suspendedYield",lr.arg===Ae)continue;return{value:lr.arg,done:Bt.done}}lr.type==="throw"&&(Dt="completed",Bt.method="throw",Bt.arg=lr.arg)}}}(ft,xt,Yt),Mt}function ce(ft,tt,xt){try{return{type:"normal",arg:ft.call(tt,xt)}}catch(Tt){return{type:"throw",arg:Tt}}}a.wrap=Re;var Ae={};function _e(){}function Ve(){}function we(){}var st={};he(st,N,function(){return this});var ht=Object.getPrototypeOf,bt=ht&&ht(ht(zt([])));bt&&bt!==t&&r.call(bt,N)&&(st=bt);var Ft=we.prototype=_e.prototype=Object.create(st);function sr(ft){["next","throw","return"].forEach(function(tt){he(ft,tt,function(xt){return this._invoke(tt,xt)})})}function Wt(ft,tt){function xt(At,Mt,Yt,Zt){var Qt=ce(ft[At],ft,Mt);if(Qt.type!=="throw"){var Bt=Qt.arg,Dt=Bt.value;return Dt&&(0,vt.Z)(Dt)=="object"&&r.call(Dt,"__await")?tt.resolve(Dt.__await).then(function(ir){xt("next",ir,Yt,Zt)},function(ir){xt("throw",ir,Yt,Zt)}):tt.resolve(Dt).then(function(ir){Bt.value=ir,Yt(Bt)},function(ir){return xt("throw",ir,Yt,Zt)})}Zt(Qt.arg)}var Tt;this._invoke=function(At,Mt){function Yt(){return new tt(function(Zt,Qt){xt(At,Mt,Zt,Qt)})}return Tt=Tt?Tt.then(Yt,Yt):Yt()}}function fr(ft,tt){var xt=ft.iterator[tt.method];if(xt===void 0){if(tt.delegate=null,tt.method==="throw"){if(ft.iterator.return&&(tt.method="return",tt.arg=void 0,fr(ft,tt),tt.method==="throw"))return Ae;tt.method="throw",tt.arg=new TypeError("The iterator does not provide a 'throw' method")}return Ae}var Tt=ce(xt,ft.iterator,tt.arg);if(Tt.type==="throw")return tt.method="throw",tt.arg=Tt.arg,tt.delegate=null,Ae;var At=Tt.arg;return At?At.done?(tt[ft.resultName]=At.value,tt.next=ft.nextLoc,tt.method!=="return"&&(tt.method="next",tt.arg=void 0),tt.delegate=null,Ae):At:(tt.method="throw",tt.arg=new TypeError("iterator result is not an object"),tt.delegate=null,Ae)}function mr(ft){var tt={tryLoc:ft[0]};1 in ft&&(tt.catchLoc=ft[1]),2 in ft&&(tt.finallyLoc=ft[2],tt.afterLoc=ft[3]),this.tryEntries.push(tt)}function kt(ft){var tt=ft.completion||{};tt.type="normal",delete tt.arg,ft.completion=tt}function Ot(ft){this.tryEntries=[{tryLoc:"root"}],ft.forEach(mr,this),this.reset(!0)}function zt(ft){if(ft){var tt=ft[N];if(tt)return tt.call(ft);if(typeof ft.next=="function")return ft;if(!isNaN(ft.length)){var xt=-1,Tt=function At(){for(;++xt<ft.length;)if(r.call(ft,xt))return At.value=ft[xt],At.done=!1,At;return At.value=void 0,At.done=!0,At};return Tt.next=Tt}}return{next:pr}}function pr(){return{value:void 0,done:!0}}return Ve.prototype=we,he(Ft,"constructor",we),he(we,"constructor",Ve),Ve.displayName=he(we,le,"GeneratorFunction"),a.isGeneratorFunction=function(ft){var tt=typeof ft=="function"&&ft.constructor;return!!tt&&(tt===Ve||(tt.displayName||tt.name)==="GeneratorFunction")},a.mark=function(ft){return Object.setPrototypeOf?Object.setPrototypeOf(ft,we):(ft.__proto__=we,he(ft,le,"GeneratorFunction")),ft.prototype=Object.create(Ft),ft},a.awrap=function(ft){return{__await:ft}},sr(Wt.prototype),he(Wt.prototype,w,function(){return this}),a.AsyncIterator=Wt,a.async=function(ft,tt,xt,Tt,At){At===void 0&&(At=Promise);var Mt=new Wt(Re(ft,tt,xt,Tt),At);return a.isGeneratorFunction(tt)?Mt:Mt.next().then(function(Yt){return Yt.done?Yt.value:Mt.next()})},sr(Ft),he(Ft,le,"Generator"),he(Ft,N,function(){return this}),he(Ft,"toString",function(){return"[object Generator]"}),a.keys=function(ft){var tt=[];for(var xt in ft)tt.push(xt);return tt.reverse(),function Tt(){for(;tt.length;){var At=tt.pop();if(At in ft)return Tt.value=At,Tt.done=!1,Tt}return Tt.done=!0,Tt}},a.values=zt,Ot.prototype={constructor:Ot,reset:function(tt){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(kt),!tt)for(var xt in this)xt.charAt(0)==="t"&&r.call(this,xt)&&!isNaN(+xt.slice(1))&&(this[xt]=void 0)},stop:function(){this.done=!0;var tt=this.tryEntries[0].completion;if(tt.type==="throw")throw tt.arg;return this.rval},dispatchException:function(tt){if(this.done)throw tt;var xt=this;function Tt(Bt,Dt){return Yt.type="throw",Yt.arg=tt,xt.next=Bt,Dt&&(xt.method="next",xt.arg=void 0),!!Dt}for(var At=this.tryEntries.length-1;At>=0;--At){var Mt=this.tryEntries[At],Yt=Mt.completion;if(Mt.tryLoc==="root")return Tt("end");if(Mt.tryLoc<=this.prev){var Zt=r.call(Mt,"catchLoc"),Qt=r.call(Mt,"finallyLoc");if(Zt&&Qt){if(this.prev<Mt.catchLoc)return Tt(Mt.catchLoc,!0);if(this.prev<Mt.finallyLoc)return Tt(Mt.finallyLoc)}else if(Zt){if(this.prev<Mt.catchLoc)return Tt(Mt.catchLoc,!0)}else{if(!Qt)throw new Error("try statement without catch or finally");if(this.prev<Mt.finallyLoc)return Tt(Mt.finallyLoc)}}}},abrupt:function(tt,xt){for(var Tt=this.tryEntries.length-1;Tt>=0;--Tt){var At=this.tryEntries[Tt];if(At.tryLoc<=this.prev&&r.call(At,"finallyLoc")&&this.prev<At.finallyLoc){var Mt=At;break}}Mt&&(tt==="break"||tt==="continue")&&Mt.tryLoc<=xt&&xt<=Mt.finallyLoc&&(Mt=null);var Yt=Mt?Mt.completion:{};return Yt.type=tt,Yt.arg=xt,Mt?(this.method="next",this.next=Mt.finallyLoc,Ae):this.complete(Yt)},complete:function(tt,xt){if(tt.type==="throw")throw tt.arg;return tt.type==="break"||tt.type==="continue"?this.next=tt.arg:tt.type==="return"?(this.rval=this.arg=tt.arg,this.method="return",this.next="end"):tt.type==="normal"&&xt&&(this.next=xt),Ae},finish:function(tt){for(var xt=this.tryEntries.length-1;xt>=0;--xt){var Tt=this.tryEntries[xt];if(Tt.finallyLoc===tt)return this.complete(Tt.completion,Tt.afterLoc),kt(Tt),Ae}},catch:function(tt){for(var xt=this.tryEntries.length-1;xt>=0;--xt){var Tt=this.tryEntries[xt];if(Tt.tryLoc===tt){var At=Tt.completion;if(At.type==="throw"){var Mt=At.arg;kt(Tt)}return Mt}}throw new Error("illegal catch attempt")},delegateYield:function(tt,xt,Tt){return this.delegate={iterator:zt(tt),resultName:xt,nextLoc:Tt},this.method==="next"&&(this.arg=void 0),Ae}},a}function Sn(a,t,r,I,N,w,le){try{var he=a[w](le),Re=he.value}catch(ce){r(ce);return}he.done?t(Re):Promise.resolve(Re).then(I,N)}function Kr(a){return function(){var t=this,r=arguments;return new Promise(function(I,N){var w=a.apply(t,r);function le(Re){Sn(w,I,N,le,he,"next",Re)}function he(Re){Sn(w,I,N,le,he,"throw",Re)}le(void 0)})}}Ie(3210),Ie(8733),Ie(3710),Ie(285),Ie(1637),Ie(561);function zr(a){if(typeof a!="string"||!a)throw new Error("expected a non-empty string, got: "+a)}function nn(a){if(typeof a!="number")throw new Error("expected a number, got: "+a)}const Xr=1,ua=1,Vt="emoji",Or="keyvalue",Wr="favorites",bn="tokens",or="tokens",Zr="unicode",wr="count",En="group",kr="order",an="group-order",Fr="eTag",Cr="url",Qr="skinTone",Er="readonly",ca="readwrite",Ya="skinUnicodes",xs="skinUnicodes",Ts="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",As="en";function _s(a,t){const r=new Set,I=[];for(const N of a){const w=t(N);r.has(w)||(r.add(w),I.push(N))}return I}function Ka(a){return _s(a,t=>t.unicode)}function Ms(a){function t(r,I,N){const w=I?a.createObjectStore(r,{keyPath:I}):a.createObjectStore(r);if(N)for(const[le,[he,Re]]of Object.entries(N))w.createIndex(le,he,{multiEntry:Re});return w}t(Or),t(Vt,Zr,{[or]:[bn,!0],[an]:[[En,kr]],[Ya]:[xs,!0]}),t(Wr,void 0,{[wr]:[""]})}const da={},Un={},Vn={};function Xa(a,t,r){r.onerror=()=>t(r.error),r.onblocked=()=>t(new Error("IDB blocked")),r.onsuccess=()=>a(r.result)}async function Is(a){const t=await new Promise((r,I)=>{const N=indexedDB.open(a,Xr);da[a]=N,N.onupgradeneeded=w=>{w.oldVersion<ua&&Ms(N.result)},Xa(r,I,N)});return t.onclose=()=>va(a),t}function Os(a){return Un[a]||(Un[a]=Is(a)),Un[a]}function Dr(a,t,r,I){return new Promise((N,w)=>{const le=a.transaction(t,r,{durability:"relaxed"}),he=typeof t=="string"?le.objectStore(t):t.map(ce=>le.objectStore(ce));let Re;I(he,le,ce=>{Re=ce}),le.oncomplete=()=>N(Re),le.onerror=()=>w(le.error)})}function va(a){const t=da[a],r=t&&t.result;if(r){r.close();const I=Vn[a];if(I)for(const N of I)N()}delete da[a],delete Un[a],delete Vn[a]}function ws(a){return new Promise((t,r)=>{va(a);const I=indexedDB.deleteDatabase(a);Xa(t,r,I)})}function Cs(a,t){let r=Vn[a];r||(r=Vn[a]=[]),r.push(t)}const Bs=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]);function on(a){return a.split(/[\s_]+/).map(t=>!t.match(/\w/)||Bs.has(t)?t.toLowerCase():t.replace(/[)(:,]/g,"").replace(//g,"'").toLowerCase()).filter(Boolean)}const Ls=2;function Wa(a){return a.filter(Boolean).map(t=>t.toLowerCase()).filter(t=>t.length>=Ls)}function Ns(a){return a.map(({annotation:r,emoticon:I,group:N,order:w,shortcodes:le,skins:he,tags:Re,emoji:ce,version:Ae})=>{const _e=[...new Set(Wa([...(le||[]).map(on).flat(),...Re.map(on).flat(),...on(r),I]))].sort(),Ve={annotation:r,group:N,order:w,tags:Re,tokens:_e,unicode:ce,version:Ae};if(I&&(Ve.emoticon=I),le&&(Ve.shortcodes=le),he){Ve.skinTones=[],Ve.skinUnicodes=[],Ve.skinVersions=[];for(const{tone:we,emoji:st,version:ht}of he)Ve.skinTones.push(we),Ve.skinUnicodes.push(st),Ve.skinVersions.push(ht)}return Ve})}function Za(a,t,r,I){a[t](r).onsuccess=N=>I&&I(N.target.result)}function Jr(a,t,r){Za(a,"get",t,r)}function Qa(a,t,r){Za(a,"getAll",t,r)}function fa(a){a.commit&&a.commit()}function Ps(a,t){let r=a[0];for(let I=1;I<a.length;I++){const N=a[I];t(r)>t(N)&&(r=N)}return r}function Ja(a,t){const r=Ps(a,N=>N.length),I=[];for(const N of r)a.some(w=>w.findIndex(le=>t(le)===t(N))===-1)||I.push(N);return I}async function ks(a){return!await ma(a,Or,Cr)}async function Fs(a,t,r){const[I,N]=await Promise.all([Fr,Cr].map(w=>ma(a,Or,w)));return I===r&&N===t}async function Ds(a,t){return Dr(a,Vt,Er,(I,N,w)=>{let le;const he=()=>{I.getAll(le&&IDBKeyRange.lowerBound(le,!0),50).onsuccess=Re=>{const ce=Re.target.result;for(const Ae of ce)if(le=Ae.unicode,t(Ae))return w(Ae);if(ce.length<50)return w();he()}};he()})}async function $a(a,t,r,I){try{const N=Ns(t);await Dr(a,[Vt,Or],ca,([w,le],he)=>{let Re,ce,Ae=0;function _e(){++Ae===2&&Ve()}function Ve(){if(!(Re===I&&ce===r)){w.clear();for(const we of N)w.put(we);le.put(I,Fr),le.put(r,Cr),fa(he)}}Jr(le,Fr,we=>{Re=we,_e()}),Jr(le,Cr,we=>{ce=we,_e()})})}finally{}}async function js(a,t){return Dr(a,Vt,Er,(r,I,N)=>{const w=IDBKeyRange.bound([t,0],[t+1,0],!1,!0);Qa(r.index(an),w,N)})}async function qa(a,t){const r=Wa(on(t));return r.length?Dr(a,Vt,Er,(I,N,w)=>{const le=[],he=()=>{le.length===r.length&&Re()},Re=()=>{const ce=Ja(le,Ae=>Ae.unicode);w(ce.sort((Ae,_e)=>Ae.order<_e.order?-1:1))};for(let ce=0;ce<r.length;ce++){const Ae=r[ce],_e=ce===r.length-1?IDBKeyRange.bound(Ae,Ae+"\uFFFF",!1,!0):IDBKeyRange.only(Ae);Qa(I.index(or),_e,Ve=>{le.push(Ve),he()})}}):[]}async function Us(a,t){const r=await qa(a,t);return r.length?r.filter(I=>(I.shortcodes||[]).map(w=>w.toLowerCase()).includes(t.toLowerCase()))[0]||null:await Ds(a,N=>(N.shortcodes||[]).includes(t.toLowerCase()))||null}async function Vs(a,t){return Dr(a,Vt,Er,(r,I,N)=>Jr(r,t,w=>{if(w)return N(w);Jr(r.index(Ya),t,le=>N(le||null))}))}function ma(a,t,r){return Dr(a,t,Er,(I,N,w)=>Jr(I,r,w))}function Hs(a,t,r,I){return Dr(a,t,ca,(N,w)=>{N.put(I,r),fa(w)})}function zs(a,t){return Dr(a,Wr,ca,(r,I)=>Jr(r,t,N=>{r.put((N||0)+1,t),fa(I)}))}function Gs(a,t,r){return r===0?[]:Dr(a,[Wr,Vt],Er,([I,N],w,le)=>{const he=[];I.index(wr).openCursor(void 0,"prev").onsuccess=Re=>{const ce=Re.target.result;if(!ce)return le(he);function Ae(we){if(he.push(we),he.length===r)return le(he);ce.continue()}const _e=ce.primaryKey,Ve=t.byName(_e);if(Ve)return Ae(Ve);Jr(N,_e,we=>{if(we)return Ae(we);ce.continue()})}})}const Hn="";function Ys(a,t){const r=new Map;for(const N of a){const w=t(N);for(const le of w){let he=r;for(let ce=0;ce<le.length;ce++){const Ae=le.charAt(ce);let _e=he.get(Ae);_e||(_e=new Map,he.set(Ae,_e)),he=_e}let Re=he.get(Hn);Re||(Re=[],he.set(Hn,Re)),Re.push(N)}}return(N,w)=>{let le=r;for(let ce=0;ce<N.length;ce++){const Ae=N.charAt(ce),_e=le.get(Ae);if(_e)le=_e;else return[]}if(w)return le.get(Hn)||[];const he=[],Re=[le];for(;Re.length;){const Ae=[...Re.shift().entries()].sort((_e,Ve)=>_e[0]<Ve[0]?-1:1);for(const[_e,Ve]of Ae)_e===Hn?he.push(...Ve):Re.push(Ve)}return he}}const Ks=["name","url"];function Xs(a){const t=a&&Array.isArray(a),r=t&&a.length&&(!a[0]||Ks.some(I=>!(I in a[0])));if(!t||r)throw new Error("Custom emojis are in the wrong format")}function eo(a){Xs(a);const t=(Ve,we)=>Ve.name.toLowerCase()<we.name.toLowerCase()?-1:1,r=a.sort(t),N=Ys(a,Ve=>[...new Set((Ve.shortcodes||[]).map(we=>on(we)).flat())]),w=Ve=>N(Ve,!0),le=Ve=>N(Ve,!1),he=Ve=>{const we=on(Ve),st=we.map((ht,bt)=>(bt<we.length-1?w:le)(ht));return Ja(st,ht=>ht.name).sort(t)},Re=new Map,ce=new Map;for(const Ve of a){ce.set(Ve.name.toLowerCase(),Ve);for(const we of Ve.shortcodes||[])Re.set(we.toLowerCase(),Ve)}return{all:r,search:he,byShortcode:Ve=>Re.get(Ve.toLowerCase()),byName:Ve=>ce.get(Ve.toLowerCase())}}function Rn(a){if(!a)return a;if(delete a.tokens,a.skinTones){const t=a.skinTones.length;a.skins=Array(t);for(let r=0;r<t;r++)a.skins[r]={tone:a.skinTones[r],unicode:a.skinUnicodes[r],version:a.skinVersions[r]};delete a.skinTones,delete a.skinUnicodes,delete a.skinVersions}return a}function to(a){a||console.warn("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}const Ws=["annotation","emoji","group","order","tags","version"];function Zs(a){if(!a||!Array.isArray(a)||!a[0]||typeof a[0]!="object"||Ws.some(t=>!(t in a[0])))throw new Error("Emoji data is in the wrong format")}function ro(a,t){if(Math.floor(a.status/100)!==2)throw new Error("Failed to fetch: "+t+":  "+a.status)}async function Qs(a){const t=await fetch(a,{method:"HEAD"});ro(t,a);const r=t.headers.get("etag");return to(r),r}async function ha(a){const t=await fetch(a);ro(t,a);const r=t.headers.get("etag");to(r);const I=await t.json();return Zs(I),[r,I]}function Js(a){for(var t="",r=new Uint8Array(a),I=r.byteLength,N=-1;++N<I;)t+=String.fromCharCode(r[N]);return t}function $s(a){for(var t=a.length,r=new ArrayBuffer(t),I=new Uint8Array(r),N=-1;++N<t;)I[N]=a.charCodeAt(N);return r}async function no(a){const t=JSON.stringify(a),r=$s(t),I=await crypto.subtle.digest("SHA-1",r),N=Js(I);return btoa(N)}async function qs(a,t){let r,I=await Qs(t);if(!I){const N=await ha(t);I=N[0],r=N[1],I||(I=await no(r))}await Fs(a,t,I)||(r||(r=(await ha(t))[1]),await $a(a,r,t,I))}async function ei(a,t){let[r,I]=await ha(t);r||(r=await no(I)),await $a(a,I,t,r)}class ao{constructor({dataSource:t=Ts,locale:r=As,customEmoji:I=[]}={}){this.dataSource=t,this.locale=r,this._dbName=`emoji-picker-element-${this.locale}`,this._db=void 0,this._lazyUpdate=void 0,this._custom=eo(I),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const t=this._db=await Os(this._dbName);Cs(this._dbName,this._clear);const r=this.dataSource;await ks(t)?await ei(t,r):this._lazyUpdate=qs(t,r)}async ready(){const t=async()=>(this._ready||(this._ready=this._init()),this._ready);await t(),this._db||await t()}async getEmojiByGroup(t){return nn(t),await this.ready(),Ka(await js(this._db,t)).map(Rn)}async getEmojiBySearchQuery(t){zr(t),await this.ready();const r=this._custom.search(t),I=Ka(await qa(this._db,t)).map(Rn);return[...r,...I]}async getEmojiByShortcode(t){zr(t),await this.ready();const r=this._custom.byShortcode(t);return r||Rn(await Us(this._db,t))}async getEmojiByUnicodeOrName(t){zr(t),await this.ready();const r=this._custom.byName(t);return r||Rn(await Vs(this._db,t))}async getPreferredSkinTone(){return await this.ready(),await ma(this._db,Or,Qr)||0}async setPreferredSkinTone(t){return nn(t),await this.ready(),Hs(this._db,Or,Qr,t)}async incrementFavoriteEmojiCount(t){return zr(t),await this.ready(),zs(this._db,t)}async getTopFavoriteEmoji(t){return nn(t),await this.ready(),(await Gs(this._db,this._custom,t)).map(Rn)}set customEmoji(t){this._custom=eo(t)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{await this._lazyUpdate}catch{}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await va(this._dbName)}async delete(){await this._shutdown(),await ws(this._dbName)}}function xn(){}function oo(a){return a()}function so(){return Object.create(null)}function Tn(a){a.forEach(oo)}function io(a){return typeof a=="function"}function ti(a,t){return a!=a?t==t:a!==t||a&&typeof a=="object"||typeof a=="function"}let zn;function Gn(a,t){return zn||(zn=document.createElement("a")),zn.href=t,a===zn.href}function ri(a){return Object.keys(a).length===0}function ni(a){return a&&io(a.destroy)?a.destroy:xn}function Ht(a,t){a.appendChild(t)}function Rr(a,t,r){a.insertBefore(t,r||null)}function xr(a){a.parentNode.removeChild(a)}function Ut(a){return document.createElement(a)}function Br(a){return document.createTextNode(a)}function Tr(a,t,r,I){return a.addEventListener(t,r,I),()=>a.removeEventListener(t,r,I)}function Ce(a,t,r){r==null?a.removeAttribute(t):a.getAttribute(t)!==r&&a.setAttribute(t,r)}function Lr(a,t){t=""+t,a.wholeText!==t&&(a.data=t)}function lo(a,t){a.value=t==null?"":t}function Gr(a,t,r,I){r===null?a.style.removeProperty(t):a.style.setProperty(t,r,I?"important":"")}let pa;function An(a){pa=a}const _n=[],sn=[],Yn=[],uo=[],co=Promise.resolve();let ga=!1;function vo(){ga||(ga=!0,co.then(fo))}function ai(){return vo(),co}function ya(a){Yn.push(a)}const Sa=new Set;let Kn=0;function fo(){const a=pa;do{for(;Kn<_n.length;){const t=_n[Kn];Kn++,An(t),oi(t.$$)}for(An(null),_n.length=0,Kn=0;sn.length;)sn.pop()();for(let t=0;t<Yn.length;t+=1){const r=Yn[t];Sa.has(r)||(Sa.add(r),r())}Yn.length=0}while(_n.length);for(;uo.length;)uo.pop()();ga=!1,Sa.clear(),An(a)}function oi(a){if(a.fragment!==null){a.update(),Tn(a.before_update);const t=a.dirty;a.dirty=[-1],a.fragment&&a.fragment.p(a.ctx,t),a.after_update.forEach(ya)}}const si=new Set;function ii(a,t){a&&a.i&&(si.delete(a),a.i(t))}const li=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:cv;function Mn(a,t){a.d(1),t.delete(a.key)}function In(a,t,r,I,N,w,le,he,Re,ce,Ae,_e){let Ve=a.length,we=w.length,st=Ve;const ht={};for(;st--;)ht[a[st].key]=st;const bt=[],Ft=new Map,sr=new Map;for(st=we;st--;){const kt=_e(N,w,st),Ot=r(kt);let zt=le.get(Ot);zt?I&&zt.p(kt,t):(zt=ce(Ot,kt),zt.c()),Ft.set(Ot,bt[st]=zt),Ot in ht&&sr.set(Ot,Math.abs(st-ht[Ot]))}const Wt=new Set,fr=new Set;function mr(kt){ii(kt,1),kt.m(he,Ae),le.set(kt.key,kt),Ae=kt.first,we--}for(;Ve&&we;){const kt=bt[we-1],Ot=a[Ve-1],zt=kt.key,pr=Ot.key;kt===Ot?(Ae=kt.first,Ve--,we--):Ft.has(pr)?!le.has(zt)||Wt.has(zt)?mr(kt):fr.has(pr)?Ve--:sr.get(zt)>sr.get(pr)?(fr.add(zt),mr(kt)):(Wt.add(pr),Ve--):(Re(Ot,le),Ve--)}for(;Ve--;){const kt=a[Ve];Ft.has(kt.key)||Re(kt,le)}for(;we;)mr(bt[we-1]);return bt}function ui(a,t,r,I){const{fragment:N,on_mount:w,on_destroy:le,after_update:he}=a.$$;N&&N.m(t,r),I||ya(()=>{const Re=w.map(oo).filter(io);le?le.push(...Re):Tn(Re),a.$$.on_mount=[]}),he.forEach(ya)}function ci(a,t){const r=a.$$;r.fragment!==null&&(Tn(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function di(a,t){a.$$.dirty[0]===-1&&(_n.push(a),vo(),a.$$.dirty.fill(0)),a.$$.dirty[t/31|0]|=1<<t%31}function vi(a,t,r,I,N,w,le,he=[-1]){const Re=pa;An(a);const ce=a.$$={fragment:null,ctx:null,props:w,update:xn,not_equal:N,bound:so(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(Re?Re.$$.context:[]),callbacks:so(),dirty:he,skip_bound:!1,root:t.target||Re.$$.root};le&&le(ce.root);let Ae=!1;ce.ctx=r?r(a,t.props||{},(_e,Ve,...we)=>{const st=we.length?we[0]:Ve;return ce.ctx&&N(ce.ctx[_e],ce.ctx[_e]=st)&&(!ce.skip_bound&&ce.bound[_e]&&ce.bound[_e](st),Ae&&di(a,_e)),Ve}):[],ce.update(),Ae=!0,Tn(ce.before_update),ce.fragment=I?I(ce.ctx):!1,t.target&&(ce.fragment&&ce.fragment.c(),ui(a,t.target,void 0,void 0),fo()),An(Re)}class fi{$destroy(){ci(this,1),this.$destroy=xn}$on(t,r){const I=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return I.push(r),()=>{const N=I.indexOf(r);N!==-1&&I.splice(N,1)}}$set(t){this.$$set&&!ri(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const mo=[[-1,"\u2728","custom"],[0,"\u{1F600}","smileys-emotion"],[1,"\u{1F44B}","people-body"],[3,"\u{1F431}","animals-nature"],[4,"\u{1F34E}","food-drink"],[5,"\u{1F3E0}\uFE0F","travel-places"],[6,"\u26BD","activities"],[7,"\u{1F4DD}","objects"],[8,"\u26D4\uFE0F","symbols"],[9,"\u{1F3C1}","flags"]].map(([a,t,r])=>({id:a,emoji:t,name:r})),Xn=mo.slice(1),mi=mo[0],hi=2,ho=6,po=typeof requestIdleCallback=="function"?requestIdleCallback:setTimeout;function go(a){return a.unicode.includes("\u200D")}const pi={"\u{1FAE0}":14,"\u{1F972}":13.1,"\u{1F97B}":12.1,"\u{1F970}":11,"\u{1F929}":5,"\u{1F471}\u200D\u2640\uFE0F":4,"\u{1F923}":3,"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F":2,"\u{1F600}":1,"\u{1F610}\uFE0F":.7,"\u{1F603}":.6},gi=1e3,yi="\u{1F590}\uFE0F",Si=8,bi=["\u{1F60A}","\u{1F612}","\u2665\uFE0F","\u{1F44D}\uFE0F","\u{1F60D}","\u{1F602}","\u{1F62D}","\u263A\uFE0F","\u{1F614}","\u{1F629}","\u{1F60F}","\u{1F495}","\u{1F64C}","\u{1F618}"],yo='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',Ei=(a,t)=>a<t?-1:a>t?1:0,So=(a,t)=>{const r=document.createElement("canvas");r.width=r.height=1;const I=r.getContext("2d");return I.textBaseline="top",I.font=`100px ${yo}`,I.fillStyle=t,I.scale(.01,.01),I.fillText(a,0,0),I.getImageData(0,0,1,1).data},Ri=(a,t)=>{const r=[...a].join(","),I=[...t].join(",");return r===I&&!r.startsWith("0,0,0,")};function xi(a){const t=So(a,"#000"),r=So(a,"#fff");return t&&r&&Ri(t,r)}function Ti(){const a=Object.entries(pi);try{for(const[t,r]of a)if(xi(t))return r}catch{}finally{}return a[0][1]}const ba=new Promise(a=>po(()=>a(Ti()))),Ea=new Map,Ai="\uFE0F",_i="\uD83C",Mi="\u200D",Ii=127995,Oi=57339;function wi(a,t){if(t===0)return a;const r=a.indexOf(Mi);return r!==-1?a.substring(0,r)+String.fromCodePoint(Ii+t-1)+a.substring(r):(a.endsWith(Ai)&&(a=a.substring(0,a.length-1)),a+_i+String.fromCodePoint(Oi+t-1))}function Yr(a){a.preventDefault(),a.stopPropagation()}function Ra(a,t,r){return t+=a?-1:1,t<0?t=r.length-1:t>=r.length&&(t=0),t}function bo(a,t){const r=new Set,I=[];for(const N of a){const w=t(N);r.has(w)||(r.add(w),I.push(N))}return I}function Ci(a,t){const r=I=>{const N={};for(const w of I)typeof w.tone=="number"&&w.version<=t&&(N[w.tone]=w.unicode);return N};return a.map(({unicode:I,skins:N,shortcodes:w,url:le,name:he,category:Re})=>({unicode:I,name:he,shortcodes:w,url:le,category:Re,id:I||he,skins:N&&r(N),title:(w||[]).join(", ")}))}const Wn=requestAnimationFrame;let Bi=typeof ResizeObserver=="function";function Li(a,t){let r;return Bi?(r=new ResizeObserver(I=>t(I[0].contentRect.width)),r.observe(a)):Wn(()=>t(a.getBoundingClientRect().width)),{destroy(){r&&r.disconnect()}}}function Eo(a){{const t=document.createRange();return t.selectNode(a.firstChild),t.getBoundingClientRect().width}}let xa;function Ni(a,t,r){for(const I of a){const N=r(I),w=Eo(N);typeof xa=="undefined"&&(xa=Eo(t));const le=w/1.8<xa;Ea.set(I.unicode,le)}}function Pi(a){return bo(a,t=>t)}const{Map:On}=li;function Ro(a,t,r){const I=a.slice();return I[63]=t[r],I[65]=r,I}function xo(a,t,r){const I=a.slice();return I[66]=t[r],I[65]=r,I}function To(a,t,r){const I=a.slice();return I[63]=t[r],I[65]=r,I}function Ao(a,t,r){const I=a.slice();return I[69]=t[r],I}function _o(a,t,r){const I=a.slice();return I[72]=t[r],I[65]=r,I}function Mo(a,t){let r,I=t[72]+"",N,w,le,he,Re,ce;return{key:a,first:null,c(){r=Ut("div"),N=Br(I),Ce(r,"id",w="skintone-"+t[65]),Ce(r,"class",le="emoji hide-focus "+(t[65]===t[20]?"active":"")),Ce(r,"aria-selected",he=t[65]===t[20]),Ce(r,"role","option"),Ce(r,"title",Re=t[0].skinTones[t[65]]),Ce(r,"tabindex","-1"),Ce(r,"aria-label",ce=t[0].skinTones[t[65]]),this.first=r},m(Ae,_e){Rr(Ae,r,_e),Ht(r,N)},p(Ae,_e){t=Ae,_e[0]&512&&I!==(I=t[72]+"")&&Lr(N,I),_e[0]&512&&w!==(w="skintone-"+t[65])&&Ce(r,"id",w),_e[0]&1049088&&le!==(le="emoji hide-focus "+(t[65]===t[20]?"active":""))&&Ce(r,"class",le),_e[0]&1049088&&he!==(he=t[65]===t[20])&&Ce(r,"aria-selected",he),_e[0]&513&&Re!==(Re=t[0].skinTones[t[65]])&&Ce(r,"title",Re),_e[0]&513&&ce!==(ce=t[0].skinTones[t[65]])&&Ce(r,"aria-label",ce)},d(Ae){Ae&&xr(r)}}}function Io(a,t){let r,I,N=t[69].emoji+"",w,le,he,Re,ce,Ae,_e;function Ve(){return t[49](t[69])}return{key:a,first:null,c(){r=Ut("button"),I=Ut("div"),w=Br(N),Ce(I,"class","nav-emoji emoji"),Ce(r,"role","tab"),Ce(r,"class","nav-button"),Ce(r,"aria-controls",le="tab-"+t[69].id),Ce(r,"aria-label",he=t[0].categories[t[69].name]),Ce(r,"aria-selected",Re=!t[4]&&t[13].id===t[69].id),Ce(r,"title",ce=t[0].categories[t[69].name]),this.first=r},m(we,st){Rr(we,r,st),Ht(r,I),Ht(I,w),Ae||(_e=Tr(r,"click",Ve),Ae=!0)},p(we,st){t=we,st[0]&4096&&N!==(N=t[69].emoji+"")&&Lr(w,N),st[0]&4096&&le!==(le="tab-"+t[69].id)&&Ce(r,"aria-controls",le),st[0]&4097&&he!==(he=t[0].categories[t[69].name])&&Ce(r,"aria-label",he),st[0]&12304&&Re!==(Re=!t[4]&&t[13].id===t[69].id)&&Ce(r,"aria-selected",Re),st[0]&4097&&ce!==(ce=t[0].categories[t[69].name])&&Ce(r,"title",ce)},d(we){we&&xr(r),Ae=!1,_e()}}}function ki(a){let t,r;return{c(){t=Ut("img"),Ce(t,"class","custom-emoji"),Gn(t.src,r=a[63].url)||Ce(t,"src",r),Ce(t,"alt",""),Ce(t,"loading","lazy")},m(I,N){Rr(I,t,N)},p(I,N){N[0]&32768&&!Gn(t.src,r=I[63].url)&&Ce(t,"src",r)},d(I){I&&xr(t)}}}function Fi(a){let t=a[27](a[63],a[8])+"",r;return{c(){r=Br(t)},m(I,N){Rr(I,r,N)},p(I,N){N[0]&33024&&t!==(t=I[27](I[63],I[8])+"")&&Lr(r,t)},d(I){I&&xr(r)}}}function Oo(a,t){let r,I,N,w,le,he,Re;function ce(Ve,we){return Ve[63].unicode?Fi:ki}let Ae=ce(t),_e=Ae(t);return{key:a,first:null,c(){r=Ut("button"),_e.c(),Ce(r,"role",I=t[4]?"option":"menuitem"),Ce(r,"aria-selected",N=t[4]?t[65]==t[5]:""),Ce(r,"aria-label",w=t[28](t[63],t[8])),Ce(r,"title",le=t[63].title),Ce(r,"class",he="emoji "+(t[4]&&t[65]===t[5]?"active":"")),Ce(r,"id",Re="emo-"+t[63].id),this.first=r},m(Ve,we){Rr(Ve,r,we),_e.m(r,null)},p(Ve,we){t=Ve,Ae===(Ae=ce(t))&&_e?_e.p(t,we):(_e.d(1),_e=Ae(t),_e&&(_e.c(),_e.m(r,null))),we[0]&16&&I!==(I=t[4]?"option":"menuitem")&&Ce(r,"role",I),we[0]&32816&&N!==(N=t[4]?t[65]==t[5]:"")&&Ce(r,"aria-selected",N),we[0]&33024&&w!==(w=t[28](t[63],t[8]))&&Ce(r,"aria-label",w),we[0]&32768&&le!==(le=t[63].title)&&Ce(r,"title",le),we[0]&32816&&he!==(he="emoji "+(t[4]&&t[65]===t[5]?"active":""))&&Ce(r,"class",he),we[0]&32768&&Re!==(Re="emo-"+t[63].id)&&Ce(r,"id",Re)},d(Ve){Ve&&xr(r),_e.d()}}}function wo(a,t){let r,I=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"",N,w,le,he,Re=[],ce=new On,Ae,_e,Ve,we=t[66].emojis;const st=ht=>ht[63].id;for(let ht=0;ht<we.length;ht+=1){let bt=To(t,we,ht),Ft=st(bt);ce.set(Ft,Re[ht]=Oo(Ft,bt))}return{key:a,first:null,c(){r=Ut("div"),N=Br(I),he=Ut("div");for(let ht=0;ht<Re.length;ht+=1)Re[ht].c();Ce(r,"id",w="menu-label-"+t[65]),Ce(r,"class",le="category "+(t[15].length===1&&t[15][0].category===""?"gone":"")),Ce(r,"aria-hidden","true"),Ce(he,"class","emoji-menu"),Ce(he,"role",Ae=t[4]?"listbox":"menu"),Ce(he,"aria-labelledby",_e="menu-label-"+t[65]),Ce(he,"id",Ve=t[4]?"search-results":""),this.first=r},m(ht,bt){Rr(ht,r,bt),Ht(r,N),Rr(ht,he,bt);for(let Ft=0;Ft<Re.length;Ft+=1)Re[Ft].m(he,null)},p(ht,bt){t=ht,bt[0]&40977&&I!==(I=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"")&&Lr(N,I),bt[0]&32768&&w!==(w="menu-label-"+t[65])&&Ce(r,"id",w),bt[0]&32768&&le!==(le="category "+(t[15].length===1&&t[15][0].category===""?"gone":""))&&Ce(r,"class",le),bt[0]&402686256&&(we=t[66].emojis,Re=In(Re,bt,st,1,t,we,ce,he,Mn,Oo,null,To)),bt[0]&16&&Ae!==(Ae=t[4]?"listbox":"menu")&&Ce(he,"role",Ae),bt[0]&32768&&_e!==(_e="menu-label-"+t[65])&&Ce(he,"aria-labelledby",_e),bt[0]&16&&Ve!==(Ve=t[4]?"search-results":"")&&Ce(he,"id",Ve)},d(ht){ht&&xr(r),ht&&xr(he);for(let bt=0;bt<Re.length;bt+=1)Re[bt].d()}}}function Di(a){let t,r;return{c(){t=Ut("img"),Ce(t,"class","custom-emoji"),Gn(t.src,r=a[63].url)||Ce(t,"src",r),Ce(t,"alt",""),Ce(t,"loading","lazy")},m(I,N){Rr(I,t,N)},p(I,N){N[0]&1024&&!Gn(t.src,r=I[63].url)&&Ce(t,"src",r)},d(I){I&&xr(t)}}}function ji(a){let t=a[27](a[63],a[8])+"",r;return{c(){r=Br(t)},m(I,N){Rr(I,r,N)},p(I,N){N[0]&1280&&t!==(t=I[27](I[63],I[8])+"")&&Lr(r,t)},d(I){I&&xr(r)}}}function Co(a,t){let r,I,N,w;function le(ce,Ae){return ce[63].unicode?ji:Di}let he=le(t),Re=he(t);return{key:a,first:null,c(){r=Ut("button"),Re.c(),Ce(r,"role","menuitem"),Ce(r,"aria-label",I=t[28](t[63],t[8])),Ce(r,"title",N=t[63].title),Ce(r,"class","emoji"),Ce(r,"id",w="fav-"+t[63].id),this.first=r},m(ce,Ae){Rr(ce,r,Ae),Re.m(r,null)},p(ce,Ae){t=ce,he===(he=le(t))&&Re?Re.p(t,Ae):(Re.d(1),Re=he(t),Re&&(Re.c(),Re.m(r,null))),Ae[0]&1280&&I!==(I=t[28](t[63],t[8]))&&Ce(r,"aria-label",I),Ae[0]&1024&&N!==(N=t[63].title)&&Ce(r,"title",N),Ae[0]&1024&&w!==(w="fav-"+t[63].id)&&Ce(r,"id",w)},d(ce){ce&&xr(r),Re.d()}}}function Ui(a){let t,r,I,N,w,le,he,Re,ce,Ae=a[0].searchLabel+"",_e,Ve,we=a[0].searchDescription+"",st,ht,bt,Ft,sr,Wt,fr,mr=a[0].skinToneDescription+"",kt,Ot,zt=[],pr=new On,ft,tt,xt,Tt,At,Mt=[],Yt=new On,Zt,Qt,Bt,Dt,ir,br,qt,gr,lr=[],wn=new On,ln,un,cn,$r,vr,Ar=[],Qn=new On,dn,qr,jr,en,Cn,vn,fn=a[9];const Jn=nt=>nt[72];for(let nt=0;nt<fn.length;nt+=1){let mt=_o(a,fn,nt),je=Jn(mt);pr.set(je,zt[nt]=Mo(je,mt))}let mn=a[12];const $n=nt=>nt[69].id;for(let nt=0;nt<mn.length;nt+=1){let mt=Ao(a,mn,nt),je=$n(mt);Yt.set(je,Mt[nt]=Io(je,mt))}let hn=a[15];const qn=nt=>nt[66].category;for(let nt=0;nt<hn.length;nt+=1){let mt=xo(a,hn,nt),je=qn(mt);wn.set(je,lr[nt]=wo(je,mt))}let pn=a[10];const ea=nt=>nt[63].id;for(let nt=0;nt<pn.length;nt+=1){let mt=Ro(a,pn,nt),je=ea(mt);Qn.set(je,Ar[nt]=Co(je,mt))}return{c(){t=Ut("section"),r=Ut("div"),I=Ut("div"),N=Ut("div"),w=Ut("input"),ce=Ut("label"),_e=Br(Ae),Ve=Ut("span"),st=Br(we),ht=Ut("div"),bt=Ut("button"),Ft=Br(a[21]),fr=Ut("span"),kt=Br(mr),Ot=Ut("div");for(let nt=0;nt<zt.length;nt+=1)zt[nt].c();At=Ut("div");for(let nt=0;nt<Mt.length;nt+=1)Mt[nt].c();Qt=Ut("div"),Bt=Ut("div"),Dt=Ut("div"),ir=Br(a[18]),qt=Ut("div"),gr=Ut("div");for(let nt=0;nt<lr.length;nt+=1)lr[nt].c();vr=Ut("div");for(let nt=0;nt<Ar.length;nt+=1)Ar[nt].c();jr=Ut("button"),jr.textContent="\u{1F600}",Ce(r,"class","pad-top"),Ce(w,"id","search"),Ce(w,"class","search"),Ce(w,"type","search"),Ce(w,"role","combobox"),Ce(w,"enterkeyhint","search"),Ce(w,"placeholder",le=a[0].searchLabel),Ce(w,"autocapitalize","none"),Ce(w,"autocomplete","off"),Ce(w,"spellcheck","true"),Ce(w,"aria-expanded",he=!!(a[4]&&a[1].length)),Ce(w,"aria-controls","search-results"),Ce(w,"aria-describedby","search-description"),Ce(w,"aria-autocomplete","list"),Ce(w,"aria-activedescendant",Re=a[26]?`emo-${a[26]}`:""),Ce(ce,"class","sr-only"),Ce(ce,"for","search"),Ce(Ve,"id","search-description"),Ce(Ve,"class","sr-only"),Ce(N,"class","search-wrapper"),Ce(bt,"id","skintone-button"),Ce(bt,"class",sr="emoji "+(a[6]?"hide-focus":"")),Ce(bt,"aria-label",a[23]),Ce(bt,"title",a[23]),Ce(bt,"aria-describedby","skintone-description"),Ce(bt,"aria-haspopup","listbox"),Ce(bt,"aria-expanded",a[6]),Ce(bt,"aria-controls","skintone-list"),Ce(ht,"class",Wt="skintone-button-wrapper "+(a[19]?"expanded":"")),Ce(fr,"id","skintone-description"),Ce(fr,"class","sr-only"),Ce(Ot,"id","skintone-list"),Ce(Ot,"class",ft="skintone-list "+(a[6]?"":"hidden no-animate")),Gr(Ot,"transform","translateY("+(a[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),Ce(Ot,"role","listbox"),Ce(Ot,"aria-label",tt=a[0].skinTonesLabel),Ce(Ot,"aria-activedescendant",xt="skintone-"+a[20]),Ce(Ot,"aria-hidden",Tt=!a[6]),Ce(I,"class","search-row"),Ce(At,"class","nav"),Ce(At,"role","tablist"),Gr(At,"grid-template-columns","repeat("+a[12].length+", 1fr)"),Ce(At,"aria-label",Zt=a[0].categoriesLabel),Ce(Bt,"class","indicator"),Gr(Bt,"transform","translateX("+(a[24]?-1:1)*a[11]*100+"%)"),Ce(Qt,"class","indicator-wrapper"),Ce(Dt,"class",br="message "+(a[18]?"":"gone")),Ce(Dt,"role","alert"),Ce(Dt,"aria-live","polite"),Ce(qt,"class",ln="tabpanel "+(!a[14]||a[18]?"gone":"")),Ce(qt,"role",un=a[4]?"region":"tabpanel"),Ce(qt,"aria-label",cn=a[4]?a[0].searchResultsLabel:a[0].categories[a[13].name]),Ce(qt,"id",$r=a[4]?"":`tab-${a[13].id}`),Ce(qt,"tabindex","0"),Ce(vr,"class",dn="favorites emoji-menu "+(a[18]?"gone":"")),Ce(vr,"role","menu"),Ce(vr,"aria-label",qr=a[0].favoritesLabel),Gr(vr,"padding-inline-end",a[25]+"px"),Ce(jr,"aria-hidden","true"),Ce(jr,"tabindex","-1"),Ce(jr,"class","abs-pos hidden emoji"),Ce(t,"class","picker"),Ce(t,"aria-label",en=a[0].regionLabel),Ce(t,"style",a[22])},m(nt,mt){Rr(nt,t,mt),Ht(t,r),Ht(t,I),Ht(I,N),Ht(N,w),lo(w,a[2]),Ht(N,ce),Ht(ce,_e),Ht(N,Ve),Ht(Ve,st),Ht(I,ht),Ht(ht,bt),Ht(bt,Ft),Ht(I,fr),Ht(fr,kt),Ht(I,Ot);for(let je=0;je<zt.length;je+=1)zt[je].m(Ot,null);a[48](Ot),Ht(t,At);for(let je=0;je<Mt.length;je+=1)Mt[je].m(At,null);Ht(t,Qt),Ht(Qt,Bt),Ht(t,Dt),Ht(Dt,ir),Ht(t,qt),Ht(qt,gr);for(let je=0;je<lr.length;je+=1)lr[je].m(gr,null);a[50](qt),Ht(t,vr);for(let je=0;je<Ar.length;je+=1)Ar[je].m(vr,null);Ht(t,jr),a[51](jr),a[52](t),Cn||(vn=[Tr(w,"input",a[47]),Tr(w,"keydown",a[30]),Tr(bt,"click",a[35]),Tr(Ot,"focusout",a[38]),Tr(Ot,"click",a[34]),Tr(Ot,"keydown",a[36]),Tr(Ot,"keyup",a[37]),Tr(At,"keydown",a[32]),ni(a[29].call(null,gr)),Tr(qt,"click",a[33]),Tr(vr,"click",a[33])],Cn=!0)},p(nt,mt){mt[0]&1&&le!==(le=nt[0].searchLabel)&&Ce(w,"placeholder",le),mt[0]&18&&he!==(he=!!(nt[4]&&nt[1].length))&&Ce(w,"aria-expanded",he),mt[0]&67108864&&Re!==(Re=nt[26]?`emo-${nt[26]}`:"")&&Ce(w,"aria-activedescendant",Re),mt[0]&4&&lo(w,nt[2]),mt[0]&1&&Ae!==(Ae=nt[0].searchLabel+"")&&Lr(_e,Ae),mt[0]&1&&we!==(we=nt[0].searchDescription+"")&&Lr(st,we),mt[0]&2097152&&Lr(Ft,nt[21]),mt[0]&64&&sr!==(sr="emoji "+(nt[6]?"hide-focus":""))&&Ce(bt,"class",sr),mt[0]&8388608&&Ce(bt,"aria-label",nt[23]),mt[0]&8388608&&Ce(bt,"title",nt[23]),mt[0]&64&&Ce(bt,"aria-expanded",nt[6]),mt[0]&524288&&Wt!==(Wt="skintone-button-wrapper "+(nt[19]?"expanded":""))&&Ce(ht,"class",Wt),mt[0]&1&&mr!==(mr=nt[0].skinToneDescription+"")&&Lr(kt,mr),mt[0]&1049089&&(fn=nt[9],zt=In(zt,mt,Jn,1,nt,fn,pr,Ot,Mn,Mo,null,_o)),mt[0]&64&&ft!==(ft="skintone-list "+(nt[6]?"":"hidden no-animate"))&&Ce(Ot,"class",ft),mt[0]&64&&Gr(Ot,"transform","translateY("+(nt[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),mt[0]&1&&tt!==(tt=nt[0].skinTonesLabel)&&Ce(Ot,"aria-label",tt),mt[0]&1048576&&xt!==(xt="skintone-"+nt[20])&&Ce(Ot,"aria-activedescendant",xt),mt[0]&64&&Tt!==(Tt=!nt[6])&&Ce(Ot,"aria-hidden",Tt),mt[0]&12305|mt[1]&1&&(mn=nt[12],Mt=In(Mt,mt,$n,1,nt,mn,Yt,At,Mn,Io,null,Ao)),mt[0]&4096&&Gr(At,"grid-template-columns","repeat("+nt[12].length+", 1fr)"),mt[0]&1&&Zt!==(Zt=nt[0].categoriesLabel)&&Ce(At,"aria-label",Zt),mt[0]&16779264&&Gr(Bt,"transform","translateX("+(nt[24]?-1:1)*nt[11]*100+"%)"),mt[0]&262144&&Lr(ir,nt[18]),mt[0]&262144&&br!==(br="message "+(nt[18]?"":"gone"))&&Ce(Dt,"class",br),mt[0]&402694449&&(hn=nt[15],lr=In(lr,mt,qn,1,nt,hn,wn,gr,Mn,wo,null,xo)),mt[0]&278528&&ln!==(ln="tabpanel "+(!nt[14]||nt[18]?"gone":""))&&Ce(qt,"class",ln),mt[0]&16&&un!==(un=nt[4]?"region":"tabpanel")&&Ce(qt,"role",un),mt[0]&8209&&cn!==(cn=nt[4]?nt[0].searchResultsLabel:nt[0].categories[nt[13].name])&&Ce(qt,"aria-label",cn),mt[0]&8208&&$r!==($r=nt[4]?"":`tab-${nt[13].id}`)&&Ce(qt,"id",$r),mt[0]&402654464&&(pn=nt[10],Ar=In(Ar,mt,ea,1,nt,pn,Qn,vr,Mn,Co,null,Ro)),mt[0]&262144&&dn!==(dn="favorites emoji-menu "+(nt[18]?"gone":""))&&Ce(vr,"class",dn),mt[0]&1&&qr!==(qr=nt[0].favoritesLabel)&&Ce(vr,"aria-label",qr),mt[0]&33554432&&Gr(vr,"padding-inline-end",nt[25]+"px"),mt[0]&1&&en!==(en=nt[0].regionLabel)&&Ce(t,"aria-label",en),mt[0]&4194304&&Ce(t,"style",nt[22])},i:xn,o:xn,d(nt){nt&&xr(t);for(let mt=0;mt<zt.length;mt+=1)zt[mt].d();a[48](null);for(let mt=0;mt<Mt.length;mt+=1)Mt[mt].d();for(let mt=0;mt<lr.length;mt+=1)lr[mt].d();a[50](null);for(let mt=0;mt<Ar.length;mt+=1)Ar[mt].d();a[51](null),a[52](null),Cn=!1,Tn(vn)}}}function Vi(a,t,r){let{skinToneEmoji:I}=t,{i18n:N}=t,{database:w}=t,{customEmoji:le}=t,{customCategorySorting:he}=t,Re=!0,ce=[],Ae=[],_e="",Ve="",we,st,ht,bt=!1,Ft=-1,sr,Wt=!1,fr=!1,mr,kt=0,Ot=0,zt,pr,ft="",tt=[],xt=[],Tt,At=Si,Mt=!1,Yt=0,Zt=0,Qt=Xn,Bt,Dt=!1,ir;const br=je=>{we.getRootNode().getElementById(je).focus()},qt=(je,yt)=>{we.dispatchEvent(new CustomEvent(je,{detail:yt,bubbles:!0,composed:!0}))},gr=(je,yt)=>yt&&je.skins&&je.skins[yt]||je.unicode,lr=(je,yt)=>Pi([je.name||gr(je,yt),...je.shortcodes||[]]).join(", "),wn=je=>/^skintone-/.test(je.id);ba.then(je=>{je||r(18,sr=N.emojiUnsupportedMessage)});function ln(je){return Li(je,yt=>{{const Lt=getComputedStyle(we),Jt=parseInt(Lt.getPropertyValue("--num-columns"),10),_r=Lt.getPropertyValue("direction")==="rtl",ju=je.parentElement.getBoundingClientRect().width-yt;r(46,At=Jt),r(25,Yt=ju),r(24,Mt=_r)}})}function un(je){const yt=we.getRootNode();Ni(je,st,Jt=>yt.getElementById(`emo-${Jt.id}`)),r(1,ce=ce)}function cn(je){return!je.unicode||!go(je)||Ea.get(je.unicode)}async function $r(je){const yt=await ba;return je.filter(({version:Lt})=>!Lt||Lt<=yt)}async function vr(je){return Ci(je,await ba)}async function Ar(je){if(typeof je=="undefined")return[];const yt=je===-1?le:await w.getEmojiByGroup(je);return vr(await $r(yt))}async function Qn(je){return vr(await $r(await w.getEmojiBySearchQuery(je)))}function dn(je){if(!bt||!ce.length)return;const yt=Lt=>{Yr(je),r(5,Ft=Ra(Lt,Ft,ce))};switch(je.key){case"ArrowDown":return yt(!1);case"ArrowUp":return yt(!0);case"Enter":if(Ft!==-1)return Yr(je),en(ce[Ft].id);ce.length&&r(5,Ft=0)}}function qr(je){r(2,_e=""),r(44,Ve=""),r(5,Ft=-1),r(11,Zt=Qt.findIndex(yt=>yt.id===je.id))}function jr(je){const{target:yt,key:Lt}=je,Jt=_r=>{_r&&(Yr(je),_r.focus())};switch(Lt){case"ArrowLeft":return Jt(yt.previousSibling);case"ArrowRight":return Jt(yt.nextSibling);case"Home":return Jt(yt.parentElement.firstChild);case"End":return Jt(yt.parentElement.lastChild)}}async function en(je){const yt=await w.getEmojiByUnicodeOrName(je),Lt=[...ce,...xt].find(_r=>_r.id===je),Jt=Lt.unicode&&gr(Lt,kt);await w.incrementFavoriteEmojiCount(je),qt("emoji-click",{emoji:yt,skinTone:kt,...Jt&&{unicode:Jt},...Lt.name&&{name:Lt.name}})}async function Cn(je){const{target:yt}=je;if(!yt.classList.contains("emoji"))return;Yr(je);const Lt=yt.id.substring(4);en(Lt)}async function vn(je){const{target:yt}=je;if(!wn(yt))return;Yr(je);const Lt=parseInt(yt.id.slice(9),10);r(8,kt=Lt),r(6,Wt=!1),br("skintone-button"),qt("skin-tone-change",{skinTone:Lt}),w.setPreferredSkinTone(Lt)}async function fn(je){r(6,Wt=!Wt),r(20,Ot=kt),Wt&&(Yr(je),Wn(()=>br(`skintone-${Ot}`)))}function Jn(je){if(!Wt)return;const yt=async Lt=>{Yr(je),r(20,Ot=Lt),await ai(),br(`skintone-${Ot}`)};switch(je.key){case"ArrowUp":return yt(Ra(!0,Ot,tt));case"ArrowDown":return yt(Ra(!1,Ot,tt));case"Home":return yt(0);case"End":return yt(tt.length-1);case"Enter":return vn(je);case"Escape":return Yr(je),r(6,Wt=!1),br("skintone-button")}}function mn(je){if(!!Wt)switch(je.key){case" ":return vn(je)}}async function $n(je){const{relatedTarget:yt}=je;(!yt||!wn(yt))&&r(6,Wt=!1)}function hn(){_e=this.value,r(2,_e)}function qn(je){sn[je?"unshift":"push"](()=>{mr=je,r(7,mr)})}const pn=je=>qr(je);function ea(je){sn[je?"unshift":"push"](()=>{ht=je,r(3,ht)})}function nt(je){sn[je?"unshift":"push"](()=>{st=je,r(17,st)})}function mt(je){sn[je?"unshift":"push"](()=>{we=je,r(16,we)})}return a.$$set=je=>{"skinToneEmoji"in je&&r(40,I=je.skinToneEmoji),"i18n"in je&&r(0,N=je.i18n),"database"in je&&r(39,w=je.database),"customEmoji"in je&&r(41,le=je.customEmoji),"customCategorySorting"in je&&r(42,he=je.customCategorySorting)},a.$$.update=()=>{if(a.$$.dirty[1]&1280&&le&&w&&r(39,w.customEmoji=le,w),a.$$.dirty[0]&1|a.$$.dirty[1]&256){async function je(){let yt=!1;const Lt=setTimeout(()=>{yt=!0,r(18,sr=N.loadingMessage)},gi);try{await w.ready(),r(14,Dt=!0)}catch(Jt){console.error(Jt),r(18,sr=N.networkErrorMessage)}finally{clearTimeout(Lt),yt&&(yt=!1,r(18,sr=""))}}w&&je()}if(a.$$.dirty[0]&6144|a.$$.dirty[1]&1024&&(le&&le.length?r(12,Qt=[mi,...Xn]):Qt!==Xn&&(Zt&&r(11,Zt--,Zt),r(12,Qt=Xn))),a.$$.dirty[0]&4&&po(()=>{r(44,Ve=(_e||"").trim()),r(5,Ft=-1)}),a.$$.dirty[0]&6144&&r(13,Bt=Qt[Zt]),a.$$.dirty[0]&24576|a.$$.dirty[1]&8192){async function je(){if(!Dt)r(1,ce=[]),r(4,bt=!1);else if(Ve.length>=hi){const yt=Ve,Lt=await Qn(yt);yt===Ve&&(r(1,ce=Lt),r(4,bt=!0))}else if(Bt){const yt=Bt.id,Lt=await Ar(yt);yt===Bt.id&&(r(1,ce=Lt),r(4,bt=!1))}}je()}if(a.$$.dirty[0]&4112&&r(22,pr=`
  --font-family: ${yo};
  --num-groups: ${Qt.length}; 
  --indicator-opacity: ${bt?0:1}; 
  --num-skintones: ${ho};`),a.$$.dirty[0]&16384|a.$$.dirty[1]&256){async function je(){Dt&&r(8,kt=await w.getPreferredSkinTone())}je()}if(a.$$.dirty[1]&512&&r(9,tt=Array(ho).fill().map((je,yt)=>wi(I,yt))),a.$$.dirty[0]&768&&r(21,zt=tt[kt]),a.$$.dirty[0]&257&&r(23,ft=N.skinToneLabel.replace("{skinTone}",N.skinTones[kt])),a.$$.dirty[0]&16384|a.$$.dirty[1]&256){async function je(){r(45,Tt=(await Promise.all(bi.map(yt=>w.getEmojiByUnicodeOrName(yt)))).filter(Boolean))}Dt&&je()}if(a.$$.dirty[0]&16384|a.$$.dirty[1]&49408){async function je(){const yt=await w.getTopFavoriteEmoji(At),Lt=await vr(bo([...yt,...Tt],Jt=>Jt.unicode||Jt.name).slice(0,At));r(10,xt=Lt)}Dt&&Tt&&je()}if(a.$$.dirty[0]&10){const je=ce.filter(yt=>yt.unicode).filter(yt=>go(yt)&&!Ea.has(yt.unicode));je.length?Wn(()=>un(je)):(r(1,ce=ce.filter(cn)),Wn(()=>{(ht||{}).scrollTop=0}))}a.$$.dirty[0]&1026|a.$$.dirty[1]&4096,a.$$.dirty[0]&18|a.$$.dirty[1]&2048&&r(15,Ae=function(){if(bt)return[{category:"",emojis:ce}];const yt=new Map;for(const Lt of ce){const Jt=Lt.category||"";let _r=yt.get(Jt);_r||(_r=[],yt.set(Jt,_r)),_r.push(Lt)}return[...yt.entries()].map(([Lt,Jt])=>({category:Lt,emojis:Jt})).sort((Lt,Jt)=>he(Lt.category,Jt.category))}()),a.$$.dirty[0]&34&&r(26,ir=Ft!==-1&&ce[Ft].id),a.$$.dirty[0]&192&&(Wt?mr.addEventListener("transitionend",()=>{r(19,fr=!0)},{once:!0}):r(19,fr=!1))},[N,ce,_e,ht,bt,Ft,Wt,mr,kt,tt,xt,Zt,Qt,Bt,Dt,Ae,we,st,sr,fr,Ot,zt,pr,ft,Mt,Yt,ir,gr,lr,ln,dn,qr,jr,Cn,vn,fn,Jn,mn,$n,w,I,le,he,Re,Ve,Tt,At,hn,qn,pn,ea,nt,mt]}class Hi extends fi{constructor(t){super(),vi(this,t,Vi,Ui,ti,{skinToneEmoji:40,i18n:0,database:39,customEmoji:41,customCategorySorting:42},null,[-1,-1,-1])}}const zi="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",Gi="en";var Yi={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading\u2026",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const Bo=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji"];class Lo extends HTMLElement{constructor(t){super(),this.attachShadow({mode:"open"});const r=document.createElement("style");r.textContent=":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}",this.shadowRoot.appendChild(r),this._ctx={locale:Gi,dataSource:zi,skinToneEmoji:yi,customCategorySorting:Ei,customEmoji:null,i18n:Yi,...t};for(const I of Bo)I!=="database"&&Object.prototype.hasOwnProperty.call(this,I)&&(this._ctx[I]=this[I],delete this[I]);this._dbFlush()}connectedCallback(){this._cmp=new Hi({target:this.shadowRoot,props:this._ctx})}disconnectedCallback(){this._cmp.$destroy(),this._cmp=void 0;const{database:t}=this._ctx;t&&t.close().catch(r=>console.error(r))}static get observedAttributes(){return["locale","data-source","skin-tone-emoji"]}attributeChangedCallback(t,r,I){this._set(t.replace(/-([a-z])/g,(N,w)=>w.toUpperCase()),I)}_set(t,r){this._ctx[t]=r,this._cmp&&this._cmp.$set({[t]:r}),["locale","dataSource"].includes(t)&&this._dbFlush()}_dbCreate(){const{locale:t,dataSource:r,database:I}=this._ctx;(!I||I.locale!==t||I.dataSource!==r)&&this._set("database",new ao({locale:t,dataSource:r}))}_dbFlush(){Promise.resolve().then(()=>this._dbCreate())}}const No={};for(const a of Bo)No[a]={get(){return a==="database"&&this._dbCreate(),this._ctx[a]},set(t){if(a==="database")throw new Error("database is read-only");this._set(a,t)}};Object.defineProperties(Lo.prototype,No),customElements.get("emoji-picker")||customElements.define("emoji-picker",Lo);var Ki={class:"vac-emoji-wrapper"},Xi={ref:"emojiPicker","v-if":"emojiOpened"};function Wi(a,t,r,I,N,w){var le=(0,e.resolveComponent)("svg-icon");return(0,e.openBlock)(),(0,e.createElementBlock)("div",Ki,[(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["vac-svg-button",{"vac-emoji-reaction":r.emojiReaction}]),onClick:t[0]||(t[0]=function(){return w.openEmoji&&w.openEmoji.apply(w,arguments)})},[(0,e.renderSlot)(a.$slots,"emoji-picker-icon",{},function(){return[(0,e.createVNode)(le,{name:"emoji",param:r.emojiReaction?"reaction":""},null,8,["param"])]})],2),r.emojiOpened?((0,e.openBlock)(),(0,e.createBlock)(e.Transition,{key:0,name:"vac-slide-up",appear:""},{default:(0,e.withCtx)(function(){return[(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["vac-emoji-picker",{"vac-picker-reaction":r.emojiReaction}]),style:(0,e.normalizeStyle)({height:"".concat(N.emojiPickerHeight,"px"),top:r.positionTop?N.emojiPickerHeight:"".concat(N.emojiPickerTop,"px"),right:N.emojiPickerRight,display:N.emojiPickerTop||!r.emojiReaction?"initial":"none"})},[(0,e.createElementVNode)("emoji-picker",Xi,null,512)],6)]}),_:1})):(0,e.createCommentVNode)("",!0)])}const Zi={name:"EmojiPickerContainer",components:{SvgIcon:Q},props:{emojiOpened:{type:Boolean,default:!1},emojiReaction:{type:Boolean,default:!1},positionTop:{type:Boolean,default:!1},positionRight:{type:Boolean,default:!1}},emits:["add-emoji","open-emoji"],data:function(){return{emojiPickerHeight:320,emojiPickerTop:0,emojiPickerRight:""}},watch:{emojiOpened:function(t){var r=this;t&&setTimeout(function(){r.addCustomStyling(),r.$refs.emojiPicker.shadowRoot.addEventListener("emoji-click",function(I){var N=I.detail;r.$emit("add-emoji",{unicode:N.unicode})})},0)}},methods:{addCustomStyling:function(){var t=`.picker {
				border: none;
			}`,r=`.nav {
				overflow-x: auto;
			}`,I=`.search-wrapper {
				padding-right: 2px;
				padding-left: 2px;
			}`,N=`input.search {
				height: 32px;
				font-size: 14px;
				border-radius: 10rem;
				border: var(--chat-border-style);
				padding: 5px 10px;
				outline: none;
				background: var(--chat-bg-color-input);
				color: var(--chat-color);
			}`,w=document.createElement("style");w.textContent=t+r+I+N,this.$refs.emojiPicker.shadowRoot.appendChild(w)},openEmoji:function(t){this.$emit("open-emoji",!this.emojiOpened),this.setEmojiPickerPosition(t.clientY,t.view.innerWidth,t.view.innerHeight)},setEmojiPickerPosition:function(t,r,I){var N=r<500||I<700,w=document.getElementById("room-footer");if(!w){N&&(this.emojiPickerRight="-50px");return}if(N)this.emojiPickerRight=r/2-(this.positionTop?200:150)+"px",this.emojiPickerTop=100,this.emojiPickerHeight=I-200;else{var le=w.getBoundingClientRect().top,he=le-t>this.emojiPickerHeight-50;he?this.emojiPickerTop=t+10:this.emojiPickerTop=t-this.emojiPickerHeight-10,this.emojiPickerRight=this.positionTop?"0px":this.positionRight?"60px":""}}}},Po=(0,O.Z)(Zi,[["render",Wi]]);var Qi={class:"vac-files-box"},Ji={class:"vac-icon-close"};function $i(a,t,r,I,N,w){var le=(0,e.resolveComponent)("room-file"),he=(0,e.resolveComponent)("svg-icon");return(0,e.openBlock)(),(0,e.createBlock)(e.Transition,{name:"vac-slide-up"},{default:(0,e.withCtx)(function(){return[r.files.length?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:"vac-room-files-container",style:(0,e.normalizeStyle)({bottom:"".concat(w.footerHeight,"px")})},[(0,e.createElementVNode)("div",Qi,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.files,function(Re,ce){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{key:ce},[(0,e.createVNode)(le,{file:Re,index:ce,onRemoveFile:t[0]||(t[0]=function(Ae){return a.$emit("remove-file",Ae)})},null,8,["file","index"])])}),128))]),(0,e.createElementVNode)("div",Ji,[(0,e.createElementVNode)("div",{class:"vac-svg-button",onClick:t[1]||(t[1]=function(Re){return a.$emit("reset-message")})},[(0,e.renderSlot)(a.$slots,"reply-close-icon",{},function(){return[(0,e.createVNode)(he,{name:"close-outline"})]})])])],4)):(0,e.createCommentVNode)("",!0)]}),_:3})}var qi={class:"vac-room-file-container"},el=["src"],tl={class:"vac-text-ellipsis"},rl={key:0,class:"vac-text-ellipsis vac-text-extension"};function nl(a,t,r,I,N,w){var le=(0,e.resolveComponent)("loader"),he=(0,e.resolveComponent)("svg-icon");return(0,e.openBlock)(),(0,e.createElementBlock)("div",qi,[(0,e.createVNode)(le,{show:r.file.loading},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(Re,ce){return{name:ce,fn:(0,e.withCtx)(function(Ae){return[(0,e.renderSlot)(a.$slots,ce,(0,e.normalizeProps)((0,e.guardReactiveProps)(Ae)))]})}})]),1032,["show"]),(0,e.createElementVNode)("div",{class:"vac-svg-button vac-icon-remove",onClick:t[0]||(t[0]=function(Re){return a.$emit("remove-file",r.index)})},[(0,e.renderSlot)(a.$slots,"image-close-icon",{},function(){return[(0,e.createVNode)(he,{name:"close",param:"image"})]})]),w.isImage?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:(0,e.normalizeClass)(["vac-message-image",{"vac-blur-loading":r.file.loading}]),style:(0,e.normalizeStyle)({"background-image":"url('".concat(r.file.localUrl||r.file.url,"')")})},null,6)):w.isVideo?((0,e.openBlock)(),(0,e.createElementBlock)("video",{key:1,controls:"",class:(0,e.normalizeClass)({"vac-blur-loading":r.file.loading})},[(0,e.createElementVNode)("source",{src:r.file.localUrl||r.file.url},null,8,el)],2)):((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:2,class:(0,e.normalizeClass)(["vac-file-container",{"vac-blur-loading":r.file.loading}])},[(0,e.createElementVNode)("div",null,[(0,e.renderSlot)(a.$slots,"file-icon",{},function(){return[(0,e.createVNode)(he,{name:"file"})]})]),(0,e.createElementVNode)("div",tl,(0,e.toDisplayString)(r.file.name),1),r.file.extension?((0,e.openBlock)(),(0,e.createElementBlock)("div",rl,(0,e.toDisplayString)(r.file.extension),1)):(0,e.createCommentVNode)("",!0)],2))])}var ko=Ie(8438),al=ko.isImageFile,ol=ko.isVideoFile;const sl={name:"RoomFiles",components:{Loader:A,SvgIcon:Q},props:{file:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["remove-file"],computed:{isImage:function(){return al(this.file)},isVideo:function(){return ol(this.file)}}},il={name:"RoomFiles",components:{SvgIcon:Q,RoomFile:(0,O.Z)(sl,[["render",nl]])},props:{files:{type:Array,required:!0}},emits:["remove-file","reset-message"],computed:{footerHeight:function(){return document.getElementById("room-footer").clientHeight}}},ll=(0,O.Z)(il,[["render",$i]]);var ul={class:"vac-reply-box"},cl={class:"vac-reply-info"},dl={class:"vac-reply-username"},vl={class:"vac-reply-content"},fl=["src"],ml={key:1,controls:"",class:"vac-image-reply"},hl=["src"],pl={key:3,class:"vac-image-reply vac-file-container"},gl={class:"vac-text-ellipsis"},yl={key:0,class:"vac-text-ellipsis vac-text-extension"},Sl={class:"vac-icon-reply"};function bl(a,t,r,I,N,w){var le=(0,e.resolveComponent)("format-message"),he=(0,e.resolveComponent)("audio-player"),Re=(0,e.resolveComponent)("svg-icon");return(0,e.openBlock)(),(0,e.createBlock)(e.Transition,{name:"vac-slide-up"},{default:(0,e.withCtx)(function(){return[r.messageReply?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:"vac-reply-container",style:(0,e.normalizeStyle)({bottom:"".concat(w.footerHeight,"px")})},[(0,e.createElementVNode)("div",ul,[(0,e.createElementVNode)("div",cl,[(0,e.createElementVNode)("div",dl,(0,e.toDisplayString)(r.messageReply.username),1),(0,e.createElementVNode)("div",vl,[(0,e.createVNode)(le,{content:r.messageReply.content,users:r.room.users,"text-formatting":r.textFormatting,"link-options":r.linkOptions,reply:!0},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(ce,Ae){return{name:Ae,fn:(0,e.withCtx)(function(_e){return[(0,e.renderSlot)(a.$slots,Ae,(0,e.normalizeProps)((0,e.guardReactiveProps)(_e)))]})}})]),1032,["content","users","text-formatting","link-options"])])]),w.isImage?((0,e.openBlock)(),(0,e.createElementBlock)("img",{key:0,src:w.firstFile.url,class:"vac-image-reply"},null,8,fl)):w.isVideo?((0,e.openBlock)(),(0,e.createElementBlock)("video",ml,[(0,e.createElementVNode)("source",{src:w.firstFile.url},null,8,hl)])):w.isAudio?((0,e.openBlock)(),(0,e.createBlock)(he,{key:2,src:w.firstFile.url,class:"vac-audio-reply"},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(ce,Ae){return{name:Ae,fn:(0,e.withCtx)(function(_e){return[(0,e.renderSlot)(a.$slots,Ae,(0,e.normalizeProps)((0,e.guardReactiveProps)(_e)))]})}})]),1032,["src"])):w.isOtherFile?((0,e.openBlock)(),(0,e.createElementBlock)("div",pl,[(0,e.createElementVNode)("div",null,[(0,e.renderSlot)(a.$slots,"file-icon",{},function(){return[(0,e.createVNode)(Re,{name:"file"})]})]),(0,e.createElementVNode)("div",gl,(0,e.toDisplayString)(w.firstFile.name),1),w.firstFile.extension?((0,e.openBlock)(),(0,e.createElementBlock)("div",yl,(0,e.toDisplayString)(w.firstFile.extension),1)):(0,e.createCommentVNode)("",!0)])):(0,e.createCommentVNode)("",!0)]),(0,e.createElementVNode)("div",Sl,[(0,e.createElementVNode)("div",{class:"vac-svg-button",onClick:t[0]||(t[0]=function(ce){return a.$emit("reset-message")})},[(0,e.renderSlot)(a.$slots,"reply-close-icon",{},function(){return[(0,e.createVNode)(Re,{name:"close-outline"})]})])])],4)):(0,e.createCommentVNode)("",!0)]}),_:3})}var El={class:"vac-audio-player"},Rl=["id","src"];function xl(a,t,r,I,N,w){var le=(0,e.resolveComponent)("svg-icon"),he=(0,e.resolveComponent)("audio-control");return(0,e.openBlock)(),(0,e.createElementBlock)("div",null,[(0,e.createElementVNode)("div",El,[(0,e.createElementVNode)("div",{class:"vac-svg-button",onClick:t[0]||(t[0]=function(){return w.playback&&w.playback.apply(w,arguments)})},[N.isPlaying?(0,e.renderSlot)(a.$slots,"audio-pause-icon",{key:0},function(){return[(0,e.createVNode)(le,{name:"audio-pause"})]}):(0,e.renderSlot)(a.$slots,"audio-play-icon",{key:1},function(){return[(0,e.createVNode)(le,{name:"audio-play"})]})]),(0,e.createVNode)(he,{percentage:N.progress,"message-selection-enabled":r.messageSelectionEnabled,onChangeLinehead:w.onUpdateProgress,onHoverAudioProgress:t[1]||(t[1]=function(Re){return a.$emit("hover-audio-progress",Re)})},null,8,["percentage","message-selection-enabled","onChangeLinehead"]),(0,e.createElementVNode)("audio",{id:w.playerUniqId,src:w.audioSource},null,8,Rl)])])}var Tl={class:"vac-player-progress"},Al={class:"vac-line-container"};function _l(a,t,r,I,N,w){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{ref:"progress",class:"vac-player-bar",onMousedown:t[0]||(t[0]=function(){return w.onMouseDown&&w.onMouseDown.apply(w,arguments)}),onMouseover:t[1]||(t[1]=function(le){return a.$emit("hover-audio-progress",!0)}),onMouseout:t[2]||(t[2]=function(le){return a.$emit("hover-audio-progress",!1)})},[(0,e.createElementVNode)("div",Tl,[(0,e.createElementVNode)("div",Al,[(0,e.createElementVNode)("div",{class:"vac-line-progress",style:(0,e.normalizeStyle)({width:"".concat(r.percentage,"%")})},null,4),(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["vac-line-dot",{"vac-line-dot__active":N.isMouseDown}]),style:(0,e.normalizeStyle)({left:"".concat(r.percentage,"%")})},null,6)])])],544)}const Ml={props:{percentage:{type:Number,default:0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["hover-audio-progress","change-linehead"],data:function(){return{isMouseDown:!1}},methods:{onMouseDown:function(t){if(!this.messageSelectionEnabled){this.isMouseDown=!0;var r=this.calculateLineHeadPosition(t,this.$refs.progress);this.$emit("change-linehead",r),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}},onMouseUp:function(t){if(!this.messageSelectionEnabled){this.isMouseDown=!1,document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove);var r=this.calculateLineHeadPosition(t,this.$refs.progress);this.$emit("change-linehead",r)}},onMouseMove:function(t){if(!this.messageSelectionEnabled){var r=this.calculateLineHeadPosition(t,this.$refs.progress);this.$emit("change-linehead",r)}},calculateLineHeadPosition:function(t,r){var I=r.getBoundingClientRect().width,N=r.getBoundingClientRect().left,w=(t.clientX-N)/I;return w=w<0?0:w,w=w>1?1:w,w}}},Il={name:"AudioPlayer",components:{SvgIcon:Q,AudioControl:(0,O.Z)(Ml,[["render",_l]])},props:{messageId:{type:[String,Number],default:null},src:{type:String,default:null},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["hover-audio-progress","update-progress-time"],data:function(){return{isPlaying:!1,duration:this.convertTimeMMSS(0),playedTime:this.convertTimeMMSS(0),progress:0}},computed:{playerUniqId:function(){return"audio-player".concat(this.messageId)},audioSource:function(){return this.src?this.src:(this.resetProgress(),null)}},mounted:function(){var t=this;this.player=document.getElementById(this.playerUniqId),this.player.addEventListener("ended",function(){t.isPlaying=!1}),this.player.addEventListener("loadeddata",function(){t.resetProgress(),t.duration=t.convertTimeMMSS(t.player.duration),t.updateProgressTime()}),this.player.addEventListener("timeupdate",this.onTimeUpdate)},methods:{convertTimeMMSS:function(t){return new Date(t*1e3).toISOString().substr(14,5)},playback:function(){var t=this;this.messageSelectionEnabled||!this.audioSource||(this.isPlaying?this.player.pause():setTimeout(function(){return t.player.play()}),this.isPlaying=!this.isPlaying)},resetProgress:function(){this.isPlaying&&this.player.pause(),this.duration=this.convertTimeMMSS(0),this.playedTime=this.convertTimeMMSS(0),this.progress=0,this.isPlaying=!1,this.updateProgressTime()},onTimeUpdate:function(){this.playedTime=this.convertTimeMMSS(this.player.currentTime),this.progress=this.player.currentTime/this.player.duration*100,this.updateProgressTime()},onUpdateProgress:function(t){t&&(this.player.currentTime=t*this.player.duration)},updateProgressTime:function(){this.$emit("update-progress-time",this.progress>1?this.playedTime:this.duration)}}},Ta=(0,O.Z)(Il,[["render",xl]]);var Aa=Ie(8438),Ol=Aa.isAudioFile,wl=Aa.isImageFile,Cl=Aa.isVideoFile;const Bl={name:"RoomMessageReply",components:{SvgIcon:Q,FormatMessage:rt,AudioPlayer:Ta},props:{room:{type:Object,required:!0},messageReply:{type:Object,default:null},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0}},emits:["reset-message"],computed:{footerHeight:function(){return document.getElementById("room-footer").clientHeight},firstFile:function(){var t,r;return(t=this.messageReply)!==null&&t!==void 0&&(r=t.files)!==null&&r!==void 0&&r.length?this.messageReply.files[0]:{}},isImage:function(){return wl(this.firstFile)},isVideo:function(){return Cl(this.firstFile)},isAudio:function(){return Ol(this.firstFile)},isOtherFile:function(){var t,r;return((t=this.messageReply)===null||t===void 0||(r=t.files)===null||r===void 0?void 0:r.length)&&!this.isAudio&&!this.isVideo&&!this.isImage}}},Ll=(0,O.Z)(Bl,[["render",bl]]);var Nl=["onMouseover","onClick"],Pl={class:"vac-tags-info"},kl={class:"vac-tags-username"};function Fl(a,t,r,I,N,w){return(0,e.openBlock)(),(0,e.createBlock)(e.Transition,{name:"vac-slide-up"},{default:(0,e.withCtx)(function(){return[r.filteredUsersTag.length?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:"vac-tags-container",style:(0,e.normalizeStyle)({bottom:"".concat(w.footerHeight,"px")})},[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.filteredUsersTag,function(le,he){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{key:le._id,class:(0,e.normalizeClass)(["vac-tags-box",{"vac-tags-box-active":he===N.activeItem}]),onMouseover:function(ce){return N.activeItem=he},onClick:function(ce){return a.$emit("select-user-tag",le)}},[(0,e.createElementVNode)("div",Pl,[le.avatar?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:"vac-avatar vac-tags-avatar",style:(0,e.normalizeStyle)({"background-image":"url('".concat(le.avatar,"')")})},null,4)):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("div",kl,(0,e.toDisplayString)(le.username),1)])],42,Nl)}),128))],4)):(0,e.createCommentVNode)("",!0)]}),_:1})}const Dl={name:"RoomUsersTag",props:{filteredUsersTag:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-user-tag","activate-item"],data:function(){return{activeItem:null}},computed:{footerHeight:function(){return document.getElementById("room-footer").clientHeight}},watch:{filteredUsersTag:function(t,r){(!r.length||t.length!==r.length)&&(this.activeItem=0)},selectItem:function(t){t&&this.$emit("select-user-tag",this.filteredUsersTag[this.activeItem])},activeUpOrDown:function(){this.activeUpOrDown>0&&this.activeItem<this.filteredUsersTag.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},jl=(0,O.Z)(Dl,[["render",Fl]]);var Ul=["onMouseover","onClick"];function Vl(a,t,r,I,N,w){return(0,e.openBlock)(),(0,e.createBlock)(e.Transition,{name:"vac-slide-up"},{default:(0,e.withCtx)(function(){return[r.filteredEmojis.length?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:"vac-emojis-container",style:(0,e.normalizeStyle)({bottom:"".concat(w.footerHeight,"px")})},[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.filteredEmojis,function(le,he){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{key:le,class:(0,e.normalizeClass)(["vac-emoji-element",{"vac-emoji-element-active":he===N.activeItem}]),onMouseover:function(ce){return N.activeItem=he},onClick:function(ce){return a.$emit("select-emoji",le)}},(0,e.toDisplayString)(le),43,Ul)}),128))],4)):(0,e.createCommentVNode)("",!0)]}),_:1})}const Hl={name:"RoomEmojis",props:{filteredEmojis:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-emoji","activate-item"],data:function(){return{activeItem:null}},computed:{footerHeight:function(){return document.getElementById("room-footer").clientHeight}},watch:{filteredEmojis:function(t,r){(!r.length||t.length!==r.length)&&(this.activeItem=0)},selectItem:function(t){t&&this.$emit("select-emoji",this.filteredEmojis[this.activeItem])},activeUpOrDown:function(){this.activeUpOrDown>0&&this.activeItem<this.filteredEmojis.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},zl=(0,O.Z)(Hl,[["render",Vl]]);var Gl=["onMouseover","onClick"],Yl={class:"vac-template-info"},Kl={class:"vac-template-tag"},Xl={class:"vac-template-text"};function Wl(a,t,r,I,N,w){return(0,e.openBlock)(),(0,e.createBlock)(e.Transition,{name:"vac-slide-up"},{default:(0,e.withCtx)(function(){return[r.filteredTemplatesText.length?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:"vac-template-container vac-app-box-shadow",style:(0,e.normalizeStyle)({bottom:"".concat(w.footerHeight,"px")})},[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.filteredTemplatesText,function(le,he){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{key:he,class:(0,e.normalizeClass)(["vac-template-box",{"vac-template-active":he===N.activeItem}]),onMouseover:function(ce){return N.activeItem=he},onClick:function(ce){return a.$emit("select-template-text",le)}},[(0,e.createElementVNode)("div",Yl,[(0,e.createElementVNode)("div",Kl," /"+(0,e.toDisplayString)(le.tag),1),(0,e.createElementVNode)("div",Xl,(0,e.toDisplayString)(le.text),1)])],42,Gl)}),128))],4)):(0,e.createCommentVNode)("",!0)]}),_:1})}const Zl={name:"RoomTemplatesText",props:{filteredTemplatesText:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-template-text","activate-item"],data:function(){return{activeItem:null}},computed:{footerHeight:function(){return document.getElementById("room-footer").clientHeight}},watch:{filteredTemplatesText:function(t,r){(!r.length||t.length!==r.length)&&(this.activeItem=0)},selectItem:function(t){t&&this.$emit("select-template-text",this.filteredTemplatesText[this.activeItem])},activeUpOrDown:function(){this.activeUpOrDown>0&&this.activeItem<this.filteredTemplatesText.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},Ql=(0,O.Z)(Zl,[["render",Wl]]);function Fo(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Do(a,t){for(var r=0;r<t.length;r++){var I=t[r];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(a,I.key,I)}}function jo(a,t,r){return t&&Do(a.prototype,t),r&&Do(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a}Ie(4812),Ie(4678),Ie(6977),Ie(9575),Ie(7145),Ie(8675),Ie(2990),Ie(8927),Ie(3105),Ie(5035),Ie(4345),Ie(7174),Ie(2846),Ie(4731),Ie(7209),Ie(6319),Ie(8867),Ie(7789),Ie(3739),Ie(9368),Ie(4483),Ie(2056),Ie(3462),Ie(678),Ie(7462),Ie(3824),Ie(5021),Ie(2974),Ie(5016),Ie(7380),Ie(1118),Ie(3843),Ie(4197),Ie(5109);var Zn;try{Zn=Ie(5644)}catch{Zn={missing:!0}}var Jl=Zn,$l=Jl.Mp3Encoder,ql=function(){function a(t){if(Fo(this,a),Zn.missing)throw new Error('You must add lamejs in your dependencies to use the audio recorder. Please run "npm install lamejs --save"');this.bitRate=t.bitRate,this.sampleRate=t.sampleRate,this.dataBuffer=[],this.encoder=new $l(1,this.sampleRate,this.bitRate)}return jo(a,[{key:"encode",value:function(r){for(var I=1152,N=this._convertBuffer(r),w=N.length,le=0;w>=0;le+=I){var he=N.subarray(le,le+I),Re=this.encoder.encodeBuffer(he);this.dataBuffer.push(new Int8Array(Re)),w-=I}}},{key:"finish",value:function(){this.dataBuffer.push(this.encoder.flush());var r=new Blob(this.dataBuffer,{type:"audio/mp3"});return this.dataBuffer=[],{id:Date.now(),blob:r,url:URL.createObjectURL(r)}}},{key:"_floatTo16BitPCM",value:function(r,I){for(var N=0;N<r.length;N++){var w=Math.max(-1,Math.min(1,r[N]));I[N]=w<0?w*32768:w*32767}}},{key:"_convertBuffer",value:function(r){var I=new Float32Array(r),N=new Int16Array(r.length);return this._floatTo16BitPCM(I,N),N}}]),a}(),e0=function(){function a(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Fo(this,a),this.beforeRecording=t.beforeRecording,this.pauseRecording=t.pauseRecording,this.afterRecording=t.afterRecording,this.micFailed=t.micFailed,this.encoderOptions={bitRate:t.bitRate,sampleRate:t.sampleRate},this.bufferSize=4096,this.records=[],this.isPause=!1,this.isRecording=!1,this.duration=0,this.volume=0,this._duration=0}return jo(a,[{key:"start",value:function(){var r={video:!1,audio:{channelCount:1,echoCancellation:!1}};this.beforeRecording&&this.beforeRecording("start recording"),navigator.mediaDevices.getUserMedia(r).then(this._micCaptured.bind(this)).catch(this._micError.bind(this)),this.isPause=!1,this.isRecording=!0,this.lameEncoder||(this.lameEncoder=new ql(this.encoderOptions))}},{key:"stop",value:function(){this.stream.getTracks().forEach(function(I){return I.stop()}),this.input.disconnect(),this.processor.disconnect(),this.context.close();var r=null;r=this.lameEncoder.finish(),r.duration=this.duration,this.records.push(r),this._duration=0,this.duration=0,this.isPause=!1,this.isRecording=!1,this.afterRecording&&this.afterRecording(r)}},{key:"pause",value:function(){this.stream.getTracks().forEach(function(r){return r.stop()}),this.input.disconnect(),this.processor.disconnect(),this._duration=this.duration,this.isPause=!0,this.pauseRecording&&this.pauseRecording("pause recording")}},{key:"_micCaptured",value:function(r){var I=this;this.context=new(window.AudioContext||window.webkitAudioContext),this.duration=this._duration,this.input=this.context.createMediaStreamSource(r),this.processor=this.context.createScriptProcessor(this.bufferSize,1,1),this.stream=r,this.processor.onaudioprocess=function(N){var w=N.inputBuffer.getChannelData(0),le=0;I.lameEncoder&&I.lameEncoder.encode(w);for(var he=0;he<w.length;++he)le+=w[he]*w[he];I.duration=parseFloat(I._duration)+parseFloat(I.context.currentTime.toFixed(2)),I.volume=Math.sqrt(le/w.length).toFixed(2)},this.input.connect(this.processor),this.processor.connect(this.context.destination)}},{key:"_micError",value:function(r){this.micFailed&&this.micFailed(r)}}]),a}(),t0=Ie(8772),Uo=t0.detectMobile;const r0={name:"RoomFooter",components:{SvgIcon:Q,EmojiPickerContainer:Po,RoomFiles:ll,RoomMessageReply:Ll,RoomUsersTag:jl,RoomEmojis:zl,RoomTemplatesText:Ql},directives:{clickOutside:er},props:{room:{type:Object,required:!0},roomId:{type:[String,Number],required:!0},roomMessage:{type:String,default:null},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},textMessages:{type:Object,required:!0},showSendIcon:{type:Boolean,required:!0},showFiles:{type:Boolean,required:!0},showAudio:{type:Boolean,required:!0},showEmojis:{type:Boolean,required:!0},showFooter:{type:Boolean,required:!0},acceptedFiles:{type:String,required:!0},textareaActionEnabled:{type:Boolean,required:!0},textareaAutoFocus:{type:Boolean,required:!0},userTagsEnabled:{type:Boolean,required:!0},emojisSuggestionEnabled:{type:Boolean,required:!0},templatesText:{type:Array,default:null},audioBitRate:{type:Number,required:!0},audioSampleRate:{type:Number,required:!0},initReplyMessage:{type:Object,default:null},initEditMessage:{type:Object,default:null}},emits:["edit-message","send-message","update-edited-message-id","textarea-action-handler","typing-message"],data:function(){return{message:"",editedMessage:{},messageReply:null,cursorRangePosition:null,files:[],fileDialog:!1,selectUsersTagItem:null,selectEmojiItem:null,selectTemplatesTextItem:null,format:"mp3",activeUpOrDownEmojis:null,activeUpOrDownUsersTag:null,activeUpOrDownTemplatesText:null,emojisDB:new ao,emojiOpened:!1,keepKeyboardOpen:!1,filteredEmojis:[],filteredUsersTag:[],selectedUsersTag:[],filteredTemplatesText:[],recorder:this.initRecorder(),isRecording:!1}},computed:{isMessageEmpty:function(){return!this.files.length&&!this.message.trim()},isFileLoading:function(){return this.files.some(function(t){return t.loading})},recordedTime:function(){return new Date(this.recorder.duration*1e3).toISOString().substr(14,5)},shadowFooter:function(){return!!this.filteredEmojis.length||!!this.filteredUsersTag.length||!!this.filteredTemplatesText.length||!!this.files.length||!!this.messageReply}},watch:{roomId:function(){var t=this;this.resetMessage(!0,!0),this.roomMessage&&(this.message=this.roomMessage,setTimeout(function(){return t.onChangeInput()}))},message:function(t){this.getTextareaRef().value=t},roomMessage:{immediate:!0,handler:function(t){t&&(this.message=this.roomMessage)}},editedMessage:function(t){this.$emit("update-edited-message-id",t._id)},initReplyMessage:function(t){this.replyMessage(t)},initEditMessage:function(t){this.editMessage(t)}},mounted:function(){var t=this,r=Uo(),I=!0;this.getTextareaRef().addEventListener("keyup",function(N){N.key==="Enter"&&!N.shiftKey&&!t.fileDialog&&(r?(t.message=t.message+`
`,setTimeout(function(){return t.onChangeInput()})):I&&!t.filteredEmojis.length&&!t.filteredUsersTag.length&&!t.filteredTemplatesText.length&&t.sendMessage()),I=!N.isComposing,setTimeout(function(){t.updateFooterLists()},60)}),this.getTextareaRef().addEventListener("click",function(){r&&(t.keepKeyboardOpen=!0),t.updateFooterLists()}),this.getTextareaRef().addEventListener("blur",function(){t.resetFooterList(),r&&setTimeout(function(){return t.keepKeyboardOpen=!1})})},beforeUnmount:function(){this.stopRecorder()},methods:{getTextareaRef:function(){return this.$refs.roomTextarea},focusTextarea:function(t){var r=this;Uo()&&t||!this.getTextareaRef()||(this.getTextareaRef().focus(),this.cursorRangePosition&&setTimeout(function(){r.getTextareaRef().setSelectionRange(r.cursorRangePosition,r.cursorRangePosition),r.cursorRangePosition=null}))},onChangeInput:function(){var t,r;if((t=this.getTextareaRef())!==null&&t!==void 0&&t.value||((r=this.getTextareaRef())===null||r===void 0?void 0:r.value)===""){var I;this.message=(I=this.getTextareaRef())===null||I===void 0?void 0:I.value}this.keepKeyboardOpen=!0,this.resizeTextarea(),this.$emit("typing-message",this.message)},resizeTextarea:function(){var t=this.getTextareaRef();if(!!t){var r=window.getComputedStyle(t,null).getPropertyValue("padding-top").replace("px","");t.style.height=0,t.style.height=t.scrollHeight-r*2+"px"}},escapeTextarea:function(){this.filteredEmojis.length?this.filteredEmojis=[]:this.filteredUsersTag.length?this.filteredUsersTag=[]:this.filteredTemplatesText.length?this.filteredTemplatesText=[]:this.resetMessage()},onPasteImage:function(t){var r,I=this,N=(r=t.clipboardData)===null||r===void 0?void 0:r.items;N&&Array.from(N).forEach(function(w){if(w.type.includes("image")){var le=w.getAsFile();I.onFileChange([le])}})},updateActiveUpOrDown:function(t){this.filteredEmojis.length?this.activeUpOrDownEmojis=t:this.filteredUsersTag.length?this.activeUpOrDownUsersTag=t:this.filteredTemplatesText.length&&(this.activeUpOrDownTemplatesText=t)},selectItem:function(){this.filteredEmojis.length?this.selectEmojiItem=!0:this.filteredUsersTag.length?this.selectUsersTagItem=!0:this.filteredTemplatesText.length&&(this.selectTemplatesTextItem=!0)},selectEmoji:function(t){if(this.selectEmojiItem=!1,!!t){var r=this.getCharPosition(":"),I=r.position,N=r.endPosition;this.message=this.message.substr(0,I-1)+t+this.message.substr(N,this.message.length-1),this.cursorRangePosition=I,this.focusTextarea()}},selectTemplateText:function(t){if(this.selectTemplatesTextItem=!1,!!t){var r=this.getCharPosition("/"),I=r.position,N=r.endPosition,w=this.message.substr(N,N).length?"":" ";this.message=this.message.substr(0,I-1)+t.text+w+this.message.substr(N,this.message.length-1),this.cursorRangePosition=I+t.text.length+w.length+1,this.focusTextarea()}},addEmoji:function(t){this.message+=t.unicode,this.focusTextarea(!0)},launchFilePicker:function(){this.$refs.file.value="",this.$refs.file.click()},onFileChange:function(t){var r=this;return Kr(Ir().mark(function I(){return Ir().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:r.fileDialog=!0,r.focusTextarea(),Array.from(t).forEach(function(){var le=Kr(Ir().mark(function he(Re){var ce,Ae,_e,Ve;return Ir().wrap(function(st){for(;;)switch(st.prev=st.next){case 0:return ce=URL.createObjectURL(Re),Ae=Re.name.lastIndexOf("."),r.files.push({loading:!0,name:Re.name.substring(0,Ae),size:Re.size,type:Re.type,extension:Re.name.substring(Ae+1),localUrl:ce}),st.next=5,fetch(ce).then(function(ht){return ht.blob()});case 5:_e=st.sent,Ve=r.files.find(function(ht){return ht.localUrl===ce}),Ve&&(Ve.blob=_e,Ve.loading=!1,delete Ve.loading);case 8:case"end":return st.stop()}},he)}));return function(he){return le.apply(this,arguments)}}()),setTimeout(function(){return r.fileDialog=!1},500);case 4:case"end":return w.stop()}},I)}))()},removeFile:function(t){this.files.splice(t,1),this.focusTextarea()},toggleRecorder:function(t){var r=this;if(this.isRecording=t,!this.recorder.isRecording)setTimeout(function(){return r.recorder.start()},200);else try{this.recorder.stop();var I=this.recorder.records[0];this.files.push({blob:I.blob,name:"audio.".concat(this.format),size:I.blob.size,duration:I.duration,type:I.blob.type,audio:!0,localUrl:URL.createObjectURL(I.blob)}),this.recorder=this.initRecorder(),this.sendMessage()}catch{setTimeout(function(){return r.stopRecorder()},100)}},stopRecorder:function(){var t=this;if(this.recorder.isRecording)try{this.recorder.stop(),this.recorder=this.initRecorder()}catch{setTimeout(function(){return t.stopRecorder()},100)}},textareaActionHandler:function(){this.$emit("textarea-action-handler",this.message)},sendMessage:function(){var t=this.message.trim();if(!(!this.files.length&&!t)&&!this.isFileLoading){this.selectedUsersTag.forEach(function(N){t=t.replace("@".concat(N.username),"<usertag>".concat(N._id,"</usertag>"))});var r=this.files.length?this.files:null;if(this.editedMessage._id){var I;(this.editedMessage.content!==t||(I=this.editedMessage.files)!==null&&I!==void 0&&I.length||this.files.length)&&this.$emit("edit-message",{messageId:this.editedMessage._id,newContent:t,files:r,replyMessage:this.messageReply,usersTag:this.selectedUsersTag})}else this.$emit("send-message",{content:t,files:r,replyMessage:this.messageReply,usersTag:this.selectedUsersTag});this.resetMessage(!0)}},editMessage:function(t){var r=this;this.resetMessage(),this.editedMessage=m({},t);var I=t.content,N=I,w="<usertag>",le="</usertag>",he=_t(I.matchAll(new RegExp(w,"gi"))).map(function(Re){return Re.index});he.forEach(function(Re){var ce=N.substring(Re+w.length,N.indexOf(le,Re)),Ae=r.room.users.find(function(_e){return _e._id===ce});I=I.replace("".concat(w).concat(ce).concat(le),"@".concat((Ae==null?void 0:Ae.username)||"unknown")),r.selectUserTag(Ae,!0)}),this.message=I,t.files&&(this.files=_t(t.files)),setTimeout(function(){return r.resizeTextarea()})},replyMessage:function(t){this.editedMessage={},this.messageReply=t,this.focusTextarea()},updateFooterLists:function(){this.updateFooterList("@"),this.updateFooterList(":"),this.updateFooterList("/")},updateFooterList:function(t){if(!!this.getTextareaRef()&&!(t===":"&&!this.emojisSuggestionEnabled)&&!(t==="@"&&(!this.userTagsEnabled||!this.room.users))&&!(t==="/"&&!this.templatesText)){for(var r=this.getTextareaRef().selectionStart,I=r;I>0&&this.message.charAt(I-1)!==t&&(this.message.charAt(I-1)!==" "||t!==":");)I--;var N=this.message.charAt(I-2),w=!N.match(/^[0-9a-zA-Z]+$/);if(this.message.charAt(I-1)===t&&(!N||N===" "||w)){var le=this.message.substring(I,r);t===":"?this.updateEmojis(le):t==="@"?this.updateShowUsersTag(le):t==="/"&&this.updateShowTemplatesText(le)}else this.resetFooterList(t)}},updateShowUsersTag:function(t){var r=this;this.filteredUsersTag=pe(this.room.users,"username",t,!0).filter(function(I){return I._id!==r.currentUserId})},selectUserTag:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.selectUsersTagItem=!1,!!t){var I=this.getCharPosition("@"),N=I.position,w=I.endPosition,le=this.message.substr(w,w).length?"":" ";this.message=this.message.substr(0,N)+t.username+le+this.message.substr(w,this.message.length-1),this.selectedUsersTag=[].concat(_t(this.selectedUsersTag),[m({},t)]),r||(this.cursorRangePosition=N+t.username.length+le.length+1),this.focusTextarea()}},updateShowTemplatesText:function(t){this.filteredTemplatesText=pe(this.templatesText,"tag",t,!0)},getCharPosition:function(t){for(var r=this.getTextareaRef().selectionStart,I=r;I>0&&this.message.charAt(I-1)!==t;)I--;var N=this.getTextareaRef().selectionEnd;return{position:I,endPosition:N}},updateEmojis:function(t){var r=this;return Kr(Ir().mark(function I(){var N;return Ir().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(t){le.next=2;break}return le.abrupt("return");case 2:return le.next=4,r.emojisDB.getEmojiBySearchQuery(t);case 4:N=le.sent,r.filteredEmojis=N.map(function(he){return he.unicode});case 6:case"end":return le.stop()}},I)}))()},resetFooterList:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;t===":"?this.filteredEmojis=[]:t==="@"?this.filteredUsersTag=[]:t==="/"?this.filteredTemplatesText=[]:(this.filteredEmojis=[],this.filteredUsersTag=[],this.filteredTemplatesText=[])},resetMessage:function(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;I||this.$emit("typing-message",null),this.selectedUsersTag=[],this.resetFooterList(),this.resetTextareaSize(),this.message="",this.editedMessage={},this.messageReply=null,this.files=[],this.emojiOpened=!1,this.preventKeyboardFromClosing(),(this.textareaAutoFocus||!I)&&setTimeout(function(){return t.focusTextarea(r)})},resetTextareaSize:function(){this.getTextareaRef()&&(this.getTextareaRef().style.height="20px")},preventKeyboardFromClosing:function(){this.keepKeyboardOpen&&this.getTextareaRef().focus()},initRecorder:function(){return this.isRecording=!1,new e0({bitRate:this.audioBitRate,sampleRate:this.audioSampleRate,beforeRecording:null,afterRecording:null,pauseRecording:null,micFailed:this.micFailed})},micFailed:function(){this.isRecording=!1,this.recorder=this.initRecorder()}}},n0=(0,O.Z)(r0,[["render",Gt]]);var a0=["id"],o0={key:0,class:"vac-card-info vac-card-date"},s0={key:1,class:"vac-line-new"},i0={key:2,class:"vac-card-info vac-card-system"},l0={key:1,class:"vac-avatar-offset"},u0={key:2},c0={key:0,class:"vac-progress-time"},d0={class:"vac-text-timestamp"},v0={key:0,class:"vac-icon-edited"},f0={key:1},m0=(0,e.createElementVNode)("div",{class:"vac-failure-text"}," ! ",-1),h0=[m0],p0={key:3,class:"vac-avatar-current-offset"};function g0(a,t,r,I,N,w){var le=(0,e.resolveComponent)("format-message"),he=(0,e.resolveComponent)("message-reply"),Re=(0,e.resolveComponent)("svg-icon"),ce=(0,e.resolveComponent)("message-files"),Ae=(0,e.resolveComponent)("audio-player"),_e=(0,e.resolveComponent)("message-actions"),Ve=(0,e.resolveComponent)("message-reactions");return(0,e.openBlock)(),(0,e.createElementBlock)("div",{id:r.message._id,ref:"message",class:"vac-message-wrapper"},[w.showDate?((0,e.openBlock)(),(0,e.createElementBlock)("div",o0,(0,e.toDisplayString)(r.message.date),1)):(0,e.createCommentVNode)("",!0),N.newMessage._id===r.message._id?((0,e.openBlock)(),(0,e.createElementBlock)("div",s0,(0,e.toDisplayString)(r.textMessages.NEW_MESSAGES),1)):(0,e.createCommentVNode)("",!0),r.message.system?((0,e.openBlock)(),(0,e.createElementBlock)("div",i0,[(0,e.renderSlot)(a.$slots,"system-message",(0,e.normalizeProps)((0,e.guardReactiveProps)({message:r.message})),function(){return[(0,e.createVNode)(le,{content:r.message.content,users:r.roomUsers,"text-formatting":r.textFormatting,"link-options":r.linkOptions,onOpenUserTag:w.openUserTag},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(we,st){return{name:st,fn:(0,e.withCtx)(function(ht){return[(0,e.renderSlot)(a.$slots,st,(0,e.normalizeProps)((0,e.guardReactiveProps)(ht)))]})}})]),1032,["content","users","text-formatting","link-options","onOpenUserTag"])]})])):((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:3,class:(0,e.normalizeClass)(["vac-message-box",{"vac-offset-current":r.message.senderId===r.currentUserId}]),onClick:t[8]||(t[8]=function(){return w.selectMessage&&w.selectMessage.apply(w,arguments)})},[(0,e.renderSlot)(a.$slots,"message",(0,e.normalizeProps)((0,e.guardReactiveProps)({message:r.message})),function(){return[r.message.avatar&&r.message.senderId!==r.currentUserId?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:"vac-avatar",style:(0,e.normalizeStyle)({"background-image":"url('".concat(r.message.avatar,"')")})},null,4)):(0,e.createCommentVNode)("",!0),w.hasSenderUserAvatar&&!r.message.avatar?((0,e.openBlock)(),(0,e.createElementBlock)("div",l0)):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["vac-message-container",{"vac-message-container-offset":w.messageOffset}])},[(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["vac-message-card",{"vac-message-highlight":w.isMessageHover,"vac-message-current":r.message.senderId===r.currentUserId,"vac-message-deleted":r.message.deleted,"vac-item-clickable":r.messageSelectionEnabled,"vac-message-selected":w.isMessageSelected}]),onMouseover:t[5]||(t[5]=function(){return w.onHoverMessage&&w.onHoverMessage.apply(w,arguments)}),onMouseleave:t[6]||(t[6]=function(){return w.onLeaveMessage&&w.onLeaveMessage.apply(w,arguments)})},[w.showUsername?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:(0,e.normalizeClass)(["vac-text-username",{"vac-username-reply":!r.message.deleted&&r.message.replyMessage}])},[(0,e.createElementVNode)("span",null,(0,e.toDisplayString)(r.message.username),1)],2)):(0,e.createCommentVNode)("",!0),!r.message.deleted&&r.message.replyMessage?((0,e.openBlock)(),(0,e.createBlock)(he,{key:1,message:r.message,"room-users":r.roomUsers,"text-formatting":r.textFormatting,"link-options":r.linkOptions},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(we,st){return{name:st,fn:(0,e.withCtx)(function(ht){return[(0,e.renderSlot)(a.$slots,st,(0,e.normalizeProps)((0,e.guardReactiveProps)(ht)))]})}})]),1032,["message","room-users","text-formatting","link-options"])):(0,e.createCommentVNode)("",!0),r.message.deleted?((0,e.openBlock)(),(0,e.createElementBlock)("div",u0,[(0,e.renderSlot)(a.$slots,"deleted-icon",{},function(){return[(0,e.createVNode)(Re,{name:"deleted",class:"vac-icon-deleted"})]}),(0,e.createElementVNode)("span",null,(0,e.toDisplayString)(r.textMessages.MESSAGE_DELETED),1)])):!r.message.files||!r.message.files.length?((0,e.openBlock)(),(0,e.createBlock)(le,{key:3,content:r.message.content,users:r.roomUsers,"text-formatting":r.textFormatting,"link-options":r.linkOptions,onOpenUserTag:w.openUserTag},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(we,st){return{name:st,fn:(0,e.withCtx)(function(ht){return[(0,e.renderSlot)(a.$slots,st,(0,e.normalizeProps)((0,e.guardReactiveProps)(ht)))]})}})]),1032,["content","users","text-formatting","link-options","onOpenUserTag"])):!w.isAudio||r.message.files.length>1?((0,e.openBlock)(),(0,e.createBlock)(ce,{key:4,"current-user-id":r.currentUserId,message:r.message,"room-users":r.roomUsers,"text-formatting":r.textFormatting,"link-options":r.linkOptions,"message-selection-enabled":r.messageSelectionEnabled,onOpenFile:w.openFile,onOpenUserTag:w.openUserTag},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(we,st){return{name:st,fn:(0,e.withCtx)(function(ht){return[(0,e.renderSlot)(a.$slots,st,(0,e.normalizeProps)((0,e.guardReactiveProps)(ht)))]})}})]),1032,["current-user-id","message","room-users","text-formatting","link-options","message-selection-enabled","onOpenFile","onOpenUserTag"])):((0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:5},[(0,e.createVNode)(Ae,{"message-id":r.message._id,src:r.message.files[0].url,"message-selection-enabled":r.messageSelectionEnabled,onUpdateProgressTime:t[0]||(t[0]=function(we){return N.progressTime=we}),onHoverAudioProgress:t[1]||(t[1]=function(we){return N.hoverAudioProgress=we})},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(we,st){return{name:st,fn:(0,e.withCtx)(function(ht){return[(0,e.renderSlot)(a.$slots,st,(0,e.normalizeProps)((0,e.guardReactiveProps)(ht)))]})}})]),1032,["message-id","src","message-selection-enabled"]),r.message.deleted?(0,e.createCommentVNode)("",!0):((0,e.openBlock)(),(0,e.createElementBlock)("div",c0,(0,e.toDisplayString)(N.progressTime),1))],64)),(0,e.createElementVNode)("div",d0,[r.message.edited&&!r.message.deleted?((0,e.openBlock)(),(0,e.createElementBlock)("div",v0,[(0,e.renderSlot)(a.$slots,"pencil-icon",{},function(){return[(0,e.createVNode)(Re,{name:"pencil"})]})])):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("span",null,(0,e.toDisplayString)(r.message.timestamp),1),w.isCheckmarkVisible?((0,e.openBlock)(),(0,e.createElementBlock)("span",f0,[(0,e.renderSlot)(a.$slots,"checkmark-icon",(0,e.normalizeProps)((0,e.guardReactiveProps)({message:r.message})),function(){return[(0,e.createVNode)(Re,{name:r.message.distributed?"double-checkmark":"checkmark",param:r.message.seen?"seen":"",class:"vac-icon-check"},null,8,["name","param"])]})])):(0,e.createCommentVNode)("",!0)]),(0,e.createVNode)(_e,{"current-user-id":r.currentUserId,message:r.message,"message-actions":r.messageActions,"show-reaction-emojis":r.showReactionEmojis,"message-hover":N.messageHover,"hover-message-id":N.hoverMessageId,"hover-audio-progress":N.hoverAudioProgress,onUpdateMessageHover:t[2]||(t[2]=function(we){return N.messageHover=we}),onUpdateOptionsOpened:t[3]||(t[3]=function(we){return N.optionsOpened=we}),onUpdateEmojiOpened:t[4]||(t[4]=function(we){return N.emojiOpened=we}),onMessageActionHandler:w.messageActionHandler,onSendMessageReaction:w.sendMessageReaction},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(we,st){return{name:st,fn:(0,e.withCtx)(function(ht){return[(0,e.renderSlot)(a.$slots,st,(0,e.normalizeProps)((0,e.guardReactiveProps)(ht)))]})}})]),1032,["current-user-id","message","message-actions","show-reaction-emojis","message-hover","hover-message-id","hover-audio-progress","onMessageActionHandler","onSendMessageReaction"])],34),(0,e.createVNode)(Ve,{"current-user-id":r.currentUserId,message:r.message,onSendMessageReaction:w.sendMessageReaction},null,8,["current-user-id","message","onSendMessageReaction"])],2),(0,e.renderSlot)(a.$slots,"message-failure",(0,e.normalizeProps)((0,e.guardReactiveProps)({message:r.message})),function(){return[r.message.failure&&r.message.senderId===r.currentUserId?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:(0,e.normalizeClass)(["vac-failure-container vac-svg-button",{"vac-failure-container-avatar":r.message.avatar&&r.message.senderId===r.currentUserId}]),onClick:t[7]||(t[7]=function(we){return a.$emit("open-failed-message",{message:r.message})})},h0,2)):(0,e.createCommentVNode)("",!0)]}),r.message.avatar&&r.message.senderId===r.currentUserId?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:2,class:"vac-avatar vac-avatar-current",style:(0,e.normalizeStyle)({"background-image":"url('".concat(r.message.avatar,"')")})},null,4)):(0,e.createCommentVNode)("",!0),w.hasCurrentUserAvatar&&!r.message.avatar?((0,e.openBlock)(),(0,e.createElementBlock)("div",p0)):(0,e.createCommentVNode)("",!0)]})],2))],8,a0)}Ie(5827);var y0={class:"vac-reply-message"},S0={class:"vac-reply-username"},b0={key:0,class:"vac-image-reply-container"},E0={key:1,class:"vac-video-reply-container"},R0={width:"100%",height:"100%",controls:""},x0=["src"],T0={key:3,class:"vac-file-container"},A0={class:"vac-text-ellipsis"},_0={key:0,class:"vac-text-ellipsis vac-text-extension"},M0={class:"vac-reply-content"};function I0(a,t,r,I,N,w){var le=(0,e.resolveComponent)("audio-player"),he=(0,e.resolveComponent)("svg-icon"),Re=(0,e.resolveComponent)("format-message");return(0,e.openBlock)(),(0,e.createElementBlock)("div",y0,[(0,e.createElementVNode)("div",S0,(0,e.toDisplayString)(w.replyUsername),1),w.isImage?((0,e.openBlock)(),(0,e.createElementBlock)("div",b0,[(0,e.createElementVNode)("div",{class:"vac-message-image vac-message-image-reply",style:(0,e.normalizeStyle)({"background-image":"url('".concat(w.firstFile.url,"')")})},null,4)])):w.isVideo?((0,e.openBlock)(),(0,e.createElementBlock)("div",E0,[(0,e.createElementVNode)("video",R0,[(0,e.createElementVNode)("source",{src:w.firstFile.url},null,8,x0)])])):w.isAudio?((0,e.openBlock)(),(0,e.createBlock)(le,{key:2,src:w.firstFile.url,onUpdateProgressTime:t[0]||(t[0]=function(ce){return a.progressTime=ce}),onHoverAudioProgress:t[1]||(t[1]=function(ce){return a.hoverAudioProgress=ce})},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(ce,Ae){return{name:Ae,fn:(0,e.withCtx)(function(_e){return[(0,e.renderSlot)(a.$slots,Ae,(0,e.normalizeProps)((0,e.guardReactiveProps)(_e)))]})}})]),1032,["src"])):w.isOtherFile?((0,e.openBlock)(),(0,e.createElementBlock)("div",T0,[(0,e.createElementVNode)("div",null,[(0,e.renderSlot)(a.$slots,"file-icon",{},function(){return[(0,e.createVNode)(he,{name:"file"})]})]),(0,e.createElementVNode)("div",A0,(0,e.toDisplayString)(w.firstFile.name),1),w.firstFile.extension?((0,e.openBlock)(),(0,e.createElementBlock)("div",_0,(0,e.toDisplayString)(w.firstFile.extension),1)):(0,e.createCommentVNode)("",!0)])):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("div",M0,[(0,e.createVNode)(Re,{content:r.message.replyMessage.content,users:r.roomUsers,"text-formatting":r.textFormatting,"link-options":r.linkOptions,reply:!0},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(ce,Ae){return{name:Ae,fn:(0,e.withCtx)(function(_e){return[(0,e.renderSlot)(a.$slots,Ae,(0,e.normalizeProps)((0,e.guardReactiveProps)(_e)))]})}})]),1032,["content","users","text-formatting","link-options"])])])}var _a=Ie(8438),O0=_a.isAudioFile,w0=_a.isImageFile,C0=_a.isVideoFile;const B0={name:"MessageReply",components:{AudioPlayer:Ta,SvgIcon:Q,FormatMessage:rt},props:{message:{type:Object,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},roomUsers:{type:Array,required:!0}},computed:{replyUsername:function(){var t=this.message.replyMessage.senderId,r=this.roomUsers.find(function(I){return I._id===t});return r?r.username:""},firstFile:function(){var t,r;return(t=this.message.replyMessage)!==null&&t!==void 0&&(r=t.files)!==null&&r!==void 0&&r.length?this.message.replyMessage.files[0]:{}},isAudio:function(){return O0(this.firstFile)},isImage:function(){return w0(this.firstFile)},isVideo:function(){return C0(this.firstFile)},isOtherFile:function(){var t;return((t=this.message.replyMessage.files)===null||t===void 0?void 0:t.length)&&!this.isAudio&&!this.isVideo&&!this.isImage}}},L0=(0,O.Z)(B0,[["render",I0]]);var N0={class:"vac-message-files-container"},P0=["onClick"],k0={class:"vac-svg-button"},F0={class:"vac-text-ellipsis"},D0={key:0,class:"vac-text-ellipsis vac-text-extension"};function j0(a,t,r,I,N,w){var le=(0,e.resolveComponent)("message-file"),he=(0,e.resolveComponent)("progress-bar"),Re=(0,e.resolveComponent)("svg-icon"),ce=(0,e.resolveComponent)("format-message");return(0,e.openBlock)(),(0,e.createElementBlock)("div",N0,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(w.imageVideoFiles,function(Ae,_e){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{key:_e+"iv"},[(0,e.createVNode)(le,{file:Ae,"current-user-id":r.currentUserId,message:r.message,index:_e,"message-selection-enabled":r.messageSelectionEnabled,onOpenFile:t[0]||(t[0]=function(Ve){return a.$emit("open-file",Ve)})},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(Ve,we){return{name:we,fn:(0,e.withCtx)(function(st){return[(0,e.renderSlot)(a.$slots,we,(0,e.normalizeProps)((0,e.guardReactiveProps)(st)))]})}})]),1032,["file","current-user-id","message","index","message-selection-enabled"])])}),128)),((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(w.otherFiles,function(Ae,_e){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{key:_e+"a",class:"vac-file-wrapper"},[Ae.progress>=0?((0,e.openBlock)(),(0,e.createBlock)(he,{key:0,progress:Ae.progress,style:{top:"44px"}},null,8,["progress"])):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["vac-file-container",{"vac-file-container-progress":Ae.progress>=0}]),onClick:function(we){return w.openFile(we,Ae,"download")}},[(0,e.createElementVNode)("div",k0,[(0,e.renderSlot)(a.$slots,"document-icon",{},function(){return[(0,e.createVNode)(Re,{name:"document"})]})]),(0,e.createElementVNode)("div",F0,(0,e.toDisplayString)(Ae.name),1),Ae.extension?((0,e.openBlock)(),(0,e.createElementBlock)("div",D0,(0,e.toDisplayString)(Ae.extension),1)):(0,e.createCommentVNode)("",!0)],10,P0)])}),128)),(0,e.createVNode)(ce,{content:r.message.content,users:r.roomUsers,"text-formatting":r.textFormatting,"link-options":r.linkOptions,onOpenUserTag:t[1]||(t[1]=function(Ae){return a.$emit("open-user-tag",Ae)})},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(Ae,_e){return{name:_e,fn:(0,e.withCtx)(function(Ve){return[(0,e.renderSlot)(a.$slots,_e,(0,e.normalizeProps)((0,e.guardReactiveProps)(Ve)))]})}})]),1032,["content","users","text-formatting","link-options"])])}var U0={ref:"progress",class:"vac-progress-wrapper"},V0=["height","width"],H0=["stroke-dasharray","stroke-width","r","cx","cy"],z0={class:"vac-progress-text"},G0=(0,e.createElementVNode)("span",{class:"vac-progress-pourcent"},"%",-1);function Y0(a,t,r,I,N,w){return(0,e.openBlock)(),(0,e.createBlock)(e.Transition,{name:"vac-fade-spinner",appear:""},{default:(0,e.withCtx)(function(){return[(0,e.createElementVNode)("div",U0,[((0,e.openBlock)(),(0,e.createElementBlock)("svg",{height:N.radius*2,width:N.radius*2},[(0,e.createElementVNode)("circle",{stroke:"rgba(255, 255, 255, 0.7)","stroke-dasharray":N.circumference+" "+N.circumference,style:(0,e.normalizeStyle)({strokeDashoffset:w.strokeDashoffset,strokeLinecap:"round"}),"stroke-width":N.stroke,fill:"transparent",r:N.normalizedRadius,cx:N.radius,cy:N.radius},null,12,H0)],8,V0)),(0,e.createElementVNode)("div",{class:"vac-progress-content",style:(0,e.normalizeStyle)({height:N.radius*2-19+"px",width:N.radius*2-19+"px"})},[(0,e.createElementVNode)("div",z0,[(0,e.createTextVNode)((0,e.toDisplayString)(r.progress),1),G0])],4)],512)]}),_:1})}const K0={name:"ProgressBar",props:{progress:{type:Number,default:0}},data:function(){var t=35,r=4,I=t-r*2,N=I*2*Math.PI;return{radius:t,stroke:r,normalizedRadius:I,circumference:N}},computed:{strokeDashoffset:function(){return this.circumference-this.progress/100*this.circumference}}},Vo=(0,O.Z)(K0,[["render",Y0]]);var X0={class:"vac-message-file-container"},W0={key:0,class:"vac-image-buttons"},Z0={width:"100%",height:"100%",controls:""},Q0=["src"];function J0(a,t,r,I,N,w){var le=(0,e.resolveComponent)("progress-bar"),he=(0,e.resolveComponent)("loader"),Re=(0,e.resolveComponent)("svg-icon");return(0,e.openBlock)(),(0,e.createElementBlock)("div",X0,[w.isImage?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,ref:"imageRef"+r.index,class:"vac-message-image-container",onMouseover:t[2]||(t[2]=function(ce){return N.imageHover=!0}),onMouseleave:t[3]||(t[3]=function(ce){return N.imageHover=!1}),onClick:t[4]||(t[4]=function(ce){return w.openFile(ce,"preview")})},[r.file.progress>=0?((0,e.openBlock)(),(0,e.createBlock)(le,{key:0,progress:r.file.progress,style:(0,e.normalizeStyle)({top:"".concat(N.imageResponsive.loaderTop,"px")})},null,8,["progress","style"])):((0,e.openBlock)(),(0,e.createBlock)(he,{key:1,show:w.isImageLoading,style:(0,e.normalizeStyle)({top:"".concat(N.imageResponsive.loaderTop,"px")})},(0,e.createSlots)({_:2},[(0,e.renderList)(a.$slots,function(ce,Ae){return{name:Ae,fn:(0,e.withCtx)(function(_e){return[(0,e.renderSlot)(a.$slots,Ae,(0,e.normalizeProps)((0,e.guardReactiveProps)(_e)))]})}})]),1032,["show","style"])),(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["vac-message-image",{"vac-blur-loading":w.isImageLoading&&r.message.senderId===r.currentUserId}]),style:(0,e.normalizeStyle)({"background-image":"url('".concat(w.isImageLoading&&r.file.preview||r.file.url,"')"),"max-height":"".concat(N.imageResponsive.maxHeight,"px")})},[(0,e.createVNode)(e.Transition,{name:"vac-fade-image"},{default:(0,e.withCtx)(function(){return[!r.messageSelectionEnabled&&N.imageHover&&!w.isImageLoading?((0,e.openBlock)(),(0,e.createElementBlock)("div",W0,[(0,e.createElementVNode)("div",{class:"vac-svg-button vac-button-view",onClick:t[0]||(t[0]=function(ce){return w.openFile(ce,"preview")})},[(0,e.renderSlot)(a.$slots,"eye-icon",{},function(){return[(0,e.createVNode)(Re,{name:"eye"})]})]),(0,e.createElementVNode)("div",{class:"vac-svg-button vac-button-download",onClick:t[1]||(t[1]=function(ce){return w.openFile(ce,"download")})},[(0,e.renderSlot)(a.$slots,"document-icon",{},function(){return[(0,e.createVNode)(Re,{name:"document"})]})])])):(0,e.createCommentVNode)("",!0)]}),_:3})],6)],544)):w.isVideo?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:1,class:"vac-video-container",onClick:t[5]||(t[5]=(0,e.withModifiers)(function(ce){return w.openFile("preview")},["prevent"]))},[r.file.progress>=0?((0,e.openBlock)(),(0,e.createBlock)(le,{key:0,progress:r.file.progress},null,8,["progress"])):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("video",Z0,[(0,e.createElementVNode)("source",{src:r.file.url},null,8,Q0)])])):(0,e.createCommentVNode)("",!0)])}var Ho=Ie(8438),zo=Ho.isImageFile,$0=Ho.isVideoFile;const q0={name:"MessageFile",components:{SvgIcon:Q,Loader:A,ProgressBar:Vo},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},file:{type:Object,required:!0},index:{type:Number,required:!0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["open-file"],data:function(){return{imageResponsive:"",imageLoading:!1,imageHover:!1}},computed:{isImageLoading:function(){return this.file.url.indexOf("blob:http")!==-1||this.imageLoading},isImage:function(){return zo(this.file)},isVideo:function(){return $0(this.file)}},watch:{file:{immediate:!0,handler:function(){this.checkImgLoad()}}},mounted:function(){var t=this.$refs["imageRef"+this.index];t&&(this.imageResponsive={maxHeight:t.clientWidth-18,loaderTop:t.clientHeight/2-9})},methods:{checkImgLoad:function(){var t=this;if(!!zo(this.file)){this.imageLoading=!0;var r=new Image;r.src=this.file.url,r.addEventListener("load",function(){return t.imageLoading=!1})}},openFile:function(t,r){this.messageSelectionEnabled||(t.stopPropagation(),this.$emit("open-file",{file:this.file,action:r}))}}},eu=(0,O.Z)(q0,[["render",J0]]);var tu=Ie(8438),Go=tu.isImageVideoFile;const ru={name:"MessageFiles",components:{SvgIcon:Q,FormatMessage:rt,ProgressBar:Vo,MessageFile:eu},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},roomUsers:{type:Array,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["open-file","open-user-tag"],computed:{imageVideoFiles:function(){return this.message.files.filter(function(t){return Go(t)})},otherFiles:function(){return this.message.files.filter(function(t){return!Go(t)})}},methods:{openFile:function(t,r,I){this.messageSelectionEnabled||(t.stopPropagation(),this.$emit("open-file",{file:r,action:I}))}}},nu=(0,O.Z)(ru,[["render",j0]]);var au={class:"vac-message-actions-wrapper"},ou={key:"3"},su={class:"vac-menu-list"},iu=["onClick"];function lu(a,t,r,I,N,w){var le=(0,e.resolveComponent)("svg-icon"),he=(0,e.resolveComponent)("emoji-picker-container"),Re=(0,e.resolveDirective)("click-outside");return(0,e.openBlock)(),(0,e.createElementBlock)("div",au,[(0,e.createElementVNode)("div",{class:"vac-options-container",style:(0,e.normalizeStyle)({display:r.hoverAudioProgress?"none":"initial",width:w.filteredMessageActions.length&&r.showReactionEmojis?"70px":"45px"})},[(0,e.createVNode)(e.TransitionGroup,{name:"vac-slide-left",tag:"span"},{default:(0,e.withCtx)(function(){return[w.isMessageActions||w.isMessageReactions?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:"1",class:(0,e.normalizeClass)(["vac-blur-container",{"vac-options-me":r.message.senderId===r.currentUserId}])},null,2)):(0,e.createCommentVNode)("",!0),w.isMessageActions?((0,e.openBlock)(),(0,e.createElementBlock)("div",{ref:"actionIcon",key:"2",class:"vac-svg-button vac-message-options",onClick:t[0]||(t[0]=function(){return w.openOptions&&w.openOptions.apply(w,arguments)})},[(0,e.renderSlot)(a.$slots,"dropdown-icon",{},function(){return[(0,e.createVNode)(le,{name:"dropdown",param:"message"})]})],512)):(0,e.createCommentVNode)("",!0),w.isMessageReactions?(0,e.withDirectives)(((0,e.openBlock)(),(0,e.createElementBlock)("div",ou,[(0,e.renderSlot)(a.$slots,"emoji-picker",(0,e.mergeProps)({emojiOpened:N.emojiOpened},{addEmoji:w.sendMessageReaction}),function(){return[(0,e.createVNode)(he,{class:"vac-message-emojis",style:(0,e.normalizeStyle)({right:w.isMessageActions?"30px":"5px"}),"emoji-opened":N.emojiOpened,"emoji-reaction":!0,"position-right":r.message.senderId===r.currentUserId,onAddEmoji:w.sendMessageReaction,onOpenEmoji:w.openEmoji},{"emoji-picker-icon":(0,e.withCtx)(function(){return[(0,e.renderSlot)(a.$slots,"emoji-picker-reaction-icon")]}),_:3},8,["style","emoji-opened","position-right","onAddEmoji","onOpenEmoji"])]})])),[[Re,w.closeEmoji]]):(0,e.createCommentVNode)("",!0)]}),_:3})],4),w.filteredMessageActions.length?((0,e.openBlock)(),(0,e.createBlock)(e.Transition,{key:0,name:r.message.senderId===r.currentUserId?"vac-slide-left":"vac-slide-right"},{default:(0,e.withCtx)(function(){return[N.optionsOpened?(0,e.withDirectives)(((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,ref:"menuOptions",class:(0,e.normalizeClass)(["vac-menu-options",{"vac-menu-left":r.message.senderId!==r.currentUserId}]),style:(0,e.normalizeStyle)({top:"".concat(N.menuOptionsTop,"px")})},[(0,e.createElementVNode)("div",su,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(w.filteredMessageActions,function(ce){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{key:ce.name},[(0,e.createElementVNode)("div",{class:"vac-menu-item",onClick:function(_e){return w.messageActionHandler(ce)}},(0,e.toDisplayString)(ce.title),9,iu)])}),128))])],6)),[[Re,w.closeOptions]]):(0,e.createCommentVNode)("",!0)]}),_:1},8,["name"])):(0,e.createCommentVNode)("",!0)])}const uu={name:"MessageActions",components:{SvgIcon:Q,EmojiPickerContainer:Po},directives:{clickOutside:er},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},messageActions:{type:Array,required:!0},showReactionEmojis:{type:Boolean,required:!0},messageHover:{type:Boolean,required:!0},hoverMessageId:{type:[String,Number],default:null},hoverAudioProgress:{type:Boolean,required:!0}},emits:["update-emoji-opened","update-options-opened","update-message-hover","message-action-handler","send-message-reaction"],data:function(){return{menuOptionsTop:0,optionsOpened:!1,optionsClosing:!1,emojiOpened:!1}},computed:{isMessageActions:function(){return this.filteredMessageActions.length&&this.messageHover&&!this.message.deleted&&!this.message.disableActions&&!this.hoverAudioProgress},isMessageReactions:function(){return this.showReactionEmojis&&this.messageHover&&!this.message.deleted&&!this.message.disableReactions&&!this.hoverAudioProgress},filteredMessageActions:function(){return this.message.senderId===this.currentUserId?this.messageActions:this.messageActions.filter(function(t){return!t.onlyMe})}},watch:{emojiOpened:function(t){this.$emit("update-emoji-opened",t),t&&(this.optionsOpened=!1)},optionsOpened:function(t){this.$emit("update-options-opened",t)}},methods:{openOptions:function(){var t=this;this.optionsClosing||(this.optionsOpened=!this.optionsOpened,this.optionsOpened&&setTimeout(function(){var r=document.getElementById("room-footer");if(!(!r||!t.$refs.menuOptions||!t.$refs.actionIcon)){var I=t.$refs.menuOptions.getBoundingClientRect().height,N=t.$refs.actionIcon.getBoundingClientRect().top,w=r.getBoundingClientRect().top,le=w-N>I+50;le?t.menuOptionsTop=30:t.menuOptionsTop=-I}}))},closeOptions:function(){var t=this;this.optionsOpened=!1,this.optionsClosing=!0,this.updateMessageHover(),setTimeout(function(){return t.optionsClosing=!1},100)},openEmoji:function(){this.emojiOpened=!this.emojiOpened},closeEmoji:function(){this.emojiOpened=!1,this.updateMessageHover()},updateMessageHover:function(){this.hoverMessageId!==this.message._id&&this.$emit("update-message-hover",!1)},messageActionHandler:function(t){this.closeOptions(),this.$emit("message-action-handler",t)},sendMessageReaction:function(t,r){this.$emit("send-message-reaction",{emoji:t,reaction:r}),this.closeEmoji()}}},cu=(0,O.Z)(uu,[["render",lu]]);var du=["onClick"];function vu(a,t,r,I,N,w){return r.message.deleted?(0,e.createCommentVNode)("",!0):((0,e.openBlock)(),(0,e.createBlock)(e.TransitionGroup,{key:0,name:"vac-slide-left",tag:"span"},{default:(0,e.withCtx)(function(){return[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.message.reactions,function(le,he){return(0,e.withDirectives)(((0,e.openBlock)(),(0,e.createElementBlock)("button",{key:he+0,class:(0,e.normalizeClass)(["vac-button-reaction",{"vac-reaction-me":le.indexOf(r.currentUserId)!==-1}]),style:(0,e.normalizeStyle)({float:r.message.senderId===r.currentUserId?"right":"left"}),onClick:function(ce){return w.sendMessageReaction({unicode:he},le)}},[(0,e.createTextVNode)((0,e.toDisplayString)(he),1),(0,e.createElementVNode)("span",null,(0,e.toDisplayString)(le.length),1)],14,du)),[[e.vShow,le.length]])}),128))]}),_:1}))}const fu={name:"MessageReactions",props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0}},emits:["send-message-reaction"],methods:{sendMessageReaction:function(t,r){this.$emit("send-message-reaction",{emoji:t,reaction:r})}}},mu=(0,O.Z)(fu,[["render",vu]]);var hu=Ie(9706),pu=hu.messagesValidation,gu=Ie(8438),yu=gu.isAudioFile;const Su={name:"RoomMessage",components:{SvgIcon:Q,FormatMessage:rt,AudioPlayer:Ta,MessageReply:L0,MessageFiles:nu,MessageActions:cu,MessageReactions:mu},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},index:{type:Number,required:!0},message:{type:Object,required:!0},messages:{type:Array,required:!0},editedMessageId:{type:[String,Number],default:null},roomUsers:{type:Array,default:function(){return[]}},messageActions:{type:Array,required:!0},newMessages:{type:Array,default:function(){return[]}},showReactionEmojis:{type:Boolean,required:!0},showNewMessagesDivider:{type:Boolean,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},usernameOptions:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0},selectedMessages:{type:Array,default:function(){return[]}}},emits:["message-added","open-file","open-user-tag","open-failed-message","message-action-handler","send-message-reaction","select-message","unselect-message"],data:function(){return{hoverMessageId:null,messageHover:!1,optionsOpened:!1,emojiOpened:!1,newMessage:{},progressTime:"- : -",hoverAudioProgress:!1}},computed:{showUsername:function(){return!this.usernameOptions.currentUser&&this.message.senderId===this.currentUserId?!1:this.roomUsers.length>=this.usernameOptions.minUsers},showDate:function(){return this.index>0&&this.message.date!==this.messages[this.index-1].date},messageOffset:function(){return this.index>0&&this.message.senderId!==this.messages[this.index-1].senderId},isMessageHover:function(){return this.editedMessageId===this.message._id||this.hoverMessageId===this.message._id},isAudio:function(){var t;return(t=this.message.files)===null||t===void 0?void 0:t.some(function(r){return yu(r)})},isCheckmarkVisible:function(){return this.message.senderId===this.currentUserId&&!this.message.deleted&&(this.message.saved||this.message.distributed||this.message.seen)},hasCurrentUserAvatar:function(){var t=this;return this.messages.some(function(r){return r.senderId===t.currentUserId&&r.avatar})},hasSenderUserAvatar:function(){var t=this;return this.messages.some(function(r){return r.senderId!==t.currentUserId&&r.avatar})},isMessageSelected:function(){var t=this;return this.messageSelectionEnabled&&!!this.selectedMessages.find(function(r){return r._id===t.message._id})}},watch:{newMessages:{immediate:!0,deep:!0,handler:function(t){if(!t.length||!this.showNewMessagesDivider){this.newMessage={};return}this.newMessage=t.reduce(function(r,I){return I.index<r.index?I:r})}},messageSelectionEnabled:function(){this.resetMessageHover()}},mounted:function(){pu(this.message),this.$emit("message-added",{message:this.message,index:this.index,ref:this.$refs.message})},methods:{onHoverMessage:function(){this.messageSelectionEnabled||(this.messageHover=!0,this.canEditMessage()&&(this.hoverMessageId=this.message._id))},canEditMessage:function(){return!this.message.deleted},onLeaveMessage:function(){this.messageSelectionEnabled||(!this.optionsOpened&&!this.emojiOpened&&(this.messageHover=!1),this.hoverMessageId=null)},resetMessageHover:function(){this.messageHover=!1,this.hoverMessageId=null},openFile:function(t){this.$emit("open-file",{message:this.message,file:t})},openUserTag:function(t){this.$emit("open-user-tag",{user:t})},messageActionHandler:function(t){var r=this;this.resetMessageHover(),setTimeout(function(){r.$emit("message-action-handler",{action:t,message:r.message})},300)},sendMessageReaction:function(t){var r=t.emoji,I=t.reaction;this.$emit("send-message-reaction",{messageId:this.message._id,reaction:r,remove:I&&I.indexOf(this.currentUserId)!==-1}),this.messageHover=!1},selectMessage:function(){this.messageSelectionEnabled&&(this.isMessageSelected?this.$emit("unselect-message",this.message._id):this.$emit("select-message",this.message))}}},bu={name:"ChatRoom",components:{Loader:A,SvgIcon:Q,RoomHeader:hr,RoomFooter:n0,RoomMessage:(0,O.Z)(Su,[["render",g0]])},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},singleRoom:{type:Boolean,required:!0},showRoomsList:{type:Boolean,required:!0},isMobile:{type:Boolean,required:!0},rooms:{type:Array,required:!0},roomId:{type:[String,Number],required:!0},loadFirstRoom:{type:Boolean,required:!0},messages:{type:Array,required:!0},roomMessage:{type:String,default:null},messagesLoaded:{type:Boolean,required:!0},menuActions:{type:Array,required:!0},messageActions:{type:Array,required:!0},messageSelectionActions:{type:Array,required:!0},autoScroll:{type:Object,required:!0},showSendIcon:{type:Boolean,required:!0},showFiles:{type:Boolean,required:!0},showAudio:{type:Boolean,required:!0},audioBitRate:{type:Number,required:!0},audioSampleRate:{type:Number,required:!0},showEmojis:{type:Boolean,required:!0},showReactionEmojis:{type:Boolean,required:!0},showNewMessagesDivider:{type:Boolean,required:!0},showFooter:{type:Boolean,required:!0},acceptedFiles:{type:String,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},loadingRooms:{type:Boolean,required:!0},roomInfoEnabled:{type:Boolean,required:!0},textareaActionEnabled:{type:Boolean,required:!0},textareaAutoFocus:{type:Boolean,required:!0},userTagsEnabled:{type:Boolean,required:!0},emojisSuggestionEnabled:{type:Boolean,required:!0},scrollDistance:{type:Number,required:!0},templatesText:{type:Array,default:null},usernameOptions:{type:Object,required:!0}},emits:["toggle-rooms-list","room-info","menu-action-handler","message-selection-action-handler","edit-message","send-message","delete-message","message-action-handler","fetch-messages","send-message-reaction","typing-message","open-file","open-user-tag","open-failed-message","textarea-action-handler"],data:function(){return{editedMessageId:null,initReplyMessage:null,initEditMessage:null,infiniteState:null,loadingMessages:!1,observer:null,showLoader:!0,loadingMoreMessages:!1,scrollIcon:!1,scrollMessagesCount:0,newMessages:[],messageSelectionEnabled:!1,selectedMessages:[]}},computed:{room:function(){var t=this;return this.rooms.find(function(r){return r.roomId===t.roomId})||{}},showNoMessages:function(){return this.roomId&&!this.messages.length&&!this.loadingMessages&&!this.loadingRooms},showNoRoom:function(){var t=!this.rooms.length&&!this.loadingRooms||!this.roomId&&!this.loadFirstRoom;return t&&(this.loadingMessages=!1),t},showMessagesStarted:function(){return this.messages.length&&this.messagesLoaded}},watch:{loadingMessages:function(t){var r=this;t?this.infiniteState=null:(this.infiniteState&&this.infiniteState.loaded(),setTimeout(function(){return r.initIntersectionObserver()}))},roomId:function(){this.onRoomChanged()},messages:{deep:!0,handler:function(t,r){var I=this;t.forEach(function(N,w){I.showNewMessagesDivider&&!N.seen&&N.senderId!==I.currentUserId&&I.newMessages.push({_id:N._id,index:w})}),(r==null?void 0:r.length)===(t==null?void 0:t.length)-1&&(this.newMessages=[]),this.infiniteState&&this.infiniteState.loaded(),setTimeout(function(){return I.loadingMoreMessages=!1})}},messagesLoaded:function(t){t&&(this.loadingMessages=!1),this.infiniteState&&this.infiniteState.complete()}},mounted:function(){this.newMessages=[]},methods:{initIntersectionObserver:function(){var t=this;this.observer&&(this.showLoader=!0,this.observer.disconnect());var r=document.getElementById("infinite-loader-messages");if(r){var I={root:document.getElementById("messages-list"),rootMargin:"".concat(this.scrollDistance,"px"),threshold:0};this.observer=new IntersectionObserver(function(N){N[0].isIntersecting&&t.loadMoreMessages()},I),this.observer.observe(r)}},preventTopScroll:function(){for(var t=this,r=this.$refs.scrollContainer,I=r.scrollHeight,N=new ResizeObserver(function(le){r.scrollHeight!==I&&t.$refs.scrollContainer&&(t.$refs.scrollContainer.scrollTo({top:r.scrollHeight-I}),N.disconnect())}),w=0;w<r.children.length;w++)N.observe(r.children[w])},touchStart:function(t){var r=this;if(!this.singleRoom&&t.changedTouches.length===1){var I=t.changedTouches[0].clientX,N=t.changedTouches[0].clientY;addEventListener("touchend",function(w){return r.touchEnd(w,I,N)},{once:!0})}},touchEnd:function(t,r,I){if(t.changedTouches.length===1){var N=t.changedTouches[0].clientX,w=t.changedTouches[0].clientY,le=N-r>100,he=Math.abs(w-I)>50;le&&!he&&this.$emit("toggle-rooms-list")}},onRoomChanged:function(){var t=this;this.loadingMessages=!0,this.scrollIcon=!1,this.scrollMessagesCount=0,this.resetMessageSelection(),!this.messages.length&&this.messagesLoaded&&(this.loadingMessages=!1);var r=this.$watch(function(){return t.messages},function(I){if(!(!I||!I.length)){var N=t.$refs.scrollContainer;!N||(r(),setTimeout(function(){N.scrollTo({top:N.scrollHeight}),t.loadingMessages=!1}))}})},resetMessageSelection:function(){this.messageSelectionEnabled=!1,this.selectedMessages=[]},selectMessage:function(t){this.selectedMessages.push(t)},unselectMessage:function(t){this.selectedMessages=this.selectedMessages.filter(function(r){return r._id!==t})},onMessageAdded:function(t){var r=this,I=t.message,N=t.index,w=t.ref;if(N===this.messages.length-1){var le=w.offsetHeight+60;setTimeout(function(){var he=r.getBottomScroll(r.$refs.scrollContainer)>le;I.senderId===r.currentUserId?he?r.autoScroll.send.newAfterScrollUp&&r.scrollToBottom():r.autoScroll.send.new&&r.scrollToBottom():he?r.autoScroll.receive.newAfterScrollUp?r.scrollToBottom():(r.scrollIcon=!0,r.scrollMessagesCount++):r.autoScroll.receive.new?r.scrollToBottom():(r.scrollIcon=!0,r.scrollMessagesCount++)})}},onContainerScroll:function(t){if(!!t.target){var r=this.getBottomScroll(t.target);r<60&&(this.scrollMessagesCount=0),this.scrollIcon=r>500||this.scrollMessagesCount}},loadMoreMessages:function(){var t=this;this.loadingMessages||setTimeout(function(){if(!t.loadingMoreMessages){if(t.messagesLoaded||!t.roomId){t.loadingMoreMessages=!1,t.showLoader=!1;return}t.preventTopScroll(),t.$emit("fetch-messages"),t.loadingMoreMessages=!0}},500)},messageActionHandler:function(t){var r=t.action,I=t.message;switch(r.name){case"replyMessage":this.initReplyMessage=I;return;case"editMessage":this.initEditMessage=I;return;case"deleteMessage":return this.$emit("delete-message",I);case"selectMessages":this.selectedMessages=[I],this.messageSelectionEnabled=!0;return;default:return this.$emit("message-action-handler",{action:r,message:I})}},messageSelectionActionHandler:function(t){this.$emit("message-selection-action-handler",{action:t,messages:this.selectedMessages}),this.resetMessageSelection()},sendMessageReaction:function(t){this.$emit("send-message-reaction",t)},getBottomScroll:function(t){var r=t.scrollHeight,I=t.clientHeight,N=t.scrollTop;return r-I-N},scrollToBottom:function(){var t=this;setTimeout(function(){var r=t.$refs.scrollContainer;r.classList.add("vac-scroll-smooth"),r.scrollTo({top:r.scrollHeight,behavior:"smooth"}),setTimeout(function(){return r.classList.remove("vac-scroll-smooth")})},50)},openFile:function(t){var r=t.message,I=t.file;this.$emit("open-file",{message:r,file:I})},openUserTag:function(t){this.$emit("open-user-tag",t)}}},Eu=(0,O.Z)(bu,[["render",ke]]);var Ru={key:0,class:"vac-media-preview-container"},xu={key:1,class:"vac-media-preview-container"},Tu={width:"100%",height:"100%",controls:"",autoplay:""},Au=["src"],_u={class:"vac-svg-button"};function Mu(a,t,r,I,N,w){var le=(0,e.resolveComponent)("svg-icon");return(0,e.openBlock)(),(0,e.createElementBlock)("div",{ref:"modal",tabindex:"0",class:"vac-media-preview",onClick:t[0]||(t[0]=(0,e.withModifiers)(function(){return w.closeModal&&w.closeModal.apply(w,arguments)},["stop"])),onKeydown:t[1]||(t[1]=(0,e.withKeys)(function(){return w.closeModal&&w.closeModal.apply(w,arguments)},["esc"]))},[(0,e.createVNode)(e.Transition,{name:"vac-bounce-preview",appear:""},{default:(0,e.withCtx)(function(){return[w.isImage?((0,e.openBlock)(),(0,e.createElementBlock)("div",Ru,[(0,e.createElementVNode)("div",{class:"vac-image-preview",style:(0,e.normalizeStyle)({"background-image":"url('".concat(r.file.url,"')")})},null,4)])):w.isVideo?((0,e.openBlock)(),(0,e.createElementBlock)("div",xu,[(0,e.createElementVNode)("video",Tu,[(0,e.createElementVNode)("source",{src:r.file.url},null,8,Au)])])):(0,e.createCommentVNode)("",!0)]}),_:1}),(0,e.createElementVNode)("div",_u,[(0,e.renderSlot)(a.$slots,"preview-close-icon",{},function(){return[(0,e.createVNode)(le,{name:"close-outline",param:"preview"})]})])],544)}var Yo=Ie(8438),Iu=Yo.isImageFile,Ou=Yo.isVideoFile;const wu={name:"MediaPreview",components:{SvgIcon:Q},props:{file:{type:Object,required:!0}},emits:["close-media-preview"],computed:{isImage:function(){return Iu(this.file)},isVideo:function(){return Ou(this.file)}},mounted:function(){this.$refs.modal.focus()},methods:{closeModal:function(){this.$emit("close-media-preview")}}},Cu=(0,O.Z)(wu,[["render",Mu]]),Bu={ROOMS_EMPTY:"No rooms",ROOM_EMPTY:"No room selected",NEW_MESSAGES:"New Messages",MESSAGE_DELETED:"This message was deleted",MESSAGES_EMPTY:"No messages",CONVERSATION_STARTED:"Conversation started on:",TYPE_MESSAGE:"Type message",SEARCH:"Search",IS_ONLINE:"is online",LAST_SEEN:"last seen ",IS_TYPING:"is writing...",CANCEL_SELECT_MESSAGE:"Cancel"};Ie(4765);var Lu={light:{general:{color:"#0a0a0a",colorButtonClear:"#1976d2",colorButton:"#fff",backgroundColorButton:"#1976d2",backgroundInput:"#fff",colorPlaceholder:"#9ca6af",colorCaret:"#1976d2",colorSpinner:"#333",borderStyle:"1px solid #e1e4e8",backgroundScrollIcon:"#fff"},container:{border:"none",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)"},header:{background:"#fff",colorRoomName:"#0a0a0a",colorRoomInfo:"#9ca6af"},footer:{background:"#f8f9fa",borderStyleInput:"1px solid #e1e4e8",borderInputSelected:"#1976d2",backgroundReply:"#e5e5e6",backgroundTagActive:"#e5e5e6",backgroundTag:"#f8f9fa"},content:{background:"#f8f9fa"},sidemenu:{background:"#fff",backgroundHover:"#f6f6f6",backgroundActive:"#e5effa",colorActive:"#1976d2",borderColorSearch:"#e1e5e8"},dropdown:{background:"#fff",backgroundHover:"#f6f6f6"},message:{background:"#fff",backgroundMe:"#ccf2cf",color:"#0a0a0a",colorStarted:"#9ca6af",backgroundDeleted:"#dadfe2",backgroundSelected:"#c2dcf2",colorDeleted:"#757e85",colorUsername:"#9ca6af",colorTimestamp:"#828c94",backgroundDate:"#e5effa",colorDate:"#505a62",backgroundSystem:"#e5effa",colorSystem:"#505a62",backgroundMedia:"rgba(0, 0, 0, 0.15)",backgroundReply:"rgba(0, 0, 0, 0.08)",colorReplyUsername:"#0a0a0a",colorReply:"#6e6e6e",colorTag:"#0d579c",backgroundImage:"#ddd",colorNewMessages:"#1976d2",backgroundScrollCounter:"#0696c7",colorScrollCounter:"#fff",backgroundReaction:"#eee",borderStyleReaction:"1px solid #eee",backgroundReactionHover:"#fff",borderStyleReactionHover:"1px solid #ddd",colorReactionCounter:"#0a0a0a",backgroundReactionMe:"#cfecf5",borderStyleReactionMe:"1px solid #3b98b8",backgroundReactionHoverMe:"#cfecf5",borderStyleReactionHoverMe:"1px solid #3b98b8",colorReactionCounterMe:"#0b59b3",backgroundAudioRecord:"#eb4034",backgroundAudioLine:"rgba(0, 0, 0, 0.15)",backgroundAudioProgress:"#455247",backgroundAudioProgressSelector:"#455247",colorFileExtension:"#757e85"},markdown:{background:"rgba(239, 239, 239, 0.7)",border:"rgba(212, 212, 212, 0.9)",color:"#e01e5a",colorMulti:"#0a0a0a"},room:{colorUsername:"#0a0a0a",colorMessage:"#67717a",colorTimestamp:"#a2aeb8",colorStateOnline:"#4caf50",colorStateOffline:"#9ca6af",backgroundCounterBadge:"#0696c7",colorCounterBadge:"#fff"},emoji:{background:"#fff"},icons:{search:"#9ca6af",add:"#1976d2",toggle:"#0a0a0a",menu:"#0a0a0a",close:"#9ca6af",closeImage:"#fff",file:"#1976d2",paperclip:"#1976d2",closeOutline:"#000",closePreview:"#fff",send:"#1976d2",sendDisabled:"#9ca6af",emoji:"#1976d2",emojiReaction:"rgba(0, 0, 0, 0.3)",document:"#1976d2",pencil:"#9e9e9e",checkmark:"#9e9e9e",checkmarkSeen:"#0696c7",eye:"#fff",dropdownMessage:"#fff",dropdownMessageBackground:"rgba(0, 0, 0, 0.25)",dropdownRoom:"#9e9e9e",dropdownScroll:"#0a0a0a",microphone:"#1976d2",audioPlay:"#455247",audioPause:"#455247",audioCancel:"#eb4034",audioConfirm:"#1ba65b"}},dark:{general:{color:"#fff",colorButtonClear:"#fff",colorButton:"#fff",backgroundColorButton:"#1976d2",backgroundInput:"#202223",colorPlaceholder:"#596269",colorCaret:"#fff",colorSpinner:"#fff",borderStyle:"none",backgroundScrollIcon:"#fff"},container:{border:"none",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)"},header:{background:"#181a1b",colorRoomName:"#fff",colorRoomInfo:"#9ca6af"},footer:{background:"#131415",borderStyleInput:"none",borderInputSelected:"#1976d2",backgroundReply:"#1b1c1c",backgroundTagActive:"#1b1c1c",backgroundTag:"#131415"},content:{background:"#131415"},sidemenu:{background:"#181a1b",backgroundHover:"#202224",backgroundActive:"#151617",colorActive:"#fff",borderColorSearch:"#181a1b"},dropdown:{background:"#2a2c33",backgroundHover:"#26282e"},message:{background:"#22242a",backgroundMe:"#1f7e80",color:"#fff",colorStarted:"#9ca6af",backgroundDeleted:"#1b1c21",backgroundSelected:"#c2dcf2",colorDeleted:"#a2a5a8",colorUsername:"#b3bac9",colorTimestamp:"#ebedf2",backgroundDate:"rgba(0, 0, 0, 0.3)",colorDate:"#bec5cc",backgroundSystem:"rgba(0, 0, 0, 0.3)",colorSystem:"#bec5cc",backgroundMedia:"rgba(0, 0, 0, 0.18)",backgroundReply:"rgba(0, 0, 0, 0.18)",colorReplyUsername:"#fff",colorReply:"#d6d6d6",colorTag:"#f0c60a",backgroundImage:"#ddd",colorNewMessages:"#fff",backgroundScrollCounter:"#1976d2",colorScrollCounter:"#fff",backgroundReaction:"none",borderStyleReaction:"none",backgroundReactionHover:"#202223",borderStyleReactionHover:"none",colorReactionCounter:"#fff",backgroundReactionMe:"#4e9ad1",borderStyleReactionMe:"none",backgroundReactionHoverMe:"#4e9ad1",borderStyleReactionHoverMe:"none",colorReactionCounterMe:"#fff",backgroundAudioRecord:"#eb4034",backgroundAudioLine:"rgba(255, 255, 255, 0.15)",backgroundAudioProgress:"#b7d4d3",backgroundAudioProgressSelector:"#b7d4d3",colorFileExtension:"#a2a5a8"},markdown:{background:"rgba(239, 239, 239, 0.7)",border:"rgba(212, 212, 212, 0.9)",color:"#e01e5a",colorMulti:"#0a0a0a"},room:{colorUsername:"#fff",colorMessage:"#6c7278",colorTimestamp:"#6c7278",colorStateOnline:"#4caf50",colorStateOffline:"#596269",backgroundCounterBadge:"#1976d2",colorCounterBadge:"#fff"},emoji:{background:"#343740"},icons:{search:"#596269",add:"#fff",toggle:"#fff",menu:"#fff",close:"#9ca6af",closeImage:"#fff",file:"#1976d2",paperclip:"#fff",closeOutline:"#fff",closePreview:"#fff",send:"#fff",sendDisabled:"#646a70",emoji:"#fff",emojiReaction:"#fff",document:"#1976d2",pencil:"#ebedf2",checkmark:"#ebedf2",checkmarkSeen:"#f0d90a",eye:"#fff",dropdownMessage:"#fff",dropdownMessageBackground:"rgba(0, 0, 0, 0.25)",dropdownRoom:"#fff",dropdownScroll:"#0a0a0a",microphone:"#fff",audioPlay:"#b7d4d3",audioPause:"#b7d4d3",audioCancel:"#eb4034",audioConfirm:"#1ba65b"}}},Nu=function(t){var r=t.general,I=t.container,N=t.header,w=t.footer,le=t.sidemenu,he=t.content,Re=t.dropdown,ce=t.message,Ae=t.markdown,_e=t.room,Ve=t.emoji,we=t.icons;return{"--chat-color":r.color,"--chat-color-button-clear":r.colorButtonClear,"--chat-color-button":r.colorButton,"--chat-bg-color-button":r.backgroundColorButton,"--chat-bg-color-input":r.backgroundInput,"--chat-color-spinner":r.colorSpinner,"--chat-color-placeholder":r.colorPlaceholder,"--chat-color-caret":r.colorCaret,"--chat-border-style":r.borderStyle,"--chat-bg-scroll-icon":r.backgroundScrollIcon,"--chat-container-border":I.border,"--chat-container-border-radius":I.borderRadius,"--chat-container-box-shadow":I.boxShadow,"--chat-header-bg-color":N.background,"--chat-header-color-name":N.colorRoomName,"--chat-header-color-info":N.colorRoomInfo,"--chat-footer-bg-color":w.background,"--chat-border-style-input":w.borderStyleInput,"--chat-border-color-input-selected":w.borderInputSelected,"--chat-footer-bg-color-reply":w.backgroundReply,"--chat-footer-bg-color-tag-active":w.backgroundTagActive,"--chat-footer-bg-color-tag":w.backgroundTag,"--chat-content-bg-color":he.background,"--chat-sidemenu-bg-color":le.background,"--chat-sidemenu-bg-color-hover":le.backgroundHover,"--chat-sidemenu-bg-color-active":le.backgroundActive,"--chat-sidemenu-color-active":le.colorActive,"--chat-sidemenu-border-color-search":le.borderColorSearch,"--chat-dropdown-bg-color":Re.background,"--chat-dropdown-bg-color-hover":Re.backgroundHover,"--chat-message-bg-color":ce.background,"--chat-message-bg-color-me":ce.backgroundMe,"--chat-message-color-started":ce.colorStarted,"--chat-message-bg-color-deleted":ce.backgroundDeleted,"--chat-message-bg-color-selected":ce.backgroundSelected,"--chat-message-color-deleted":ce.colorDeleted,"--chat-message-color-username":ce.colorUsername,"--chat-message-color-timestamp":ce.colorTimestamp,"--chat-message-bg-color-date":ce.backgroundDate,"--chat-message-color-date":ce.colorDate,"--chat-message-bg-color-system":ce.backgroundSystem,"--chat-message-color-system":ce.colorSystem,"--chat-message-color":ce.color,"--chat-message-bg-color-media":ce.backgroundMedia,"--chat-message-bg-color-reply":ce.backgroundReply,"--chat-message-color-reply-username":ce.colorReplyUsername,"--chat-message-color-reply-content":ce.colorReply,"--chat-message-color-tag":ce.colorTag,"--chat-message-bg-color-image":ce.backgroundImage,"--chat-message-color-new-messages":ce.colorNewMessages,"--chat-message-bg-color-scroll-counter":ce.backgroundScrollCounter,"--chat-message-color-scroll-counter":ce.colorScrollCounter,"--chat-message-bg-color-reaction":ce.backgroundReaction,"--chat-message-border-style-reaction":ce.borderStyleReaction,"--chat-message-bg-color-reaction-hover":ce.backgroundReactionHover,"--chat-message-border-style-reaction-hover":ce.borderStyleReactionHover,"--chat-message-color-reaction-counter":ce.colorReactionCounter,"--chat-message-bg-color-reaction-me":ce.backgroundReactionMe,"--chat-message-border-style-reaction-me":ce.borderStyleReactionMe,"--chat-message-bg-color-reaction-hover-me":ce.backgroundReactionHoverMe,"--chat-message-border-style-reaction-hover-me":ce.borderStyleReactionHoverMe,"--chat-message-color-reaction-counter-me":ce.colorReactionCounterMe,"--chat-message-bg-color-audio-record":ce.backgroundAudioRecord,"--chat-message-bg-color-audio-line":ce.backgroundAudioLine,"--chat-message-bg-color-audio-progress":ce.backgroundAudioProgress,"--chat-message-bg-color-audio-progress-selector":ce.backgroundAudioProgressSelector,"--chat-message-color-file-extension":ce.colorFileExtension,"--chat-markdown-bg":Ae.background,"--chat-markdown-border":Ae.border,"--chat-markdown-color":Ae.color,"--chat-markdown-color-multi":Ae.colorMulti,"--chat-room-color-username":_e.colorUsername,"--chat-room-color-message":_e.colorMessage,"--chat-room-color-timestamp":_e.colorTimestamp,"--chat-room-color-online":_e.colorStateOnline,"--chat-room-color-offline":_e.colorStateOffline,"--chat-room-bg-color-badge":_e.backgroundCounterBadge,"--chat-room-color-badge":_e.colorCounterBadge,"--chat-emoji-bg-color":Ve.background,"--chat-icon-color-search":we.search,"--chat-icon-color-add":we.add,"--chat-icon-color-toggle":we.toggle,"--chat-icon-color-menu":we.menu,"--chat-icon-color-close":we.close,"--chat-icon-color-close-image":we.closeImage,"--chat-icon-color-file":we.file,"--chat-icon-color-paperclip":we.paperclip,"--chat-icon-color-close-outline":we.closeOutline,"--chat-icon-color-close-preview":we.closePreview,"--chat-icon-color-send":we.send,"--chat-icon-color-send-disabled":we.sendDisabled,"--chat-icon-color-emoji":we.emoji,"--chat-icon-color-emoji-reaction":we.emojiReaction,"--chat-icon-color-document":we.document,"--chat-icon-color-pencil":we.pencil,"--chat-icon-color-checkmark":we.checkmark,"--chat-icon-color-checkmark-seen":we.checkmarkSeen,"--chat-icon-color-eye":we.eye,"--chat-icon-color-dropdown-message":we.dropdownMessage,"--chat-icon-bg-dropdown-message":we.dropdownMessageBackground,"--chat-icon-color-dropdown-room":we.dropdownRoom,"--chat-icon-color-dropdown-scroll":we.dropdownScroll,"--chat-icon-color-microphone":we.microphone,"--chat-icon-color-audio-play":we.audioPlay,"--chat-icon-color-audio-pause":we.audioPause,"--chat-icon-color-audio-cancel":we.audioCancel,"--chat-icon-color-audio-confirm":we.audioConfirm}},Ko=Ie(9706),Pu=Ko.roomsValidation,ku=Ko.partcipantsValidation;const Fu={name:"ChatContainer",components:{RoomsList:xe,Room:Eu,MediaPreview:Cu},props:{height:{type:String,default:"600px"},theme:{type:String,default:"light"},styles:{type:Object,default:function(){return{}}},responsiveBreakpoint:{type:Number,default:900},singleRoom:{type:Boolean,default:!1},roomsListOpened:{type:Boolean,default:!0},textMessages:{type:Object,default:null},currentUserId:{type:[String,Number],default:""},rooms:{type:Array,default:function(){return[]}},roomsOrder:{type:String,default:"desc"},loadingRooms:{type:Boolean,default:!1},roomsLoaded:{type:Boolean,default:!1},roomId:{type:[String,Number],default:null},loadFirstRoom:{type:Boolean,default:!0},messages:{type:Array,default:function(){return[]}},messagesLoaded:{type:Boolean,default:!1},roomActions:{type:Array,default:function(){return[]}},menuActions:{type:Array,default:function(){return[]}},messageActions:{type:Array,default:function(){return[{name:"replyMessage",title:"Reply"},{name:"editMessage",title:"Edit Message",onlyMe:!0},{name:"deleteMessage",title:"Delete Message",onlyMe:!0},{name:"selectMessages",title:"Select"}]}},messageSelectionActions:{type:Array,default:function(){return[]}},autoScroll:{type:Object,default:function(){return{send:{new:!0,newAfterScrollUp:!0},receive:{new:!0,newAfterScrollUp:!1}}}},showSearch:{type:Boolean,default:!0},showAddRoom:{type:Boolean,default:!0},showSendIcon:{type:Boolean,default:!0},showFiles:{type:Boolean,default:!0},showAudio:{type:Boolean,default:!0},audioBitRate:{type:Number,default:128},audioSampleRate:{type:Number,default:44100},showEmojis:{type:Boolean,default:!0},showReactionEmojis:{type:Boolean,default:!0},showNewMessagesDivider:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!0},textFormatting:{type:Object,default:function(){return{disabled:!1,italic:"_",bold:"*",strike:"~",underline:"\xB0",multilineCode:"```",inlineCode:"`"}}},linkOptions:{type:Object,default:function(){return{disabled:!1,target:"_blank",rel:null}}},roomInfoEnabled:{type:Boolean,default:!1},textareaActionEnabled:{type:Boolean,default:!1},textareaAutoFocus:{type:Boolean,default:!0},userTagsEnabled:{type:Boolean,default:!0},emojisSuggestionEnabled:{type:Boolean,default:!0},roomMessage:{type:String,default:""},scrollDistance:{type:Number,default:60},acceptedFiles:{type:String,default:"*"},templatesText:{type:Array,default:null},mediaPreviewEnabled:{type:Boolean,default:!0},usernameOptions:{type:Object,default:function(){return{minUsers:3,currentUser:!1}}}},emits:["toggle-rooms-list","room-info","fetch-messages","send-message","edit-message","delete-message","open-file","open-user-tag","open-failed-message","menu-action-handler","message-action-handler","send-message-reaction","typing-message","textarea-action-handler","fetch-more-rooms","add-room","room-action-handler","message-selection-action-handler"],data:function(){return{room:{},loadingMoreRooms:!1,showRoomsList:!0,isMobile:!1,showMediaPreview:!1,previewFile:{}}},computed:{t:function(){return m(m({},Bu),this.textMessages)},cssVars:function(){var t=this,r=Lu[this.theme],I={};return Object.keys(r).map(function(N){I[N]=m(m({},r[N]),t.styles[N]||{})}),Nu(I)},orderedRooms:function(){var t=this;return this.rooms.slice().sort(function(r,I){var N=r.index||0,w=I.index||0;return t.roomsOrder==="asc"?N<w?-1:w<N?1:0:N>w?-1:w>N?1:0})}},watch:{rooms:{immediate:!0,deep:!0,handler:function(t,r){var I=this;if((!t[0]||!t.find(function(w){return w.roomId===I.room.roomId}))&&(this.showRoomsList=!0),!this.loadingMoreRooms&&this.loadFirstRoom&&t[0]&&(!r||t.length!==r.length))if(this.roomId){var N=t.find(function(w){return w.roomId===I.roomId})||{};this.fetchRoom({room:N})}else!this.isMobile||this.singleRoom?this.fetchRoom({room:this.orderedRooms[0]}):this.showRoomsList=!0}},loadingRooms:function(t){t&&(this.room={})},roomId:{immediate:!0,handler:function(t,r){if(t&&!this.loadingRooms&&this.rooms.length){var I=this.rooms.find(function(N){return N.roomId===t});this.fetchRoom({room:I})}else r&&!t&&(this.room={})}},room:function(t){!t||Object.entries(t).length===0||(Pu(t),t.users.forEach(function(r){ku(r)}))},roomsListOpened:function(t){this.showRoomsList=t}},created:function(){var t=this;this.updateResponsive(),window.addEventListener("resize",function(r){r.isTrusted&&t.updateResponsive()})},methods:{updateResponsive:function(){this.isMobile=window.innerWidth<this.responsiveBreakpoint},toggleRoomsList:function(){this.showRoomsList=!this.showRoomsList,this.isMobile&&(this.room={}),this.$emit("toggle-rooms-list",{opened:this.showRoomsList})},fetchRoom:function(t){var r=t.room;this.room=r,this.fetchMessages({reset:!0}),this.isMobile&&(this.showRoomsList=!1)},fetchMoreRooms:function(){this.$emit("fetch-more-rooms")},roomInfo:function(){this.$emit("room-info",this.room)},addRoom:function(){this.$emit("add-room")},fetchMessages:function(t){this.$emit("fetch-messages",{room:this.room,options:t})},sendMessage:function(t){this.$emit("send-message",m(m({},t),{},{roomId:this.room.roomId}))},editMessage:function(t){this.$emit("edit-message",m(m({},t),{},{roomId:this.room.roomId}))},deleteMessage:function(t){this.$emit("delete-message",{message:t,roomId:this.room.roomId})},openFile:function(t){var r=t.message,I=t.file;this.mediaPreviewEnabled&&I.action==="preview"?(this.previewFile=I.file,this.showMediaPreview=!0):this.$emit("open-file",{message:r,file:I})},openUserTag:function(t){var r=t.user;this.$emit("open-user-tag",{user:r})},openFailedMessage:function(t){var r=t.message;this.$emit("open-failed-message",{message:r,roomId:this.room.roomId})},menuActionHandler:function(t){this.$emit("menu-action-handler",{action:t,roomId:this.room.roomId})},roomActionHandler:function(t){var r=t.action,I=t.roomId;this.$emit("room-action-handler",{action:r,roomId:I})},messageActionHandler:function(t){this.$emit("message-action-handler",m(m({},t),{},{roomId:this.room.roomId}))},messageSelectionActionHandler:function(t){this.$emit("message-selection-action-handler",m(m({},t),{},{roomId:this.room.roomId}))},sendMessageReaction:function(t){this.$emit("send-message-reaction",m(m({},t),{},{roomId:this.room.roomId}))},typingMessage:function(t){this.$emit("typing-message",{message:t,roomId:this.room.roomId})},textareaActionHandler:function(t){this.$emit("textarea-action-handler",{message:t,roomId:this.room.roomId})}}},Ma=(0,O.Z)(Fu,[["render",s]]);Object.defineProperty(Ma,"install",{configurable:!1,enumerable:!1,value:function(t){t.component("ChatWindow",Ma)}});const Du=Ma})(),We.exports=cr})()})(Rs);var mv=dv(Rs.exports);const hv=["disabled"],pv=["disabled"],gv=ur("option",{default:"",value:""},"Select User",-1),yv=["value"],Sv=["disabled"],bv={class:"ccksckr"},Ev=ur("span",{class:"material-icons"},"cyclone",-1),Rv=[Ev],Qv=is({__name:"ChatApp",setup(We){document.title="unTalkMe";const ut=hd(),Rt=pd(),Ie=Bn(null),cr=Bn(null);Cd(Bd,async u=>{u?ut.setIsIn():Rt.push("/Home"),ut.setAuthIsReady()});const h=Bn(ut.uid),T=Bn(ut.username),e=ns({devMessage:"",theme:"dark",isDevice:!1,showChat:!0,updatingData:!1,showDemoOptions:!1,roomsPerPage:15,rooms:[],roomId:"",startRooms:null,endRooms:null,roomsLoaded:!1,loadingRooms:!0,allUsers:[],loadingLastMessageByRoom:0,roomsLoadedCount:0,selectedRoom:null,messagesPerPage:20,messages:[],messagesLoaded:!1,lastLoadedMessage:null,previousLastLoadedMessage:null,roomsListeners:[],listeners:[],typingMessageCache:"",disableForm:!1,addNewRoom:null,addRoomUsername:"",inviteRoomId:null,invitedUsername:"",removeRoomId:null,removeUserId:"",removeUsers:[],roomActions:[{name:"inviteUser",title:"Invite User"},{name:"removeUser",title:"Remove User"},{name:"deleteRoom",title:"Delete Room"}],menuActions:[{name:"inviteUser",title:"Invite User"},{name:"removeUser",title:"Remove User"},{name:"deleteRoom",title:"Delete Room"}],messageSelectionActions:[{name:"deleteMessages",title:"Delete"}],styles:{container:{borderRadius:"4px"}},templatesText:[{tag:"help",text:"This is the help"},{tag:"action",text:"This is the action"},{tag:"action 2",text:"This is the second action"}]}),n=Ca(()=>e.rooms.slice(0,e.roomsLoadedCount)),s=Ca(()=>e.isDevice?window.innerHeight+"px":"calc(100vh - 40px)"),i=cs(()=>{h.value||(setTimeout(()=>e.showChat=!0,10050),setTimeout(()=>Rt.push("/Login"),2e4))});ls(()=>{T.value||Rt.push("/UnThinkMe"),av(h.value),f()}),us(()=>{i()});const o=u=>{u=="unmaximize"&&Ie.value.play(),u=="notification"&&cr.value.play()},m=()=>{e.loadingRooms=!0,e.loadingLastMessageByRoom=0,e.roomsLoadedCount=0,e.rooms=[],e.roomsLoaded=!0,e.startRooms=null,e.endRooms=null,e.roomsListeners.forEach(u=>u()),e.roomsListeners=[],d()},d=()=>{e.messages=[],e.messagesLoaded=!1,e.lastLoadedMessage=null,e.previousLastLoadedMessage=null,e.listeners.forEach(u=>u()),e.listeners=[]},f=()=>{m(),S()},S=async()=>{if(e.endRooms&&!e.startRooms){e.roomsLoaded=!0;return}const u=Hd(h.value,e.roomsPerPage,e.startRooms),{data:c,docs:y}=await zd(u);e.roomsLoaded=c.length===0||c.length<e.roomsPerPage,e.startRooms&&(e.endRooms=e.startRooms),e.startRooms=y[y.length-1];const B=[];c.forEach(re=>{re.users.forEach(ae=>{!e.allUsers.find(Me=>(Me==null?void 0:Me._id)===ae)&&B.indexOf(ae)===-1&&B.push(ae)})});const G=[];B.forEach(re=>{const ae=Ud(re);G.push(ae)}),e.allUsers=[...e.allUsers,...await Promise.all(G)];const W={};c.forEach(re=>{W[re.id]={...re,users:[]},re.users.forEach(ae=>{const be=e.allUsers.find(Me=>(Me==null?void 0:Me._id)===ae);be&&W[re.id].users.push(be)})});const j=[];Object.keys(W).forEach(re=>{const ae=W[re],be=ae.users.filter(Me=>Me._id!==h.value);j.push({...ae,roomName:ae.roomName,roomId:re,avatar:ae.avatar,index:ae.lastUpdated.seconds,roomMessage:be,lastMessage:{content:"Room created",timestamp:Ia(new Date(ae.lastUpdated.seconds),ae.lastUpdated)}})}),e.rooms=e.rooms.concat(j),j.forEach(re=>g(re)),e.rooms.length||(e.loadingRooms=!1,e.roomsLoadedCount=0),fe(j),te(u)},g=u=>{const c=tv(u.roomId,y=>{y.forEach(B=>{const G=R(B,u),W=e.rooms.findIndex(j=>u.roomId===j.roomId);e.rooms[W].lastMessage=G,e.rooms=[...e.rooms]}),e.loadingLastMessageByRoom<e.rooms.length&&(e.loadingLastMessageByRoom++,e.loadingLastMessageByRoom===e.rooms.length&&(e.loadingRooms=!1,e.roomsLoadedCount=e.rooms.length,o("unmaximize")))});e.roomsListeners.push(c)},R=(u,c)=>{var G,W;if(!u.timestamp)return;let y=u.content;if((G=u.files)!=null&&G.length){const j=u.files[0];y=`${j.name}.${j.extension||j.type}`}const B=u.sender_id!==h.value?(W=c.users.find(j=>u.sender_id===j._id))==null?void 0:W.username:"";return{...u,content:y,timestamp:Ia(new Date(u.timestamp.seconds*1e3),u.timestamp),username:B,distributed:!0,seen:u.sender_id===h.value?u.seen:null,new:u.sender_id!==h.value&&(!u.seen||!u.seen[h.value])}},x=({room:u,options:c={}})=>{if(c.reset&&(d(),e.roomId=u.roomId),e.previousLastLoadedMessage&&!e.lastLoadedMessage){e.messagesLoaded=!0;return}e.selectedRoom=u.roomId,o("notification"),ts(u.roomId,e.messagesPerPage,e.lastLoadedMessage).then(({data:y,docs:B})=>{e.selectedRoom===u.roomId&&((y.length===0||y.length<e.messagesPerPage)&&setTimeout(()=>e.messagesLoaded=!0,0),c.reset&&(e.messages=[]),y.forEach(G=>{const W=O(u,G);e.messages.unshift(W)}),e.lastLoadedMessage&&(e.previousLastLoadedMessage=e.lastLoadedMessage),e.lastLoadedMessage=B[B.length-1],E(u))})},E=u=>{const c=qd(u.roomId,e.lastLoadedMessage,e.previousLastLoadedMessage,y=>{y.forEach(B=>{const G=O(u,B),W=e.messages.findIndex(j=>j._id===B.id);W===-1?e.messages=e.messages.concat([G]):(e.messages[W]=G,e.messages=[...e.messages]),p(u,B)})});e.listeners.push(c)},p=(u,c)=>{c.sender_id!==h.value&&(!c.seen||!c.seen[h.value])&&Ln(u.roomId,c.id,{[`seen.${h.value}`]:new Date})},O=(u,c)=>{var B;const y={...c,senderId:c.sender_id,_id:c.id,seconds:c.timestamp.seconds,timestamp:ka(c.timestamp,"HH:mm"),date:ka(c.timestamp,"DD MMMM YYYY"),username:(B=u.users.find(G=>c.sender_id===G._id))==null?void 0:B.username,distributed:!0};return c.replyMessage&&(y.replyMessage={...c.replyMessage,senderId:c.replyMessage.sender_id}),y},M=async({content:u,roomId:c,files:y,replyMessage:B})=>{const G={sender_id:h.value,content:u,timestamp:new Date};y&&(G.files=F(y)),B&&(G.replyMessage={_id:B._id,content:B.content,sender_id:B.senderId},B.files&&(G.replyMessage.files=B.files));const{id:W}=await Zd(c,G);if(y)for(let j=0;j<y.length;j++)await V({file:y[j],messageId:W,roomId:c});kn(c,{lastUpdated:new Date})},A=async({messageId:u,newContent:c,roomId:y,files:B})=>{var W;const G={edited:new Date};if(G.content=c,B?G.files=F(B):G.files=Dd,await Ln(y,u,G),B)for(let j=0;j<B.length;j++)(W=B[j])!=null&&W.blob&&await V({file:B[j],messageId:u,roomId:y})},L=async({message:u,roomId:c})=>{await Ln(c,u._id,{deleted:new Date});const{files:y}=u;y&&y.forEach(B=>{rs(h.value,u._id,B)})},V=async({file:u,messageId:c,roomId:y})=>new Promise(B=>{let G=u.extension||u.type;(G==="svg"||G==="pdf")&&(G=u.type),lv(h.value,c,u,G,W=>{K(c,u.localUrl,W)},async W=>{const j=await Wd(y,c);j.files.forEach(re=>{re.url===u.localUrl&&(re.url=W)}),await Ln(y,c,{files:j.files}),B(!0)})}),K=(u,c,y)=>{const B=e.messages.find(G=>G._id===u);!B||!B.files||(B.files.find(G=>G.url===c).progress=y,e.messages=[...e.messages])},F=u=>{const c=[];return u.forEach(y=>{const B={name:y.name,size:y.size,type:y.type,extension:y.extension||y.type,url:y.url||y.localUrl};y.audio&&(B.audio=!0,B.duration=y.duration),c.push(B)}),c},k=({file:u})=>{window.open(u.file.url,"_blank")},l=async({user:u})=>{let c;if(e.rooms.forEach(j=>{if(j.users.length===2){const re=j.users[0]._id,ae=j.users[1]._id;(re===u._id||re===h.value)&&(ae===u._id||ae===h.value)&&(c=j.roomId)}}),c){e.roomId=c;return}const y=await es(h.value,u._id);if(y.data.length)return P(y);const B=await es(u._id,h.value);if(B.data.length)return P(B);const G=u._id===h.value?[h.value]:[u._id,h.value],W=await qo({users:G,lastUpdated:new Date});e.roomId=W.id,f()},P=async u=>{u.forEach(async c=>{e.loadingRooms||(await kn(c.id,{lastUpdated:new Date}),e.roomId=c.id,f())})},H=({action:u,roomId:c})=>{switch(u.name){case"inviteUser":return Y(c);case"removeUser":return D(c);case"deleteRoom":return q(c)}},Z=({action:u,messages:c,roomId:y})=>{switch(u.name){case"deleteMessages":c.forEach(B=>{L({message:B,roomId:y})})}},Q=async({reaction:u,remove:c,messageId:y,roomId:B})=>{rv(B,y,h.value,u.unicode,c?"remove":"add")},ee=({message:u,roomId:c})=>{if(c){if((u==null?void 0:u.length)>1){e.typingMessageCache=u;return}if((u==null?void 0:u.length)===1&&e.typingMessageCache){e.typingMessageCache=u;return}e.typingMessageCache=u,Xd(c,h.value,u?"add":"remove")}},te=async u=>{const c=Jd(u,y=>{y.forEach(B=>{const G=e.rooms.find(W=>W.roomId===B.id);G&&(G.typingUsers=B.typingUsers,G.index=B.lastUpdated.seconds)})});e.roomsListeners.push(c)},fe=u=>{u.forEach(c=>{c.users.forEach(y=>{const B=nv(Pa(y._id),G=>{if(!G||!G.val())return;const W=Ia(new Date(G.val().lastChanged),new Date(G.val().lastChanged));y.status={...G.val(),lastChanged:W};const j=e.rooms.findIndex(re=>c.roomId===re.roomId);e.rooms[j]=c,e.rooms=[...e.rooms]});e.roomsListeners.push(B)})})},de=()=>{U(),e.addNewRoom=!0},_=async()=>{e.disableForm=!0;const{id:u}=await Jo({username:e.addRoomUsername});await $o(u,{_id:u}),await qo({users:[u,h.value],lastUpdated:new Date}),e.addNewRoom=!1,e.addRoomUsername="",f()},Y=u=>{U(),e.inviteRoomId=u},b=async()=>{e.disableForm=!0;const{id:u}=await Jo({username:e.invitedUsername});await $o(u,{_id:u}),await Yd(e.inviteRoomId,u),e.inviteRoomId=null,e.invitedUsername="",f()},D=u=>{U(),e.removeRoomId=u,e.removeUsers=e.rooms.find(c=>c.roomId===u).users},X=async()=>{e.disableForm=!0,await Kd(e.removeRoomId,e.removeUserId),e.removeRoomId=null,e.removeUserId="",f()},q=async u=>{if(T.value!=="Adam")return alert("No peepee on your eyes");ts(u).then(({data:c})=>{c.forEach(y=>{Qd(u,y.id),y.files&&y.files.forEach(B=>{rs(h.value,y.id,B)})})}),await Gd(u),f()},U=()=>{e.disableForm=!1,e.addNewRoom=null,e.addRoomUsername="",e.inviteRoomId=null,e.invitedUsername="",e.removeRoomId=null,e.removeUserId=""},v=()=>e.showDemoOptions=!e.showDemoOptions;return(u,c)=>(Pr(),Nr("div",null,[e.addNewRoom?(Pr(),Nr("form",{key:0,onSubmit:na(_,["prevent"])},[ra(ur("input",{"onUpdate:modelValue":c[0]||(c[0]=y=>e.addRoomUsername=y),type:"text",placeholder:"Add username"},null,512),[[La,e.addRoomUsername]]),ur("button",{type:"submit",disabled:e.disableForm||!e.addRoomUsername}," Create Room ",8,hv),ur("button",{class:"button-cancel",onClick:c[1]||(c[1]=y=>e.addNewRoom=!1)}," Cancel ")],32)):gn("",!0),e.inviteRoomId?(Pr(),Nr("form",{key:1,onSubmit:na(b,["prevent"])},[ra(ur("input",{"onUpdate:modelValue":c[2]||(c[2]=y=>e.invitedUsername=y),type:"text",placeholder:"Add username"},null,512),[[La,e.invitedUsername]]),ur("button",{type:"submit",disabled:e.disableForm||!e.invitedUsername}," Add User ",8,pv),ur("button",{class:"button-cancel",onClick:c[3]||(c[3]=y=>e.inviteRoomId=null)}," Cancel ")],32)):gn("",!0),e.removeRoomId?(Pr(),Nr("form",{key:2,onSubmit:na(X,["prevent"])},[ra(ur("select",{"onUpdate:modelValue":c[4]||(c[4]=y=>e.removeUserId=y)},[gv,(Pr(!0),Nr(wa,null,Ba(e.removeUsers,y=>(Pr(),Nr("option",{key:y._id,value:y._id},Oa(y.username),9,yv))),128))],512),[[ds,e.removeUserId]]),ur("button",{type:"submit",disabled:e.disableForm||!e.removeUserId}," Remove User ",8,Sv),ur("button",{class:"button-cancel",onClick:c[5]||(c[5]=y=>e.removeRoomId=null)}," Cancel ")],32)):gn("",!0),ss(as(mv),{height:s.value,"current-user-id":h.value,rooms:n.value,"rooms-order":"desc","loading-rooms":e.loadingRooms,"rooms-loaded":e.roomsLoaded,"room-id":e.roomId,"load-first-room":!0,messages:e.messages,"room-message":null,"messages-loaded":e.messagesLoaded,"room-actions":e.roomActions,"menu-actions":e.menuActions,"message-selection-actions":e.messageSelectionActions,"templates-text":e.templatesText,"show-search":!0,"show-add-room":!1,"show-send-icon":!0,"show-files":!1,"show-audio":!1,"show-emojis":!1,"show-reaction-emojis":!1,"show-new-messages-divider":!0,"show-footer":!0,"room-info-enabled":!1,"textarea-action-enabled":!1,"accepted-files":"image/png, image/jpeg, application/pdf","user-tags-enabled":!1,"single-room":!0,"media-preview-enabled":!1,"emojis-suggestion-enabled":!1,theme:e.theme,styles:e.styles,onFetchMoreRooms:S,onFetchMessages:x,onSendMessage:M,onEditMessage:A,onDeleteMessage:L,onOpenFile:k,onOpenUserTag:l,onAddRoom:de,onRoomActionHandler:H,onMenuActionHandler:H,onMessageSelectionActionHandler:Z,onSendMessageReaction:Q,onTypingMessage:ee},null,8,["height","current-user-id","rooms","loading-rooms","rooms-loaded","room-id","messages","messages-loaded","room-actions","menu-actions","message-selection-actions","templates-text","theme","styles"]),ur("div",bv,[T.value=="Adam"?(Pr(),Nr("button",{key:0,onClick:v},Rv)):gn("",!0),ur("button",{class:"button-light",onClick:c[6]||(c[6]=y=>e.theme="light")},"Light"),ur("button",{class:"button-dark",onClick:c[7]||(c[7]=y=>e.theme="dark")},"Dark"),n.value[0]?(Pr(!0),Nr(wa,{key:1},Ba(n.value[0].users,y=>(Pr(),Nr("div",{class:os([{green:y.status&&y.status.state&&y.status.state=="online"},"nametag"]),key:y},Oa(y.username),3))),128)):gn("",!0)]),ur("audio",{ref_key:"unmaximize",ref:Ie,type:"audio/mpeg",src:"https://firebasestorage.googleapis.com/v0/b/stein-unlimited.appspot.com/o/sounds%2Funmaximize.mp3?alt=media&token=5f31afe5-3f06-4e5b-912a-6c6e02b5f156"},null,512),ur("audio",{ref_key:"notification",ref:cr,type:"audio/mpeg",src:"https://firebasestorage.googleapis.com/v0/b/stein-unlimited.appspot.com/o/sounds%2Fnotification.mp3?alt=media&token=2b383dc8-019b-4975-885c-8bcb58734bc3"},null,512)]))}});export{Qv as default};
